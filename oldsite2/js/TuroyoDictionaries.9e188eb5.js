"use strict";(self["webpackChunkaramaicsite"]=self["webpackChunkaramaicsite"]||[]).push([[959],{3061:function(e,t,s){s.d(t,{A:function(){return j}});var r=s(374),n=function(){var e=this,t=e._self._c;return t("div",[t(r.A,{staticClass:"searcher-wrapper"},[t("Searcher",{attrs:{"searcher-string":e.searcherString,"corpus-name":e.corpusName},on:{"searcher-string":e.onSearcherString}})],1),e.dicts.length>1?t("OptionsChooser",{attrs:{"options-prop":e.dicts,"chosen-options":e.chosenDictionaries,"has-all":""},on:{"chosen-options":e.onChosenDictionaries}}):e._e(),e._l(e.matchingDictLinesArr,(function(s){return t(r.A,{key:s.key},[t("h1",[e._v(e._s(s.title))]),s.lines.length?t("SearchResults",{attrs:{"lines-matching":s.lines,"searcher-string":e.searcherStringWrapper,"disable-infinite-scroll":!0}}):e._e()],1)}))],2)},i=[],o=(s(4114),s(9511)),a=s(9991),c=s(8301),l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"searcher d-flex align-center flex-column"},[t("div",{staticClass:"searchers d-flex"},[t("KeyboardIcon",{on:{click:function(t){e.isKeyboardOpen=!0}}}),t(c.A,{attrs:{rules:e.rules,autocomplete:"off",label:"Search string",color:"primary",outlined:"",dense:"",clearable:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.searcherInternal,callback:function(t){e.searcherInternal=t},expression:"searcherInternal"}}),t(o.A,{ref:"search_btn",attrs:{disabled:!e.searcherInternal,depressed:"",outlined:""},on:{click:e.search}},[e._v("Search")])],1),t(a.A,{attrs:{"hide-overlay":"",fullscreen:""},model:{value:e.isKeyboardOpen,callback:function(t){e.isKeyboardOpen=t},expression:"isKeyboardOpen"}},[t("Keyboard",{attrs:{visible:e.isKeyboardOpen,buttons:e.buttonsArray,value:e.searcherInternal,"input-name":"Search string"},on:{"update:visible":function(t){e.isKeyboardOpen=t},submit:e.onKeyboardSubmit}})],1)],1)},h=[],u=s(969),p=s(8882),d={name:"Searcher",props:["searcherString","corpusName"],components:{Keyboard:u.A,KeyboardIcon:p.A},data(){return{inputElement:null,searcherPrivate:"",rules:[e=>!!e||"Search string should not be empty"],isKeyboardOpen:!1}},computed:{buttonsArray(){return this.$store.getters.buttonsArrayByCorpus(this.corpusName)},searcherInternal:{set(e){e=_.isString(e)?e:"",this.searcherPrivate=e,e||this.search()},get(){return this.searcherPrivate}}},watch:{searcherString(e){this.searcherInternal=e}},async mounted(){await this.$nextTick(),this.inputElement=document.querySelector(".v-text-field input")},methods:{search(){this.$emit("searcher-string",this.searcherInternal)},onKeyboardSubmit(e){this.searcherInternal=e,this.search()}}},g=d,m=s(1656),f=(0,m.A)(g,l,h,!1,null,"606ade14",null),y=f.exports,S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-results"},[e.searcherString?t("div",{staticClass:"results-stats",staticStyle:{color:"brown","font-weight":"bold"}},[e._v(" Number of lines in output: "+e._s(e.linesMatching.length)+" ")]):e._e(),t("br"),e.linesMatching?t("InfiniteScroll",{staticClass:"search-results-box",attrs:{items:e.linesMatching,disable:e.linesMatching.length<500||e.disableInfiniteScroll},scopedSlots:e._u([{key:"default",fn:function({items:s}){return e._l(s,(function({line:s,title:r},n){return t("div",{key:n},[r?t("div",{staticStyle:{color:"blueviolet"}},[e._v(e._s(r))]):e._e(),t("GrepLine",{attrs:{str:s,searcher:e.searcherString}}),t("br")],1)}))}}],null,!1,3310479469)}):e._e()],1)},b=[],v=s(6909),A=s(9699),C={name:"SearchResults",props:["linesMatching","searcherString","disableInfiniteScroll"],components:{GrepLine:v.A,InfiniteScroll:A.A}},k=C,D=(0,m.A)(k,S,b,!1,null,"c4fff8fe",null),N=D.exports,x=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container d-flex justify-center"},[e._l(e.options,(function({title:s,key:r,isChosen:n}){return t(o.A,{key:r,attrs:{depressed:"",large:"",tile:"",text:!n,outlined:n},on:{click:function(t){return e.toggle(r)}}},[e._v(e._s(s))])})),e.hasAll?t(o.A,{attrs:{depressed:"",large:"",tile:"",text:!e.areAllChosen,outlined:e.areAllChosen},on:{click:e.toggleAll}},[e._v("All")]):e._e()],2)},K=[];function I({key:e,title:t,isChosen:s}){const r={key:e,title:t,isChosen:s},n={toggle:{value(){r.isChosen=!r.isChosen}},choose:{value(){r.isChosen=!0}},unchoose:{value(){r.isChosen=!1}}};return Object.defineProperties(r,n),r}function $(e){const t=e.map(I);function s(e){return t.find((t=>t.key===e))}const r={toggle:{value(e){s(e).toggle()}},chooseAll:{value(){t.forEach((e=>e.choose()))}},unchooseAll:{value(){t.forEach((e=>e.unchoose()))}},isChosen:{value(e){return s(e).isChosen}},toggleAll:{value(){t.areAllChosen?t.unchooseAll():t.chooseAll()}},chooseKeys:{value(e){t.unchooseAll(),t.forEach((t=>e.includes(t.key)?t.choose():t.unchoose()))}}},n={chosenKeys:{get(){return t.filter((({isChosen:e})=>e)).map((({key:e})=>e))}},areAllChosen:{get(){return t.every((e=>e.isChosen))}}};return Object.defineProperties(t,{...r,...n}),t}var O={name:"OptionsChooser",props:{optionsProp:{type:Array,default:()=>[]},hasAll:{type:Boolean},chosenOptions:{default:()=>[]}},data(){return{options:$(this.optionsProp)}},computed:{areAllChosen(){return this.options.areAllChosen}},methods:{toggle(e){this.options.toggle(e),this.emitValues()},toggleAll(){this.options.toggleAll(),this.emitValues()},emitValues(){this.$emit("chosen-options",this.options.chosenKeys)}},created(){this.options.chooseKeys(this.chosenOptions)}},q=O,w=(0,m.A)(q,x,K,!1,null,"11317324",null),E=w.exports,P=s(7257),B={name:"DictsSearch",components:{Searcher:y,SearchResults:N,OptionsChooser:E},props:["corpusName"],data(){return{searcherString:"",disableInfiniteScroll:!1,chosenDictionaries:[]}},computed:{dicts(){return this.$store.getters.dictsByCorpusNames(this.corpusName)},matchingDictLinesArr(){return this.$store.getters.matchingDictLinesArrByCorpus(this.corpusName).filter((({key:e})=>this.chosenDictionaries.includes(e)))},query(){const e=this.chosenDictionaries?{dicts:this.chosenDictionaries.join("_")}:{},t=this.searcherString?{search:this.searcherString}:{};return{...e,...t}},searcherStringWrapper(){return new P.D(this.searcherString)}},watch:{query:{deep:!0,handler(e){_.isEqual(e,this.$route.query)||this.$router.push({query:e})}}},methods:{onSearcherString(e){this.searcherString=e,this.$store.commit("setSearcherString",{corpusName:this.corpusName,searcherString:this.searcherStringWrapper})},onChosenDictionaries(e){this.chosenDictionaries=e}},created(){this.$store.dispatch("initializeDictData",{corpusName:this.corpusName}),this.$route.query.dicts?this.chosenDictionaries=this.$route.query.dicts.split("_"):this.chosenDictionaries=this.$store.getters.dictsByCorpusNames(this.corpusName).filter((({isChosen:e})=>e)).map((({key:e})=>e)),this.$store.commit("setSearcherString",{corpusName:this.corpusName,searcherString:this.searcherStringWrapper})},mounted(){this.$route.query.search&&this.onSearcherString(this.$route.query.search)}},L=B,M=(0,m.A)(L,n,i,!1,null,"4bd942db",null),j=M.exports},5510:function(e,t,s){s.r(t),s.d(t,{default:function(){return h}});var r=function(){var e=this,t=e._self._c;return t("DictsSearch",{attrs:{"corpus-name":e.corpusName}})},n=[],i=s(3061),o={name:"Dictionaries",components:{DictsSearch:i.A},computed:{corpusName(){return"turoyo"}}},a=o,c=s(1656),l=(0,c.A)(a,r,n,!1,null,null,null),h=l.exports}}]);