import{a3 as d,B as x,bV as Q,bW as _,aq as g,bX as p,e as k}from"./index-B3QmxiJN.js";const a=new WeakMap;function O(o,n,q={}){const{mode:f="replace",route:i=d(),router:t=x(),transform:l=s=>s}=q;a.has(t)||a.set(t,new Map);const u=a.get(t);let e=i.query[o];Q(()=>{e=void 0});let c;const h=_((s,y)=>(c=y,{get(){return s(),l(e!==void 0?e:p(n))},set(r){e!==r&&(e=r===n||r===null?void 0:r,u.set(o,r===n||r===null?void 0:r),y(),g(()=>{if(u.size===0)return;const m=Object.fromEntries(u.entries());u.clear();const{params:b,query:w,hash:R}=i;t[p(f)]({params:b,query:{...w,...m},hash:R})}))}}));return k(()=>i.query[o],s=>{e!==s&&(e=s,c())},{flush:"sync"}),h}export{O as u};
