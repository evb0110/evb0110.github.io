import{c as p,a as M,e as w,a9 as D,E,b as L,r as V,aI as N,aJ as P,aK as S,aL as I,o as y,f as m,k as g,F as x,p as A,l as h,m as K,n as W,g as T,i as F,h as $,V as q,aM as z,_ as G}from"./index-DkL77XV5.js";import{V as R}from"./VTextarea-Cj17H41b.js";import"./VInput-OTw4VSGI.js";import"./forwardRefs-DWGaNmQL.js";const J=["input","textarea"],U=c=>p(()=>{if(!(c!=null&&c.value))return null;const n=c.value.$el;return J.map(s=>n.querySelector(s)).find(Boolean)}),j=(c,n)=>{const s=U(c),t=M({start:0,end:0}),r=p(()=>s.value?n.value.slice(t.start-1,t.start):""),d=p(()=>/\S/.test(r.value));w(n,async()=>{const a=s.value;a&&(await D(),t.start=a.selectionStart||0,t.end=a.selectionEnd||0)},{immediate:!0});async function v(a,i=0){const u=s.value;u&&(n.value=n.value.slice(0,t.start-i)+a+n.value.slice(t.end),await D(),t.start+=a.length-i,t.end=t.start,u.setSelectionRange(t.start,t.end),u.focus())}function k(a){if(!d.value)return;const i=(r.value+a).normalize("NFC");v(i,1)}return{previousLetter:r,hasPreviousLetter:d,insertText:v,combineText:k}},b={Digit1:{name:"Grave Accent",unicode:"̀",keySymbol:"1"},Digit2:{name:"Acute Accent",unicode:"́",keySymbol:"2"},Digit3:{name:"Circumflex",unicode:"̂",keySymbol:"3"},Digit4:{name:"Tilde",unicode:"̃",keySymbol:"4"},Digit5:{name:"Dot Below",unicode:"̣",keySymbol:"5"},Digit6:{name:"Breve",unicode:"̆",keySymbol:"6"},Digit7:{name:"Dot Above",unicode:"̇",keySymbol:"7"},Digit8:{name:"Diaeresis",unicode:"̈",keySymbol:"8"},Digit9:{name:"Ring Above",unicode:"̊",keySymbol:"9"},KeyV:{name:"Caron",unicode:"̌",keySymbol:"v"},Minus:{name:"Macron",unicode:"̄",keySymbol:"-"},Equal:{name:"Macron Below",unicode:"̱",keySymbol:"="},Comma:{name:"Cedilla",unicode:"̧",keySymbol:","}},_=E.keys(b),f={KeyA:{name:"Glottal Stop",unicode:"ʔ",keySymbol:"a"},KeyW:{name:"Ayn",unicode:"ʕ",keySymbol:"w"}},C=E.keys(f),H={class:"info-panel"},O={key:1,class:"array"},Q={class:"symbol"},X=L({__name:"MagicKeyboard",setup(c){const n=V(null),s=V(""),{copy:t}=N({source:s}),{previousLetter:r,hasPreviousLetter:d,insertText:v,combineText:k}=j(n,s),a=P();S(n,()=>{var e;(e=n.value)==null||e.focus()}),I("keydown",e=>{[..._,...C].forEach(o=>{e.code===o&&e.altKey&&e.preventDefault()})}),_.forEach(e=>{const o=`alt_${e}`;S(a[o],()=>{k(b[e].unicode)})}),C.forEach(e=>{const o=`alt_${e}`;S(a[o],()=>{v(f[e].unicode)})});const i=p(()=>{if(!a.alt.value)return{text:"Press Alt to see the list of magic keys. Press any of them in combination with Alt to get the result",type:0};const e=d.value?_.map(l=>({symbol:b[l].keySymbol,text:r.value+b[l].unicode})):[],o=C.map(l=>({symbol:f[l].keySymbol,text:f[l].unicode}));return{value:[...e,...o],type:1}});function u(){t().then(()=>{z.success("Copied to clipboard")})}return(e,o)=>(y(),m(x,null,[g("div",H,[i.value.type===0?(y(),m(x,{key:0},[A(h(i.value.text),1)],64)):K("",!0),i.value.type===1?(y(),m("div",O,[(y(!0),m(x,null,W(i.value.value,({symbol:l,text:B})=>(y(),m("div",{key:e.key},[g("div",Q,h(l),1),g("div",null,h(B),1)]))),128))])):K("",!0)]),T(F(R),{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=l=>s.value=l),ref_key:"textarea",ref:n,placeholder:"Type something",rows:"10",clearable:"","hide-details":""},null,8,["modelValue"]),T(q,{variant:"outlined",class:"copy-button",size:"large",onClick:u},{default:$(()=>o[1]||(o[1]=[A(" Copy to clipboard ")])),_:1})],64))}}),ae=G(X,[["__scopeId","data-v-27f58f76"]]);export{ae as default};
