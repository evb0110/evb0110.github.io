import{c as h,b as z,bK as D,m as b,r as S,o as c,f as d,g as p,h as y,L as H,n as f,_ as L,bL as A,E as C,d as j,a as K,e as E,aX as F,A as J,j as O,V as R,F as x,k as $,p as V,D as T,i as U}from"./index-BepkzNmz.js";import{d as P,u as q,L as w,K as B,_ as G,c as Q}from"./GrepLine.vue_vue_type_style_index_0_lang-BsfjsK6D.js";import{C as I}from"./Color-l8zxla4Y.js";import{V as W}from"./VTooltip-DClhzArf.js";import{u as X}from"./index-CeA0TZqb.js";import{u as Y,A as k}from"./assetsStore-Ci7GK7_s.js";import{V as Z}from"./VTextField-iA6MFevk.js";import{V as ee}from"./VDialog-9n-vVay2.js";const te=()=>{const u=X("search",""),n=h(()=>new P(u.value));return{searcherString:u,searcher:n}},se=["fill"],ae=z({__name:"KeyboardIcon",props:{tooltip:{type:String,default:"Click to open a virtual keyboard"}},emits:["click"],setup(u,{emit:n}){D(v=>({"343572bc":b(a),"75de9347":b(i)}));const e=u,t=n,o=S(!0),m=h(()=>!e.tooltip||!o.value),{darkGrey:a,lightBrown:i}=I;return(v,s)=>(c(),d("span",{onClick:s[0]||(s[0]=r=>t("click"))},[p(W,{disabled:m.value,text:u.tooltip,location:"bottom","open-delay":"500"},{activator:y(({props:r})=>[(c(),d("svg",H(r,{fill:b(I).grey,class:"keyboard-icon-svg",height:"50px",viewBox:"0 0 24 24",width:"50px",xmlns:"http://www.w3.org/2000/svg"}),s[1]||(s[1]=[f("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"},null,-1)]),16,se))]),_:1},8,["disabled","text"])]))}}),re=L(ae,[["__scopeId","data-v-43d9ee52"]]),ne=A(function(n){return n?n.split(`======
`).map(o=>o.split(`
`)).map(o=>({title:C.head(o),lines:C.tail(o)})):[]}),oe=j("simpleCorpusStore",()=>{const u=Y(),n=K({}),e=K({}),t=q(),o=h(()=>{switch(t.value){case w.turoyo:return k.turoyoCorpusJson;case w.urmi:return k.urmiCorpusJson;case w.maalula:default:return k.maalulaDictsJson}}),m=h(()=>u[o.value].data),a=ne(m),{searcherString:i,searcher:v}=te(),s=h(()=>{const l=[];if(!a.value)return l;for(const g of a.value){const{title:M,lines:_}=g;for(const N of _)l.push({title:M,line:N})}return l}),r=h(()=>i.value?s.value.reduce((l,g)=>{const _=v.value.regex.test(g.line)?[g]:[];return[...l,..._]},[]):[]);return{corporaObj:n,searcherStringsObj:e,searcher:v,searcherString:i,matchingLines:r}}),le={class:"searcher align-center flex-column"},ie={class:"searchers d-flex"},ue={class:"input-wrapper"},ce=z({__name:"Searcher",setup(u){const n=oe(),e=S(""),t=S(!1),o=S(null),m=[s=>!!s||"Search string should not be empty"],a=h({get:()=>e.value,set:s=>{e.value=C.isString(s)?s:"",e.value||i()}}),i=()=>{n.searcherString=a.value},v=s=>{a.value=s,t.value&&i()};return E(()=>n.searcherString,s=>{e.value=s},{immediate:!0}),F(()=>{o.value=document.querySelector(".input-wrapper .v-text-field input")}),(s,r)=>(c(),d(x,null,[f("div",le,[f("div",ie,[p(re,{onClick:r[0]||(r[0]=l=>t.value=!0)}),f("div",ue,[p(Z,{modelValue:a.value,"onUpdate:modelValue":r[1]||(r[1]=l=>a.value=l),rules:m,autocomplete:"off",label:"Search string",color:"primary",variant:"outlined",density:"compact",clearable:"","hide-details":"",onKeyup:J(i,["enter"])},null,8,["modelValue"])]),p(R,{ref:"search_btn",disabled:!a.value,variant:"outlined",onClick:i},{default:y(()=>r[4]||(r[4]=[O(" Search ")])),_:1},8,["disabled"])]),p(B,{value:a.value,"input-el":o.value,type:"regex",visible:"",onSubmit:v},null,8,["value","input-el"])]),p(ee,{modelValue:t.value,"onUpdate:modelValue":r[3]||(r[3]=l=>t.value=l),"hide-overlay":"",fullscreen:""},{default:y(()=>[p(B,{visible:t.value,value:a.value,"input-name":"Search string",onSubmit:v,"onUpdate:visible":r[2]||(r[2]=l=>t.value=l)},null,8,["visible","value"])]),_:1},8,["modelValue"])],64))}}),Ve=L(ce,[["__scopeId","data-v-360f7d34"]]),pe={key:0,class:"results-stats"},de={key:0,style:{color:"blueviolet"}},me=z({__name:"SearchResults",props:{linesMatching:{},searcher:{},translationLanguage:{}},setup(u){const n=window;return(e,t)=>(c(),d(x,null,[e.searcher.value?(c(),d("div",pe," Number of lines in output: "+$(e.linesMatching.length),1)):V("",!0),t[1]||(t[1]=f("br",null,null,-1)),e.linesMatching?(c(),T(Q,{key:1,items:e.linesMatching,el:b(n),class:"search-results-box results"},{default:y(({items:o})=>[(c(!0),d(x,null,U(o,({line:m,title:a},i)=>(c(),d("div",{key:i,class:"lines"},[a?(c(),d("div",de,$(a),1)):V("",!0),p(G,{str:m,searcher:e.searcher,"translation-language":e.translationLanguage},null,8,["str","searcher","translation-language"]),t[0]||(t[0]=f("br",null,null,-1))]))),128))]),_:1},8,["items","el"])):V("",!0)],64))}}),we=L(me,[["__scopeId","data-v-3a2bada6"]]);export{Ve as S,we as a,oe as b,te as u};
