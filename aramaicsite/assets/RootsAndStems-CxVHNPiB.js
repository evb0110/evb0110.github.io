var q=Object.defineProperty;var Q=(t,e,a)=>e in t?q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var E=(t,e,a)=>Q(t,typeof e!="symbol"?e+"":e,a);import{E as P,d as W,r as A,G as F,c as S,b as j,o as n,f as l,F as v,n as y,l as g,_ as K,H as X,a as Y,I as Z,k as c,g as p,B as ee,h,V as O,i as $,j as te,m as se,p as I,J as D,D as ae}from"./index-YMC-YLMj.js";import{g as re}from"./getRegexFilterFn-CU_0py8y.js";import{C as N}from"./Color-l8zxla4Y.js";import{a as M}from"./axios-CCb-kr4I.js";import{a as G}from"./assets-BKx6_Z8h.js";import{_ as ne}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-C3yNOmFB.js";import{V as le}from"./VTextField-CznTxoFD.js";import{V as oe,a as ie}from"./VTabs-KWVNcWRi.js";import"./VInput-GbnNyoEZ.js";import"./forwardRefs-DWGaNmQL.js";import"./lazy-DeW-MONH.js";import"./VSlideGroup-Ci-Z-SHl.js";var C=(t=>(t.any="any",t.yes="yes",t.no="no",t))(C||{});const ce=["any","yes","no"],L={any:"",yes:N.green,no:N.tomato};class w{constructor(e){E(this,"number");E(this,"state","any");this.number=e}static instantiate(e){return new w(e)}get searcherString(){return`^${P.escapeRegExp(this.number)} `}get style(){return{backgroundColor:L[this.state],color:L[this.state]&&N.white}}getStyle(e){return this.state===e&&this.style}clearState(){this.state="any"}static get clearState(){return e=>e.clearState()}setOption(e){if(e===this.state){this.clearState();return}this.state=C[e]}}class B{constructor(e){this.stems=e}get positiveStemSearcherStrings(){return this.getStemSearcherStringsByState(C.yes)}get negativeStemSearcherStrings(){return this.getStemSearcherStringsByState(C.no)}clearAll(){this.stems.forEach(w.clearState)}setOption(e,a){var u;(u=this.stems[e])==null||u.setOption(a)}get positiveStemRegexes(){return this.positiveStemSearcherStrings.map(B.getRegex)}get negativeStemRegexes(){return this.negativeStemSearcherStrings.map(B.getRegex)}stemsByState(e){return P.filter(this.stems,{state:e})}getStemSearcherStringsByState(e){return this.stemsByState(e).map(a=>a.searcherString)}static get getRegex(){return e=>RegExp(e,"iums")}}const ue=W("maalulaVerbalStore",()=>{const t=A(0),e=F(async()=>(await M.get(G.maalulaVerbalRoots.link)).data),a=F(async()=>(await M.get(G.maalulaPerfects.link)).data),u=S(()=>[e.value,a.value][t.value]);return{maalulaVerbalRoots:e,maalulaPerfects:a,tab:t,tabData:u}}),me={class:"grep-multiline"},ge=j({__name:"GrepMultiline",props:{multiline:{type:String,default:""},colorSearcherString:{type:String,default:""}},setup(t){const e=S(()=>t.multiline.split(/\n+/)),a=S(()=>new RegExp(`(${t.colorSearcherString})`,"iu")),u=i=>t.colorSearcherString?i.split(a.value):[i],f=S(()=>e.value.map(u));return(i,m)=>(n(),l("div",me,[(n(!0),l(v,null,y(f.value,(o,_)=>(n(),l("div",{key:_,class:"stem"},[(n(!0),l(v,null,y(o,(k,R)=>(n(),l("span",{key:R,class:"part"},g(k),1))),128))]))),128))]))}}),Se=K(ge,[["__scopeId","data-v-ec7f7d79"]]),de={class:"external-wrapper"},pe={class:"searcher"},he={class:"searcher__internal"},ve={class:"external"},ye={class:"table"},fe=["onClick"],_e={class:"option-text"},be={class:"results"},xe={class:"results__internal"},ke={key:0,class:"stats"},Re=j({__name:"RootsAndStems",setup(t){const e=ue();X();const a=[{key:"roots",name:"Roots and Stems"},{key:"perfect",name:"Perfects"}],f=["I","II","III","IV","I(2)","II(2)","III(2)","IV(2)","I(7)","I(8)","I(10)"].map(w.instantiate),i=A(""),m=A(""),o=Y(new B(f)),{tab:_,tabData:k}=Z(e),R=S(()=>o.positiveStemSearcherStrings.length||o.negativeStemSearcherStrings.length||m.value),T=S(()=>{if(!R.value)return[];const x=m.value?[RegExp(m.value,"iums")]:[],s=[...o.positiveStemRegexes,...x],r=o.negativeStemRegexes;return k.value.filter(re(s,r))}),U=S(()=>[...o.positiveStemSearcherStrings,m.value].map(s=>`(?:${s})`).join("|"));function z(x,s){o.setOption(x,s),b()}function b(){m.value=i.value}function H(){i.value="",b()}function J(){m.value=i.value="",o.clearAll()}return(x,s)=>(n(),l("div",de,[c("div",pe,[c("div",he,[p(le,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=r=>i.value=r),label:"Search string",variant:"outlined",density:"compact",class:"searcher__text-field",clearable:"","onClick:clear":H,onKeyup:ee(b,["native","enter"])},null,8,["modelValue"]),p(O,{variant:"outlined",class:"searcher__search-button top-button",onClick:b},{default:h(()=>s[2]||(s[2]=[I(" Search ")])),_:1}),p(O,{variant:"outlined",class:"top-button",onClick:J},{default:h(()=>s[3]||(s[3]=[I(" Clear all ")])),_:1})])]),c("div",ve,[c("table",ye,[(n(!0),l(v,null,y(o.stems,(r,V)=>(n(),l("tr",{key:r.number},[c("td",{style:D(r.style),class:"stem"},g(r.number),5),(n(!0),l(v,null,y($(ce),d=>(n(),l("td",{key:d,style:D(r.getStyle(d)),class:"option",onClick:Ve=>z(V,d)},[c("div",_e,g(d),1)],12,fe))),128))]))),128))])]),p(oe,{modelValue:$(_),"onUpdate:modelValue":s[1]||(s[1]=r=>te(_)?_.value=r:null),"align-tabs":"center",class:"tabs",onChange:b},{default:h(()=>[(n(),l(v,null,y(a,r=>p(ie,{key:r.key,color:"blue"},{default:h(()=>[I(g(r.name),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),c("div",be,[c("div",xe,[R.value?(n(),l("div",ke,g(T.value.length)+" verbal roots of "+g($(k).length)+". ",1)):se("",!0),p(ne,{items:T.value},{default:h(({items:r})=>[(n(!0),l(v,null,y(r,(V,d)=>(n(),ae(Se,{key:d,multiline:V,"color-searcher-string":U.value},{default:h(()=>[I(g(V)+" ",1),s[4]||(s[4]=c("hr",null,null,-1))]),_:2},1032,["multiline","color-searcher-string"]))),128))]),_:1},8,["items"])])])]))}}),Ge=K(Re,[["__scopeId","data-v-56ee7884"]]);export{Ge as default};
