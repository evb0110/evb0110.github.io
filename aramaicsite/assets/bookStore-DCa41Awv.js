import{d as k,Y as N,y as f,bG as v,c4 as d,c as B}from"./index-DGANnDqU.js";import{I as m}from"./IDB-CUIdphEQ.js";var y={exports:{}},b={exports:{}};(function(){function r(e){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("toArabic expects a string");if(/^nulla$/i.test(e)||!e.length)return 0;if(e=e.toUpperCase().match(/^(M{0,3})(CM|DC{0,3}|CD|C{0,3})(XC|LX{0,3}|XL|X{0,3})(IX|VI{0,3}|IV|I{0,3})$/),!e)throw new Error("toArabic expects a valid roman number");var t=0;return t+=e[1].length*1e3,e[2]==="CM"?t+=900:e[2]==="CD"?t+=400:t+=e[2].length*100+(e[2][0]==="D"?400:0),e[3]==="XC"?t+=90:e[3]==="XL"?t+=40:t+=e[3].length*10+(e[3][0]==="L"?40:0),e[4]==="IX"?t+=9:e[4]==="IV"?t+=4:t+=e[4].length*1+(e[4][0]==="V"?4:0),t}b.exports=r})();var C=b.exports,g={exports:{}};(function(){function r(t,o,i,s){var n="";switch(t){case 0:return n;case 9:return o+s;case 4:return o+i}for(t>=5&&(n=i,t-=5);t-- >0;)n+=o;return n}function e(t){if(t instanceof Number&&(t=parseInt(t,10)),(typeof t=="string"||t instanceof String)&&(t=parseInt(t,10),isNaN(t)))throw new TypeError("toArabic expects a number");if(typeof t!="number")throw new TypeError("toArabic expects a number");if(isNaN(t))throw new TypeError("toArabic expects a real number");if(t<0)throw new Error("toArabic cannot express negative numbers");if(t>3999)throw new Error("toArabic cannot express numbers over 3999");if(t===0)return"nulla";var o="";return o+=r(Math.floor(t/1e3),"M","",""),t%=1e3,o+=r(Math.floor(t/100),"C","D","M"),t%=100,o+=r(Math.floor(t/10),"X","L","C"),t%=10,o+=r(t,"I","V","X"),o}g.exports=e})();var I=g.exports;(function(){y.exports={toArabic:C,toRoman:I}})();var A=y.exports;const l=18,x=-1;function S(r){if(!f.isNaN(Number(r))){let e=Number(r);return e>=1002&&(e-=1),e+l}try{const e=A.toArabic(r);return f.isNumber(e)?e+x:1}catch{return 1}}function E(r){if(r<=l)return A.toRoman(r-x);let e=r-l;return e>=1002&&(e+=1),String(e)}const w=[{title:"Das Neuwestaramäische. VI. Wörterbuch",shortTitle:"Arnold. NWA Wörterbuch",key:"arnold",author:"Werner Arnold",year:2019,linkBase:"https://evb0110.github.io/static/pdf/Arnold-Woerterbuch/pg_",pageCount:1035,getPageNumber:S,getPageString:E}];let a;const R=(async()=>{a=await m.get("bookStore","cache","uint")||new Map})(),D=k("bookStore",()=>{const r=N(async()=>{const o=w.map(v),s=await Promise.all(o);return w.map((n,h)=>{const c=s[h];return{...n,hash:c,to:{name:d.Book,params:{hash:c}}}})},[]),e=B(()=>f.keyBy(r.value,"hash"));async function t(o,i){await R;const s=JSON.stringify({hash:o,pageNumber:i});if(a.has(s)){const p=a.get(s);return p?p.slice(0):null}const n=e.value[o];if(!n)return null;const c=`${n.linkBase}${i.toString().padStart(4,"0")}.pdf`,u=await X(c);return u&&(a.set(s,u),m.set("bookStore","cache","uint",a),u.slice(0))}return{books:r,bookByHash:e,getUintPromise:t}});async function X(r){try{const e=await fetch(r);if(!e.ok)return null;const o=await(await e.blob()).arrayBuffer();return new Uint8Array(o)}catch{return null}}export{D as u};
