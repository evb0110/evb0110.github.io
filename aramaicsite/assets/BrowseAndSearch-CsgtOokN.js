var Tt=Object.defineProperty;var Ct=(e,t,a)=>t in e?Tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var M=(e,t,a)=>Ct(e,typeof t!="symbol"?t+"":t,a);import{b7 as _t,E as ce,d as At,c as g,b8 as It,r as I,m as j,b as ne,b9 as Pt,o as A,f as E,F as U,i as Se,D as ae,h as le,j as xe,k as Ve,V as Le,p as ie,v as Z,aR as ot,Y as ut,Z as rt,av as Et,x as Te,ba as Lt,q as de,P as it,T as Dt,ad as Bt,t as oe,s as be,g as d,L as $,S as ct,aK as Rt,aL as Nt,aa as Mt,aq as $t,ar as qt,bb as Ot,a0 as we,a2 as Ft,aO as Ht,W as Ke,X as Ut,aQ as zt,bc as Kt,am as ue,al as re,a6 as Gt,aJ as De,bd as jt,aS as Wt,as as Qt,a8 as Xt,at as Jt,ae as Yt,aW as Zt,be as Ge,ao as ke,ap as ea,ac as ta,Q as aa,ah as la,a1 as dt,U as K,b3 as na,a4 as $e,bf as je,bg as sa,e as W,ax as fe,bh as Ae,bi as oa,M as vt,$ as mt,bj as ua,bk as ft,bl as ra,w as Be,bm as ia,b2 as Ie,bn as ht,bo as ca,ak as da,bp as va,aX as he,a5 as ye,an as ma,bq as fa,br as ha,bs as pa,bt as We,bu as Qe,bv as ba,bw as Xe,bx as ga,by as ya,bz as pt,n as R,l as Re,_ as ve,A as ka,aD as xa,ag as qe,b1 as Va,bA as wa,bB as Sa,bC as bt,B as Ta,af as Ca,bD as _a,bE as Aa}from"./index-CltjYhnr.js";import{u as pe}from"./index-aidtR9gv.js";import{u as Ia,L as Je,D as Ye,K as Ze,a as Pa,b as me,_ as Ea,s as La,S as et}from"./GrepLine.vue_vue_type_style_index_0_lang-2qJSF9jw.js";import{u as Da,A as tt}from"./assetsStore-BvNToNSN.js";import{V as Ne,m as Ba}from"./VTextField-De9QCtiG.js";import{h as Ra}from"./VInput-DHNFAziZ.js";import{f as gt}from"./forwardRefs-DWGaNmQL.js";import{V as at,m as Na,a as lt,g as Ma}from"./VOverlay-DPTme5Cp.js";import{a as yt,V as $a}from"./VDialog-D-Lk4Rpj.js";import{V as qa}from"./VCheckboxBtn-DHgE4VD8.js";import{m as Oa,V as nt}from"./VSlideGroup-CgLp40lw.js";import{_ as Fa}from"./CopyResults-DdijRqeu.js";class Oe{constructor({volume:t,texts:a}){M(this,"volumeName");M(this,"texts");this.texts=a.map(u=>({volumeName:t,...u})).map(Fe.instantiate),this.volumeName=t}get totalContents(){return ce.flatMap(this.texts,"contents")}static instantiate(t){return new Oe(t)}}class Fe{constructor({volumeName:t,textNumber:a,textName:u,contents:l}){M(this,"volumeName");M(this,"textNumber");M(this,"_textName");M(this,"rawContents");this.volumeName=t,this.textNumber=a,this._textName=u,this.rawContents=l}get contents(){return this.rawContents.map(t=>({volumeName:this.volumeName,textNumber:this.textNumber,textName:this.textName,...t})).map(He.instantiate)}get textName(){return this._textName.replace(/\.txt/,"")}set textName(t){this._textName=t}static instantiate(t){return new Fe(t)}}class He{constructor({volumeName:t,textNumber:a,textName:u,lineNumber:l,textus:r,versio:v}){M(this,"volumeName");M(this,"textNumber");M(this,"textName");M(this,"lineNumber");M(this,"textus");M(this,"versio");this.volumeName=t,this.textNumber=a,this.textName=u,this.lineNumber=l,this.textus=r,this.versio=v}get title(){return this.volumeName+": "+this.textName}get hash(){return"h"+_t(this)}static instantiate(t){return new He(t)}}const Ha=At("corpusWithTranslationStore",()=>{const e=Da(),t=Ia(),a=g(()=>{switch(t.value){case Je.maalula:return tt.maalulaCorpusJson;case Je.turoyo:default:return tt.turoyoNewCorpusJson}}),u=g(()=>{var v;return(v=e[a.value])==null?void 0:v.data}),l=It(()=>{var v;return((v=u.value)==null?void 0:v.map(Oe.instantiate))||[]},[]),r=g(()=>ce.flatMap(l.value,"totalContents"));return{corpusArray:l,corpusLines:r}}),Ua=(e,t)=>{const a=I(e.indexOf(j(t))||0),u=g(()=>e[a.value]);function l(){a.value=(a.value+1)%e.length}return function(){return l(),u.value}},za={class:"d-flex ga-1"},Ka=ne({__name:"ModeSwitcher",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Pt(e,"modelValue"),a=Ua(Ye,t);function u(){t.value=a()}return(l,r)=>(A(),E("div",za,[(A(!0),E(U,null,Se(j(Ye),v=>(A(),ae(Le,{key:v,variant:v===t.value?"outlined":"text",class:"d-none d-sm-block",size:"small",onClick:i=>t.value=v},{default:le(()=>[xe(Ve(v)+" mode ",1)]),_:2},1032,["variant","onClick"]))),128)),t.value?(A(),ae(Le,{key:0,class:"d-sm-none",variant:"outlined",onClick:r[0]||(r[0]=v=>u())},{default:le(()=>[xe(Ve(t.value)+" mode ",1)]),_:1})):ie("",!0)]))}}),kt=Symbol.for("vuetify:v-chip-group"),Ga=Z({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Lt},...Oa(),...Te(),...Et({selectedClass:"v-chip--selected"}),...rt(),...ut(),...ot({variant:"tonal"})},"VChipGroup");de()({name:"VChipGroup",props:Ga(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const{themeClasses:u}=it(e),{isSelected:l,select:r,next:v,prev:i,selected:o}=Dt(e,kt);return Bt({VChip:{color:oe(e,"color"),disabled:oe(e,"disabled"),filter:oe(e,"filter"),variant:oe(e,"variant")}}),be(()=>{const c=nt.filterProps(e);return d(nt,$(c,{class:["v-chip-group",{"v-chip-group--column":e.column},u.value,e.class],style:e.style}),{default:()=>{var y;return[(y=a.default)==null?void 0:y.call(a,{isSelected:l,select:r,next:v,prev:i,selected:o.value})]}})}),{}}});const ja=Z({activeClass:String,appendAvatar:String,appendIcon:ke,closable:Boolean,closeIcon:{type:ke,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:ke,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:Ge(),onClickOnce:Ge(),...Zt(),...Te(),...Yt(),...Jt(),...Xt(),...Qt(),...Wt(),...jt(),...rt({tag:"span"}),...ut(),...ot({variant:"tonal"})},"VChip"),Wa=de()({name:"VChip",directives:{Ripple:ea},props:ja(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:a,emit:u,slots:l}=t;const{t:r}=ct(),{borderClasses:v}=Rt(e),{colorClasses:i,colorStyles:o,variantClasses:c}=Nt(e),{densityClasses:y}=Mt(e),{elevationClasses:x}=$t(e),{roundedClasses:m}=qt(e),{sizeClasses:b}=Ot(e),{themeClasses:k}=it(e),V=we(e,"modelValue"),n=Ft(e,kt,!1),f=Ht(e,a),p=g(()=>e.link!==!1&&f.isLink.value),w=g(()=>!e.disabled&&e.link!==!1&&(!!n||e.link||f.isClickable.value)),S=g(()=>({"aria-label":r(e.closeLabel),onClick(T){T.preventDefault(),T.stopPropagation(),V.value=!1,u("click:close",T)}}));function D(T){var z;u("click",T),w.value&&((z=f.navigate)==null||z.call(f,T),n==null||n.toggle())}function O(T){(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),D(T))}return()=>{const T=f.isLink.value?"a":e.tag,z=!!(e.appendIcon||e.appendAvatar),Q=!!(z||l.append),G=!!(l.close||e.closable),X=!!(l.filter||e.filter)&&n,ee=!!(e.prependIcon||e.prependAvatar),J=!!(ee||l.prepend),te=!n||n.isSelected.value;return V.value&&Ke(d(T,$({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":w.value,"v-chip--filter":X,"v-chip--pill":e.pill},k.value,v.value,te?i.value:void 0,y.value,x.value,m.value,b.value,c.value,n==null?void 0:n.selectedClass.value,e.class],style:[te?o.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:w.value?0:void 0,onClick:D,onKeydown:w.value&&!p.value&&O},f.linkProps),{default:()=>{var q;return[zt(w.value,"v-chip"),X&&d(Kt,{key:"filter"},{default:()=>[Ke(d("div",{class:"v-chip__filter"},[l.filter?d(re,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},l.filter):d(ue,{key:"filter-icon",icon:e.filterIcon},null)]),[[Gt,n.isSelected.value]])]}),J&&d("div",{key:"prepend",class:"v-chip__prepend"},[l.prepend?d(re,{key:"prepend-defaults",disabled:!ee,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},l.prepend):d(U,null,[e.prependIcon&&d(ue,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&d(De,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),d("div",{class:"v-chip__content","data-no-activator":""},[((q=l.default)==null?void 0:q.call(l,{isSelected:n==null?void 0:n.isSelected.value,selectedClass:n==null?void 0:n.selectedClass.value,select:n==null?void 0:n.select,toggle:n==null?void 0:n.toggle,value:n==null?void 0:n.value.value,disabled:e.disabled}))??e.text]),Q&&d("div",{key:"append",class:"v-chip__append"},[l.append?d(re,{key:"append-defaults",disabled:!z,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},l.append):d(U,null,[e.appendIcon&&d(ue,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&d(De,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),G&&d("button",$({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},S.value),[l.close?d(re,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},l.close):d(ue,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Ut("ripple"),w.value&&e.ripple,null]])}}}),Qa=Z({id:String,submenu:Boolean,...vt(Na({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:yt}}),["absolute"])},"VMenu"),Xa=de()({name:"VMenu",props:Qa(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const u=we(e,"modelValue"),{scopeId:l}=ta(),{isRtl:r}=aa(),v=la(),i=g(()=>e.id||`v-menu-${v}`),o=I(),c=dt(lt,null),y=K(new Set);mt(lt,{register(){y.value.add(v)},unregister(){y.value.delete(v)},closeParents(n){setTimeout(()=>{var f;!y.value.size&&!e.persistent&&(n==null||(f=o.value)!=null&&f.contentEl&&!ua(n,o.value.contentEl))&&(u.value=!1,c==null||c.closeParents())},40)}}),na(()=>{c==null||c.unregister(),document.removeEventListener("focusin",x)}),sa(()=>u.value=!1);async function x(n){var w,S,D;const f=n.relatedTarget,p=n.target;await $e(),u.value&&f!==p&&((w=o.value)!=null&&w.contentEl)&&((S=o.value)!=null&&S.globalTop)&&![document,o.value.contentEl].includes(p)&&!o.value.contentEl.contains(p)&&((D=je(o.value.contentEl)[0])==null||D.focus())}W(u,n=>{n?(c==null||c.register(),fe&&document.addEventListener("focusin",x,{once:!0})):(c==null||c.unregister(),fe&&document.removeEventListener("focusin",x))},{immediate:!0});function m(n){c==null||c.closeParents(n)}function b(n){var f,p,w,S,D;if(!e.disabled)if(n.key==="Tab"||n.key==="Enter"&&!e.closeOnContentClick){if(n.key==="Enter"&&(n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLInputElement&&n.target.closest("form")))return;n.key==="Enter"&&n.preventDefault(),oa(je((f=o.value)==null?void 0:f.contentEl,!1),n.shiftKey?"prev":"next",T=>T.tabIndex>=0)||(u.value=!1,(w=(p=o.value)==null?void 0:p.activatorEl)==null||w.focus())}else e.submenu&&n.key===(r.value?"ArrowRight":"ArrowLeft")&&(u.value=!1,(D=(S=o.value)==null?void 0:S.activatorEl)==null||D.focus())}function k(n){var p;if(e.disabled)return;const f=(p=o.value)==null?void 0:p.contentEl;f&&u.value?n.key==="ArrowDown"?(n.preventDefault(),n.stopImmediatePropagation(),Ae(f,"next")):n.key==="ArrowUp"?(n.preventDefault(),n.stopImmediatePropagation(),Ae(f,"prev")):e.submenu&&(n.key===(r.value?"ArrowRight":"ArrowLeft")?u.value=!1:n.key===(r.value?"ArrowLeft":"ArrowRight")&&(n.preventDefault(),Ae(f,"first"))):(e.submenu?n.key===(r.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(n.key))&&(u.value=!0,n.preventDefault(),setTimeout(()=>setTimeout(()=>k(n))))}const V=g(()=>$({"aria-haspopup":"menu","aria-expanded":String(u.value),"aria-owns":i.value,onKeydown:k},e.activatorProps));return be(()=>{const n=at.filterProps(e);return d(at,$({ref:o,id:i.value,class:["v-menu",e.class],style:e.style},n,{modelValue:u.value,"onUpdate:modelValue":f=>u.value=f,absolute:!0,activatorProps:V.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":m,onKeydown:b},l),{activator:a.activator,default:function(){for(var f=arguments.length,p=new Array(f),w=0;w<f;w++)p[w]=arguments[w];return d(re,{root:"VMenu"},{default:()=>{var S;return[(S=a.default)==null?void 0:S.call(a,...p)]}})}})}),gt({id:i,ΨopenChildren:y},o)}}),Ja=Z({renderless:Boolean,...Te()},"VVirtualScrollItem"),Ya=de()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Ja(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:a,emit:u,slots:l}=t;const{resizeRef:r,contentRect:v}=ft(void 0,"border");W(()=>{var i;return(i=v.value)==null?void 0:i.height},i=>{i!=null&&u("update:height",i)}),be(()=>{var i,o;return e.renderless?d(U,null,[(i=l.default)==null?void 0:i.call(l,{itemRef:r})]):d("div",$({ref:r,class:["v-virtual-scroll__item",e.class],style:e.style},a),[(o=l.default)==null?void 0:o.call(l)])})}}),Za=-1,el=1,Pe=100,tl=Z({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function al(e,t){const a=ra(),u=K(0);Be(()=>{u.value=parseFloat(e.itemHeight||0)});const l=K(0),r=K(Math.ceil((parseInt(e.height)||a.height.value)/(u.value||16))||1),v=K(0),i=K(0),o=I(),c=I();let y=0;const{resizeRef:x,contentRect:m}=ft();Be(()=>{x.value=o.value});const b=g(()=>{var s;return o.value===document.documentElement?a.height.value:((s=m.value)==null?void 0:s.height)||parseInt(e.height)||0}),k=g(()=>!!(o.value&&c.value&&b.value&&u.value));let V=Array.from({length:t.value.length}),n=Array.from({length:t.value.length});const f=K(0);let p=-1;function w(s){return V[s]||u.value}const S=ia(()=>{const s=performance.now();n[0]=0;const h=t.value.length;for(let _=1;_<=h-1;_++)n[_]=(n[_-1]||0)+w(_-1);f.value=Math.max(f.value,performance.now()-s)},f),D=W(k,s=>{s&&(D(),y=c.value.offsetTop,S.immediate(),q(),~p&&$e(()=>{fe&&window.requestAnimationFrame(()=>{ge(p),p=-1})}))});ht(()=>{S.clear()});function O(s,h){const _=V[s],P=u.value;u.value=P?Math.min(u.value,h):h,(_!==h||P!==u.value)&&(V[s]=h,S())}function T(s){return s=Ie(s,0,t.value.length-1),n[s]||0}function z(s){return ll(n,s)}let Q=0,G=0,X=0;W(b,(s,h)=>{h&&(q(),s<h&&requestAnimationFrame(()=>{G=0,q()}))});function ee(){if(!o.value||!c.value)return;const s=o.value.scrollTop,h=performance.now();h-X>500?(G=Math.sign(s-Q),y=c.value.offsetTop):G=s-Q,Q=s,X=h,q()}function J(){!o.value||!c.value||(G=0,X=0,q())}let te=-1;function q(){cancelAnimationFrame(te),te=requestAnimationFrame(Ce)}function Ce(){if(!o.value||!b.value)return;const s=Q-y,h=Math.sign(G),_=Math.max(0,s-Pe),P=Ie(z(_),0,t.value.length),F=s+b.value+Pe,C=Ie(z(F)+1,P+1,t.value.length);if((h!==Za||P<l.value)&&(h!==el||C>r.value)){const L=T(l.value)-T(P),B=T(C)-T(r.value);Math.max(L,B)>Pe?(l.value=P,r.value=C):(P<=0&&(l.value=P),C>=t.value.length&&(r.value=C))}v.value=T(l.value),i.value=T(t.value.length)-T(r.value)}function ge(s){const h=T(s);!o.value||s&&!h?p=s:o.value.scrollTop=h}const _e=g(()=>t.value.slice(l.value,r.value).map((s,h)=>({raw:s,index:h+l.value})));return W(t,()=>{V=Array.from({length:t.value.length}),n=Array.from({length:t.value.length}),S.immediate(),q()},{deep:!0}),{calculateVisibleItems:q,containerRef:o,markerRef:c,computedItems:_e,paddingTop:v,paddingBottom:i,scrollToIndex:ge,handleScroll:ee,handleScrollend:J,handleItemResize:O}}function ll(e,t){let a=e.length-1,u=0,l=0,r=null,v=-1;if(e[a]<t)return a;for(;u<=a;)if(l=u+a>>1,r=e[l],r>t)a=l-1;else if(r<t)v=l,u=l+1;else return r===t?l:u;return v}const nl=Z({items:{type:Array,default:()=>[]},renderless:Boolean,...tl(),...Te(),...ma()},"VVirtualScroll"),sl=de()({name:"VVirtualScroll",props:nl(),setup(e,t){let{slots:a}=t;const u=ca("VVirtualScroll"),{dimensionStyles:l}=da(e),{calculateVisibleItems:r,containerRef:v,markerRef:i,handleScroll:o,handleScrollend:c,handleItemResize:y,scrollToIndex:x,paddingTop:m,paddingBottom:b,computedItems:k}=al(e,oe(e,"items"));return va(()=>e.renderless,()=>{function V(){var p,w;const f=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[f]("scroll",o,{passive:!0}),document[f]("scrollend",c)):((p=v.value)==null||p[f]("scroll",o,{passive:!0}),(w=v.value)==null||w[f]("scrollend",c))}he(()=>{v.value=Ma(u.vnode.el,!0),V(!0)}),ht(V)}),be(()=>{const V=k.value.map(n=>d(Ya,{key:n.index,renderless:e.renderless,"onUpdate:height":f=>y(n.index,f)},{default:f=>{var p;return(p=a.default)==null?void 0:p.call(a,{item:n.raw,index:n.index,...f})}}));return e.renderless?d(U,null,[d("div",{ref:i,class:"v-virtual-scroll__spacer",style:{paddingTop:ye(m.value)}},null),V,d("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ye(b.value)}},null)]):d("div",{ref:v,class:["v-virtual-scroll",e.class],onScrollPassive:o,onScrollend:c,style:[l.value,e.style]},[d("div",{ref:i,class:"v-virtual-scroll__container",style:{paddingTop:ye(m.value),paddingBottom:ye(b.value)}},[V])])}),{calculateVisibleItems:r,scrollToIndex:x}}});function ol(e,t){const a=K(!1);let u;function l(i){cancelAnimationFrame(u),a.value=!0,u=requestAnimationFrame(()=>{u=requestAnimationFrame(()=>{a.value=!1})})}async function r(){await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>{if(a.value){const o=W(a,()=>{o(),i()})}else i()})}async function v(i){var y,x;if(i.key==="Tab"&&((y=t.value)==null||y.focus()),!["PageDown","PageUp","Home","End"].includes(i.key))return;const o=(x=e.value)==null?void 0:x.$el;if(!o)return;(i.key==="Home"||i.key==="End")&&o.scrollTo({top:i.key==="Home"?0:o.scrollHeight,behavior:"smooth"}),await r();const c=o.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(i.key==="PageDown"||i.key==="Home"){const m=o.getBoundingClientRect().top;for(const b of c)if(b.getBoundingClientRect().top>=m){b.focus();break}}else{const m=o.getBoundingClientRect().bottom;for(const b of[...c].reverse())if(b.getBoundingClientRect().bottom<=m){b.focus();break}}}return{onScrollPassive:l,onKeydown:v}}const ul=Z({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ke,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...ya({itemChildren:!1})},"Select"),rl=Z({...ul(),...vt(Ba({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ga({transition:{component:yt}})},"VSelect"),st=de()({name:"VSelect",props:rl(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:a}=t;const{t:u}=ct(),l=I(),r=I(),v=I(),i=we(e,"menu"),o=g({get:()=>i.value,set:s=>{var h;i.value&&!s&&((h=r.value)!=null&&h.ΨopenChildren.size)||(i.value=s)}}),{items:c,transformIn:y,transformOut:x}=fa(e),m=we(e,"modelValue",[],s=>y(s===null?[null]:ha(s)),s=>{const h=x(s);return e.multiple?h:h[0]??null}),b=g(()=>typeof e.counterValue=="function"?e.counterValue(m.value):typeof e.counterValue=="number"?e.counterValue:m.value.length),k=Ra(),V=g(()=>m.value.map(s=>s.value)),n=K(!1),f=g(()=>o.value?e.closeText:e.openText);let p="",w;const S=g(()=>e.hideSelected?c.value.filter(s=>!m.value.some(h=>e.valueComparator(h,s))):c.value),D=g(()=>e.hideNoData&&!S.value.length||e.readonly||(k==null?void 0:k.isReadonly.value)),O=g(()=>{var s;return{...e.menuProps,activatorProps:{...((s=e.menuProps)==null?void 0:s.activatorProps)||{},"aria-haspopup":"listbox"}}}),T=I(),z=ol(T,l);function Q(s){e.openOnClear&&(o.value=!0)}function G(){D.value||(o.value=!o.value)}function X(s){We(s)&&ee(s)}function ee(s){var F,C;if(!s.key||e.readonly||k!=null&&k.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(s.key)&&s.preventDefault(),["Enter","ArrowDown"," "].includes(s.key)&&(o.value=!0),["Escape","Tab"].includes(s.key)&&(o.value=!1),s.key==="Home"?(F=T.value)==null||F.focus("first"):s.key==="End"&&((C=T.value)==null||C.focus("last"));const h=1e3;if(e.multiple||!We(s))return;const _=performance.now();_-w>h&&(p=""),p+=s.key.toLowerCase(),w=_;const P=c.value.find(L=>L.title.toLowerCase().startsWith(p));if(P!==void 0){m.value=[P];const L=S.value.indexOf(P);fe&&window.requestAnimationFrame(()=>{var B;L>=0&&((B=v.value)==null||B.scrollToIndex(L))})}}function J(s){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!s.props.disabled)if(e.multiple){const _=m.value.findIndex(F=>e.valueComparator(F.value,s.value)),P=h??!~_;if(~_){const F=P?[...m.value,s]:[...m.value];F.splice(_,1),m.value=F}else P&&(m.value=[...m.value,s])}else{const _=h!==!1;m.value=_?[s]:[],$e(()=>{o.value=!1})}}function te(s){var h;(h=T.value)!=null&&h.$el.contains(s.relatedTarget)||(o.value=!1)}function q(){var s;e.eager&&((s=v.value)==null||s.calculateVisibleItems())}function Ce(){var s;n.value&&((s=l.value)==null||s.focus())}function ge(s){n.value=!0}function _e(s){if(s==null)m.value=[];else if(Xe(l.value,":autofill")||Xe(l.value,":-webkit-autofill")){const h=c.value.find(_=>_.title===s);h&&J(h)}else l.value&&(l.value.value="")}return W(o,()=>{if(!e.hideSelected&&o.value&&m.value.length){const s=S.value.findIndex(h=>m.value.some(_=>e.valueComparator(_.value,h.value)));fe&&window.requestAnimationFrame(()=>{var h;s>=0&&((h=v.value)==null||h.scrollToIndex(s))})}}),W(()=>e.items,(s,h)=>{o.value||n.value&&!h.length&&s.length&&(o.value=!0)}),be(()=>{const s=!!(e.chips||a.chip),h=!!(!e.hideNoData||S.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),_=m.value.length>0,P=Ne.filterProps(e),F=_||!n.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return d(Ne,$({ref:l},P,{modelValue:m.value.map(C=>C.props.value).join(", "),"onUpdate:modelValue":_e,focused:n.value,"onUpdate:focused":C=>n.value=C,validationValue:m.externalValue,counterValue:b.value,dirty:_,class:["v-select",{"v-select--active-menu":o.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":m.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,inputmode:"none",placeholder:F,"onClick:clear":Q,"onMousedown:control":G,onBlur:te,onKeydown:ee,"aria-label":u(f.value),title:u(f.value)}),{...a,default:()=>d(U,null,[d(Xa,$({ref:r,modelValue:o.value,"onUpdate:modelValue":C=>o.value=C,activator:"parent",contentClass:"v-select__content",disabled:D.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:q,onAfterLeave:Ce},O.value),{default:()=>[h&&d(pa,$({ref:T,selected:V.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:C=>C.preventDefault(),onKeydown:X,onFocusin:ge,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},z,e.listProps),{default:()=>{var C,L,B;return[(C=a["prepend-item"])==null?void 0:C.call(a),!S.value.length&&!e.hideNoData&&(((L=a["no-data"])==null?void 0:L.call(a))??d(Qe,{title:u(e.noDataText)},null)),d(sl,{ref:v,renderless:!0,items:S.value},{default:Y=>{var ze;let{item:H,index:se,itemRef:N}=Y;const Ue=$(H.props,{ref:N,key:se,onClick:()=>J(H,null)});return((ze=a.item)==null?void 0:ze.call(a,{item:H,index:se,props:Ue}))??d(Qe,$(Ue,{role:"option"}),{prepend:wt=>{let{isSelected:St}=wt;return d(U,null,[e.multiple&&!e.hideSelected?d(qa,{key:H.value,modelValue:St,ripple:!1,tabindex:"-1"},null):void 0,H.props.prependAvatar&&d(De,{image:H.props.prependAvatar},null),H.props.prependIcon&&d(ue,{icon:H.props.prependIcon},null)])}})}}),(B=a["append-item"])==null?void 0:B.call(a)]}})]}),m.value.map((C,L)=>{function B(N){N.stopPropagation(),N.preventDefault(),J(C,!1)}const Y={"onClick:close":B,onKeydown(N){N.key!=="Enter"&&N.key!==" "||(N.preventDefault(),N.stopPropagation(),B(N))},onMousedown(N){N.preventDefault(),N.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},H=s?!!a.chip:!!a.selection,se=H?ba(s?a.chip({item:C,index:L,props:Y}):a.selection({item:C,index:L})):void 0;if(!(H&&!se))return d("div",{key:C.value,class:"v-select__selection"},[s?a.chip?d(re,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:C.title}}},{default:()=>[se]}):d(Wa,$({key:"chip",closable:e.closableChips,size:"small",text:C.title,disabled:C.props.disabled},Y),null):se??d("span",{class:"v-select__selection-text"},[C.title,e.multiple&&L<m.value.length-1&&d("span",{class:"v-select__selection-comma"},[xe(",")])])])})]),"append-inner":function(){var Y;for(var C=arguments.length,L=new Array(C),B=0;B<C;B++)L[B]=arguments[B];return d(U,null,[(Y=a["append-inner"])==null?void 0:Y.call(a,...L),e.menuIcon?d(ue,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),gt({isFocused:n,menu:o,select:J},l)}}),il={class:"browse-selects"},cl={class:"selects mt-5 mb-8"},dl={class:"no-data-placeholder mr-5"},vl=ne({__name:"Browse",props:{corpusArr:{default:()=>[]},volumeLabel:{default:"Volume"},textLabel:{default:"Text"}},emits:["chosen"],setup(e,{emit:t}){const a={get chosen(){return{volume:"",text:""}}},u=t,l=pe("volume"),r=pe("text");l.value&&y(),r.value&&c(),he(c),pt(()=>{l.value=null,r.value=null});const v=g(()=>{if(l.value)return e.corpusArr.find(({volumeName:x})=>x===l.value)}),i=g(()=>v.value?v.value.texts:[]);function o(x,m){m==="volume"?(r.value=null,y()):c()}function c(){u("chosen",{volume:l.value,text:r.value})}function y(){u("chosen",a.chosen)}return(x,m)=>(A(),E("div",il,[R("div",cl,[d(st,{modelValue:j(l),"onUpdate:modelValue":[m[0]||(m[0]=b=>Re(l)?l.value=b:null),m[1]||(m[1]=b=>o(b,"volume"))],items:x.corpusArr,label:x.volumeLabel,"item-title":"volumeName","item-value":"volumeName",variant:"outlined",density:"compact"},null,8,["modelValue","items","label"]),d(st,{modelValue:j(r),"onUpdate:modelValue":[m[2]||(m[2]=b=>Re(r)?r.value=b:null),m[3]||(m[3]=b=>o(b,"text"))],items:i.value,label:x.textLabel,"item-title":"textName","item-value":"textNumber",variant:"outlined",density:"compact"},{"no-data":le(()=>[m[4]||(m[4]=R("span",{class:"no-data-arrow"},"⬅",-1)),R("span",dl,Ve(`A ${x.volumeLabel} should be chosen`),1)]),_:1},8,["modelValue","items","label"])])]))}}),ml=ve(vl,[["__scopeId","data-v-0b260389"]]),fl={},hl={height:"3em",viewBox:"0 0 24 24",width:"3em",xmlns:"http://www.w3.org/2000/svg"};function pl(e,t){return A(),E("svg",hl,t[0]||(t[0]=[R("path",{d:"M3 20q-.825 0-1.412-.587T1 18V6q0-.825.588-1.412T3 4h18q.825 0 1.413.588T23 6v12q0 .825-.587 1.413T21 20zm0-2h18V6H3zm6-1h6q.425 0 .713-.288T16 16t-.288-.712T15 15H9q-.425 0-.712.288T8 16t.288.713T9 17m-6 1V6zm3-8q.425 0 .713-.288T7 9t-.288-.712T6 8t-.712.288T5 9t.288.713T6 10m4 0q.425 0 .713-.288T11 9t-.288-.712T10 8t-.712.288T9 9t.288.713T10 10m4 0q.425 0 .713-.288T15 9t-.288-.712T14 8t-.712.288T13 9t.288.713T14 10m4 0q.425 0 .713-.288T19 9t-.288-.712T18 8t-.712.288T17 9t.288.713T18 10M6 13.5q.425 0 .713-.288T7 12.5t-.288-.712T6 11.5t-.712.288T5 12.5t.288.713T6 13.5m4 0q.425 0 .713-.288T11 12.5t-.288-.712T10 11.5t-.712.288T9 12.5t.288.713t.712.287m4 0q.425 0 .713-.288T15 12.5t-.288-.712T14 11.5t-.712.288T13 12.5t.288.713t.712.287m4 0q.425 0 .713-.288T19 12.5t-.288-.712T18 11.5t-.712.288T17 12.5t.288.713t.712.287",fill:"lightGrey"},null,-1)]))}const bl=ve(fl,[["render",pl],["__scopeId","data-v-c2634224"]]),gl={class:"d-flex align-center flex-column"},yl={class:"searchers"},kl={class:"d-flex ga-3"},xl={class:"d-flex flex-column flex-md-row ga-2"},Vl=ne({__name:"Search",props:{textusLabel:{default:"Search corpus"},versioLabel:{default:"Search translation"}},emits:["searchers","copy-to-clipboard"],setup(e,{emit:t}){const a=e,u={get searchers(){return{textus:null,versio:null}}},l=t,r=I(u.searchers),v=I(u.searchers),i=I(!1),o=I(null),c=pe("textus"),y=pe("versio");r.value.textus=c.value,r.value.versio=y.value;const x=g(()=>!r.value.textus&&!r.value.versio),m=g(()=>[{name:"textus",value:r.value.textus,label:a.textusLabel},{name:"versio",value:r.value.versio,label:a.versioLabel}]);he(V);function b(f,p){r.value[p]=f||"",f||V()}function k(f){r.value.textus=f,i.value&&V()}function V(){v.value=ce.cloneDeep(r.value),l("searchers",ce.cloneDeep(v.value)),n()}function n(){c.value=v.value.textus||null,y.value=v.value.versio||null}return he(()=>{r.value.textus=c.value,r.value.versio=y.value,(r.value.textus||r.value.versio)&&V(),o.value=document.querySelector(".searchers .v-text-field.input_textus input")}),pt(()=>{c.value=null,y.value=null}),(f,p)=>{const w=bl;return A(),E("div",gl,[R("div",yl,[R("div",null,[R("div",kl,[d(w,{class:"keyboard-icon",onClick:p[0]||(p[0]=S=>i.value=!0)}),d(Le,{disabled:x.value,variant:"outlined",class:"search-btn",onClick:V},{default:le(()=>p[3]||(p[3]=[xe(" Search ")])),_:1},8,["disabled"])]),d(Ze,{value:m.value[0].value,"input-el":o.value,type:"regex",visible:"",onSubmit:k},null,8,["value","input-el"])]),R("div",xl,[(A(!0),E(U,null,Se(m.value,({value:S,label:D,name:O})=>(A(),ae(Ne,{key:O,"model-value":S,label:D,class:qe(`input_${O}`),style:{"min-width":"200px"},variant:"outlined",density:"compact","hide-details":"",clearable:"","onUpdate:modelValue":T=>b(T,O),onKeydown:ka(xa(V,["prevent"]),["enter"])},null,8,["model-value","label","class","onUpdate:modelValue","onKeydown"]))),128))])]),d($a,{modelValue:i.value,"onUpdate:modelValue":p[2]||(p[2]=S=>i.value=S),"hide-overlay":"",fullscreen:""},{default:le(()=>[d(Ze,{visible:i.value,value:r.value.textus,"input-name":e.textusLabel,"onUpdate:visible":p[1]||(p[1]=S=>i.value=S),onSubmit:k},null,8,["visible","value","input-name"])]),_:1},8,["modelValue"])])}}}),wl=ve(Vl,[["__scopeId","data-v-ad131bff"]]),Sl=Symbol("isEager"),xt={isEager:Sl},Tl=ne({__name:"InfiniteScroll",props:{el:{default:null},items:{},chunkSize:{default:10}},setup(e){const t=dt(xt.isEager,I(!1)),a=K([]);Va(t,()=>{a.value=e.items});const u=I(null),l=I(0),r=I(null);Be(()=>{l.value=e.chunkSize,r.value=e.el||u.value});const v=g(()=>e.items.slice(0,l.value)),i=g(()=>t.value?a.value:v.value);return wa(r,()=>{l.value+=e.chunkSize},{distance:50,canLoadMore:()=>!t.value&&l.value<e.items.length}),(o,c)=>(A(),E("div",{ref_key:"internalEl",ref:u},[Sa(o.$slots,"default",{items:i.value})],512))}}),Vt=300;function Ee({hash:e="",keepLocation:t=!1,className:a="chosen"}){return new Promise(u=>{setTimeout(()=>{t||(location.hash=e,setTimeout(()=>scrollBy(0,-200),0));const l=document.querySelector(e);l&&(l.classList.add(a),setTimeout(u,1))},Vt)})}function Cl(e){const t=document.querySelector(e);t&&Me(t)}function Me(e,t="chosen"){e&&setTimeout(()=>{e.classList.remove(t)},Vt)}const _l=["id"],Al={class:"controls-wrapper"},Il={class:"lines"},Pl=ne({__name:"LineCard",props:{line:{},searchers:{}},setup(e){const t=e,a=I(),u=bt(),l=Ta(),r=g(()=>Pa.map(b=>({lineName:b,str:t.line[b],searcher:t.searchers.data[b]}))),v=g(()=>!t.searchers.areAllEmpty),i=g(()=>u.hash),o=g(()=>"#"+t.line.hash),c=g(()=>{var V;const b=((V=t.line)==null?void 0:V.volumeName.toLowerCase())||"";return b.includes("abou")?"":["jastrow","ritter","arnold","lehrbuch","luf","prym","hors","talay","baxa","ubbadin","maalula","lieder","britta"].some(n=>b.includes(n))?"German":""});function y(){Me(a.value,"chosen")}W(i,(b,k)=>{!b&&k&&y()});async function x(){if(!v.value)return;const{volumeName:b,textNumber:k}=t.line;await l.push({query:{mode:me.browse,volume:b,text:k}}),await Ee({hash:o.value})}function m(){if(!u.hash){Ee({hash:o.value});return}Cl(u.hash),u.hash===o.value?l.replace({query:u.query,hash:""}):(Ee({hash:o.value,keepLocation:!0}),l.replace({query:u.query,hash:o.value}));const b=Array.from(document.querySelectorAll('div.line-card[id^="h"]'));for(const k of b)k.style.background&&k.id!==t.line.hash&&Me(k)}return(b,k)=>b.line?(A(),E("div",{key:0,class:"line-card",id:b.line.hash,ref_key:"lineCardRef",ref:a},[R("div",Al,[v.value?(A(),E("div",{key:1,class:"control-sign",onClick:k[1]||(k[1]=V=>x())},"▤")):(A(),E("div",{key:0,class:"control-sign",onClick:k[0]||(k[0]=V=>m())},"#"))]),R("div",Il,[(A(!0),E(U,null,Se(r.value,(V,n)=>(A(),ae(Ea,$({ref_for:!0},V,{key:n,"translation-language":V.lineName==="versio"&&c.value,class:"mb-1"}),null,16,["translation-language"]))),128)),k[2]||(k[2]=R("div",null,[R("br")],-1))])],8,_l)):ie("",!0)}}),El=ve(Pl,[["__scopeId","data-v-9341a2ff"]]),Ll={class:"results w-100"},Dl={key:1},Bl=ne({__name:"Results",props:{results:{},searchers:{}},setup(e){const t=window,a=I(),u=bt(),l=Ca(),r=oe(l,"isDark"),v=g(()=>!e.searchers.areAllEmpty);return he(async()=>{var o;const i=u.hash;i&&(await La(1e3),(o=document.querySelector(i))==null||o.scrollIntoView({behavior:"smooth",block:"center"}))}),(i,o)=>{const c=Tl;return A(),E("div",Ll,[v.value?(A(),E("div",{key:0,ref_key:"stats",ref:a,class:qe(["results-stats mb-1",{invert:r.value}])},[R("div",null,"Found "+Ve(i.results.length)+" contexts",1)],2)):ie("",!0),o[0]||(o[0]=R("br",null,null,-1)),i.results?(A(),E("div",Dl,[d(c,{items:i.results,el:j(t)},{default:le(({items:y})=>[(A(!0),E(U,null,Se(y,x=>(A(),E("div",null,[x?(A(),ae(El,{line:x,searchers:i.searchers,key:x.hash},null,8,["line","searchers"])):ie("",!0)]))),256))]),_:1},8,["items","el"])])):ie("",!0)])}}}),Rl=ve(Bl,[["__scopeId","data-v-27ceb1d6"]]),Nl={key:0,class:"searcher-wrapper"},Ml=ne({__name:"BrowseAndSearch",setup(e){const t=Ha(),a=_a(),u=g(()=>!!a.text.value),l=g(()=>c.value===me.search),r=g(()=>c.value===me.browse),v=g(()=>l.value?y.value:o.searchers),i=I(!1);mt(xt.isEager,i);const o={get searchers(){return new et({textus:"",versio:""})}},c=pe("mode");c.value||(c.value=me.search);const y=I(o.searchers),x=I({volume:null,text:null}),m=g(()=>{if(!x.value.text||!t.corpusArray.length)return[];const p=ce.find(t.corpusArray,{volumeName:x.value.volume});return ce.find(p.texts,{textNumber:x.value.text}).contents}),b=g(()=>t.corpusLines),k=g(()=>y.value.areAllEmpty?[]:b.value.filter(y.value.test)),V=g(()=>c.value===me.browse?m.value:k.value);function n(p){y.value=new et(p)}function f(p){x.value=p}return(p,w)=>(A(),E("div",{class:qe([{"no-hashes":u.value},"browse-and-search"]),ref:"wrapper"},[l.value?(A(),E("div",Nl,[d(Fa,{count:V.value.length,class:"mr-5",onClick:w[0]||(w[0]=S=>i.value=!0)},null,8,["count"]),d(wl,{"corpus-arr-prop":j(t).corpusArray,"textus-label":"Aramaic text","versio-label":"Translation text",onSearchers:n},null,8,["corpus-arr-prop"])])):r.value?(A(),ae(ml,{key:1,"corpus-arr":j(t).corpusArray,onChosen:f},null,8,["corpus-arr"])):ie("",!0),d(Rl,{results:V.value,searchers:v.value},null,8,["results","searchers"]),(A(),ae(j(Aa),{to:"#app-bar-slot",key:p.isVisible},{default:le(()=>[d(Ka,{modelValue:j(c),"onUpdate:modelValue":w[1]||(w[1]=S=>Re(c)?c.value=S:null),class:"mr-5 button-switcher"},null,8,["modelValue"])]),_:1}))],2))}}),Jl=ve(Ml,[["__scopeId","data-v-7821235f"]]);export{Jl as B};
