var q=Object.defineProperty;var J=(t,e,r)=>e in t?q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var E=(t,e,r)=>J(t,typeof e!="symbol"?e+"":e,r);import{E as L,r as N,c as S,b as P,o as n,f as l,F as v,n as f,l as g,_ as j,a as Q,G as W,k as c,g as d,B as X,h as p,V as O,i as $,j as Y,m as Z,p as V,H as T,D as ee}from"./index-BQse0XbG.js";import{g as te}from"./getRegexFilterFn-CU_0py8y.js";import{C as A,u as D}from"./useGetResource-D6hU2FnT.js";import{a as G}from"./assets-C9ESoKS9.js";import{_ as se}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-Ah3LBtsh.js";import{V as ae}from"./VTextField-i3ufHYQf.js";import{V as re,a as ne}from"./VTabs-DShDBg_e.js";import"./axios-CCb-kr4I.js";import"./VInput-DZGtinyn.js";import"./forwardRefs-DWGaNmQL.js";import"./lazy-CkO0uQKi.js";import"./VSlideGroup-CnsH3Ggq.js";var I=(t=>(t.any="any",t.yes="yes",t.no="no",t))(I||{});const le=["any","yes","no"],M={any:"",yes:A.green,no:A.tomato};class B{constructor(e){E(this,"number");E(this,"state","any");this.number=e}static instantiate(e){return new B(e)}get searcherString(){return`^${L.escapeRegExp(this.number)} `}get style(){return{backgroundColor:M[this.state],color:M[this.state]&&A.white}}getStyle(e){return this.state===e&&this.style}clearState(){this.state="any"}static get clearState(){return e=>e.clearState()}setOption(e){if(e===this.state){this.clearState();return}this.state=I[e]}}class C{constructor(e){this.stems=e}get positiveStemSearcherStrings(){return this.getStemSearcherStringsByState(I.yes)}get negativeStemSearcherStrings(){return this.getStemSearcherStringsByState(I.no)}clearAll(){this.stems.forEach(B.clearState)}setOption(e,r){var u;(u=this.stems[e])==null||u.setOption(r)}get positiveStemRegexes(){return this.positiveStemSearcherStrings.map(C.getRegex)}get negativeStemRegexes(){return this.negativeStemSearcherStrings.map(C.getRegex)}stemsByState(e){return L.filter(this.stems,{state:e})}getStemSearcherStringsByState(e){return this.stemsByState(e).map(r=>r.searcherString)}static get getRegex(){return e=>RegExp(e,"iums")}}const oe=()=>{const t=N(0),e=D(G.maalulaVerbalRoots.link,[]),r=D(G.maalulaPerfects.link,[]),u=S(()=>[e.value,r.value][t.value]);return{tab:t,tabData:u}},ie={class:"grep-multiline"},ce=P({__name:"GrepMultiline",props:{multiline:{type:String,default:""},colorSearcherString:{type:String,default:""}},setup(t){const e=S(()=>t.multiline.split(/\n+/)),r=S(()=>new RegExp(`(${t.colorSearcherString})`,"iu")),u=i=>t.colorSearcherString?i.split(r.value):[i],w=S(()=>e.value.map(u));return(i,m)=>(n(),l("div",ie,[(n(!0),l(v,null,f(w.value,(o,_)=>(n(),l("div",{key:_,class:"stem"},[(n(!0),l(v,null,f(o,(x,R)=>(n(),l("span",{key:R,class:"part"},g(x),1))),128))]))),128))]))}}),ue=j(ce,[["__scopeId","data-v-ec7f7d79"]]),me={class:"external-wrapper"},ge={class:"searcher"},Se={class:"searcher__internal"},he={class:"external"},de={class:"table"},pe=["onClick"],ve={class:"option-text"},fe={class:"results"},_e={class:"results__internal"},ye={key:0,class:"stats"},be=P({__name:"RootsAndStems",setup(t){const e=oe(),r=[{key:"roots",name:"Roots and Stems"},{key:"perfect",name:"Perfects"}],w=["I","II","III","IV","I(2)","II(2)","III(2)","IV(2)","I(7)","I(8)","I(10)"].map(B.instantiate),i=N(""),m=N(""),o=Q(new C(w)),{tab:_,tabData:x}=W(e),R=S(()=>o.positiveStemSearcherStrings.length||o.negativeStemSearcherStrings.length||m.value),F=S(()=>{if(!R.value)return[];const b=m.value?[RegExp(m.value,"iums")]:[],s=[...o.positiveStemRegexes,...b],a=o.negativeStemRegexes;return x.value.filter(te(s,a))}),K=S(()=>[...o.positiveStemSearcherStrings,m.value].map(s=>`(?:${s})`).join("|"));function U(b,s){o.setOption(b,s),y()}function y(){m.value=i.value}function z(){i.value="",y()}function H(){m.value=i.value="",o.clearAll()}return(b,s)=>(n(),l("div",me,[c("div",ge,[c("div",Se,[d(ae,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=a=>i.value=a),label:"Search string",variant:"outlined",density:"compact",class:"searcher__text-field",clearable:"","onClick:clear":z,onKeyup:X(y,["native","enter"])},null,8,["modelValue"]),d(O,{variant:"outlined",class:"searcher__search-button top-button",onClick:y},{default:p(()=>s[2]||(s[2]=[V(" Search ")])),_:1}),d(O,{variant:"outlined",class:"top-button",onClick:H},{default:p(()=>s[3]||(s[3]=[V(" Clear all ")])),_:1})])]),c("div",he,[c("table",de,[(n(!0),l(v,null,f(o.stems,(a,k)=>(n(),l("tr",{key:a.number},[c("td",{style:T(a.style),class:"stem"},g(a.number),5),(n(!0),l(v,null,f($(le),h=>(n(),l("td",{key:h,style:T(a.getStyle(h)),class:"option",onClick:xe=>U(k,h)},[c("div",ve,g(h),1)],12,pe))),128))]))),128))])]),d(re,{modelValue:$(_),"onUpdate:modelValue":s[1]||(s[1]=a=>Y(_)?_.value=a:null),"align-tabs":"center",class:"tabs",onChange:y},{default:p(()=>[(n(),l(v,null,f(r,a=>d(ne,{key:a.key,color:"blue"},{default:p(()=>[V(g(a.name),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),c("div",fe,[c("div",_e,[R.value?(n(),l("div",ye,g(F.value.length)+" verbal roots of "+g($(x).length)+". ",1)):Z("",!0),d(se,{items:F.value},{default:p(({items:a})=>[(n(!0),l(v,null,f(a,(k,h)=>(n(),ee(ue,{key:h,multiline:k,"color-searcher-string":K.value},{default:p(()=>[V(g(k)+" ",1),s[4]||(s[4]=c("hr",null,null,-1))]),_:2},1032,["multiline","color-searcher-string"]))),128))]),_:1},8,["items"])])])]))}}),Te=j(be,[["__scopeId","data-v-847f8eaf"]]);export{Te as default};
