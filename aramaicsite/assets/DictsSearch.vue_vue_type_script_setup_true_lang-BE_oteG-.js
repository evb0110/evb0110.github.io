var R=Object.defineProperty;var $=(s,e,t)=>e in s?R(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var h=(s,e,t)=>$(s,typeof e!="symbol"?e+"":e,t);import{d as j,a as G,c as p,w as F,b as N,e as P,o as c,f,F as v,i as O,D as g,h as S,j as L,k as E,V as x,p as A,_ as T,bn as z,g as B,m,bH as K,n as H}from"./index-LkfU45qH.js";import{u as I,L as C}from"./GrepLine.vue_vue_type_style_index_0_lang-Bg_ezbAi.js";import{u as Q}from"./index-CNQBQ_8S.js";import{u as X,S as q,a as U}from"./SearchResults-BYUqRIgT.js";import{u as W,A as V}from"./assetsStore-CMI-_fM6.js";var w=(s=>(s.BrowseAndSearch="BrowseAndSearch",s.DictsSearch="DictsSearch",s))(w||{});const M=j("componentMountStore",()=>{const s=G(new Set);function e(n){s.add(n)}function t(n){s.delete(n)}return{components:s,mount:e,unmount:t}}),Y={[C.turoyo]:[{key:"ritter",title:"Ritter",isChosen:!0,translationLanguage:"German"},{key:"jastrow",title:"Jastrow",isChosen:!1,translationLanguage:"German"},{key:"jan",title:"XÃ«zne",isChosen:!1,translationLanguage:"Swedish"}],[C.maalula]:[{key:"arnold",title:"Arnold",isChosen:!0,translationLanguage:"German"}]},Z=j("simpleDictStore",()=>{const s=W(),e=M(),t=I(),n=p(()=>{switch(t.value){case C.turoyo:return V.turoyoDictsJson;case C.maalula:default:return V.maalulaDictsJson}}),l=p(()=>{var i;return((i=s[n.value])==null?void 0:i.data)||{}}),a=Q("dict",[]),{searcher:o,searcherString:u}=X(),r=p(()=>Y[t.value]||[]);F(()=>{e.components.has(w.DictsSearch)&&!a.value.length&&(a.value=r.value.filter(({isChosen:i})=>i).map(({key:i})=>i))});const y=p(()=>u.value?r.value.map(({key:i,title:d,translationLanguage:b})=>{const J=k(i).filter(D=>o.value.regex.test(D)).map(D=>({title:"",line:D,translationLanguage:b}));return{key:i,title:d,lines:J}}):[]);function k(i){var d;return((d=l.value)==null?void 0:d[i])||[]}return{searcher:o,initialDicts:r,dictData:l,searcherString:u,chosenDictionaries:a,matchingDictLinesArr:y}});class _{constructor({key:e,title:t,isChosen:n}){h(this,"key");h(this,"title");h(this,"isChosen");this.key=e,this.title=t,this.isChosen=n}toggle(){this.isChosen=!this.isChosen}choose(){this.isChosen=!0}unchoose(){this.isChosen=!1}static instantiate(e){return new _(e)}}class ee{constructor(e){h(this,"data");this.data=e.map(_.instantiate)}optionByKey(e){return this.data.find(t=>t.key===e)}toggle(e){var t;(t=this.optionByKey(e))==null||t.toggle()}chooseAll(){this.data.forEach(e=>e.choose())}unchooseAll(){this.data.forEach(e=>e.unchoose())}toggleAll(){this.areAllChosen?this.unchooseAll():this.chooseAll()}chooseKeys(e){this.unchooseAll(),this.data.forEach(t=>e!=null&&e.includes(t.key)?t.choose():t.unchoose())}get chosenKeys(){return this.data.filter(({isChosen:e})=>e).map(({key:e})=>e)}get areAllChosen(){return this.data.every(e=>e.isChosen)}}const te={class:"container d-flex justify-center"},se=N({__name:"OptionsChooser",props:{optionsProp:{},hasAll:{type:Boolean},chosenOptions:{}},emits:["chosen-options"],setup(s,{emit:e}){const t=e,n=G(new ee(s.optionsProp));P(()=>s.chosenOptions,a=>n.chooseKeys(a),{immediate:!0});const l=a=>{a?n.toggle(a):n.toggleAll(),t("chosen-options",n.chosenKeys)};return(a,o)=>(c(),f("div",te,[(c(!0),f(v,null,O(n.data,({title:u,key:r,isChosen:y})=>(c(),g(x,{key:r,variant:y?"outlined":"text",onClick:k=>l(r)},{default:S(()=>[L(E(u),1)]),_:2},1032,["variant","onClick"]))),128)),a.hasAll?(c(),g(x,{key:0,variant:n.areAllChosen?"outlined":"text"+a.foo,onClick:o[0]||(o[0]=u=>l())},{default:S(()=>o[1]||(o[1]=[L(" All ")])),_:1},8,["variant"])):A("",!0)]))}}),ne=T(se,[["__scopeId","data-v-50fe08bd"]]),oe=s=>{const e=M();e.mount(s),z(()=>{e.unmount(s)})},me=N({__name:"DictsSearch",setup(s){const e={jan:"Swedish",ritter:"German",jastrow:"German",arnold:"German"},t=Z();oe(w.DictsSearch);const n=p(()=>t.matchingDictLinesArr.filter(({key:o})=>t.chosenDictionaries.includes(o)));function l(o){t.searcherString=o}function a(o){t.chosenDictionaries=o}return(o,u)=>(c(),f(v,null,[B(K,{class:"searcher-wrapper"},{default:S(()=>[B(q,{"searcher-string":m(t).searcherString,"corpus-name":o.corpusName,onSearcherString:l},null,8,["searcher-string","corpus-name"])]),_:1}),m(t).initialDicts.length>1?(c(),g(ne,{key:0,"options-prop":m(t).initialDicts,"chosen-options":m(t).chosenDictionaries,"has-all":"",onChosenOptions:a},null,8,["options-prop","chosen-options"])):A("",!0),(c(!0),f(v,null,O(n.value,r=>(c(),g(K,{key:r.key},{default:S(()=>[H("h1",null,E(r.title),1),r.lines.length?(c(),g(U,{key:0,"lines-matching":r.lines,searcher:m(t).searcher,"translation-language":e[r.key]},null,8,["lines-matching","searcher","translation-language"])):A("",!0)]),_:2},1024))),128))],64))}});export{me as _};
