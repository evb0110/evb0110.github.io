var St=Object.defineProperty;var Ct=(e,t,l)=>t in e?St(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var N=(e,t,l)=>Ct(e,typeof t!="symbol"?t+"":t,l);import{a7 as _t,M as re,d as At,c as k,a6 as Tt,r as L,m as j,b as ce,bj as It,o as T,f as E,F as H,i as we,D as ie,h as Z,j as ke,k as xe,V as Le,p as ue,v as ee,b3 as ut,I as rt,J as it,aJ as Pt,x as Se,bk as Et,q as de,E as ct,ak as Lt,aw as Dt,t as ne,s as pe,g as d,T as q,Q as dt,aY as Bt,aZ as Rt,G as Nt,P as qt,aG as Mt,bl as $t,an as Ve,ap as Ot,b0 as Ft,a0 as Ke,a3 as Ht,b2 as Ut,bm as Kt,aD as se,aC as oe,as as zt,aX as De,bn as Gt,b4 as jt,aH as Wt,au as Jt,U as Qt,K as Xt,b8 as Yt,bo as ze,aE as ge,aF as Zt,aj as ea,az as ta,ao as aa,al as G,bg as la,ar as qe,bp as Ge,bq as na,e as W,aL as fe,br as Te,bs as sa,ag as vt,am as mt,bt as oa,bu as ft,bv as ua,w as je,bw as ra,bf as Ie,bx as ht,by as ia,O as ca,bz as da,b9 as Ce,H as be,W as va,bA as ma,S as fa,bB as ha,bC as We,bD as Je,bE as pa,bF as Qe,bG as ya,bH as ba,bI as pt,n as F,l as Be,_ as ve,A as ga,aR as ka,ay as Me,bJ as xa,a4 as yt,B as Va,ax as wa,bK as Sa,$ as Xe,a5 as Ca}from"./index-wjelRHkS.js";import{u as he}from"./index-UjDSpEOd.js";import{u as _a,L as Ye,D as Ze,K as et,a as Aa,b as me,G as Ta,s as Ia,S as tt}from"./GrepLine-BZHliDwv.js";import{u as Pa,A as at}from"./assetsStore-EbjfTzY-.js";import{V as Re,m as Ea}from"./VTextField-BVzymtsL.js";import{h as La}from"./VInput-oHDEWMgA.js";import{f as bt}from"./forwardRefs-DWGaNmQL.js";import{V as lt,m as Da,a as nt,g as Ba}from"./VOverlay-qmVypS2p.js";import{a as Ra}from"./scopeId-18GEZhcy.js";import{a as gt,V as Na}from"./VDialog-DrsmOh2n.js";import{V as qa}from"./VCheckboxBtn-kZNK_gGV.js";import{m as Ma,V as st}from"./VSlideGroup-0Nsz4IoE.js";import{_ as $a,I as Oa}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-D0-OIlfX.js";import{_ as Fa}from"./CopyResults-D9KjuAN4.js";class $e{constructor({volume:t,texts:l}){N(this,"volumeName");N(this,"texts");this.texts=l.map(u=>({volumeName:t,...u})).map(Oe.instantiate),this.volumeName=t}get totalContents(){return re.flatMap(this.texts,"contents")}static instantiate(t){return new $e(t)}}class Oe{constructor({volumeName:t,textNumber:l,textName:u,contents:s}){N(this,"volumeName");N(this,"textNumber");N(this,"_textName");N(this,"rawContents");this.volumeName=t,this.textNumber=l,this._textName=u,this.rawContents=s}get contents(){return this.rawContents.map(t=>({volumeName:this.volumeName,textNumber:this.textNumber,textName:this.textName,...t})).map(Fe.instantiate)}get textName(){return this._textName.replace(/\.txt/,"")}set textName(t){this._textName=t}static instantiate(t){return new Oe(t)}}class Fe{constructor({volumeName:t,textNumber:l,textName:u,lineNumber:s,textus:i,versio:v}){N(this,"volumeName");N(this,"textNumber");N(this,"textName");N(this,"lineNumber");N(this,"textus");N(this,"versio");this.volumeName=t,this.textNumber=l,this.textName=u,this.lineNumber=s,this.textus=i,this.versio=v}get title(){return this.volumeName+": "+this.textName}get hash(){return"h"+_t(this)}static instantiate(t){return new Fe(t)}}const Ha=At("corpusWithTranslationStore",()=>{const e=Pa(),t=_a(),l=k(()=>{switch(t.value){case Ye.maalula:return at.maalulaCorpusJson;case Ye.turoyo:default:return at.turoyoNewCorpusJson}}),u=k(()=>{var v;return(v=e[l.value])==null?void 0:v.data}),s=Tt(()=>{var v;return((v=u.value)==null?void 0:v.map($e.instantiate))||[]},[]),i=k(()=>re.flatMap(s.value,"totalContents"));return{corpusArray:s,corpusLines:i}}),Ua=(e,t)=>{const l=L(e.indexOf(j(t))||0),u=k(()=>e[l.value]);function s(){l.value=(l.value+1)%e.length}return function(){return s(),u.value}},Ka={class:"d-flex ga-1"},za=ce({__name:"ModeSwitcher",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=It(e,"modelValue"),l=Ua(Ze,t);function u(){t.value=l()}return(s,i)=>(T(),E("div",Ka,[(T(!0),E(H,null,we(j(Ze),v=>(T(),ie(Le,{key:v,variant:v===t.value?"outlined":"text",class:"d-none d-sm-block",size:"small",onClick:r=>t.value=v},{default:Z(()=>[ke(xe(v)+" mode ",1)]),_:2},1032,["variant","onClick"]))),128)),t.value?(T(),ie(Le,{key:0,class:"d-sm-none",variant:"outlined",onClick:i[0]||(i[0]=v=>u())},{default:Z(()=>[ke(xe(t.value)+" mode ",1)]),_:1})):ue("",!0)]))}}),kt=Symbol.for("vuetify:v-chip-group"),Ga=ee({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Et},...Ma(),...Se(),...Pt({selectedClass:"v-chip--selected"}),...it(),...rt(),...ut({variant:"tonal"})},"VChipGroup");de()({name:"VChipGroup",props:Ga(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:l}=t;const{themeClasses:u}=ct(e),{isSelected:s,select:i,next:v,prev:r,selected:o}=Lt(e,kt);return Dt({VChip:{color:ne(e,"color"),disabled:ne(e,"disabled"),filter:ne(e,"filter"),variant:ne(e,"variant")}}),pe(()=>{const c=st.filterProps(e);return d(st,q(c,{class:["v-chip-group",{"v-chip-group--column":e.column},u.value,e.class],style:e.style}),{default:()=>{var g;return[(g=l.default)==null?void 0:g.call(l,{isSelected:s,select:i,next:v,prev:r,selected:o.value})]}})}),{}}});const ja=ee({activeClass:String,appendAvatar:String,appendIcon:ge,closable:Boolean,closeIcon:{type:ge,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:ge,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:ze(),onClickOnce:ze(),...Yt(),...Se(),...Xt(),...Qt(),...Jt(),...Wt(),...jt(),...Gt(),...it({tag:"span"}),...rt(),...ut({variant:"tonal"})},"VChip"),Wa=de()({name:"VChip",directives:{Ripple:Zt},props:ja(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:l,emit:u,slots:s}=t;const{t:i}=dt(),{borderClasses:v}=Bt(e),{colorClasses:r,colorStyles:o,variantClasses:c}=Rt(e),{densityClasses:g}=Nt(e),{elevationClasses:V}=qt(e),{roundedClasses:m}=Mt(e),{sizeClasses:p}=$t(e),{themeClasses:x}=ct(e),w=Ve(e,"modelValue"),a=Ot(e,kt,!1),f=Ft(e,l),y=k(()=>e.link!==!1&&f.isLink.value),b=k(()=>!e.disabled&&e.link!==!1&&(!!a||e.link||f.isClickable.value)),_=k(()=>({"aria-label":i(e.closeLabel),onClick(C){C.preventDefault(),C.stopPropagation(),w.value=!1,u("click:close",C)}}));function P(C){var U;u("click",C),b.value&&((U=f.navigate)==null||U.call(f,C),a==null||a.toggle())}function K(C){(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),P(C))}return()=>{const C=f.isLink.value?"a":e.tag,U=!!(e.appendIcon||e.appendAvatar),J=!!(U||s.append),z=!!(s.close||e.closable),Q=!!(s.filter||e.filter)&&a,te=!!(e.prependIcon||e.prependAvatar),X=!!(te||s.prepend),ae=!a||a.isSelected.value;return w.value&&Ke(d(C,q({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":b.value,"v-chip--filter":Q,"v-chip--pill":e.pill},x.value,v.value,ae?r.value:void 0,g.value,V.value,m.value,p.value,c.value,a==null?void 0:a.selectedClass.value,e.class],style:[ae?o.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:b.value?0:void 0,onClick:P,onKeydown:b.value&&!y.value&&K},f.linkProps),{default:()=>{var M;return[Ut(b.value,"v-chip"),Q&&d(Kt,{key:"filter"},{default:()=>[Ke(d("div",{class:"v-chip__filter"},[s.filter?d(oe,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},s.filter):d(se,{key:"filter-icon",icon:e.filterIcon},null)]),[[zt,a.isSelected.value]])]}),X&&d("div",{key:"prepend",class:"v-chip__prepend"},[s.prepend?d(oe,{key:"prepend-defaults",disabled:!te,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},s.prepend):d(H,null,[e.prependIcon&&d(se,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&d(De,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),d("div",{class:"v-chip__content","data-no-activator":""},[((M=s.default)==null?void 0:M.call(s,{isSelected:a==null?void 0:a.isSelected.value,selectedClass:a==null?void 0:a.selectedClass.value,select:a==null?void 0:a.select,toggle:a==null?void 0:a.toggle,value:a==null?void 0:a.value.value,disabled:e.disabled}))??e.text]),J&&d("div",{key:"append",class:"v-chip__append"},[s.append?d(oe,{key:"append-defaults",disabled:!U,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},s.append):d(H,null,[e.appendIcon&&d(se,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&d(De,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),z&&d("button",q({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},_.value),[s.close?d(oe,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},s.close):d(se,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Ht("ripple"),b.value&&e.ripple,null]])}}}),Ja=ee({id:String,submenu:Boolean,...vt(Da({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:gt}}),["absolute"])},"VMenu"),Qa=de()({name:"VMenu",props:Ja(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:l}=t;const u=Ve(e,"modelValue"),{scopeId:s}=Ra(),{isRtl:i}=ea(),v=ta(),r=k(()=>e.id||`v-menu-${v}`),o=L(),c=aa(nt,null),g=G(new Set);mt(nt,{register(){g.value.add(v)},unregister(){g.value.delete(v)},closeParents(a){setTimeout(()=>{var f;!g.value.size&&!e.persistent&&(a==null||(f=o.value)!=null&&f.contentEl&&!oa(a,o.value.contentEl))&&(u.value=!1,c==null||c.closeParents())},40)}}),la(()=>{c==null||c.unregister(),document.removeEventListener("focusin",V)}),na(()=>u.value=!1);async function V(a){var b,_,P;const f=a.relatedTarget,y=a.target;await qe(),u.value&&f!==y&&((b=o.value)!=null&&b.contentEl)&&((_=o.value)!=null&&_.globalTop)&&![document,o.value.contentEl].includes(y)&&!o.value.contentEl.contains(y)&&((P=Ge(o.value.contentEl)[0])==null||P.focus())}W(u,a=>{a?(c==null||c.register(),fe&&document.addEventListener("focusin",V,{once:!0})):(c==null||c.unregister(),fe&&document.removeEventListener("focusin",V))},{immediate:!0});function m(a){c==null||c.closeParents(a)}function p(a){var f,y,b,_,P;if(!e.disabled)if(a.key==="Tab"||a.key==="Enter"&&!e.closeOnContentClick){if(a.key==="Enter"&&(a.target instanceof HTMLTextAreaElement||a.target instanceof HTMLInputElement&&a.target.closest("form")))return;a.key==="Enter"&&a.preventDefault(),sa(Ge((f=o.value)==null?void 0:f.contentEl,!1),a.shiftKey?"prev":"next",C=>C.tabIndex>=0)||(u.value=!1,(b=(y=o.value)==null?void 0:y.activatorEl)==null||b.focus())}else e.submenu&&a.key===(i.value?"ArrowRight":"ArrowLeft")&&(u.value=!1,(P=(_=o.value)==null?void 0:_.activatorEl)==null||P.focus())}function x(a){var y;if(e.disabled)return;const f=(y=o.value)==null?void 0:y.contentEl;f&&u.value?a.key==="ArrowDown"?(a.preventDefault(),a.stopImmediatePropagation(),Te(f,"next")):a.key==="ArrowUp"?(a.preventDefault(),a.stopImmediatePropagation(),Te(f,"prev")):e.submenu&&(a.key===(i.value?"ArrowRight":"ArrowLeft")?u.value=!1:a.key===(i.value?"ArrowLeft":"ArrowRight")&&(a.preventDefault(),Te(f,"first"))):(e.submenu?a.key===(i.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(a.key))&&(u.value=!0,a.preventDefault(),setTimeout(()=>setTimeout(()=>x(a))))}const w=k(()=>q({"aria-haspopup":"menu","aria-expanded":String(u.value),"aria-owns":r.value,onKeydown:x},e.activatorProps));return pe(()=>{const a=lt.filterProps(e);return d(lt,q({ref:o,id:r.value,class:["v-menu",e.class],style:e.style},a,{modelValue:u.value,"onUpdate:modelValue":f=>u.value=f,absolute:!0,activatorProps:w.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":m,onKeydown:p},s),{activator:l.activator,default:function(){for(var f=arguments.length,y=new Array(f),b=0;b<f;b++)y[b]=arguments[b];return d(oe,{root:"VMenu"},{default:()=>{var _;return[(_=l.default)==null?void 0:_.call(l,...y)]}})}})}),bt({id:r,ΨopenChildren:g},o)}}),Xa=ee({renderless:Boolean,...Se()},"VVirtualScrollItem"),Ya=de()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Xa(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:l,emit:u,slots:s}=t;const{resizeRef:i,contentRect:v}=ft(void 0,"border");W(()=>{var r;return(r=v.value)==null?void 0:r.height},r=>{r!=null&&u("update:height",r)}),pe(()=>{var r,o;return e.renderless?d(H,null,[(r=s.default)==null?void 0:r.call(s,{itemRef:i})]):d("div",q({ref:i,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(o=s.default)==null?void 0:o.call(s)])})}}),Za=-1,el=1,Pe=100,tl=ee({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function al(e,t){const l=ua(),u=G(0);je(()=>{u.value=parseFloat(e.itemHeight||0)});const s=G(0),i=G(Math.ceil((parseInt(e.height)||l.height.value)/(u.value||16))||1),v=G(0),r=G(0),o=L(),c=L();let g=0;const{resizeRef:V,contentRect:m}=ft();je(()=>{V.value=o.value});const p=k(()=>{var n;return o.value===document.documentElement?l.height.value:((n=m.value)==null?void 0:n.height)||parseInt(e.height)||0}),x=k(()=>!!(o.value&&c.value&&p.value&&u.value));let w=Array.from({length:t.value.length}),a=Array.from({length:t.value.length});const f=G(0);let y=-1;function b(n){return w[n]||u.value}const _=ra(()=>{const n=performance.now();a[0]=0;const h=t.value.length;for(let A=1;A<=h-1;A++)a[A]=(a[A-1]||0)+b(A-1);f.value=Math.max(f.value,performance.now()-n)},f),P=W(x,n=>{n&&(P(),g=c.value.offsetTop,_.immediate(),M(),~y&&qe(()=>{fe&&window.requestAnimationFrame(()=>{ye(y),y=-1})}))});ht(()=>{_.clear()});function K(n,h){const A=w[n],I=u.value;u.value=I?Math.min(u.value,h):h,(A!==h||I!==u.value)&&(w[n]=h,_())}function C(n){return n=Ie(n,0,t.value.length-1),a[n]||0}function U(n){return ll(a,n)}let J=0,z=0,Q=0;W(p,(n,h)=>{h&&(M(),n<h&&requestAnimationFrame(()=>{z=0,M()}))});function te(){if(!o.value||!c.value)return;const n=o.value.scrollTop,h=performance.now();h-Q>500?(z=Math.sign(n-J),g=c.value.offsetTop):z=n-J,J=n,Q=h,M()}function X(){!o.value||!c.value||(z=0,Q=0,M())}let ae=-1;function M(){cancelAnimationFrame(ae),ae=requestAnimationFrame(_e)}function _e(){if(!o.value||!p.value)return;const n=J-g,h=Math.sign(z),A=Math.max(0,n-Pe),I=Ie(U(A),0,t.value.length),$=n+p.value+Pe,S=Ie(U($)+1,I+1,t.value.length);if((h!==Za||I<s.value)&&(h!==el||S>i.value)){const D=C(s.value)-C(I),B=C(S)-C(i.value);Math.max(D,B)>Pe?(s.value=I,i.value=S):(I<=0&&(s.value=I),S>=t.value.length&&(i.value=S))}v.value=C(s.value),r.value=C(t.value.length)-C(i.value)}function ye(n){const h=C(n);!o.value||n&&!h?y=n:o.value.scrollTop=h}const Ae=k(()=>t.value.slice(s.value,i.value).map((n,h)=>({raw:n,index:h+s.value})));return W(t,()=>{w=Array.from({length:t.value.length}),a=Array.from({length:t.value.length}),_.immediate(),M()},{deep:!0}),{calculateVisibleItems:M,containerRef:o,markerRef:c,computedItems:Ae,paddingTop:v,paddingBottom:r,scrollToIndex:ye,handleScroll:te,handleScrollend:X,handleItemResize:K}}function ll(e,t){let l=e.length-1,u=0,s=0,i=null,v=-1;if(e[l]<t)return l;for(;u<=l;)if(s=u+l>>1,i=e[s],i>t)l=s-1;else if(i<t)v=s,u=s+1;else return i===t?s:u;return v}const nl=ee({items:{type:Array,default:()=>[]},renderless:Boolean,...tl(),...Se(),...va()},"VVirtualScroll"),sl=de()({name:"VVirtualScroll",props:nl(),setup(e,t){let{slots:l}=t;const u=ia("VVirtualScroll"),{dimensionStyles:s}=ca(e),{calculateVisibleItems:i,containerRef:v,markerRef:r,handleScroll:o,handleScrollend:c,handleItemResize:g,scrollToIndex:V,paddingTop:m,paddingBottom:p,computedItems:x}=al(e,ne(e,"items"));return da(()=>e.renderless,()=>{function w(){var y,b;const f=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[f]("scroll",o,{passive:!0}),document[f]("scrollend",c)):((y=v.value)==null||y[f]("scroll",o,{passive:!0}),(b=v.value)==null||b[f]("scrollend",c))}Ce(()=>{v.value=Ba(u.vnode.el,!0),w(!0)}),ht(w)}),pe(()=>{const w=x.value.map(a=>d(Ya,{key:a.index,renderless:e.renderless,"onUpdate:height":f=>g(a.index,f)},{default:f=>{var y;return(y=l.default)==null?void 0:y.call(l,{item:a.raw,index:a.index,...f})}}));return e.renderless?d(H,null,[d("div",{ref:r,class:"v-virtual-scroll__spacer",style:{paddingTop:be(m.value)}},null),w,d("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:be(p.value)}},null)]):d("div",{ref:v,class:["v-virtual-scroll",e.class],onScrollPassive:o,onScrollend:c,style:[s.value,e.style]},[d("div",{ref:r,class:"v-virtual-scroll__container",style:{paddingTop:be(m.value),paddingBottom:be(p.value)}},[w])])}),{calculateVisibleItems:i,scrollToIndex:V}}});function ol(e,t){const l=G(!1);let u;function s(r){cancelAnimationFrame(u),l.value=!0,u=requestAnimationFrame(()=>{u=requestAnimationFrame(()=>{l.value=!1})})}async function i(){await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>{if(l.value){const o=W(l,()=>{o(),r()})}else r()})}async function v(r){var g,V;if(r.key==="Tab"&&((g=t.value)==null||g.focus()),!["PageDown","PageUp","Home","End"].includes(r.key))return;const o=(V=e.value)==null?void 0:V.$el;if(!o)return;(r.key==="Home"||r.key==="End")&&o.scrollTo({top:r.key==="Home"?0:o.scrollHeight,behavior:"smooth"}),await i();const c=o.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(r.key==="PageDown"||r.key==="Home"){const m=o.getBoundingClientRect().top;for(const p of c)if(p.getBoundingClientRect().top>=m){p.focus();break}}else{const m=o.getBoundingClientRect().bottom;for(const p of[...c].reverse())if(p.getBoundingClientRect().bottom<=m){p.focus();break}}}return{onScrollPassive:s,onKeydown:v}}const ul=ee({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ge,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...ba({itemChildren:!1})},"Select"),rl=ee({...ul(),...vt(Ea({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ya({transition:{component:gt}})},"VSelect"),ot=de()({name:"VSelect",props:rl(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:l}=t;const{t:u}=dt(),s=L(),i=L(),v=L(),r=Ve(e,"menu"),o=k({get:()=>r.value,set:n=>{var h;r.value&&!n&&((h=i.value)!=null&&h.ΨopenChildren.size)||(r.value=n)}}),{items:c,transformIn:g,transformOut:V}=ma(e),m=Ve(e,"modelValue",[],n=>g(n===null?[null]:fa(n)),n=>{const h=V(n);return e.multiple?h:h[0]??null}),p=k(()=>typeof e.counterValue=="function"?e.counterValue(m.value):typeof e.counterValue=="number"?e.counterValue:m.value.length),x=La(),w=k(()=>m.value.map(n=>n.value)),a=G(!1),f=k(()=>o.value?e.closeText:e.openText);let y="",b;const _=k(()=>e.hideSelected?c.value.filter(n=>!m.value.some(h=>e.valueComparator(h,n))):c.value),P=k(()=>e.hideNoData&&!_.value.length||e.readonly||(x==null?void 0:x.isReadonly.value)),K=k(()=>{var n;return{...e.menuProps,activatorProps:{...((n=e.menuProps)==null?void 0:n.activatorProps)||{},"aria-haspopup":"listbox"}}}),C=L(),U=ol(C,s);function J(n){e.openOnClear&&(o.value=!0)}function z(){P.value||(o.value=!o.value)}function Q(n){We(n)&&te(n)}function te(n){var $,S;if(!n.key||e.readonly||x!=null&&x.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(n.key)&&n.preventDefault(),["Enter","ArrowDown"," "].includes(n.key)&&(o.value=!0),["Escape","Tab"].includes(n.key)&&(o.value=!1),n.key==="Home"?($=C.value)==null||$.focus("first"):n.key==="End"&&((S=C.value)==null||S.focus("last"));const h=1e3;if(e.multiple||!We(n))return;const A=performance.now();A-b>h&&(y=""),y+=n.key.toLowerCase(),b=A;const I=c.value.find(D=>D.title.toLowerCase().startsWith(y));if(I!==void 0){m.value=[I];const D=_.value.indexOf(I);fe&&window.requestAnimationFrame(()=>{var B;D>=0&&((B=v.value)==null||B.scrollToIndex(D))})}}function X(n){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!n.props.disabled)if(e.multiple){const A=m.value.findIndex($=>e.valueComparator($.value,n.value)),I=h??!~A;if(~A){const $=I?[...m.value,n]:[...m.value];$.splice(A,1),m.value=$}else I&&(m.value=[...m.value,n])}else{const A=h!==!1;m.value=A?[n]:[],qe(()=>{o.value=!1})}}function ae(n){var h;(h=C.value)!=null&&h.$el.contains(n.relatedTarget)||(o.value=!1)}function M(){var n;e.eager&&((n=v.value)==null||n.calculateVisibleItems())}function _e(){var n;a.value&&((n=s.value)==null||n.focus())}function ye(n){a.value=!0}function Ae(n){if(n==null)m.value=[];else if(Qe(s.value,":autofill")||Qe(s.value,":-webkit-autofill")){const h=c.value.find(A=>A.title===n);h&&X(h)}else s.value&&(s.value.value="")}return W(o,()=>{if(!e.hideSelected&&o.value&&m.value.length){const n=_.value.findIndex(h=>m.value.some(A=>e.valueComparator(A.value,h.value)));fe&&window.requestAnimationFrame(()=>{var h;n>=0&&((h=v.value)==null||h.scrollToIndex(n))})}}),W(()=>e.items,(n,h)=>{o.value||a.value&&!h.length&&n.length&&(o.value=!0)}),pe(()=>{const n=!!(e.chips||l.chip),h=!!(!e.hideNoData||_.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),A=m.value.length>0,I=Re.filterProps(e),$=A||!a.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return d(Re,q({ref:s},I,{modelValue:m.value.map(S=>S.props.value).join(", "),"onUpdate:modelValue":Ae,focused:a.value,"onUpdate:focused":S=>a.value=S,validationValue:m.externalValue,counterValue:p.value,dirty:A,class:["v-select",{"v-select--active-menu":o.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":m.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:$,"onClick:clear":J,"onMousedown:control":z,onBlur:ae,onKeydown:te,"aria-label":u(f.value),title:u(f.value)}),{...l,default:()=>d(H,null,[d(Qa,q({ref:i,modelValue:o.value,"onUpdate:modelValue":S=>o.value=S,activator:"parent",contentClass:"v-select__content",disabled:P.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:M,onAfterLeave:_e},K.value),{default:()=>[h&&d(ha,q({ref:C,selected:w.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:S=>S.preventDefault(),onKeydown:Q,onFocusin:ye,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},U,e.listProps),{default:()=>{var S,D,B;return[(S=l["prepend-item"])==null?void 0:S.call(l),!_.value.length&&!e.hideNoData&&(((D=l["no-data"])==null?void 0:D.call(l))??d(Je,{title:u(e.noDataText)},null)),d(sl,{ref:v,renderless:!0,items:_.value},{default:Y=>{var Ue;let{item:O,index:le,itemRef:R}=Y;const He=q(O.props,{ref:R,key:le,onClick:()=>X(O,null)});return((Ue=l.item)==null?void 0:Ue.call(l,{item:O,index:le,props:He}))??d(Je,q(He,{role:"option"}),{prepend:Vt=>{let{isSelected:wt}=Vt;return d(H,null,[e.multiple&&!e.hideSelected?d(qa,{key:O.value,modelValue:wt,ripple:!1,tabindex:"-1"},null):void 0,O.props.prependAvatar&&d(De,{image:O.props.prependAvatar},null),O.props.prependIcon&&d(se,{icon:O.props.prependIcon},null)])}})}}),(B=l["append-item"])==null?void 0:B.call(l)]}})]}),m.value.map((S,D)=>{function B(R){R.stopPropagation(),R.preventDefault(),X(S,!1)}const Y={"onClick:close":B,onKeydown(R){R.key!=="Enter"&&R.key!==" "||(R.preventDefault(),R.stopPropagation(),B(R))},onMousedown(R){R.preventDefault(),R.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},O=n?!!l.chip:!!l.selection,le=O?pa(n?l.chip({item:S,index:D,props:Y}):l.selection({item:S,index:D})):void 0;if(!(O&&!le))return d("div",{key:S.value,class:"v-select__selection"},[n?l.chip?d(oe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:S.title}}},{default:()=>[le]}):d(Wa,q({key:"chip",closable:e.closableChips,size:"small",text:S.title,disabled:S.props.disabled},Y),null):le??d("span",{class:"v-select__selection-text"},[S.title,e.multiple&&D<m.value.length-1&&d("span",{class:"v-select__selection-comma"},[ke(",")])])])})]),"append-inner":function(){var Y;for(var S=arguments.length,D=new Array(S),B=0;B<S;B++)D[B]=arguments[B];return d(H,null,[(Y=l["append-inner"])==null?void 0:Y.call(l,...D),e.menuIcon?d(se,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),bt({isFocused:a,menu:o,select:X},s)}}),il={class:"browse-selects"},cl={class:"selects mt-5 mb-8"},dl={class:"no-data-placeholder mr-5"},vl=ce({__name:"Browse",props:{corpusArr:{default:()=>[]},volumeLabel:{default:"Volume"},textLabel:{default:"Text"}},emits:["chosen"],setup(e,{emit:t}){const l={get chosen(){return{volume:"",text:""}}},u=t,s=he("volume"),i=he("text");s.value&&g(),i.value&&c(),Ce(c),pt(()=>{s.value=null,i.value=null});const v=k(()=>{if(s.value)return e.corpusArr.find(({volumeName:V})=>V===s.value)}),r=k(()=>v.value?v.value.texts:[]);function o(V,m){m==="volume"?(i.value=null,g()):c()}function c(){u("chosen",{volume:s.value,text:i.value})}function g(){u("chosen",l.chosen)}return(V,m)=>(T(),E("div",il,[F("div",cl,[d(ot,{modelValue:j(s),"onUpdate:modelValue":[m[0]||(m[0]=p=>Be(s)?s.value=p:null),m[1]||(m[1]=p=>o(p,"volume"))],items:V.corpusArr,label:V.volumeLabel,"item-title":"volumeName","item-value":"volumeName",variant:"outlined",density:"compact"},null,8,["modelValue","items","label"]),d(ot,{modelValue:j(i),"onUpdate:modelValue":[m[2]||(m[2]=p=>Be(i)?i.value=p:null),m[3]||(m[3]=p=>o(p,"text"))],items:r.value,label:V.textLabel,"item-title":"textName","item-value":"textNumber",variant:"outlined",density:"compact"},{"no-data":Z(()=>[m[4]||(m[4]=F("span",{class:"no-data-arrow"},"⬅",-1)),F("span",dl,xe(`A ${V.volumeLabel} should be chosen`),1)]),_:1},8,["modelValue","items","label"])])]))}}),ml=ve(vl,[["__scopeId","data-v-90ff19db"]]),fl={},hl={height:"32",viewBox:"0 0 24 24",width:"32",xmlns:"http://www.w3.org/2000/svg"};function pl(e,t){return T(),E("svg",hl,t[0]||(t[0]=[F("path",{d:"M4.616 18q-.691 0-1.153-.462T3 16.384V7.616q0-.691.463-1.153T4.615 6h14.77q.69 0 1.152.463T21 7.616v8.769q0 .69-.463 1.153T19.385 18zm0-1h14.769q.23 0 .423-.192t.192-.424V7.616q0-.231-.192-.424T19.385 7H4.615q-.23 0-.423.192T4 7.616v8.769q0 .23.192.423t.423.192M9 15.77h6q.31 0 .54-.221q.23-.22.23-.549q0-.31-.23-.54t-.54-.23H9q-.31 0-.54.221q-.23.22-.23.549q0 .31.23.54t.54.23M4 17V7zm2-7.23q.31 0 .54-.23T6.77 9t-.23-.54T6 8.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23T9.77 9t-.23-.54T9 8.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m-12 3q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23",fill:"lightgrey"},null,-1)]))}const yl=ve(fl,[["render",pl],["__scopeId","data-v-b5f80369"]]),bl={class:"d-flex align-center flex-column"},gl={class:"searchers-grid"},kl=ce({__name:"Search",props:{textusLabel:{default:"Search corpus"},versioLabel:{default:"Search translation"}},emits:["searchers","copy-to-clipboard"],setup(e,{emit:t}){const l=e,u={get searchers(){return{textus:null,versio:null}}},s=t,i=L(u.searchers),v=L(u.searchers),r=L(!1),o=L(null),c=he("textus"),g=he("versio");i.value.textus=c.value,i.value.versio=g.value;const V=k(()=>!i.value.textus&&!i.value.versio),m=k(()=>[{name:"textus",value:i.value.textus,label:l.textusLabel},{name:"versio",value:i.value.versio,label:l.versioLabel}]);function p(f,y){i.value[y]=f||"",f||w()}function x(f){i.value.textus=f,r.value&&w()}function w(){v.value=re.cloneDeep(i.value),s("searchers",re.cloneDeep(v.value)),a()}function a(){c.value=v.value.textus||null,g.value=v.value.versio||null}return Ce(()=>{w(),i.value.textus=c.value,i.value.versio=g.value,(i.value.textus||i.value.versio)&&w(),o.value=document.querySelector(".searchers-grid .v-text-field.input_textus input")}),pt(()=>{c.value=null,g.value=null}),(f,y)=>(T(),E("div",bl,[F("div",gl,[d(yl,{class:"keyboard-icon",onClick:y[0]||(y[0]=b=>r.value=!0)}),d(Le,{disabled:V.value,variant:"outlined",class:"search-btn",color:"success",onClick:w},{default:Z(()=>y[3]||(y[3]=[ke(" Search ")])),_:1},8,["disabled"]),d(et,{value:m.value[0].value,"input-el":o.value,class:"keyboard-regex",type:"regex",visible:"",onSubmit:x},null,8,["value","input-el"]),(T(!0),E(H,null,we(m.value,({value:b,label:_,name:P})=>(T(),ie(Re,{key:P,"model-value":b,label:_,class:Me(`input_${P}`),style:{"min-width":"200px"},variant:"outlined",density:"compact","hide-details":"",clearable:"","onUpdate:modelValue":K=>p(K,P),onKeydown:ga(ka(w,["prevent"]),["enter"])},null,8,["model-value","label","class","onUpdate:modelValue","onKeydown"]))),128)),xa(f.$slots,"default",{class:"slot"},void 0,!0)]),d(Na,{modelValue:r.value,"onUpdate:modelValue":y[2]||(y[2]=b=>r.value=b),"hide-overlay":"",fullscreen:""},{default:Z(()=>[d(et,{visible:r.value,value:i.value.textus,"input-name":e.textusLabel,"onUpdate:visible":y[1]||(y[1]=b=>r.value=b),onSubmit:x},null,8,["visible","value","input-name"])]),_:1},8,["modelValue"])]))}}),xl=ve(kl,[["__scopeId","data-v-03777d1e"]]),xt=300;function Ee({hash:e="",keepLocation:t=!1,className:l="chosen"}){return new Promise(u=>{setTimeout(()=>{t||(location.hash=e,setTimeout(()=>scrollBy(0,-200),0));const s=document.querySelector(e);s&&(s.classList.add(l),setTimeout(u,1))},xt)})}function Vl(e){const t=document.querySelector(e);t&&Ne(t)}function Ne(e,t="chosen"){e&&setTimeout(()=>{e.classList.remove(t)},xt)}const wl=["id"],Sl={class:"controls-wrapper"},Cl={class:"lines"},_l=ce({__name:"LineCard",props:{line:{},searchers:{}},setup(e){const t=e,l=L(),u=yt(),s=Va(),i=k(()=>Aa.map(p=>({lineName:p,str:t.line[p],searcher:t.searchers.data[p]}))),v=k(()=>!t.searchers.areAllEmpty),r=k(()=>u.hash),o=k(()=>"#"+t.line.hash),c=k(()=>{var w;const p=((w=t.line)==null?void 0:w.volumeName.toLowerCase())||"";return p.includes("abou")?"":["jastrow","ritter","arnold","lehrbuch","luf","prym","hors","talay","baxa","ubbadin","maalula","lieder","britta"].some(a=>p.includes(a))?"German":""});function g(){Ne(l.value,"chosen")}W(r,(p,x)=>{!p&&x&&g()});async function V(){if(!v.value)return;const{volumeName:p,textNumber:x}=t.line;await s.push({query:{mode:me.browse,volume:p,text:x}}),await Ee({hash:o.value})}function m(){if(!u.hash){Ee({hash:o.value});return}Vl(u.hash),u.hash===o.value?s.replace({query:u.query,hash:""}):(Ee({hash:o.value,keepLocation:!0}),s.replace({query:u.query,hash:o.value}));const p=Array.from(document.querySelectorAll('div.line-card[id^="h"]'));for(const x of p)x.style.background&&x.id!==t.line.hash&&Ne(x)}return(p,x)=>p.line?(T(),E("div",{key:0,class:"line-card",id:p.line.hash,ref_key:"lineCardRef",ref:l},[F("div",Sl,[v.value?(T(),E("div",{key:1,class:"control-sign",onClick:x[1]||(x[1]=w=>V())},"▤")):(T(),E("div",{key:0,class:"control-sign",onClick:x[0]||(x[0]=w=>m())},"#"))]),F("div",Cl,[(T(!0),E(H,null,we(i.value,(w,a)=>(T(),ie(Ta,q({ref_for:!0},w,{key:a,"translation-language":w.lineName==="versio"&&c.value,class:"mb-1"}),null,16,["translation-language"]))),128)),x[2]||(x[2]=F("div",null,[F("br")],-1))])],8,wl)):ue("",!0)}}),Al=ve(_l,[["__scopeId","data-v-7742c643"]]),Tl={key:1},Il=ce({__name:"Results",props:{results:{},searchers:{}},setup(e){const t=window,l=L(),u=yt(),s=wa(),i=ne(s,"isDark"),v=k(()=>!e.searchers.areAllEmpty);return Ce(async()=>{var o;const r=u.hash;r&&(await Ia(1e3),(o=document.querySelector(r))==null||o.scrollIntoView({behavior:"smooth",block:"center"}))}),(r,o)=>{const c=$a;return T(),E("div",{class:Me(["results w-100",{invert:i.value}])},[v.value?(T(),E("div",{key:0,ref_key:"stats",ref:l,class:"results-stats mb-1"},[F("div",null,"Found "+xe(r.results.length)+" contexts",1)],512)):ue("",!0),o[0]||(o[0]=F("br",null,null,-1)),r.results?(T(),E("div",Tl,[d(c,{items:r.results,el:j(t)},{default:Z(({items:g})=>[(T(!0),E(H,null,we(g,V=>(T(),E("div",null,[V?(T(),ie(Al,{line:V,searchers:r.searchers,key:V.hash},null,8,["line","searchers"])):ue("",!0)]))),256))]),_:1},8,["items","el"])])):ue("",!0)],2)}}}),Pl=ve(Il,[["__scopeId","data-v-025f8b33"]]),El={key:0,class:"searcher-wrapper"},Ll=ce({__name:"BrowseAndSearch",setup(e){const t=Ha(),l=Sa(),u=k(()=>!!l.text.value),s=k(()=>c.value===me.search),i=k(()=>c.value===me.browse),v=k(()=>s.value?g.value:o.searchers),r=L(!1);mt(Oa.isEager,r);const o={get searchers(){return new tt({textus:"",versio:""})}},c=he("mode");c.value||(c.value=me.search);const g=L(o.searchers),V=L({volume:null,text:null}),m=k(()=>{if(!V.value.text||!t.corpusArray.length)return[];const y=re.find(t.corpusArray,{volumeName:V.value.volume});return re.find(y.texts,{textNumber:V.value.text}).contents}),p=k(()=>t.corpusLines),x=k(()=>g.value.areAllEmpty?[]:p.value.filter(g.value.test)),w=k(()=>c.value===me.browse?m.value:x.value);function a(y){Xe(()=>{g.value=new tt(y)})}function f(y){Xe(()=>{V.value=y})}return(y,b)=>(T(),E("div",{class:Me([{"no-hashes":u.value},"browse-and-search"]),ref:"wrapper"},[s.value?(T(),E("div",El,[d(xl,{"corpus-arr-prop":j(t).corpusArray,"textus-label":"Aramaic text","versio-label":"Translation text",onSearchers:a},{default:Z(()=>[d(Fa,{count:w.value.length,class:"mr-5",onClick:b[0]||(b[0]=_=>r.value=!0)},null,8,["count"])]),_:1},8,["corpus-arr-prop"])])):i.value?(T(),ie(ml,{key:1,"corpus-arr":j(t).corpusArray,onChosen:f},null,8,["corpus-arr"])):ue("",!0),d(Pl,{results:w.value,searchers:v.value},null,8,["results","searchers"]),d(j(Ca),{to:"#app-bar-slot"},{default:Z(()=>[d(za,{modelValue:j(c),"onUpdate:modelValue":b[1]||(b[1]=_=>Be(c)?c.value=_:null),class:"mr-5 button-switcher"},null,8,["modelValue"])]),_:1})],2))}}),Wl=ve(Ll,[["__scopeId","data-v-e8e98c58"]]);export{Wl as B};
