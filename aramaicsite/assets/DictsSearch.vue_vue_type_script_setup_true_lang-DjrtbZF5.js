var E=Object.defineProperty;var j=(n,e,t)=>e in n?E(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var u=(n,e,t)=>j(n,typeof e!="symbol"?e+"":e,t);import{u as F,S as J,a as P}from"./SearchResults-BRtCFt1r.js";import{b as V,a as R,e as T,o as c,f as d,F as D,n as N,D as m,h as f,p as S,l as O,V as _,m as v,_ as $,d as z,aB as G,r as I,bF as Q,c as k,g as x,i as p,bG as B,k as X}from"./index-D1VG3rFF.js";import{a as q}from"./axios-CCb-kr4I.js";import{a as L}from"./assets-CMKSEkkh.js";import{L as w,u as H}from"./GrepLine.vue_vue_type_style_index_0_lang-BRlrmuRC.js";class A{constructor({key:e,title:t,isChosen:a}){u(this,"key");u(this,"title");u(this,"isChosen");this.key=e,this.title=t,this.isChosen=a}toggle(){this.isChosen=!this.isChosen}choose(){this.isChosen=!0}unchoose(){this.isChosen=!1}static instantiate(e){return new A(e)}}class M{constructor(e){u(this,"data");this.data=e.map(A.instantiate)}optionByKey(e){return this.data.find(t=>t.key===e)}toggle(e){var t;(t=this.optionByKey(e))==null||t.toggle()}chooseAll(){this.data.forEach(e=>e.choose())}unchooseAll(){this.data.forEach(e=>e.unchoose())}toggleAll(){this.areAllChosen?this.unchooseAll():this.chooseAll()}chooseKeys(e){this.unchooseAll(),this.data.forEach(t=>e!=null&&e.includes(t.key)?t.choose():t.unchoose())}get chosenKeys(){return this.data.filter(({isChosen:e})=>e).map(({key:e})=>e)}get areAllChosen(){return this.data.every(e=>e.isChosen)}}const U={class:"container d-flex justify-center"},W=V({__name:"OptionsChooser",props:{optionsProp:{},hasAll:{type:Boolean},chosenOptions:{}},emits:["chosen-options"],setup(n,{emit:e}){const t=e,a=R(new M(n.optionsProp));T(()=>n.chosenOptions,s=>a.chooseKeys(s),{immediate:!0});const l=s=>{s?a.toggle(s):a.toggleAll(),t("chosen-options",a.chosenKeys)};return(s,i)=>(c(),d("div",U,[(c(!0),d(D,null,N(a.data,({title:r,key:g,isChosen:y})=>(c(),m(_,{key:g,variant:y?"outlined":"text",onClick:o=>l(g)},{default:f(()=>[S(O(r),1)]),_:2},1032,["variant","onClick"]))),128)),s.hasAll?(c(),m(_,{key:0,variant:a.areAllChosen?"outlined":"text"+s.foo,onClick:i[0]||(i[0]=r=>l())},{default:f(()=>i[1]||(i[1]=[S(" All ")])),_:1},8,["variant"])):v("",!0)]))}}),Y=$(W,[["__scopeId","data-v-50fe08bd"]]),K={[w.turoyo]:{link:L.turoyoDictsJson.link,dicts:[{key:"ritter",title:"Ritter",isChosen:!0},{key:"jastrow",title:"Jastrow",isChosen:!1},{key:"jan",title:"XÃ«zne",isChosen:!1}]},[w.maalula]:{link:L.maalulaDictsJson.link,dicts:[{key:"arnold",title:"Arnold",isChosen:!0}]}},Z=z("simpleDictStore",()=>{const n=G("dict",[]),e=I(),{language:t}=H(),{searcher:a,searcherString:l}=F(),s=Q(),i=k(()=>{var o;return((o=K[t.value])==null?void 0:o.dicts)||[]});s.value.isDictionary&&!n.value.length&&(n.value=i.value.filter(({isChosen:o})=>o).map(({key:o})=>o));const r=k(()=>l.value?i.value.map(({key:o,title:h})=>{const b=y(o).filter(C=>a.value.regex.test(C)).map(C=>({title:"",line:C}));return{key:o,title:h,lines:b}}):[]);async function g(){var h;const o=await q.get((h=K[t.value])==null?void 0:h.link);e.value=o.data}function y(o){var h;return((h=e.value)==null?void 0:h[o])||[]}return{searcher:a,initialDicts:i,dictData:e,searcherString:l,chosenDictionaries:n,matchingDictLinesArr:r,initDictData:g}}),re=V({__name:"DictsSearch",setup(n){const e=Z();e.initDictData();const t=k(()=>e.matchingDictLinesArr.filter(({key:s})=>e.chosenDictionaries.includes(s)));function a(s){e.searcherString=s}function l(s){e.chosenDictionaries=s}return(s,i)=>(c(),d(D,null,[x(B,{class:"searcher-wrapper"},{default:f(()=>[x(J,{"searcher-string":p(e).searcherString,"corpus-name":s.corpusName,onSearcherString:a},null,8,["searcher-string","corpus-name"])]),_:1}),p(e).initialDicts.length>1?(c(),m(Y,{key:0,"options-prop":p(e).initialDicts,"chosen-options":p(e).chosenDictionaries,"has-all":"",onChosenOptions:l},null,8,["options-prop","chosen-options"])):v("",!0),(c(!0),d(D,null,N(t.value,r=>(c(),m(B,{key:r.key},{default:f(()=>[X("h1",null,O(r.title),1),r.lines.length?(c(),m(P,{key:0,"lines-matching":r.lines,searcher:p(e).searcher},null,8,["lines-matching","searcher"])):v("",!0)]),_:2},1024))),128))],64))}});export{re as _};
