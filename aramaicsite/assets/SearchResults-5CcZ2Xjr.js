import{E as k,aH as $,c as v,d as N,a as w,r as g,b as D,e as I,ah as E,o as i,f as m,k as h,g as c,B as F,h as V,p as J,V as R,F as C,_ as K,l as M,m as b,D as U,n as O}from"./index-DyHYi6uy.js";import{c as T,L as _,u as j,K as q,b as B,a as H,_ as P}from"./GrepLine.vue_vue_type_style_index_0_lang-P1-qj_pm.js";import{a as Q}from"./axios-CCb-kr4I.js";import{a as y}from"./assets-C36VHVzH.js";import{V as W}from"./VTextField-C3nyqGNo.js";import{_ as z}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-D4JTQTVD.js";function A(o){return o.split(`======
`).map(s=>s.split(`
`)).map(s=>({title:k.head(s),lines:k.tail(s)}))}const G=()=>{const o=$("search",""),t=v(()=>new T(o.value));return{searcherString:o,searcher:t}},X={[_.turoyo]:y.turoyoCorpusJson.link,[_.urmi]:y.urmiCorpusJson.link,[_.maalula]:y.maalulaDictsJson.link},Y=N("simpleCorpusStore",()=>{const o=w({}),t=w({}),a=g(),{language:s}=j(),p=v(()=>X[s.value]),{searcherString:u,searcher:r}=G(),d=v(()=>{const e=[];if(!a.value)return e;for(const l of a.value){const{title:x,lines:S}=l;for(const L of S)e.push({title:x,line:L})}return e}),f=v(()=>u.value?d.value.reduce((e,l)=>{const S=r.value.regex.test(l.line)?[l]:[];return[...e,...S]},[]):[]);async function n(){const e=await Q.get(p.value);a.value=A(e.data)}return{corporaObj:o,searcherStringsObj:t,searcher:r,searcherString:u,matchingLines:f,initCorpusData:n}}),Z={class:"searcher align-center flex-column"},ee={class:"searchers d-flex"},se={class:"input-wrapper"},ae=D({__name:"Searcher",setup(o){const t=Y(),a=g(""),s=g(!1),p=g(null),u=[n=>!!n||"Search string should not be empty"],r=v({get:()=>a.value,set:n=>{a.value=k.isString(n)?n:"",a.value||d()}}),d=()=>{t.searcherString=r.value},f=n=>{r.value=n,s.value&&d()};return I(()=>t.searcherString,n=>{a.value=n},{immediate:!0}),E(()=>{p.value=document.querySelector(".input-wrapper .v-text-field input")}),(n,e)=>(i(),m(C,null,[h("div",Z,[h("div",ee,[c(q,{onClick:e[0]||(e[0]=l=>s.value=!0)}),h("div",se,[c(W,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),rules:u,autocomplete:"off",label:"Search string",color:"primary",variant:"outlined",density:"compact",clearable:"","hide-details":"",onKeyup:F(d,["enter"])},null,8,["modelValue"])]),c(R,{ref:"search_btn",disabled:!r.value,variant:"outlined",onClick:d},{default:V(()=>e[4]||(e[4]=[J(" Search ")])),_:1},8,["disabled"])]),c(B,{value:r.value,"input-el":p.value,"input-name":"Search string",type:"regex",visible:"",onSubmit:f},null,8,["value","input-el"])]),c(H,{modelValue:s.value,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value=l),"hide-overlay":"",fullscreen:""},{default:V(()=>[c(B,{visible:s.value,value:r.value,"input-name":"Search string",onSubmit:f,"onUpdate:visible":e[2]||(e[2]=l=>s.value=l)},null,8,["visible","value"])]),_:1},8,["modelValue"])],64))}}),de=K(ae,[["__scopeId","data-v-0192a8ad"]]),te={key:0,class:"results-stats"},re={key:0,style:{color:"blueviolet"}},ne=D({__name:"SearchResults",props:{linesMatching:{},searcher:{}},setup(o){return(t,a)=>(i(),m(C,null,[t.searcher.value?(i(),m("div",te," Number of lines in output: "+M(t.linesMatching.length),1)):b("",!0),a[1]||(a[1]=h("br",null,null,-1)),t.linesMatching?(i(),U(z,{key:1,items:t.linesMatching,class:"search-results-box results"},{default:V(({items:s})=>[(i(!0),m(C,null,O(s,({line:p,title:u},r)=>(i(),m("div",{key:r,class:"lines"},[u?(i(),m("div",re,M(u),1)):b("",!0),c(P,{str:p,searcher:t.searcher},null,8,["str","searcher"]),a[0]||(a[0]=h("br",null,null,-1))]))),128))]),_:1},8,["items"])):b("",!0)],64))}}),me=K(ne,[["__scopeId","data-v-a23d703e"]]);export{de as S,me as a,Y as b,G as u};
