const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/auto-fit-height-DyrTUMHq.js","assets/index-Bc65w6Oc.js","assets/index-DzKdn0ga.css","assets/auto-fit-width-B6BzEX_t.js","assets/close-Dzx_1HuD.js","assets/do-fullscreen-CEJW-Htz.js","assets/external-link-BUT0K-so.js","assets/fast-arrow-left-BC5xnewB.js","assets/fast-arrow-right-FMCsdiHw.js","assets/minus-circle-C2oa2NY1.js","assets/nav-arrow-left-B0oRyXnx.js","assets/nav-arrow-right-CrPTuZqw.js","assets/plus-circle-BBEVS2xm.js","assets/undo-fullscreen-DH6Q0-ut.js"])))=>i.map(i=>d[i]);
var B=Object.defineProperty;var R=(r,e,t)=>e in r?B(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var d=(r,e,t)=>R(r,typeof e!="symbol"?e+"":e,t);import{d as V,a6 as b,M as h,a7 as x,R as N,c as T,b as C,a8 as L,a9 as i,m as v,o as O,D as S,aa as M,p as X}from"./index-Bc65w6Oc.js";import{o as f}from"./index-Dob3nYDb.js";var E={exports:{}},A={exports:{}};(function(){function r(e){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("toArabic expects a string");if(/^nulla$/i.test(e)||!e.length)return 0;if(e=e.toUpperCase().match(/^(M{0,3})(CM|DC{0,3}|CD|C{0,3})(XC|LX{0,3}|XL|X{0,3})(IX|VI{0,3}|IV|I{0,3})$/),!e)throw new Error("toArabic expects a valid roman number");var t=0;return t+=e[1].length*1e3,e[2]==="CM"?t+=900:e[2]==="CD"?t+=400:t+=e[2].length*100+(e[2][0]==="D"?400:0),e[3]==="XC"?t+=90:e[3]==="XL"?t+=40:t+=e[3].length*10+(e[3][0]==="L"?40:0),e[4]==="IX"?t+=9:e[4]==="IV"?t+=4:t+=e[4].length*1+(e[4][0]==="V"?4:0),t}A.exports=r})();var $=A.exports,D={exports:{}};(function(){function r(t,o,n,s){var a="";switch(t){case 0:return a;case 9:return o+s;case 4:return o+n}for(t>=5&&(a=n,t-=5);t-- >0;)a+=o;return a}function e(t){if(t instanceof Number&&(t=parseInt(t,10)),(typeof t=="string"||t instanceof String)&&(t=parseInt(t,10),isNaN(t)))throw new TypeError("toArabic expects a number");if(typeof t!="number")throw new TypeError("toArabic expects a number");if(isNaN(t))throw new TypeError("toArabic expects a real number");if(t<0)throw new Error("toArabic cannot express negative numbers");if(t>3999)throw new Error("toArabic cannot express numbers over 3999");if(t===0)return"nulla";var o="";return o+=r(Math.floor(t/1e3),"M","",""),t%=1e3,o+=r(Math.floor(t/100),"C","D","M"),t%=100,o+=r(Math.floor(t/10),"X","L","C"),t%=10,o+=r(t,"I","V","X"),o}D.exports=e})();var U=D.exports;(function(){E.exports={toArabic:$,toRoman:U}})();var k=E.exports;class W{constructor(e){d(this,"upgradeQueuePromise",Promise.resolve());this.dbName=e}async getVersion(){return new Promise((e,t)=>{const o=indexedDB.open(this.dbName);o.onsuccess=()=>{const n=o.result,s=n.version;n.close(),e(s)},o.onerror=()=>t(o.error)}).catch(()=>1)}async _openDBRaw(e){let t=await f(this.dbName);if(t.objectStoreNames.contains(e))return t.close(),t=await f(this.dbName),t;t.close();const n=await this.getVersion()+1;return await f(this.dbName,n,{upgrade(s){s.objectStoreNames.contains(e)||s.createObjectStore(e)}})}async _openDB(e){return this.upgradeQueuePromise=this.upgradeQueuePromise.then(this._openDBRaw.bind(this,e)),await this.upgradeQueuePromise,await f(this.dbName)}async set(e,t,o){const s=(await this._openDB(e)).transaction(e,"readwrite");await s.store.put(o,t),await s.done}async get(e,t){const n=(await this._openDB(e)).transaction(e,"readonly"),s=await n.store.get(t);return await n.done,s}}const p=new Map;function w(r){return p.has(r)||p.set(r,new W(r)),p.get(r)}class P{static async get(e,t,o){try{return await w(e).get(t,o)}catch(n){window.console.error(n)}}static async set(e,t,o,n){try{return await w(e).set(t,o,n)}catch(s){window.console.error(s)}}}const _=18,I=-1;function j(r){if(!h.isNaN(Number(r))){let e=Number(r);return e>=1002&&(e-=1),e+_}try{const e=k.toArabic(r);return h.isNumber(e)?e+I:1}catch{return 1}}function Q(r){if(r<=_)return k.toRoman(r-I);let e=r-_;return e>=1002&&(e+=1),String(e)}const y=[{title:"Das Neuwestaramäische. VI. Wörterbuch",shortTitle:"Arnold. NWA Wörterbuch",author:"Werner Arnold",year:2019,linkBase:"https://evb0110.github.io/static/pdf/Arnold-Woerterbuch/pg_",pageCount:1035,getPageNumber:j,getPageString:Q}];let c;const q=(async()=>{c=await P.get("bookStore","cache","uint")||new Map})(),K=V("bookStore",()=>{const r=b(async()=>{const o=y.map(x),s=await Promise.all(o);return y.map((a,m)=>{const u=s[m];return{...a,hash:u,to:{name:N.Book,params:{hash:u}}}})},[]),e=T(()=>h.keyBy(r.value,"hash"));async function t(o,n){await q;const s=JSON.stringify({hash:o,pageNumber:n});if(c.has(s)){const g=c.get(s);return g?g.slice(0):null}const a=e.value[o];if(!a)return null;const u=`${a.linkBase}${n.toString().padStart(4,"0")}.pdf`,l=await H(u);return l&&(c.set(s,l),P.set("bookStore","cache","uint",c),l.slice(0))}return{books:r,bookByHash:e,getUintPromise:t}});async function H(r){try{const e=await fetch(r);if(!e.ok)return null;const o=await(await e.blob()).arrayBuffer();return new Uint8Array(o)}catch{return null}}const F=(r,e,t)=>{const o=r[e];return o?typeof o=="function"?o():Promise.resolve(o):new Promise((n,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Y=C({__name:"Icon",props:{name:{},width:{default:"20"},height:{default:"20"},stroke:{default:"currentColor"},fill:{default:"none"}},setup(r){const e=b(()=>r.name&&L(()=>F(Object.assign({"./svg/auto-fit-height.svg":()=>i(()=>import("./auto-fit-height-DyrTUMHq.js"),__vite__mapDeps([0,1,2])),"./svg/auto-fit-width.svg":()=>i(()=>import("./auto-fit-width-B6BzEX_t.js"),__vite__mapDeps([3,1,2])),"./svg/close.svg":()=>i(()=>import("./close-Dzx_1HuD.js"),__vite__mapDeps([4,1,2])),"./svg/do-fullscreen.svg":()=>i(()=>import("./do-fullscreen-CEJW-Htz.js"),__vite__mapDeps([5,1,2])),"./svg/external-link.svg":()=>i(()=>import("./external-link-BUT0K-so.js"),__vite__mapDeps([6,1,2])),"./svg/fast-arrow-left.svg":()=>i(()=>import("./fast-arrow-left-BC5xnewB.js"),__vite__mapDeps([7,1,2])),"./svg/fast-arrow-right.svg":()=>i(()=>import("./fast-arrow-right-FMCsdiHw.js"),__vite__mapDeps([8,1,2])),"./svg/minus-circle.svg":()=>i(()=>import("./minus-circle-C2oa2NY1.js"),__vite__mapDeps([9,1,2])),"./svg/nav-arrow-left.svg":()=>i(()=>import("./nav-arrow-left-B0oRyXnx.js"),__vite__mapDeps([10,1,2])),"./svg/nav-arrow-right.svg":()=>i(()=>import("./nav-arrow-right-CrPTuZqw.js"),__vite__mapDeps([11,1,2])),"./svg/plus-circle.svg":()=>i(()=>import("./plus-circle-BBEVS2xm.js"),__vite__mapDeps([12,1,2])),"./svg/undo-fullscreen.svg":()=>i(()=>import("./undo-fullscreen-DH6Q0-ut.js"),__vite__mapDeps([13,1,2]))}),`./svg/${r.name}.svg`,3)));return(t,o)=>v(e)?(O(),S(M(v(e)),{key:0,width:t.width,height:t.height,stroke:t.stroke,fill:t.fill},null,8,["width","height","stroke","fill"])):X("",!0)}});export{Y as _,K as u};
