const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/auto-fit-height-CSdS1vEx.js","assets/index-BndXiBJs.js","assets/index-BOsNnDAr.css","assets/auto-fit-width-CWHrd-D9.js","assets/do-fullscreen-BGqpQa_p.js","assets/external-link-UHIzLhOw.js","assets/fast-arrow-left-BIQvLvEX.js","assets/fast-arrow-right-C1-y8kn8.js","assets/minus-circle-BY8Mbr7t.js","assets/nav-arrow-left-8xy0d5nE.js","assets/nav-arrow-right-Cm62oSR2.js","assets/plus-circle-CSfuV0Iu.js","assets/undo-fullscreen-CKHoNpNj.js"])))=>i.map(i=>d[i]);
var B=Object.defineProperty;var R=(r,e,t)=>e in r?B(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var d=(r,e,t)=>R(r,typeof e!="symbol"?e+"":e,t);import{d as V,a5 as b,M as p,a6 as x,R as N,c as C,b as T,a7 as L,a8 as i,m as w,o as O,D as S,a9 as M,p as X}from"./index-BndXiBJs.js";import{o as f}from"./index-Dob3nYDb.js";var A={exports:{}},E={exports:{}};(function(){function r(e){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("toArabic expects a string");if(/^nulla$/i.test(e)||!e.length)return 0;if(e=e.toUpperCase().match(/^(M{0,3})(CM|DC{0,3}|CD|C{0,3})(XC|LX{0,3}|XL|X{0,3})(IX|VI{0,3}|IV|I{0,3})$/),!e)throw new Error("toArabic expects a valid roman number");var t=0;return t+=e[1].length*1e3,e[2]==="CM"?t+=900:e[2]==="CD"?t+=400:t+=e[2].length*100+(e[2][0]==="D"?400:0),e[3]==="XC"?t+=90:e[3]==="XL"?t+=40:t+=e[3].length*10+(e[3][0]==="L"?40:0),e[4]==="IX"?t+=9:e[4]==="IV"?t+=4:t+=e[4].length*1+(e[4][0]==="V"?4:0),t}E.exports=r})();var $=E.exports,D={exports:{}};(function(){function r(t,o,s,n){var a="";switch(t){case 0:return a;case 9:return o+n;case 4:return o+s}for(t>=5&&(a=s,t-=5);t-- >0;)a+=o;return a}function e(t){if(t instanceof Number&&(t=parseInt(t,10)),(typeof t=="string"||t instanceof String)&&(t=parseInt(t,10),isNaN(t)))throw new TypeError("toArabic expects a number");if(typeof t!="number")throw new TypeError("toArabic expects a number");if(isNaN(t))throw new TypeError("toArabic expects a real number");if(t<0)throw new Error("toArabic cannot express negative numbers");if(t>3999)throw new Error("toArabic cannot express numbers over 3999");if(t===0)return"nulla";var o="";return o+=r(Math.floor(t/1e3),"M","",""),t%=1e3,o+=r(Math.floor(t/100),"C","D","M"),t%=100,o+=r(Math.floor(t/10),"X","L","C"),t%=10,o+=r(t,"I","V","X"),o}D.exports=e})();var U=D.exports;(function(){A.exports={toArabic:$,toRoman:U}})();var k=A.exports;class W{constructor(e){d(this,"upgradeQueuePromise",Promise.resolve());this.dbName=e}async getVersion(){return new Promise((e,t)=>{const o=indexedDB.open(this.dbName);o.onsuccess=()=>{const s=o.result,n=s.version;s.close(),e(n)},o.onerror=()=>t(o.error)}).catch(()=>1)}async _openDBRaw(e){let t=await f(this.dbName);if(t.objectStoreNames.contains(e))return t.close(),t=await f(this.dbName),t;t.close();const s=await this.getVersion()+1;return await f(this.dbName,s,{upgrade(n){n.objectStoreNames.contains(e)||n.createObjectStore(e)}})}async _openDB(e){return this.upgradeQueuePromise=this.upgradeQueuePromise.then(this._openDBRaw.bind(this,e)),await this.upgradeQueuePromise,await f(this.dbName)}async set(e,t,o){const n=(await this._openDB(e)).transaction(e,"readwrite");await n.store.put(o,t),await n.done}async get(e,t){const s=(await this._openDB(e)).transaction(e,"readonly"),n=await s.store.get(t);return await s.done,n}}const h=new Map;function v(r){return h.has(r)||h.set(r,new W(r)),h.get(r)}class P{static async get(e,t,o){try{return await v(e).get(t,o)}catch(s){window.console.error(s)}}static async set(e,t,o,s){try{return await v(e).set(t,o,s)}catch(n){window.console.error(n)}}}const m=18,I=-1;function j(r){if(!p.isNaN(Number(r))){let e=Number(r);return e>=1002&&(e-=1),e+m}try{const e=k.toArabic(r);return p.isNumber(e)?e+I:1}catch{return 1}}function Q(r){if(r<=m)return k.toRoman(r-I);let e=r-m;return e>=1002&&(e+=1),String(e)}const y=[{title:"Das Neuwestaramäische. VI. Wörterbuch",shortTitle:"Arnold. NWA Wörterbuch",author:"Werner Arnold",year:2019,linkBase:"https://evb0110.github.io/static/pdf/Arnold-Woerterbuch/pg_",pageCount:1035,getPageNumber:j,getPageString:Q}];let c;const q=(async()=>{c=await P.get("bookStore","cache","uint")||new Map})(),K=V("bookStore",()=>{const r=b(async()=>{const o=y.map(x),n=await Promise.all(o);return y.map((a,_)=>{const u=n[_];return{...a,hash:u,to:{name:N.Book,params:{hash:u}}}})},[]),e=C(()=>p.keyBy(r.value,"hash"));async function t(o,s){await q;const n=JSON.stringify({hash:o,pageNumber:s});if(c.has(n)){const g=c.get(n);return g?g.slice(0):null}const a=e.value[o];if(!a)return null;const u=`${a.linkBase}${s.toString().padStart(4,"0")}.pdf`,l=await H(u);return l&&(c.set(n,l),P.set("bookStore","cache","uint",c),l.slice(0))}return{books:r,bookByHash:e,getUintPromise:t}});async function H(r){try{const e=await fetch(r);if(!e.ok)return null;const o=await(await e.blob()).arrayBuffer();return new Uint8Array(o)}catch{return null}}const F=(r,e,t)=>{const o=r[e];return o?typeof o=="function"?o():Promise.resolve(o):new Promise((s,n)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==t?". Note that variables only represent file names one level deep.":""))))})},Y=T({__name:"Icon",props:{name:{},width:{default:"20"},height:{default:"20"},stroke:{default:"currentColor"},fill:{default:"none"}},setup(r){const e=b(()=>r.name&&L(()=>F(Object.assign({"./svg/auto-fit-height.svg":()=>i(()=>import("./auto-fit-height-CSdS1vEx.js"),__vite__mapDeps([0,1,2])),"./svg/auto-fit-width.svg":()=>i(()=>import("./auto-fit-width-CWHrd-D9.js"),__vite__mapDeps([3,1,2])),"./svg/do-fullscreen.svg":()=>i(()=>import("./do-fullscreen-BGqpQa_p.js"),__vite__mapDeps([4,1,2])),"./svg/external-link.svg":()=>i(()=>import("./external-link-UHIzLhOw.js"),__vite__mapDeps([5,1,2])),"./svg/fast-arrow-left.svg":()=>i(()=>import("./fast-arrow-left-BIQvLvEX.js"),__vite__mapDeps([6,1,2])),"./svg/fast-arrow-right.svg":()=>i(()=>import("./fast-arrow-right-C1-y8kn8.js"),__vite__mapDeps([7,1,2])),"./svg/minus-circle.svg":()=>i(()=>import("./minus-circle-BY8Mbr7t.js"),__vite__mapDeps([8,1,2])),"./svg/nav-arrow-left.svg":()=>i(()=>import("./nav-arrow-left-8xy0d5nE.js"),__vite__mapDeps([9,1,2])),"./svg/nav-arrow-right.svg":()=>i(()=>import("./nav-arrow-right-Cm62oSR2.js"),__vite__mapDeps([10,1,2])),"./svg/plus-circle.svg":()=>i(()=>import("./plus-circle-CSfuV0Iu.js"),__vite__mapDeps([11,1,2])),"./svg/undo-fullscreen.svg":()=>i(()=>import("./undo-fullscreen-CKHoNpNj.js"),__vite__mapDeps([12,1,2]))}),`./svg/${r.name}.svg`,3)));return(t,o)=>w(e)?(O(),S(M(w(e)),{key:0,width:t.width,height:t.height,stroke:t.stroke,fill:t.fill},null,8,["width","height","stroke","fill"])):X("",!0)}});export{Y as _,K as u};
