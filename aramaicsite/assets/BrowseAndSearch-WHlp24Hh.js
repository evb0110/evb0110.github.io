var Vt=Object.defineProperty;var wt=(e,t,a)=>t in e?Vt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var M=(e,t,a)=>wt(e,typeof t!="symbol"?t+"":t,a);import{b7 as St,E as ce,d as Tt,c as b,b8 as Ct,r as I,m as j,b as ne,b9 as _t,o as A,f as E,F as U,i as Se,D as ae,h as le,j as xe,k as Ve,V as Le,p as ie,v as Z,aR as ot,Y as ut,Z as rt,av as At,x as Te,ba as It,q as de,P as it,T as Pt,ad as Et,t as oe,s as ye,g as c,L as q,S as ct,aK as Lt,aL as Dt,aa as Bt,aq as Rt,ar as Nt,bb as Mt,a0 as we,a2 as qt,aO as $t,W as Ke,X as Ot,aQ as Ft,bc as Ht,am as ue,al as re,a6 as Ut,aJ as De,bd as zt,aS as Kt,as as Gt,a8 as jt,at as Wt,ae as Qt,aW as Xt,be as Ge,ao as ke,ap as Jt,ac as Yt,Q as Zt,ah as ea,a1 as ta,U as G,b3 as aa,a4 as qe,bf as je,bg as la,e as W,ax as fe,bh as Ae,bi as na,M as dt,$ as sa,bj as oa,bk as vt,bl as ua,w as Be,bm as ra,b2 as Ie,bn as mt,bo as ia,ak as ca,bp as da,aX as he,a5 as ge,an as va,bq as ma,br as fa,bs as ha,bt as We,bu as Qe,bv as pa,bw as Xe,bx as ya,by as ba,bz as ft,n as R,l as Re,_ as ve,A as ga,aD as ka,ag as $e,bA as xa,bB as Va,bC as ht,B as wa,af as Sa,bD as Ta,bE as Ca}from"./index-DgXQk_m9.js";import{u as pe}from"./index-DJNWl3LD.js";import{u as _a,L as Je,D as Ye,K as Ze,a as Aa,b as me,_ as Ia,s as Pa,S as et}from"./GrepLine.vue_vue_type_style_index_0_lang-CMOKbFIC.js";import{u as Ea,A as tt}from"./assetsStore-CTTfBkCN.js";import{V as Ne,m as La}from"./VTextField-OXKPsJz9.js";import{h as Da}from"./VInput-Duh-7qVz.js";import{f as pt}from"./forwardRefs-DWGaNmQL.js";import{V as at,m as Ba,a as lt,g as Ra}from"./VOverlay-CTlrN9Qx.js";import{a as yt,V as Na}from"./VDialog-DnuVWw1m.js";import{V as Ma}from"./VCheckboxBtn-OfqC50sp.js";import{m as qa,V as nt}from"./VSlideGroup-DxxAQP2X.js";import{_ as $a}from"./CopyResults.vue_vue_type_script_setup_true_lang-BQpm2CAA.js";class Oe{constructor({volume:t,texts:a}){M(this,"volumeName");M(this,"texts");this.texts=a.map(u=>({volumeName:t,...u})).map(Fe.instantiate),this.volumeName=t}get totalContents(){return ce.flatMap(this.texts,"contents")}static instantiate(t){return new Oe(t)}}class Fe{constructor({volumeName:t,textNumber:a,textName:u,contents:n}){M(this,"volumeName");M(this,"textNumber");M(this,"_textName");M(this,"rawContents");this.volumeName=t,this.textNumber=a,this._textName=u,this.rawContents=n}get contents(){return this.rawContents.map(t=>({volumeName:this.volumeName,textNumber:this.textNumber,textName:this.textName,...t})).map(He.instantiate)}get textName(){return this._textName.replace(/\.txt/,"")}set textName(t){this._textName=t}static instantiate(t){return new Fe(t)}}class He{constructor({volumeName:t,textNumber:a,textName:u,lineNumber:n,textus:r,versio:d}){M(this,"volumeName");M(this,"textNumber");M(this,"textName");M(this,"lineNumber");M(this,"textus");M(this,"versio");this.volumeName=t,this.textNumber=a,this.textName=u,this.lineNumber=n,this.textus=r,this.versio=d}get title(){return this.volumeName+": "+this.textName}get hash(){return"h"+St(this)}static instantiate(t){return new He(t)}}const Oa=Tt("corpusWithTranslationStore",()=>{const e=Ea(),t=_a(),a=b(()=>{switch(t.value){case Je.maalula:return tt.maalulaCorpusJson;case Je.turoyo:default:return tt.turoyoNewCorpusJson}}),u=b(()=>{var d;return(d=e[a.value])==null?void 0:d.data}),n=Ct(()=>{var d;return((d=u.value)==null?void 0:d.map(Oe.instantiate))||[]},[]),r=b(()=>ce.flatMap(n.value,"totalContents"));return{corpusArray:n,corpusLines:r}}),Fa=(e,t)=>{const a=I(e.indexOf(j(t))||0),u=b(()=>e[a.value]);function n(){a.value=(a.value+1)%e.length}return function(){return n(),u.value}},Ha={class:"d-flex ga-1"},Ua=ne({__name:"ModeSwitcher",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=_t(e,"modelValue"),a=Fa(Ye,t);function u(){t.value=a()}return(n,r)=>(A(),E("div",Ha,[(A(!0),E(U,null,Se(j(Ye),d=>(A(),ae(Le,{key:d,variant:d===t.value?"outlined":"text",class:"d-none d-sm-block",size:"small",onClick:i=>t.value=d},{default:le(()=>[xe(Ve(d)+" mode ",1)]),_:2},1032,["variant","onClick"]))),128)),t.value?(A(),ae(Le,{key:0,class:"d-sm-none",variant:"outlined",onClick:r[0]||(r[0]=d=>u())},{default:le(()=>[xe(Ve(t.value)+" mode ",1)]),_:1})):ie("",!0)]))}}),bt=Symbol.for("vuetify:v-chip-group"),za=Z({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:It},...qa(),...Te(),...At({selectedClass:"v-chip--selected"}),...rt(),...ut(),...ot({variant:"tonal"})},"VChipGroup");de()({name:"VChipGroup",props:za(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const{themeClasses:u}=it(e),{isSelected:n,select:r,next:d,prev:i,selected:s}=Pt(e,bt);return Et({VChip:{color:oe(e,"color"),disabled:oe(e,"disabled"),filter:oe(e,"filter"),variant:oe(e,"variant")}}),ye(()=>{const v=nt.filterProps(e);return c(nt,q(v,{class:["v-chip-group",{"v-chip-group--column":e.column},u.value,e.class],style:e.style}),{default:()=>{var g;return[(g=a.default)==null?void 0:g.call(a,{isSelected:n,select:r,next:d,prev:i,selected:s.value})]}})}),{}}});const Ka=Z({activeClass:String,appendAvatar:String,appendIcon:ke,closable:Boolean,closeIcon:{type:ke,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:ke,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:Ge(),onClickOnce:Ge(),...Xt(),...Te(),...Qt(),...Wt(),...jt(),...Gt(),...Kt(),...zt(),...rt({tag:"span"}),...ut(),...ot({variant:"tonal"})},"VChip"),Ga=de()({name:"VChip",directives:{Ripple:Jt},props:Ka(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:a,emit:u,slots:n}=t;const{t:r}=ct(),{borderClasses:d}=Lt(e),{colorClasses:i,colorStyles:s,variantClasses:v}=Dt(e),{densityClasses:g}=Bt(e),{elevationClasses:V}=Rt(e),{roundedClasses:f}=Nt(e),{sizeClasses:p}=Mt(e),{themeClasses:k}=it(e),x=we(e,"modelValue"),l=qt(e,bt,!1),m=$t(e,a),y=b(()=>e.link!==!1&&m.isLink.value),T=b(()=>!e.disabled&&e.link!==!1&&(!!l||e.link||m.isClickable.value)),C=b(()=>({"aria-label":r(e.closeLabel),onClick(w){w.preventDefault(),w.stopPropagation(),x.value=!1,u("click:close",w)}}));function D(w){var z;u("click",w),T.value&&((z=m.navigate)==null||z.call(m,w),l==null||l.toggle())}function O(w){(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),D(w))}return()=>{const w=m.isLink.value?"a":e.tag,z=!!(e.appendIcon||e.appendAvatar),Q=!!(z||n.append),K=!!(n.close||e.closable),X=!!(n.filter||e.filter)&&l,ee=!!(e.prependIcon||e.prependAvatar),J=!!(ee||n.prepend),te=!l||l.isSelected.value;return x.value&&Ke(c(w,q({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":T.value,"v-chip--filter":X,"v-chip--pill":e.pill},k.value,d.value,te?i.value:void 0,g.value,V.value,f.value,p.value,v.value,l==null?void 0:l.selectedClass.value,e.class],style:[te?s.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:T.value?0:void 0,onClick:D,onKeydown:T.value&&!y.value&&O},m.linkProps),{default:()=>{var $;return[Ft(T.value,"v-chip"),X&&c(Ht,{key:"filter"},{default:()=>[Ke(c("div",{class:"v-chip__filter"},[n.filter?c(re,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},n.filter):c(ue,{key:"filter-icon",icon:e.filterIcon},null)]),[[Ut,l.isSelected.value]])]}),J&&c("div",{key:"prepend",class:"v-chip__prepend"},[n.prepend?c(re,{key:"prepend-defaults",disabled:!ee,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},n.prepend):c(U,null,[e.prependIcon&&c(ue,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&c(De,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),c("div",{class:"v-chip__content","data-no-activator":""},[(($=n.default)==null?void 0:$.call(n,{isSelected:l==null?void 0:l.isSelected.value,selectedClass:l==null?void 0:l.selectedClass.value,select:l==null?void 0:l.select,toggle:l==null?void 0:l.toggle,value:l==null?void 0:l.value.value,disabled:e.disabled}))??e.text]),Q&&c("div",{key:"append",class:"v-chip__append"},[n.append?c(re,{key:"append-defaults",disabled:!z,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},n.append):c(U,null,[e.appendIcon&&c(ue,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&c(De,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),K&&c("button",q({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},C.value),[n.close?c(re,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},n.close):c(ue,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Ot("ripple"),T.value&&e.ripple,null]])}}}),ja=Z({id:String,submenu:Boolean,...dt(Ba({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:yt}}),["absolute"])},"VMenu"),Wa=de()({name:"VMenu",props:ja(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const u=we(e,"modelValue"),{scopeId:n}=Yt(),{isRtl:r}=Zt(),d=ea(),i=b(()=>e.id||`v-menu-${d}`),s=I(),v=ta(lt,null),g=G(new Set);sa(lt,{register(){g.value.add(d)},unregister(){g.value.delete(d)},closeParents(l){setTimeout(()=>{var m;!g.value.size&&!e.persistent&&(l==null||(m=s.value)!=null&&m.contentEl&&!oa(l,s.value.contentEl))&&(u.value=!1,v==null||v.closeParents())},40)}}),aa(()=>{v==null||v.unregister(),document.removeEventListener("focusin",V)}),la(()=>u.value=!1);async function V(l){var T,C,D;const m=l.relatedTarget,y=l.target;await qe(),u.value&&m!==y&&((T=s.value)!=null&&T.contentEl)&&((C=s.value)!=null&&C.globalTop)&&![document,s.value.contentEl].includes(y)&&!s.value.contentEl.contains(y)&&((D=je(s.value.contentEl)[0])==null||D.focus())}W(u,l=>{l?(v==null||v.register(),fe&&document.addEventListener("focusin",V,{once:!0})):(v==null||v.unregister(),fe&&document.removeEventListener("focusin",V))},{immediate:!0});function f(l){v==null||v.closeParents(l)}function p(l){var m,y,T,C,D;if(!e.disabled)if(l.key==="Tab"||l.key==="Enter"&&!e.closeOnContentClick){if(l.key==="Enter"&&(l.target instanceof HTMLTextAreaElement||l.target instanceof HTMLInputElement&&l.target.closest("form")))return;l.key==="Enter"&&l.preventDefault(),na(je((m=s.value)==null?void 0:m.contentEl,!1),l.shiftKey?"prev":"next",w=>w.tabIndex>=0)||(u.value=!1,(T=(y=s.value)==null?void 0:y.activatorEl)==null||T.focus())}else e.submenu&&l.key===(r.value?"ArrowRight":"ArrowLeft")&&(u.value=!1,(D=(C=s.value)==null?void 0:C.activatorEl)==null||D.focus())}function k(l){var y;if(e.disabled)return;const m=(y=s.value)==null?void 0:y.contentEl;m&&u.value?l.key==="ArrowDown"?(l.preventDefault(),l.stopImmediatePropagation(),Ae(m,"next")):l.key==="ArrowUp"?(l.preventDefault(),l.stopImmediatePropagation(),Ae(m,"prev")):e.submenu&&(l.key===(r.value?"ArrowRight":"ArrowLeft")?u.value=!1:l.key===(r.value?"ArrowLeft":"ArrowRight")&&(l.preventDefault(),Ae(m,"first"))):(e.submenu?l.key===(r.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(l.key))&&(u.value=!0,l.preventDefault(),setTimeout(()=>setTimeout(()=>k(l))))}const x=b(()=>q({"aria-haspopup":"menu","aria-expanded":String(u.value),"aria-owns":i.value,onKeydown:k},e.activatorProps));return ye(()=>{const l=at.filterProps(e);return c(at,q({ref:s,id:i.value,class:["v-menu",e.class],style:e.style},l,{modelValue:u.value,"onUpdate:modelValue":m=>u.value=m,absolute:!0,activatorProps:x.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":f,onKeydown:p},n),{activator:a.activator,default:function(){for(var m=arguments.length,y=new Array(m),T=0;T<m;T++)y[T]=arguments[T];return c(re,{root:"VMenu"},{default:()=>{var C;return[(C=a.default)==null?void 0:C.call(a,...y)]}})}})}),pt({id:i,ΨopenChildren:g},s)}}),Qa=Z({renderless:Boolean,...Te()},"VVirtualScrollItem"),Xa=de()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Qa(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:a,emit:u,slots:n}=t;const{resizeRef:r,contentRect:d}=vt(void 0,"border");W(()=>{var i;return(i=d.value)==null?void 0:i.height},i=>{i!=null&&u("update:height",i)}),ye(()=>{var i,s;return e.renderless?c(U,null,[(i=n.default)==null?void 0:i.call(n,{itemRef:r})]):c("div",q({ref:r,class:["v-virtual-scroll__item",e.class],style:e.style},a),[(s=n.default)==null?void 0:s.call(n)])})}}),Ja=-1,Ya=1,Pe=100,Za=Z({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function el(e,t){const a=ua(),u=G(0);Be(()=>{u.value=parseFloat(e.itemHeight||0)});const n=G(0),r=G(Math.ceil((parseInt(e.height)||a.height.value)/(u.value||16))||1),d=G(0),i=G(0),s=I(),v=I();let g=0;const{resizeRef:V,contentRect:f}=vt();Be(()=>{V.value=s.value});const p=b(()=>{var o;return s.value===document.documentElement?a.height.value:((o=f.value)==null?void 0:o.height)||parseInt(e.height)||0}),k=b(()=>!!(s.value&&v.value&&p.value&&u.value));let x=Array.from({length:t.value.length}),l=Array.from({length:t.value.length});const m=G(0);let y=-1;function T(o){return x[o]||u.value}const C=ra(()=>{const o=performance.now();l[0]=0;const h=t.value.length;for(let _=1;_<=h-1;_++)l[_]=(l[_-1]||0)+T(_-1);m.value=Math.max(m.value,performance.now()-o)},m),D=W(k,o=>{o&&(D(),g=v.value.offsetTop,C.immediate(),$(),~y&&qe(()=>{fe&&window.requestAnimationFrame(()=>{be(y),y=-1})}))});mt(()=>{C.clear()});function O(o,h){const _=x[o],P=u.value;u.value=P?Math.min(u.value,h):h,(_!==h||P!==u.value)&&(x[o]=h,C())}function w(o){return o=Ie(o,0,t.value.length-1),l[o]||0}function z(o){return tl(l,o)}let Q=0,K=0,X=0;W(p,(o,h)=>{h&&($(),o<h&&requestAnimationFrame(()=>{K=0,$()}))});function ee(){if(!s.value||!v.value)return;const o=s.value.scrollTop,h=performance.now();h-X>500?(K=Math.sign(o-Q),g=v.value.offsetTop):K=o-Q,Q=o,X=h,$()}function J(){!s.value||!v.value||(K=0,X=0,$())}let te=-1;function $(){cancelAnimationFrame(te),te=requestAnimationFrame(Ce)}function Ce(){if(!s.value||!p.value)return;const o=Q-g,h=Math.sign(K),_=Math.max(0,o-Pe),P=Ie(z(_),0,t.value.length),F=o+p.value+Pe,S=Ie(z(F)+1,P+1,t.value.length);if((h!==Ja||P<n.value)&&(h!==Ya||S>r.value)){const L=w(n.value)-w(P),B=w(S)-w(r.value);Math.max(L,B)>Pe?(n.value=P,r.value=S):(P<=0&&(n.value=P),S>=t.value.length&&(r.value=S))}d.value=w(n.value),i.value=w(t.value.length)-w(r.value)}function be(o){const h=w(o);!s.value||o&&!h?y=o:s.value.scrollTop=h}const _e=b(()=>t.value.slice(n.value,r.value).map((o,h)=>({raw:o,index:h+n.value})));return W(t,()=>{x=Array.from({length:t.value.length}),l=Array.from({length:t.value.length}),C.immediate(),$()},{deep:!0}),{calculateVisibleItems:$,containerRef:s,markerRef:v,computedItems:_e,paddingTop:d,paddingBottom:i,scrollToIndex:be,handleScroll:ee,handleScrollend:J,handleItemResize:O}}function tl(e,t){let a=e.length-1,u=0,n=0,r=null,d=-1;if(e[a]<t)return a;for(;u<=a;)if(n=u+a>>1,r=e[n],r>t)a=n-1;else if(r<t)d=n,u=n+1;else return r===t?n:u;return d}const al=Z({items:{type:Array,default:()=>[]},renderless:Boolean,...Za(),...Te(),...va()},"VVirtualScroll"),ll=de()({name:"VVirtualScroll",props:al(),setup(e,t){let{slots:a}=t;const u=ia("VVirtualScroll"),{dimensionStyles:n}=ca(e),{calculateVisibleItems:r,containerRef:d,markerRef:i,handleScroll:s,handleScrollend:v,handleItemResize:g,scrollToIndex:V,paddingTop:f,paddingBottom:p,computedItems:k}=el(e,oe(e,"items"));return da(()=>e.renderless,()=>{function x(){var y,T;const m=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";d.value===document.documentElement?(document[m]("scroll",s,{passive:!0}),document[m]("scrollend",v)):((y=d.value)==null||y[m]("scroll",s,{passive:!0}),(T=d.value)==null||T[m]("scrollend",v))}he(()=>{d.value=Ra(u.vnode.el,!0),x(!0)}),mt(x)}),ye(()=>{const x=k.value.map(l=>c(Xa,{key:l.index,renderless:e.renderless,"onUpdate:height":m=>g(l.index,m)},{default:m=>{var y;return(y=a.default)==null?void 0:y.call(a,{item:l.raw,index:l.index,...m})}}));return e.renderless?c(U,null,[c("div",{ref:i,class:"v-virtual-scroll__spacer",style:{paddingTop:ge(f.value)}},null),x,c("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ge(p.value)}},null)]):c("div",{ref:d,class:["v-virtual-scroll",e.class],onScrollPassive:s,onScrollend:v,style:[n.value,e.style]},[c("div",{ref:i,class:"v-virtual-scroll__container",style:{paddingTop:ge(f.value),paddingBottom:ge(p.value)}},[x])])}),{calculateVisibleItems:r,scrollToIndex:V}}});function nl(e,t){const a=G(!1);let u;function n(i){cancelAnimationFrame(u),a.value=!0,u=requestAnimationFrame(()=>{u=requestAnimationFrame(()=>{a.value=!1})})}async function r(){await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>{if(a.value){const s=W(a,()=>{s(),i()})}else i()})}async function d(i){var g,V;if(i.key==="Tab"&&((g=t.value)==null||g.focus()),!["PageDown","PageUp","Home","End"].includes(i.key))return;const s=(V=e.value)==null?void 0:V.$el;if(!s)return;(i.key==="Home"||i.key==="End")&&s.scrollTo({top:i.key==="Home"?0:s.scrollHeight,behavior:"smooth"}),await r();const v=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(i.key==="PageDown"||i.key==="Home"){const f=s.getBoundingClientRect().top;for(const p of v)if(p.getBoundingClientRect().top>=f){p.focus();break}}else{const f=s.getBoundingClientRect().bottom;for(const p of[...v].reverse())if(p.getBoundingClientRect().bottom<=f){p.focus();break}}}return{onScrollPassive:n,onKeydown:d}}const sl=Z({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ke,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...ba({itemChildren:!1})},"Select"),ol=Z({...sl(),...dt(La({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ya({transition:{component:yt}})},"VSelect"),st=de()({name:"VSelect",props:ol(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:a}=t;const{t:u}=ct(),n=I(),r=I(),d=I(),i=we(e,"menu"),s=b({get:()=>i.value,set:o=>{var h;i.value&&!o&&((h=r.value)!=null&&h.ΨopenChildren.size)||(i.value=o)}}),{items:v,transformIn:g,transformOut:V}=ma(e),f=we(e,"modelValue",[],o=>g(o===null?[null]:fa(o)),o=>{const h=V(o);return e.multiple?h:h[0]??null}),p=b(()=>typeof e.counterValue=="function"?e.counterValue(f.value):typeof e.counterValue=="number"?e.counterValue:f.value.length),k=Da(),x=b(()=>f.value.map(o=>o.value)),l=G(!1),m=b(()=>s.value?e.closeText:e.openText);let y="",T;const C=b(()=>e.hideSelected?v.value.filter(o=>!f.value.some(h=>e.valueComparator(h,o))):v.value),D=b(()=>e.hideNoData&&!C.value.length||e.readonly||(k==null?void 0:k.isReadonly.value)),O=b(()=>{var o;return{...e.menuProps,activatorProps:{...((o=e.menuProps)==null?void 0:o.activatorProps)||{},"aria-haspopup":"listbox"}}}),w=I(),z=nl(w,n);function Q(o){e.openOnClear&&(s.value=!0)}function K(){D.value||(s.value=!s.value)}function X(o){We(o)&&ee(o)}function ee(o){var F,S;if(!o.key||e.readonly||k!=null&&k.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(o.key)&&o.preventDefault(),["Enter","ArrowDown"," "].includes(o.key)&&(s.value=!0),["Escape","Tab"].includes(o.key)&&(s.value=!1),o.key==="Home"?(F=w.value)==null||F.focus("first"):o.key==="End"&&((S=w.value)==null||S.focus("last"));const h=1e3;if(e.multiple||!We(o))return;const _=performance.now();_-T>h&&(y=""),y+=o.key.toLowerCase(),T=_;const P=v.value.find(L=>L.title.toLowerCase().startsWith(y));if(P!==void 0){f.value=[P];const L=C.value.indexOf(P);fe&&window.requestAnimationFrame(()=>{var B;L>=0&&((B=d.value)==null||B.scrollToIndex(L))})}}function J(o){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!o.props.disabled)if(e.multiple){const _=f.value.findIndex(F=>e.valueComparator(F.value,o.value)),P=h??!~_;if(~_){const F=P?[...f.value,o]:[...f.value];F.splice(_,1),f.value=F}else P&&(f.value=[...f.value,o])}else{const _=h!==!1;f.value=_?[o]:[],qe(()=>{s.value=!1})}}function te(o){var h;(h=w.value)!=null&&h.$el.contains(o.relatedTarget)||(s.value=!1)}function $(){var o;e.eager&&((o=d.value)==null||o.calculateVisibleItems())}function Ce(){var o;l.value&&((o=n.value)==null||o.focus())}function be(o){l.value=!0}function _e(o){if(o==null)f.value=[];else if(Xe(n.value,":autofill")||Xe(n.value,":-webkit-autofill")){const h=v.value.find(_=>_.title===o);h&&J(h)}else n.value&&(n.value.value="")}return W(s,()=>{if(!e.hideSelected&&s.value&&f.value.length){const o=C.value.findIndex(h=>f.value.some(_=>e.valueComparator(_.value,h.value)));fe&&window.requestAnimationFrame(()=>{var h;o>=0&&((h=d.value)==null||h.scrollToIndex(o))})}}),W(()=>e.items,(o,h)=>{s.value||l.value&&!h.length&&o.length&&(s.value=!0)}),ye(()=>{const o=!!(e.chips||a.chip),h=!!(!e.hideNoData||C.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),_=f.value.length>0,P=Ne.filterProps(e),F=_||!l.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return c(Ne,q({ref:n},P,{modelValue:f.value.map(S=>S.props.value).join(", "),"onUpdate:modelValue":_e,focused:l.value,"onUpdate:focused":S=>l.value=S,validationValue:f.externalValue,counterValue:p.value,dirty:_,class:["v-select",{"v-select--active-menu":s.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":f.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,inputmode:"none",placeholder:F,"onClick:clear":Q,"onMousedown:control":K,onBlur:te,onKeydown:ee,"aria-label":u(m.value),title:u(m.value)}),{...a,default:()=>c(U,null,[c(Wa,q({ref:r,modelValue:s.value,"onUpdate:modelValue":S=>s.value=S,activator:"parent",contentClass:"v-select__content",disabled:D.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:$,onAfterLeave:Ce},O.value),{default:()=>[h&&c(ha,q({ref:w,selected:x.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:S=>S.preventDefault(),onKeydown:X,onFocusin:be,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},z,e.listProps),{default:()=>{var S,L,B;return[(S=a["prepend-item"])==null?void 0:S.call(a),!C.value.length&&!e.hideNoData&&(((L=a["no-data"])==null?void 0:L.call(a))??c(Qe,{title:u(e.noDataText)},null)),c(ll,{ref:d,renderless:!0,items:C.value},{default:Y=>{var ze;let{item:H,index:se,itemRef:N}=Y;const Ue=q(H.props,{ref:N,key:se,onClick:()=>J(H,null)});return((ze=a.item)==null?void 0:ze.call(a,{item:H,index:se,props:Ue}))??c(Qe,q(Ue,{role:"option"}),{prepend:kt=>{let{isSelected:xt}=kt;return c(U,null,[e.multiple&&!e.hideSelected?c(Ma,{key:H.value,modelValue:xt,ripple:!1,tabindex:"-1"},null):void 0,H.props.prependAvatar&&c(De,{image:H.props.prependAvatar},null),H.props.prependIcon&&c(ue,{icon:H.props.prependIcon},null)])}})}}),(B=a["append-item"])==null?void 0:B.call(a)]}})]}),f.value.map((S,L)=>{function B(N){N.stopPropagation(),N.preventDefault(),J(S,!1)}const Y={"onClick:close":B,onKeydown(N){N.key!=="Enter"&&N.key!==" "||(N.preventDefault(),N.stopPropagation(),B(N))},onMousedown(N){N.preventDefault(),N.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},H=o?!!a.chip:!!a.selection,se=H?pa(o?a.chip({item:S,index:L,props:Y}):a.selection({item:S,index:L})):void 0;if(!(H&&!se))return c("div",{key:S.value,class:"v-select__selection"},[o?a.chip?c(re,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:S.title}}},{default:()=>[se]}):c(Ga,q({key:"chip",closable:e.closableChips,size:"small",text:S.title,disabled:S.props.disabled},Y),null):se??c("span",{class:"v-select__selection-text"},[S.title,e.multiple&&L<f.value.length-1&&c("span",{class:"v-select__selection-comma"},[xe(",")])])])})]),"append-inner":function(){var Y;for(var S=arguments.length,L=new Array(S),B=0;B<S;B++)L[B]=arguments[B];return c(U,null,[(Y=a["append-inner"])==null?void 0:Y.call(a,...L),e.menuIcon?c(ue,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),pt({isFocused:l,menu:s,select:J},n)}}),ul={class:"browse-selects"},rl={class:"selects mt-5 mb-8"},il={class:"no-data-placeholder mr-5"},cl=ne({__name:"Browse",props:{corpusArr:{default:()=>[]},volumeLabel:{default:"Volume"},textLabel:{default:"Text"}},emits:["chosen"],setup(e,{emit:t}){const a={get chosen(){return{volume:"",text:""}}},u=t,n=pe("volume"),r=pe("text");n.value&&g(),r.value&&v(),he(v),ft(()=>{n.value=null,r.value=null});const d=b(()=>{if(n.value)return e.corpusArr.find(({volumeName:V})=>V===n.value)}),i=b(()=>d.value?d.value.texts:[]);function s(V,f){f==="volume"?(r.value=null,g()):v()}function v(){u("chosen",{volume:n.value,text:r.value})}function g(){u("chosen",a.chosen)}return(V,f)=>(A(),E("div",ul,[R("div",rl,[c(st,{modelValue:j(n),"onUpdate:modelValue":[f[0]||(f[0]=p=>Re(n)?n.value=p:null),f[1]||(f[1]=p=>s(p,"volume"))],items:V.corpusArr,label:V.volumeLabel,"item-title":"volumeName","item-value":"volumeName",variant:"outlined",density:"compact"},null,8,["modelValue","items","label"]),c(st,{modelValue:j(r),"onUpdate:modelValue":[f[2]||(f[2]=p=>Re(r)?r.value=p:null),f[3]||(f[3]=p=>s(p,"text"))],items:i.value,label:V.textLabel,"item-title":"textName","item-value":"textNumber",variant:"outlined",density:"compact"},{"no-data":le(()=>[f[4]||(f[4]=R("span",{class:"no-data-arrow"},"⬅",-1)),R("span",il,Ve(`A ${V.volumeLabel} should be chosen`),1)]),_:1},8,["modelValue","items","label"])])]))}}),dl=ve(cl,[["__scopeId","data-v-0b260389"]]),vl={},ml={height:"3em",viewBox:"0 0 24 24",width:"3em",xmlns:"http://www.w3.org/2000/svg"};function fl(e,t){return A(),E("svg",ml,t[0]||(t[0]=[R("path",{d:"M3 20q-.825 0-1.412-.587T1 18V6q0-.825.588-1.412T3 4h18q.825 0 1.413.588T23 6v12q0 .825-.587 1.413T21 20zm0-2h18V6H3zm6-1h6q.425 0 .713-.288T16 16t-.288-.712T15 15H9q-.425 0-.712.288T8 16t.288.713T9 17m-6 1V6zm3-8q.425 0 .713-.288T7 9t-.288-.712T6 8t-.712.288T5 9t.288.713T6 10m4 0q.425 0 .713-.288T11 9t-.288-.712T10 8t-.712.288T9 9t.288.713T10 10m4 0q.425 0 .713-.288T15 9t-.288-.712T14 8t-.712.288T13 9t.288.713T14 10m4 0q.425 0 .713-.288T19 9t-.288-.712T18 8t-.712.288T17 9t.288.713T18 10M6 13.5q.425 0 .713-.288T7 12.5t-.288-.712T6 11.5t-.712.288T5 12.5t.288.713T6 13.5m4 0q.425 0 .713-.288T11 12.5t-.288-.712T10 11.5t-.712.288T9 12.5t.288.713t.712.287m4 0q.425 0 .713-.288T15 12.5t-.288-.712T14 11.5t-.712.288T13 12.5t.288.713t.712.287m4 0q.425 0 .713-.288T19 12.5t-.288-.712T18 11.5t-.712.288T17 12.5t.288.713t.712.287",fill:"lightGrey"},null,-1)]))}const hl=ve(vl,[["render",fl],["__scopeId","data-v-c2634224"]]),pl={class:"d-flex align-center flex-column"},yl={class:"searchers"},bl={class:"d-flex ga-3"},gl={class:"d-flex flex-column flex-md-row ga-2"},kl=ne({__name:"Search",props:{textusLabel:{default:"Search corpus"},versioLabel:{default:"Search translation"}},emits:["searchers","copy-to-clipboard"],setup(e,{emit:t}){const a=e,u={get searchers(){return{textus:null,versio:null}}},n=t,r=I(u.searchers),d=I(u.searchers),i=I(!1),s=I(null),v=pe("textus"),g=pe("versio");r.value.textus=v.value,r.value.versio=g.value;const V=b(()=>!r.value.textus&&!r.value.versio),f=b(()=>[{name:"textus",value:r.value.textus,label:a.textusLabel},{name:"versio",value:r.value.versio,label:a.versioLabel}]);he(x);function p(m,y){r.value[y]=m||"",m||x()}function k(m){r.value.textus=m,i.value&&x()}function x(){d.value=ce.cloneDeep(r.value),n("searchers",ce.cloneDeep(d.value)),l()}function l(){v.value=d.value.textus||null,g.value=d.value.versio||null}return he(()=>{r.value.textus=v.value,r.value.versio=g.value,(r.value.textus||r.value.versio)&&x(),s.value=document.querySelector(".searchers .v-text-field.input_textus input")}),ft(()=>{v.value=null,g.value=null}),(m,y)=>{const T=hl;return A(),E("div",pl,[R("div",yl,[R("div",null,[R("div",bl,[c(T,{class:"keyboard-icon",onClick:y[0]||(y[0]=C=>i.value=!0)}),c(Le,{disabled:V.value,variant:"outlined",class:"search-btn",onClick:x},{default:le(()=>y[3]||(y[3]=[xe(" Search ")])),_:1},8,["disabled"])]),c(Ze,{value:f.value[0].value,"input-el":s.value,type:"regex",visible:"",onSubmit:k},null,8,["value","input-el"])]),R("div",gl,[(A(!0),E(U,null,Se(f.value,({value:C,label:D,name:O})=>(A(),ae(Ne,{key:O,"model-value":C,label:D,class:$e(`input_${O}`),style:{"min-width":"200px"},variant:"outlined",density:"compact","hide-details":"",clearable:"","onUpdate:modelValue":w=>p(w,O),onKeydown:ga(ka(x,["prevent"]),["enter"])},null,8,["model-value","label","class","onUpdate:modelValue","onKeydown"]))),128))])]),c(Na,{modelValue:i.value,"onUpdate:modelValue":y[2]||(y[2]=C=>i.value=C),"hide-overlay":"",fullscreen:""},{default:le(()=>[c(Ze,{visible:i.value,value:r.value.textus,"input-name":e.textusLabel,"onUpdate:visible":y[1]||(y[1]=C=>i.value=C),onSubmit:k},null,8,["visible","value","input-name"])]),_:1},8,["modelValue"])])}}}),xl=ve(kl,[["__scopeId","data-v-ad131bff"]]),Vl=ne({__name:"InfiniteScroll",props:{el:{default:null},items:{},chunkSize:{default:10}},setup(e){const t=I(null),a=I(0),u=I(null);Be(()=>{a.value=e.chunkSize,u.value=e.el||t.value});const n=b(()=>e.items.slice(0,a.value));return xa(u,()=>{a.value+=e.chunkSize},{distance:50,canLoadMore:()=>a.value<e.items.length}),(r,d)=>(A(),E("div",{ref_key:"internalEl",ref:t},[Va(r.$slots,"default",{items:n.value})],512))}}),gt=300;function Ee({hash:e="",keepLocation:t=!1,className:a="chosen"}){return new Promise(u=>{setTimeout(()=>{t||(location.hash=e,setTimeout(()=>scrollBy(0,-200),0));const n=document.querySelector(e);n&&(n.classList.add(a),setTimeout(u,1))},gt)})}function wl(e){const t=document.querySelector(e);t&&Me(t)}function Me(e,t="chosen"){e&&setTimeout(()=>{e.classList.remove(t)},gt)}const Sl=["id"],Tl={class:"controls-wrapper"},Cl={class:"lines"},_l=ne({__name:"LineCard",props:{line:{},searchers:{}},setup(e){const t=e,a=I(),u=ht(),n=wa(),r=b(()=>Aa.map(p=>({lineName:p,str:t.line[p],searcher:t.searchers.data[p]}))),d=b(()=>!t.searchers.areAllEmpty),i=b(()=>u.hash),s=b(()=>"#"+t.line.hash),v=b(()=>{var x;const p=((x=t.line)==null?void 0:x.volumeName.toLowerCase())||"";return p.includes("abou")?"":["jastrow","ritter","arnold","lehrbuch","luf","prym","hors","talay","baxa","ubbadin","maalula","lieder","britta"].some(l=>p.includes(l))?"German":""});function g(){Me(a.value,"chosen")}W(i,(p,k)=>{!p&&k&&g()});async function V(){if(!d.value)return;const{volumeName:p,textNumber:k}=t.line;await n.push({query:{mode:me.browse,volume:p,text:k}}),await Ee({hash:s.value})}function f(){if(!u.hash){Ee({hash:s.value});return}wl(u.hash),u.hash===s.value?n.replace({query:u.query,hash:""}):(Ee({hash:s.value,keepLocation:!0}),n.replace({query:u.query,hash:s.value}));const p=Array.from(document.querySelectorAll('div.line-card[id^="h"]'));for(const k of p)k.style.background&&k.id!==t.line.hash&&Me(k)}return(p,k)=>p.line?(A(),E("div",{key:0,class:"line-card",id:p.line.hash,ref_key:"lineCardRef",ref:a},[R("div",Tl,[d.value?(A(),E("div",{key:1,class:"control-sign",onClick:k[1]||(k[1]=x=>V())},"▤")):(A(),E("div",{key:0,class:"control-sign",onClick:k[0]||(k[0]=x=>f())},"#"))]),R("div",Cl,[(A(!0),E(U,null,Se(r.value,(x,l)=>(A(),ae(Ia,q({ref_for:!0},x,{key:l,"translation-language":x.lineName==="versio"&&v.value,class:"mb-1"}),null,16,["translation-language"]))),128)),k[2]||(k[2]=R("div",null,[R("br")],-1))])],8,Sl)):ie("",!0)}}),Al=ve(_l,[["__scopeId","data-v-9341a2ff"]]),Il={class:"results w-100"},Pl={key:1},El=ne({__name:"Results",props:{results:{},searchers:{}},setup(e){const t=window,a=I(),u=ht(),n=Sa(),r=oe(n,"isDark"),d=b(()=>!e.searchers.areAllEmpty);return he(async()=>{var s;const i=u.hash;i&&(await Pa(1e3),(s=document.querySelector(i))==null||s.scrollIntoView({behavior:"smooth",block:"center"}))}),(i,s)=>{const v=Vl;return A(),E("div",Il,[d.value?(A(),E("div",{key:0,ref_key:"stats",ref:a,class:$e(["results-stats mb-1",{invert:r.value}])},[R("div",null,"Found "+Ve(i.results.length)+" contexts",1)],2)):ie("",!0),s[0]||(s[0]=R("br",null,null,-1)),i.results?(A(),E("div",Pl,[c(v,{items:i.results,el:j(t)},{default:le(({items:g})=>[(A(!0),E(U,null,Se(g,V=>(A(),E("div",null,[V?(A(),ae(Al,{line:V,searchers:i.searchers,key:V.hash},null,8,["line","searchers"])):ie("",!0)]))),256))]),_:1},8,["items","el"])])):ie("",!0)])}}}),Ll=ve(El,[["__scopeId","data-v-27ceb1d6"]]),Dl={key:0,class:"searcher-wrapper"},Bl=ne({__name:"BrowseAndSearch",setup(e){const t=Oa(),a=Ta(),u=b(()=>!!a.text.value),n=b(()=>s.value===me.search),r=b(()=>s.value===me.browse),d=b(()=>n.value?v.value:i.searchers),i={get searchers(){return new et({textus:"",versio:""})}},s=pe("mode");s.value||(s.value=me.search);const v=I(i.searchers),g=I({volume:null,text:null}),V=b(()=>{if(!g.value.text||!t.corpusArray.length)return[];const m=ce.find(t.corpusArray,{volumeName:g.value.volume});return ce.find(m.texts,{textNumber:g.value.text}).contents}),f=b(()=>t.corpusLines),p=b(()=>v.value.areAllEmpty?[]:f.value.filter(v.value.test)),k=b(()=>s.value===me.browse?V.value:p.value);function x(m){v.value=new et(m)}function l(m){g.value=m}return(m,y)=>(A(),E("div",{class:$e([{"no-hashes":u.value},"browse-and-search"]),ref:"wrapper"},[n.value?(A(),E("div",Dl,[c($a,{count:k.value.length,class:"mr-5"},null,8,["count"]),c(xl,{"corpus-arr-prop":j(t).corpusArray,"textus-label":"Aramaic text","versio-label":"Translation text",onSearchers:x},null,8,["corpus-arr-prop"])])):r.value?(A(),ae(dl,{key:1,"corpus-arr":j(t).corpusArray,onChosen:l},null,8,["corpus-arr"])):ie("",!0),c(Ll,{results:k.value,searchers:d.value},null,8,["results","searchers"]),(A(),ae(j(Ca),{to:"#app-bar-slot",key:m.isVisible},{default:le(()=>[c(Ua,{modelValue:j(s),"onUpdate:modelValue":y[0]||(y[0]=T=>Re(s)?s.value=T:null),class:"mr-5 button-switcher"},null,8,["modelValue"])]),_:1}))],2))}}),Wl=ve(Bl,[["__scopeId","data-v-34979e87"]]);export{Wl as B};
