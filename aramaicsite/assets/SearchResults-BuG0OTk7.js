import{b as w,bJ as D,r as g,c as v,o as c,f as m,g as d,h as b,N as H,i as _,k as f,_ as z,E as x,aB as N,d as J,a as M,e as R,aY as E,B as F,p as T,V as U,F as C,l as $,m as y,D as G,n as O}from"./index-B0dudtAs.js";import{a as P,L as V,u as j,K,_ as q}from"./GrepLine.vue_vue_type_style_index_0_lang-Bt5zV9VI.js";import{C as I,u as Q}from"./useGetResource-COgNu7am.js";import{V as W}from"./VTooltip-CTyrQrug.js";import{a as k}from"./assets-zauk0UuL.js";import{V as Y}from"./VTextField-CUL98EIO.js";import{V as A}from"./VDialog-DMaYEyEF.js";import{_ as X}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-Ce1fvIPL.js";const Z=["fill"],ee=w({__name:"KeyboardIcon",props:{tooltip:{type:String,default:"Click to open a virtual keyboard"}},emits:["click"],setup(n,{emit:a}){D(h=>({"343572bc":_(o),"75de9347":_(u)}));const r=n,t=a,p=g(!0),i=v(()=>!r.tooltip||!p.value),{darkGrey:o,lightBrown:u}=I;return(h,s)=>(c(),m("span",{onClick:s[0]||(s[0]=e=>t("click"))},[d(W,{disabled:i.value,text:n.tooltip,location:"bottom","open-delay":"500"},{activator:b(({props:e})=>[(c(),m("svg",H(e,{fill:_(I).grey,class:"keyboard-icon-svg",height:"50px",viewBox:"0 0 24 24",width:"50px",xmlns:"http://www.w3.org/2000/svg"}),s[1]||(s[1]=[f("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"},null,-1)]),16,Z))]),_:1},8,["disabled","text"])]))}}),te=z(ee,[["__scopeId","data-v-43d9ee52"]]);function se(n){return n.split(`======
`).map(t=>t.split(`
`)).map(t=>({title:x.head(t),lines:x.tail(t)}))}const ae=()=>{const n=N("search",""),a=v(()=>new P(n.value));return{searcherString:n,searcher:a}},re={[V.turoyo]:k.turoyoCorpusJson.link,[V.urmi]:k.urmiCorpusJson.link,[V.maalula]:k.maalulaDictsJson.link},oe=J("simpleCorpusStore",()=>{const n=M({}),a=M({}),r=j(),t=v(()=>re[r.value]),p=Q(t.value,""),i=v(()=>se(p.value)),{searcherString:o,searcher:u}=ae(),h=v(()=>{const e=[];if(!i.value)return e;for(const l of i.value){const{title:B,lines:S}=l;for(const L of S)e.push({title:B,line:L})}return e}),s=v(()=>o.value?h.value.reduce((e,l)=>{const S=u.value.regex.test(l.line)?[l]:[];return[...e,...S]},[]):[]);return{corporaObj:n,searcherStringsObj:a,searcher:u,searcherString:o,matchingLines:s}}),ne={class:"searcher align-center flex-column"},le={class:"searchers d-flex"},ie={class:"input-wrapper"},ue=w({__name:"Searcher",setup(n){const a=oe(),r=g(""),t=g(!1),p=g(null),i=[s=>!!s||"Search string should not be empty"],o=v({get:()=>r.value,set:s=>{r.value=x.isString(s)?s:"",r.value||u()}}),u=()=>{a.searcherString=o.value},h=s=>{o.value=s,t.value&&u()};return R(()=>a.searcherString,s=>{r.value=s},{immediate:!0}),E(()=>{p.value=document.querySelector(".input-wrapper .v-text-field input")}),(s,e)=>(c(),m(C,null,[f("div",ne,[f("div",le,[d(te,{onClick:e[0]||(e[0]=l=>t.value=!0)}),f("div",ie,[d(Y,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value=l),rules:i,autocomplete:"off",label:"Search string",color:"primary",variant:"outlined",density:"compact",clearable:"","hide-details":"",onKeyup:F(u,["enter"])},null,8,["modelValue"])]),d(U,{ref:"search_btn",disabled:!o.value,variant:"outlined",onClick:u},{default:b(()=>e[4]||(e[4]=[T(" Search ")])),_:1},8,["disabled"])]),d(K,{value:o.value,"input-el":p.value,type:"regex",visible:"",onSubmit:h},null,8,["value","input-el"])]),d(A,{modelValue:t.value,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value=l),"hide-overlay":"",fullscreen:""},{default:b(()=>[d(K,{visible:t.value,value:o.value,"input-name":"Search string",onSubmit:h,"onUpdate:visible":e[2]||(e[2]=l=>t.value=l)},null,8,["visible","value"])]),_:1},8,["modelValue"])],64))}}),ye=z(ue,[["__scopeId","data-v-360f7d34"]]),ce={key:0,class:"results-stats"},pe={key:0,style:{color:"blueviolet"}},de=w({__name:"SearchResults",props:{linesMatching:{},searcher:{}},setup(n){return(a,r)=>(c(),m(C,null,[a.searcher.value?(c(),m("div",ce," Number of lines in output: "+$(a.linesMatching.length),1)):y("",!0),r[1]||(r[1]=f("br",null,null,-1)),a.linesMatching?(c(),G(X,{key:1,items:a.linesMatching,class:"search-results-box results"},{default:b(({items:t})=>[(c(!0),m(C,null,O(t,({line:p,title:i},o)=>(c(),m("div",{key:o,class:"lines"},[i?(c(),m("div",pe,$(i),1)):y("",!0),d(q,{str:p,searcher:a.searcher},null,8,["str","searcher"]),r[0]||(r[0]=f("br",null,null,-1))]))),128))]),_:1},8,["items"])):y("",!0)],64))}}),Ve=z(de,[["__scopeId","data-v-a23d703e"]]);export{ye as S,Ve as a,oe as b,ae as u};
