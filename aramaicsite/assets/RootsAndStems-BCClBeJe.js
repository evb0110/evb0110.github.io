var q=Object.defineProperty;var H=(t,e,r)=>e in t?q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var A=(t,e,r)=>H(t,typeof e!="symbol"?e+"":e,r);import{M as L,d as J,r as $,c as u,b as j,o as n,f as l,F as f,i as _,k as S,_ as G,a as Q,aa as W,n as c,g as p,A as X,h as v,j as I,V as F,ab as M,m as N,l as Y,p as Z,D as ee}from"./index-JLW-bKvC.js";import{g as te}from"./getRegexFilterFn-CU_0py8y.js";import{C as E}from"./Color-l8zxla4Y.js";import{u as se,A as O}from"./assetsStore-BbZsqKrh.js";import{_ as ae}from"./InfiniteScrollOld.vue_vue_type_script_setup_true_lang-BT73f5nd.js";import{s as re}from"./startViewTransition-CnFw7TNy.js";import{V as ne}from"./VTextField-jiCeGM5a.js";import{V as le,a as oe}from"./VTabs-CAArjK0v.js";import"./VInput-CyeXv4gT.js";import"./forwardRefs-DWGaNmQL.js";import"./scopeId-D_Pt4OX8.js";import"./VSlideGroup-Cov2kiJB.js";var C=(t=>(t.any="any",t.yes="yes",t.no="no",t))(C||{});const ie=["any","yes","no"],D={any:"",yes:E.green,no:E.tomato};class w{constructor(e){A(this,"number");A(this,"state","any");this.number=e}static instantiate(e){return new w(e)}get searcherString(){return`^${L.escapeRegExp(this.number)} `}get style(){return{backgroundColor:D[this.state],color:D[this.state]&&E.white}}getStyle(e){return this.state===e&&this.style}clearState(){this.state="any"}static get clearState(){return e=>e.clearState()}setOption(e){if(e===this.state){this.clearState();return}this.state=C[e]}}class B{constructor(e){this.stems=e}get positiveStemSearcherStrings(){return this.getStemSearcherStringsByState(C.yes)}get negativeStemSearcherStrings(){return this.getStemSearcherStringsByState(C.no)}clearAll(){this.stems.forEach(w.clearState)}setOption(e,r){var m;(m=this.stems[e])==null||m.setOption(r)}get positiveStemRegexes(){return this.positiveStemSearcherStrings.map(B.getRegex)}get negativeStemRegexes(){return this.negativeStemSearcherStrings.map(B.getRegex)}stemsByState(e){return L.filter(this.stems,{state:e})}getStemSearcherStringsByState(e){return this.stemsByState(e).map(r=>r.searcherString)}static get getRegex(){return e=>RegExp(e,"iums")}}const ce=J("maalulaVerbalStore",()=>{const t=se(),e=$(0),r=u(()=>{switch(e.value){case 0:return O.maalulaVerbalRoots;case 1:default:return O.maalulaPerfects}}),m=u(()=>{var d;return((d=t[r.value])==null?void 0:d.data)||[]});return{tab:e,tabData:m}}),ue={class:"grep-multiline"},me=j({__name:"GrepMultiline",props:{multiline:{type:String,default:""},colorSearcherString:{type:String,default:""}},setup(t){const e=u(()=>t.multiline.split(/\n+/)),r=u(()=>new RegExp(`(${t.colorSearcherString})`,"iu")),m=i=>t.colorSearcherString?i.split(r.value):[i],d=u(()=>e.value.map(m));return(i,g)=>(n(),l("div",ue,[(n(!0),l(f,null,_(d.value,(o,y)=>(n(),l("div",{key:y,class:"stem"},[(n(!0),l(f,null,_(o,(V,R)=>(n(),l("span",{key:R,class:"part"},S(V),1))),128))]))),128))]))}}),ge=G(me,[["__scopeId","data-v-ec7f7d79"]]),Se={class:"external-wrapper"},de={class:"searcher"},he={class:"searcher__internal"},pe={class:"external"},ve={class:"table"},fe=["onClick"],_e={class:"option-text"},ye={class:"results"},be={class:"results__internal"},xe={key:0,class:"stats"},Ve=j({__name:"RootsAndStems",setup(t){const e=ce(),r=[{key:"roots",name:"Roots and Stems"},{key:"perfect",name:"Perfects"}],d=["I","II","III","IV","I(2)","II(2)","III(2)","IV(2)","I(7)","I(8)","I(10)"].map(w.instantiate),i=$(""),g=$(""),o=Q(new B(d)),{tab:y,tabData:V}=W(e),R=u(()=>o.positiveStemSearcherStrings.length||o.negativeStemSearcherStrings.length||g.value),T=u(()=>{if(!R.value)return[];const x=g.value?[RegExp(g.value,"iums")]:[],s=[...o.positiveStemRegexes,...x],a=o.negativeStemRegexes;return V.value.filter(te(s,a))}),K=u(()=>[...o.positiveStemSearcherStrings,g.value].map(s=>`(?:${s})`).join("|"));function P(x,s){o.setOption(x,s),b()}function b(){re(()=>{g.value=i.value})}function U(){i.value="",b()}function z(){g.value=i.value="",o.clearAll()}return(x,s)=>(n(),l("div",Se,[c("div",de,[c("div",he,[p(ne,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=a=>i.value=a),label:"Search string",variant:"outlined",density:"compact",class:"searcher__text-field",clearable:"","onClick:clear":U,onKeyup:X(b,["native","enter"])},null,8,["modelValue"]),p(F,{variant:"outlined",class:"searcher__search-button top-button",onClick:b},{default:v(()=>s[2]||(s[2]=[I(" Search ")])),_:1}),p(F,{variant:"outlined",class:"top-button",onClick:z},{default:v(()=>s[3]||(s[3]=[I(" Clear all ")])),_:1})])]),c("div",pe,[c("table",ve,[(n(!0),l(f,null,_(o.stems,(a,k)=>(n(),l("tr",{key:a.number},[c("td",{style:M(a.style),class:"stem"},S(a.number),5),(n(!0),l(f,null,_(N(ie),h=>(n(),l("td",{key:h,style:M(a.getStyle(h)),class:"option",onClick:Re=>P(k,h)},[c("div",_e,S(h),1)],12,fe))),128))]))),128))])]),p(oe,{modelValue:N(y),"onUpdate:modelValue":s[1]||(s[1]=a=>Y(y)?y.value=a:null),"align-tabs":"center",class:"tabs",onChange:b},{default:v(()=>[(n(),l(f,null,_(r,a=>p(le,{key:a.key,color:"blue"},{default:v(()=>[I(S(a.name),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),c("div",ye,[c("div",be,[R.value?(n(),l("div",xe,S(T.value.length)+" verbal roots of "+S(N(V).length)+". ",1)):Z("",!0),p(ae,{items:T.value},{default:v(({items:a})=>[(n(!0),l(f,null,_(a,(k,h)=>(n(),ee(ge,{key:h,multiline:k,"color-searcher-string":K.value},{default:v(()=>[I(S(k)+" ",1),s[4]||(s[4]=c("hr",null,null,-1))]),_:2},1032,["multiline","color-searcher-string"]))),128))]),_:1},8,["items"])])])]))}}),De=G(Ve,[["__scopeId","data-v-bbb389a4"]]);export{De as default};
