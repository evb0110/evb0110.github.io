var X=Object.defineProperty;var Y=(e,t,n)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var q=(e,t,n)=>Y(e,typeof t!="symbol"?t+"":t,n);import{r as m,bP as ee,E as N,c as g,bD as te,b as A,af as Z,t as ae,w as F,aZ as ne,o as u,f as i,n as Q,D as G,A as se,p as b,F as E,i as z,g as V,h as T,j as B,k as L,ag as x,V as $,m as P,_ as H,a1 as le,U as re,b3 as ue,bQ as oe,bC as ie}from"./index-DJ82nRD_.js";import{V as ce}from"./VTextField-B6S_8Iw0.js";import{b as ve}from"./betterSplit-CW8NIeFU.js";const de=e=>{const t=m(!1),n=m(!1),f=e.join(" or ");function o(v){return`extract only ${f} parts of the following text, give their translation into english, no other commentaries or explanations, return html fragment not md, give translations of the words in ${f} if they differ from forms used: ${v}, wrap in html tags and add bullets for readability`}async function c(v){var w;t.value=!0;const y=o(v),r=await((w=ee)==null?void 0:w.generateContent(y)),C=await(r==null?void 0:r.response.text().replace(/`/g,"").replace(/^html/,"").replace(v,""))||"";return t.value=!1,n.value=!0,C}return{isLoading:t,isReady:n,getTranslation:c}};var R=(e=>(e.title="title",e.textus="textus",e.versio="versio",e))(R||{});const Pe=["title","textus","versio"];var me=(e=>(e.search="search",e.browse="browse",e))(me||{});const He=["search","browse"],fe="(?:a|e|i|iͧ|o|u|ä|å|ë|ö|ü|á|á̧|â|ä|å|é|ê|ë|í|î|ó|ô|ö|ú|û|ü|ā|ā́|ă|ą̂|ē|ĕ|ī|ı|ō|ŏ|ū|ŭ|ŭ́|ə|ə́|и|о|ю|ạ|ạ|ạ́|ậ|ắ|ẹ|ọ|ộ|ụ|ụ̂|а|о|у|э|ы|и|ь)",ge="(?:b|b́|c|c̄|d|f|f̣|g|h|j|k|k̇|l|m|n|n̄|p|p̄|p̣|q|q̣|r|r̄|r̄̄|s|s̄|t|t́|v|w|x|y|z|z̄|ç|ć|č|ğ|ġ|ģ|ķ|ń|ň|ŕ|ś|ŝ|ş|ş́|ş̇|š|ţ|ž|ǧ|ǧ̣|Ɂ|ɧ|ʔ|ʕ|ʕ́|ʕ̣|ʾ|ʿ|б|в|й|к|п|р|с|т|х|ҫ|ҫ́|ҫ̂|ҫ̄|ع|ḅ|ḇ|ḉ|ḍ|ḏ|ḏ̣|ḏ̣̣|ḥ|ḳ|ḳ̇|ḷ|ṃ|ṅ|ṇ|ṗ|ṛ|ṝ|ṡ|ṣ|ṫ|ṭ|ṯ|ẓ|ẖ|ﻉ)",he=new RegExp("[\\\\]v","gi"),pe=new RegExp("[\\\\]c","gi"),ye=N.memoize(function(t){return t.replace(he,fe).replace(pe,ge)});class D{constructor(t){q(this,"_value");this._value=t||""}get value(){return this._value}set value(t){this._value=t||""}get valueNormalized(){return ye(this.value)}get isEmpty(){return!this.value}get regex(){return RegExp(this.valueNormalized,"iu")}static instantiate(t){return new D(t)}}class Oe{constructor(t){q(this,"data");this.data=N.mapValues(t,D.instantiate)}get searchersArr(){return N.values(this.data)}get areAllEmpty(){return this.searchersArr.every(t=>t.isEmpty)}get test(){return t=>N.keys(this.data).every(n=>this.data[n].regex.test(t[n]))}}var j=(e=>(e.turoyo="turoyo",e.urmi="urmi",e.maalula="maalula",e))(j||{});const ke=()=>{const e=te();return g(()=>e.path.split("/")[1])};function be(e){return new Promise(t=>setTimeout(t,e))}const we="a á ä ā b ḅ c č ç d ḍ ḏ ḏ̣ e é ē ə f g ǧ ġ ģ h ḥ i í î ī ı j k ḳ l m ṃ ň ṇ o ó ö p q r ṛ s š ṡ ş ṣ t ţ ṭ ṯ u ú ü ụ v w x y z ž ʔ ʕ",xe=we.split(/\s+/),Ce="a ä b ʙ c č ç d e ǝ ə f g Ģ h i I ı j k l m n o ö p q r s ş ṣ ș t ţ ṭ ț u ü v w x y z ž ƶ а ә б в г д е ж з и й к л м н о п р с т у ф х һ ц ч ш щ ъ ы ь э ю я",Se=Ce.split(/\s+/),Ee="ʔ ʕ a á ā b c ć č d ḍ ḏ ḏ̣ e é ē ə f g ǧ ġ h ḥ i í ī k ḳ l ḷ m n o ō p r s š ṣ t ṭ ṯ u ú ū w x y z ž ẓ",Ie=Ee.split(/\s+/),Te={[j.turoyo]:xe,[j.urmi]:Se,[j.maalula]:Ie},Be=()=>{const e=ke();return g(()=>Te[e.value])},$e={class:"working-block"},ze={class:"keyboard specific-keys"},Le={key:1,class:"keyboard common-keys"},Me={key:2,class:"submit-wrapper"},Ve=A({__name:"Keyboard",props:{value:{default:""},inputName:{default:""},visible:{type:Boolean,default:!1},type:{default:"full"},inputEl:{default:null}},emits:["submit","update:visible"],setup(e,{emit:t}){const n=t,f=Z(),o=ae(f,"isDark"),c=m(0),v=m(0),y=m(null),r=m(e.value),C=[String.raw`\v`,String.raw`\c`,"^","$","\\"],w=["⬅","space","del","backspace","⮕"],M=Be(),d=m(null);F(()=>{d.value=y.value||e.inputEl},{flush:"sync"}),F(()=>{r.value=e.value});function K(l){r.value=l,U()}function I(){n("update:visible",!1)}function O(){n("submit",r.value),I()}function U(){var l,a;c.value=((l=d.value)==null?void 0:l.selectionStart)||0,v.value=((a=d.value)==null?void 0:a.selectionEnd)||0}async function J(){await be(20),U()}function _(l){if(!d.value)return;const a=r.value;c.value=d.value.selectionStart||0,v.value=d.value.selectionEnd||0;const{buttonValueMod:s,selectionStartMod:h,selectionEndMod:p}=W({buttonValue:l,selectionStart:c.value,selectionEnd:v.value,existingValue:a});d.value.value=a.slice(0,h)+s+a.slice(p,a.length),r.value=d.value.value,d.value.focus(),c.value=d.value.selectionStart=h+s.length,v.value=d.value.selectionEnd=h+s.length,e.type==="regex"&&n("submit",r.value)}ne(()=>{y.value=document.querySelector(".keyboard-wrapper .v-text-field input"),c.value=v.value=e.value.length});function W({buttonValue:l,selectionStart:a,selectionEnd:s,existingValue:h}){let p,k=a,S=s;return l==="backspace"?(a>0&&a===s&&(k=a-1),p=""):l==="del"?(a<h.length&&a===s&&(S=s+1),p=""):l==="space"?p=" ":l==="⬅"?(a<s?S=a:(k=Math.max(0,a-1),S=k),p=""):l==="⮕"?(a<s?k=s:(k=Math.min(h.length,a+1),S=k),p=""):(p=l,k=a,S=s),{buttonValueMod:p,selectionStartMod:k,selectionEndMod:S}}return(l,a)=>l.visible?(u(),i("div",{key:0,class:x([l.type,"keyboard-wrapper"])},[Q("div",$e,[l.type==="full"?(u(),G(ce,{key:0,label:l.inputName,"model-value":r.value,class:"input",density:"compact",variant:"outlined",clearable:"",onFocus:J,"onUpdate:modelValue":K,onKeyup:se(O,["enter","native"])},null,8,["label","model-value"])):b("",!0),Q("div",ze,[C?(u(),i(E,{key:0},z(C,s=>V($,{key:s,color:"warning",variant:"outlined",class:x({invert:o.value}),rounded:"",onClick:h=>_(s)},{default:T(()=>[B(L(s),1)]),_:2},1032,["class","onClick"])),64)):b("",!0),P(M)&&l.type==="full"?(u(!0),i(E,{key:1},z(P(M),s=>(u(),G($,{key:s,variant:"outlined",rounded:"",onClick:h=>_(s)},{default:T(()=>[B(L(s),1)]),_:2},1032,["onClick"]))),128)):b("",!0)]),w&&l.type==="full"?(u(),i("div",Le,[(u(),i(E,null,z(w,s=>V($,{key:s,class:x({invert:o.value}),color:"teal",rounded:"",size:"large",variant:"outlined",onClick:h=>_(s)},{default:T(()=>[B(L(s),1)]),_:2},1032,["class","onClick"])),64))])):b("",!0),l.type==="full"?(u(),i("div",Me,[V($,{class:"mr-5",variant:"outlined",onClick:I},{default:T(()=>a[0]||(a[0]=[B(" Cancel ")])),_:1}),V($,{color:"primary",variant:"outlined",class:x({invert:o.value}),onClick:O},{default:T(()=>a[1]||(a[1]=[B(" Search ")])),_:1},8,["class"])])):b("",!0)])],2)):b("",!0)}}),Ue=H(Ve,[["__scopeId","data-v-0465c6c1"]]),Ne=Symbol("isEager"),Re={isEager:Ne},Qe=A({__name:"InfiniteScroll",props:{el:{default:null},items:{},chunkSize:{default:50}},setup(e){const t=le(Re.isEager,m(!1)),n=re([]);ue(t,()=>{n.value=e.items});const f=m(null),o=m(0),c=m(null);F(()=>{o.value=e.chunkSize,c.value=e.el||f.value});const v=g(()=>e.items.slice(0,o.value)),y=g(()=>t.value?n.value:v.value);return oe(c,()=>{o.value+=e.chunkSize},{distance:50,canLoadMore:()=>!t.value&&o.value<e.items.length}),(r,C)=>(u(),i("div",{ref_key:"internalEl",ref:f},[ie(r.$slots,"default",{items:y.value})],512))}}),je=["innerHTML"],Ae=A({__name:"TranslateAI",props:{languages:{default:()=>[]},str:{}},setup(e){const t=m(),n=m(!1);async function f(){if(!e.languages.length||n.value)return;const{getTranslation:o}=de(e.languages);n.value=!0,t.value=await o(e.str),n.value=!1}return(o,c)=>(u(),i(E,null,[t.value?(u(),i("div",{key:1,class:"hint",onClick:c[0]||(c[0]=v=>t.value="")},"Collapse")):(u(),i("div",{key:0,onClick:f,class:x(["hint",{shimmer:n.value}])},L(`Translate from ${o.languages.join(" and ")}`),3)),t.value?(u(),i("div",{key:2,innerHTML:t.value,class:"translation"},null,8,je)):b("",!0)],64))}}),De=H(Ae,[["__scopeId","data-v-6b1d56a4"]]),Ke=A({__name:"GrepLine",props:{str:{default:""},searcher:{default:()=>new D},lineName:{default:""},translationLanguage:{}},setup(e){const{isDark:t}=Z(),n=g(()=>e.str.split(`
`)),f=g(()=>n.value.map(r=>!e.searcher||e.searcher.isEmpty?[r]:ve(r,e.searcher.regex))),o=g(()=>e.lineName===R.title),c=g(()=>!e.lineName||e.lineName===R.textus),v=g(()=>e.lineName===R.versio),y=g(()=>({"line-title":o.value,textus:c.value,versio:v.value}));return(r,C)=>{const w=De;return u(),i("div",{class:x([y.value,"grep-line"])},[(u(!0),i(E,null,z(f.value,(M,d)=>(u(),i("div",{key:d},[(u(!0),i(E,null,z(M,(K,I)=>(u(),i("span",{key:I,class:x({highlight:I%2,invert:P(t)})},L(K),3))),128))]))),128)),r.translationLanguage?(u(),G(w,{key:0,languages:[r.translationLanguage],str:r.str},null,8,["languages","str"])):b("",!0)],2)}}}),Ze=H(Ke,[["__scopeId","data-v-cd7930de"]]);export{He as D,Ze as G,Re as I,Ue as K,j as L,Oe as S,Qe as _,Pe as a,me as b,D as c,be as s,ke as u};
