var H=Object.defineProperty;var q=(t,e,r)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var w=(t,e,r)=>q(t,typeof e!="symbol"?e+"":e,r);import{E as G,d as J,r as E,c as u,b as L,o as n,f as l,F as _,i as f,k as S,_ as j,a as Q,G as W,n as c,g as p,A as X,h as v,j as I,V as O,H as T,m as N,l as Y,p as Z,D as ee}from"./index-BmEQ_S1N.js";import{g as te}from"./getRegexFilterFn-CU_0py8y.js";import{C as $}from"./Color-l8zxla4Y.js";import{u as se,A as D}from"./assetsStore-p4TiRUo-.js";import{_ as ae}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-DEPAuEf8.js";import{V as re}from"./VTextField-Ewql0E_3.js";import{V as ne,a as le}from"./VTabs-CidWrmCx.js";import"./VInput-2PoRnf6A.js";import"./forwardRefs-DWGaNmQL.js";import"./lazy-D9b-pIJS.js";import"./VSlideGroup-yyZZkCFJ.js";var C=(t=>(t.any="any",t.yes="yes",t.no="no",t))(C||{});const oe=["any","yes","no"],M={any:"",yes:$.green,no:$.tomato};class A{constructor(e){w(this,"number");w(this,"state","any");this.number=e}static instantiate(e){return new A(e)}get searcherString(){return`^${G.escapeRegExp(this.number)} `}get style(){return{backgroundColor:M[this.state],color:M[this.state]&&$.white}}getStyle(e){return this.state===e&&this.style}clearState(){this.state="any"}static get clearState(){return e=>e.clearState()}setOption(e){if(e===this.state){this.clearState();return}this.state=C[e]}}class B{constructor(e){this.stems=e}get positiveStemSearcherStrings(){return this.getStemSearcherStringsByState(C.yes)}get negativeStemSearcherStrings(){return this.getStemSearcherStringsByState(C.no)}clearAll(){this.stems.forEach(A.clearState)}setOption(e,r){var m;(m=this.stems[e])==null||m.setOption(r)}get positiveStemRegexes(){return this.positiveStemSearcherStrings.map(B.getRegex)}get negativeStemRegexes(){return this.negativeStemSearcherStrings.map(B.getRegex)}stemsByState(e){return G.filter(this.stems,{state:e})}getStemSearcherStringsByState(e){return this.stemsByState(e).map(r=>r.searcherString)}static get getRegex(){return e=>RegExp(e,"iums")}}const ie=J("maalulaVerbalStore",()=>{const t=se(),e=E(0),r=u(()=>{switch(e.value){case 0:return D.maalulaVerbalRoots;case 1:default:return D.maalulaPerfects}}),m=u(()=>{var d;return((d=t[r.value])==null?void 0:d.data)||[]});return{tab:e,tabData:m}}),ce={class:"grep-multiline"},ue=L({__name:"GrepMultiline",props:{multiline:{type:String,default:""},colorSearcherString:{type:String,default:""}},setup(t){const e=u(()=>t.multiline.split(/\n+/)),r=u(()=>new RegExp(`(${t.colorSearcherString})`,"iu")),m=i=>t.colorSearcherString?i.split(r.value):[i],d=u(()=>e.value.map(m));return(i,g)=>(n(),l("div",ce,[(n(!0),l(_,null,f(d.value,(o,y)=>(n(),l("div",{key:y,class:"stem"},[(n(!0),l(_,null,f(o,(R,V)=>(n(),l("span",{key:V,class:"part"},S(R),1))),128))]))),128))]))}}),me=j(ue,[["__scopeId","data-v-ec7f7d79"]]),ge={class:"external-wrapper"},Se={class:"searcher"},de={class:"searcher__internal"},he={class:"external"},pe={class:"table"},ve=["onClick"],_e={class:"option-text"},fe={class:"results"},ye={class:"results__internal"},be={key:0,class:"stats"},xe=L({__name:"RootsAndStems",setup(t){const e=ie(),r=[{key:"roots",name:"Roots and Stems"},{key:"perfect",name:"Perfects"}],d=["I","II","III","IV","I(2)","II(2)","III(2)","IV(2)","I(7)","I(8)","I(10)"].map(A.instantiate),i=E(""),g=E(""),o=Q(new B(d)),{tab:y,tabData:R}=W(e),V=u(()=>o.positiveStemSearcherStrings.length||o.negativeStemSearcherStrings.length||g.value),F=u(()=>{if(!V.value)return[];const x=g.value?[RegExp(g.value,"iums")]:[],s=[...o.positiveStemRegexes,...x],a=o.negativeStemRegexes;return R.value.filter(te(s,a))}),K=u(()=>[...o.positiveStemSearcherStrings,g.value].map(s=>`(?:${s})`).join("|"));function P(x,s){o.setOption(x,s),b()}function b(){g.value=i.value}function U(){i.value="",b()}function z(){g.value=i.value="",o.clearAll()}return(x,s)=>(n(),l("div",ge,[c("div",Se,[c("div",de,[p(re,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=a=>i.value=a),label:"Search string",variant:"outlined",density:"compact",class:"searcher__text-field",clearable:"","onClick:clear":U,onKeyup:X(b,["native","enter"])},null,8,["modelValue"]),p(O,{variant:"outlined",class:"searcher__search-button top-button",onClick:b},{default:v(()=>s[2]||(s[2]=[I(" Search ")])),_:1}),p(O,{variant:"outlined",class:"top-button",onClick:z},{default:v(()=>s[3]||(s[3]=[I(" Clear all ")])),_:1})])]),c("div",he,[c("table",pe,[(n(!0),l(_,null,f(o.stems,(a,k)=>(n(),l("tr",{key:a.number},[c("td",{style:T(a.style),class:"stem"},S(a.number),5),(n(!0),l(_,null,f(N(oe),h=>(n(),l("td",{key:h,style:T(a.getStyle(h)),class:"option",onClick:Re=>P(k,h)},[c("div",_e,S(h),1)],12,ve))),128))]))),128))])]),p(le,{modelValue:N(y),"onUpdate:modelValue":s[1]||(s[1]=a=>Y(y)?y.value=a:null),"align-tabs":"center",class:"tabs",onChange:b},{default:v(()=>[(n(),l(_,null,f(r,a=>p(ne,{key:a.key,color:"blue"},{default:v(()=>[I(S(a.name),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),c("div",fe,[c("div",ye,[V.value?(n(),l("div",be,S(F.value.length)+" verbal roots of "+S(N(R).length)+". ",1)):Z("",!0),p(ae,{items:F.value},{default:v(({items:a})=>[(n(!0),l(_,null,f(a,(k,h)=>(n(),ee(me,{key:h,multiline:k,"color-searcher-string":K.value},{default:v(()=>[I(S(k)+" ",1),s[4]||(s[4]=c("hr",null,null,-1))]),_:2},1032,["multiline","color-searcher-string"]))),128))]),_:1},8,["items"])])])]))}}),Te=j(xe,[["__scopeId","data-v-45d40989"]]);export{Te as default};
