var b=Object.defineProperty;var R=(i,e,t)=>e in i?b(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var h=(i,e,t)=>R(i,typeof e!="symbol"?e+"":e,t);import{u as j,S as J,a as P}from"./SearchResults-RFrrAHf0.js";import{b as V,a as T,e as $,o as r,f,F as D,n as N,D as p,h as y,p as S,l as O,V as _,m as k,_ as F,d as G,c as d,aB as z,bG as H,w as I,g as x,i as u,bH as B,k as Q}from"./index-CfmlCSze.js";import{a as L}from"./assets-3J83TRlH.js";import{L as w,u as X}from"./GrepLine.vue_vue_type_style_index_0_lang-BVbgYXI3.js";import{u as q}from"./useGetResource-Cs6Tk7lC.js";class A{constructor({key:e,title:t,isChosen:o}){h(this,"key");h(this,"title");h(this,"isChosen");this.key=e,this.title=t,this.isChosen=o}toggle(){this.isChosen=!this.isChosen}choose(){this.isChosen=!0}unchoose(){this.isChosen=!1}static instantiate(e){return new A(e)}}class M{constructor(e){h(this,"data");this.data=e.map(A.instantiate)}optionByKey(e){return this.data.find(t=>t.key===e)}toggle(e){var t;(t=this.optionByKey(e))==null||t.toggle()}chooseAll(){this.data.forEach(e=>e.choose())}unchooseAll(){this.data.forEach(e=>e.unchoose())}toggleAll(){this.areAllChosen?this.unchooseAll():this.chooseAll()}chooseKeys(e){this.unchooseAll(),this.data.forEach(t=>e!=null&&e.includes(t.key)?t.choose():t.unchoose())}get chosenKeys(){return this.data.filter(({isChosen:e})=>e).map(({key:e})=>e)}get areAllChosen(){return this.data.every(e=>e.isChosen)}}const U={class:"container d-flex justify-center"},W=V({__name:"OptionsChooser",props:{optionsProp:{},hasAll:{type:Boolean},chosenOptions:{}},emits:["chosen-options"],setup(i,{emit:e}){const t=e,o=T(new M(i.optionsProp));$(()=>i.chosenOptions,s=>o.chooseKeys(s),{immediate:!0});const c=s=>{s?o.toggle(s):o.toggleAll(),t("chosen-options",o.chosenKeys)};return(s,l)=>(r(),f("div",U,[(r(!0),f(D,null,N(o.data,({title:a,key:m,isChosen:C})=>(r(),p(_,{key:m,variant:C?"outlined":"text",onClick:n=>c(m)},{default:y(()=>[S(O(a),1)]),_:2},1032,["variant","onClick"]))),128)),s.hasAll?(r(),p(_,{key:0,variant:o.areAllChosen?"outlined":"text"+s.foo,onClick:l[0]||(l[0]=a=>c())},{default:y(()=>l[1]||(l[1]=[S(" All ")])),_:1},8,["variant"])):k("",!0)]))}}),Y=F(W,[["__scopeId","data-v-50fe08bd"]]),K={[w.turoyo]:{link:L.turoyoDictsJson.link,dicts:[{key:"ritter",title:"Ritter",isChosen:!0},{key:"jastrow",title:"Jastrow",isChosen:!1},{key:"jan",title:"XÃ«zne",isChosen:!1}]},[w.maalula]:{link:L.maalulaDictsJson.link,dicts:[{key:"arnold",title:"Arnold",isChosen:!0}]}},Z=G("simpleDictStore",()=>{const i=X(),e=d(()=>{var n;return(n=K[i.value])==null?void 0:n.link}),t=q(e,{}),o=z("dict",[]),{searcher:c,searcherString:s}=j(),l=H(),a=d(()=>{var n;return((n=K[i.value])==null?void 0:n.dicts)||[]});I(()=>{l.value.isDictionary&&!o.value.length&&(o.value=a.value.filter(({isChosen:n})=>n).map(({key:n})=>n))});const m=d(()=>s.value?a.value.map(({key:n,title:g})=>{const E=C(n).filter(v=>c.value.regex.test(v)).map(v=>({title:"",line:v}));return{key:n,title:g,lines:E}}):[]);function C(n){var g;return((g=t.value)==null?void 0:g[n])||[]}return{searcher:c,initialDicts:a,dictData:t,searcherString:s,chosenDictionaries:o,matchingDictLinesArr:m}}),re=V({__name:"DictsSearch",setup(i){const e=Z(),t=d(()=>e.matchingDictLinesArr.filter(({key:s})=>e.chosenDictionaries.includes(s)));function o(s){e.searcherString=s}function c(s){e.chosenDictionaries=s}return(s,l)=>(r(),f(D,null,[x(B,{class:"searcher-wrapper"},{default:y(()=>[x(J,{"searcher-string":u(e).searcherString,"corpus-name":s.corpusName,onSearcherString:o},null,8,["searcher-string","corpus-name"])]),_:1}),u(e).initialDicts.length>1?(r(),p(Y,{key:0,"options-prop":u(e).initialDicts,"chosen-options":u(e).chosenDictionaries,"has-all":"",onChosenOptions:c},null,8,["options-prop","chosen-options"])):k("",!0),(r(!0),f(D,null,N(t.value,a=>(r(),p(B,{key:a.key},{default:y(()=>[Q("h1",null,O(a.title),1),a.lines.length?(r(),p(P,{key:0,"lines-matching":a.lines,searcher:u(e).searcher},null,8,["lines-matching","searcher"])):k("",!0)]),_:2},1024))),128))],64))}});export{re as _};
