import{c as h,b as z,bJ as D,m as y,r as b,o as c,f as d,g as m,h as S,L as H,n as f,_ as M,bK as A,E as w,d as J,a as L,e as E,aX as F,A as R,j as T,V as U,F as x,k as $,p as V,D as j,i as O}from"./index-BoiOrObW.js";import{c as P,u as q,L as k,K as B,_ as G}from"./GrepLine.vue_vue_type_style_index_0_lang-BzW5ReQ7.js";import{C as I}from"./Color-l8zxla4Y.js";import{V as Q}from"./VTooltip-OAKvTfIq.js";import{u as W}from"./index-BADcXKFd.js";import{u as X,A as C}from"./assetsStore-CNAXdDAX.js";import{V as Y}from"./VTextField-BexRD-2a.js";import{V as Z}from"./VDialog-Ca8i9qcX.js";import{_ as ee}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-CtLdIZHY.js";const te=()=>{const i=W("search",""),e=h(()=>new P(i.value));return{searcherString:i,searcher:e}},se=["fill"],ae=z({__name:"KeyboardIcon",props:{tooltip:{type:String,default:"Click to open a virtual keyboard"}},emits:["click"],setup(i,{emit:e}){D(v=>({"343572bc":y(r),"75de9347":y(u)}));const a=i,n=e,o=b(!0),p=h(()=>!a.tooltip||!o.value),{darkGrey:r,lightBrown:u}=I;return(v,t)=>(c(),d("span",{onClick:t[0]||(t[0]=s=>n("click"))},[m(Q,{disabled:p.value,text:i.tooltip,location:"bottom","open-delay":"500"},{activator:S(({props:s})=>[(c(),d("svg",H(s,{fill:y(I).grey,class:"keyboard-icon-svg",height:"50px",viewBox:"0 0 24 24",width:"50px",xmlns:"http://www.w3.org/2000/svg"}),t[1]||(t[1]=[f("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"},null,-1)]),16,se))]),_:1},8,["disabled","text"])]))}}),re=M(ae,[["__scopeId","data-v-43d9ee52"]]),ne=A(function(e){return e?e.split(`======
`).map(o=>o.split(`
`)).map(o=>({title:w.head(o),lines:w.tail(o)})):[]}),oe=J("simpleCorpusStore",()=>{const i=X(),e=L({}),a=L({}),n=q(),o=h(()=>{switch(n.value){case k.turoyo:return C.turoyoCorpusJson;case k.urmi:return C.urmiCorpusJson;case k.maalula:default:return C.maalulaDictsJson}}),p=h(()=>i[o.value].data),r=ne(p),{searcherString:u,searcher:v}=te(),t=h(()=>{const l=[];if(!r.value)return l;for(const g of r.value){const{title:K,lines:_}=g;for(const N of _)l.push({title:K,line:N})}return l}),s=h(()=>u.value?t.value.reduce((l,g)=>{const _=v.value.regex.test(g.line)?[g]:[];return[...l,..._]},[]):[]);return{corporaObj:e,searcherStringsObj:a,searcher:v,searcherString:u,matchingLines:s}}),le={class:"searcher align-center flex-column"},ie={class:"searchers d-flex"},ue={class:"input-wrapper"},ce=z({__name:"Searcher",setup(i){const e=oe(),a=b(""),n=b(!1),o=b(null),p=[t=>!!t||"Search string should not be empty"],r=h({get:()=>a.value,set:t=>{a.value=w.isString(t)?t:"",a.value||u()}}),u=()=>{e.searcherString=r.value},v=t=>{r.value=t,n.value&&u()};return E(()=>e.searcherString,t=>{a.value=t},{immediate:!0}),F(()=>{o.value=document.querySelector(".input-wrapper .v-text-field input")}),(t,s)=>(c(),d(x,null,[f("div",le,[f("div",ie,[m(re,{onClick:s[0]||(s[0]=l=>n.value=!0)}),f("div",ue,[m(Y,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=l=>r.value=l),rules:p,autocomplete:"off",label:"Search string",color:"primary",variant:"outlined",density:"compact",clearable:"","hide-details":"",onKeyup:R(u,["enter"])},null,8,["modelValue"])]),m(U,{ref:"search_btn",disabled:!r.value,variant:"outlined",onClick:u},{default:S(()=>s[4]||(s[4]=[T(" Search ")])),_:1},8,["disabled"])]),m(B,{value:r.value,"input-el":o.value,type:"regex",visible:"",onSubmit:v},null,8,["value","input-el"])]),m(Z,{modelValue:n.value,"onUpdate:modelValue":s[3]||(s[3]=l=>n.value=l),"hide-overlay":"",fullscreen:""},{default:S(()=>[m(B,{visible:n.value,value:r.value,"input-name":"Search string",onSubmit:v,"onUpdate:visible":s[2]||(s[2]=l=>n.value=l)},null,8,["visible","value"])]),_:1},8,["modelValue"])],64))}}),ke=M(ce,[["__scopeId","data-v-360f7d34"]]),pe={key:0,class:"results-stats"},me={key:0,style:{color:"blueviolet"}},de=z({__name:"SearchResults",props:{linesMatching:{},searcher:{},translationLanguage:{}},setup(i){return(e,a)=>(c(),d(x,null,[e.searcher.value?(c(),d("div",pe," Number of lines in output: "+$(e.linesMatching.length),1)):V("",!0),a[1]||(a[1]=f("br",null,null,-1)),e.linesMatching?(c(),j(ee,{key:1,items:e.linesMatching,class:"search-results-box results"},{default:S(({items:n})=>[(c(!0),d(x,null,O(n,({line:o,title:p},r)=>(c(),d("div",{key:r,class:"lines"},[p?(c(),d("div",me,$(p),1)):V("",!0),m(G,{str:o,searcher:e.searcher,"translation-language":e.translationLanguage},null,8,["str","searcher","translation-language"]),a[0]||(a[0]=f("br",null,null,-1))]))),128))]),_:1},8,["items"])):V("",!0)],64))}}),Ce=M(de,[["__scopeId","data-v-6088288f"]]);export{ke as S,Ce as a,oe as b,te as u};
