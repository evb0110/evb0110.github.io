var F=Object.defineProperty;var I=(s,e,t)=>e in s?F(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var h=(s,e,t)=>I(s,typeof e!="symbol"?e+"":e,t);import{d as M,a as O,a1 as P,c as m,a2 as x,w as T,aM as z,b as E,e as Q,o as i,f as p,F as _,i as N,v as g,h as S,j as B,k as A,V as G,p as y,_ as $,g as K,aG as V,m as f,n as j}from"./index-t7_ix521.js";import{u as X,L as C}from"./GrepLine-pD9MscJ7.js";import{u as q}from"./index-G0DTNfZk.js";import{u as H,S as U,a as W}from"./SearchResults-BACmqFtG.js";var k=(s=>(s.BrowseAndSearch="BrowseAndSearch",s.DictsSearch="DictsSearch",s))(k||{});const J=M("componentMountStore",()=>{const s=O(new Set);function e(n){s.add(n)}function t(n){s.delete(n)}return{components:s,mount:e,unmount:t}}),Y={[C.turoyo]:[{key:"ritter",title:"Ritter",isChosen:!0,translationLanguage:"German"},{key:"jastrow",title:"Jastrow",isChosen:!1,translationLanguage:"German"},{key:"jan",title:"XÃ«zne",isChosen:!1,translationLanguage:"Swedish"}],[C.maalula]:[{key:"arnold",title:"Arnold",isChosen:!0,translationLanguage:"German"}]},Z=M("simpleDictStore",()=>{const s=P(),e=J(),t=X(),n=m(()=>{switch(t.value){case C.turoyo:return x.turoyoDictsJson;case C.maalula:default:return x.maalulaDictsJson}}),l=m(()=>{var r;return((r=s[n.value])==null?void 0:r.data)||{}}),o=q("dict",[]),{searcher:c,searcherString:a}=H(),u=m(()=>Y[t.value]||[]);T(()=>{e.components.has(k.DictsSearch)&&!o.value.length&&(o.value=u.value.filter(({isChosen:r})=>r).map(({key:r})=>r))});const D=m(()=>a.value?u.value.map(({key:r,title:d,translationLanguage:R})=>{const b=L(r).filter(v=>c.value.regex.test(v)).map(v=>({title:"",line:v,translationLanguage:R}));return{key:r,title:d,lines:b}}):[]);function L(r){var d;return((d=l.value)==null?void 0:d[r])||[]}return{searcher:c,initialDicts:u,dictData:l,searcherString:a,chosenDictionaries:o,matchingDictLinesArr:D}}),ee=s=>{const e=J();e.mount(s),z(()=>{e.unmount(s)})};class w{constructor({key:e,title:t,isChosen:n}){h(this,"key");h(this,"title");h(this,"isChosen");this.key=e,this.title=t,this.isChosen=n}toggle(){this.isChosen=!this.isChosen}choose(){this.isChosen=!0}unchoose(){this.isChosen=!1}static instantiate(e){return new w(e)}}class te{constructor(e){h(this,"data");this.data=e.map(w.instantiate)}optionByKey(e){return this.data.find(t=>t.key===e)}toggle(e){var t;(t=this.optionByKey(e))==null||t.toggle()}chooseAll(){this.data.forEach(e=>e.choose())}unchooseAll(){this.data.forEach(e=>e.unchoose())}toggleAll(){this.areAllChosen?this.unchooseAll():this.chooseAll()}chooseKeys(e){this.unchooseAll(),this.data.forEach(t=>e!=null&&e.includes(t.key)?t.choose():t.unchoose())}get chosenKeys(){return this.data.filter(({isChosen:e})=>e).map(({key:e})=>e)}get areAllChosen(){return this.data.every(e=>e.isChosen)}}const se={class:"container d-flex justify-center"},ne=E({__name:"OptionsChooser",props:{optionsProp:{},hasAll:{type:Boolean},chosenOptions:{}},emits:["chosen-options"],setup(s,{emit:e}){const t=e,n=O(new te(s.optionsProp));Q(()=>s.chosenOptions,o=>n.chooseKeys(o),{immediate:!0});const l=o=>{o?n.toggle(o):n.toggleAll(),t("chosen-options",n.chosenKeys)};return(o,c)=>(i(),p("div",se,[(i(!0),p(_,null,N(n.data,({title:a,key:u,isChosen:D})=>(i(),g(G,{key:u,variant:D?"outlined":"text",onClick:L=>l(u)},{default:S(()=>[B(A(a),1)]),_:2},1032,["variant","onClick"]))),128)),o.hasAll?(i(),g(G,{key:0,variant:n.areAllChosen?"outlined":"text"+o.foo,onClick:c[0]||(c[0]=a=>l())},{default:S(()=>c[1]||(c[1]=[B(" All ")])),_:1},8,["variant"])):y("",!0)]))}}),oe=$(ne,[["__scopeId","data-v-50fe08bd"]]),ae={class:"dict-header"},re={key:0,class:"result-count"},ie=E({__name:"DictsSearch",setup(s){const e={jan:"Swedish",ritter:"German",jastrow:"German",arnold:"German"},t=Z();ee(k.DictsSearch);const n=m(()=>t.matchingDictLinesArr.filter(({key:o})=>t.chosenDictionaries.includes(o)));function l(o){t.chosenDictionaries=o}return(o,c)=>(i(),p(_,null,[K(V,{class:"searcher-wrapper"},{default:S(()=>[K(U)]),_:1}),f(t).initialDicts.length>1?(i(),g(oe,{key:0,"options-prop":f(t).initialDicts,"chosen-options":f(t).chosenDictionaries,"has-all":"",onChosenOptions:l},null,8,["options-prop","chosen-options"])):y("",!0),(i(!0),p(_,null,N(n.value,a=>(i(),g(V,{key:a.key,class:"dict-section"},{default:S(()=>[j("div",ae,[j("h1",null,A(a.title),1),a.lines.length?(i(),p("span",re,"("+A(a.lines.length)+" results)",1)):y("",!0)]),a.lines.length?(i(),g(W,{key:0,"lines-matching":a.lines,searcher:f(t).searcher,"translation-language":e[a.key],"dict-key":a.key},null,8,["lines-matching","searcher","translation-language","dict-key"])):y("",!0)]),_:2},1024))),128))],64))}}),ge=$(ie,[["__scopeId","data-v-5d6c1141"]]);export{ge as D};
