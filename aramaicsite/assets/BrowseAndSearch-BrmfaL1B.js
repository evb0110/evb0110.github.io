var wt=Object.defineProperty;var St=(e,t,l)=>t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var R=(e,t,l)=>St(e,typeof t!="symbol"?t+"":t,l);import{Y as Ct,M as re,d as _t,c as g,X as At,r as E,m as j,b as ce,bi as Tt,o as T,f as P,F as U,i as we,D as ie,h as Z,j as ke,k as xe,V as Le,p as ue,v as ee,b2 as ot,I as ut,J as rt,aH as It,x as Se,bj as Pt,q as de,E as it,ac as Et,aq as Lt,t as ne,s as pe,g as d,a6 as q,ab as ct,aX as Bt,aY as Dt,G as Nt,aC as Rt,aD as qt,bk as Mt,af as Ve,ah as $t,a$ as Ft,Q as Ke,T as Ot,b1 as Ht,bl as Ut,ay as se,ax as oe,ak as Kt,aW as Be,bm as zt,b3 as Gt,aE as jt,am as Wt,aF as Jt,K as Xt,b7 as Qt,bn as ze,aA as ge,aB as Yt,ap as Zt,aa as ea,at as ta,ag as aa,ad as G,bf as la,aj as qe,bo as Ge,bp as na,e as W,aJ as fe,bq as Te,br as sa,a7 as dt,ae as vt,bs as oa,bt as mt,bu as ua,w as je,bv as ra,be as Ie,bw as ft,bx as ia,aw as ca,by as da,b8 as Ce,H as ye,az as va,bz as ma,bA as fa,bB as ha,bC as We,bD as Je,bE as pa,bF as Xe,bG as ba,bH as ya,bI as ht,n as H,l as De,_ as ve,A as ga,aP as ka,as as Me,bJ as xa,U as pt,B as Va,ar as wa,bK as Sa,W as Ca}from"./index-CWQiOToK.js";import{u as he}from"./index-CPWJ5DDg.js";import{u as _a,L as Qe,D as Ye,K as Ze,a as Aa,b as me,G as Ta,s as Ia,_ as Pa,S as et,I as Ea}from"./GrepLine-CAZcoT6q.js";import{u as La,A as tt}from"./assetsStore-DbqHHkOI.js";import{V as Ne,m as Ba}from"./VTextField-VpIlnt9C.js";import{h as Da}from"./VInput-gZESMCXc.js";import{f as bt}from"./forwardRefs-DWGaNmQL.js";import{V as at,m as Na,a as lt,g as Ra}from"./VOverlay-ikf7eXl5.js";import{a as yt,V as qa}from"./VDialog-Q6E3tDR3.js";import{V as Ma}from"./VCheckboxBtn-gPcB3Ysr.js";import{m as $a,V as nt}from"./VSlideGroup-DSVwVKdg.js";import{_ as Fa}from"./CopyResults-dgWr3_kp.js";class $e{constructor({volume:t,texts:l}){R(this,"volumeName");R(this,"texts");this.texts=l.map(u=>({volumeName:t,...u})).map(Fe.instantiate),this.volumeName=t}get totalContents(){return re.flatMap(this.texts,"contents")}static instantiate(t){return new $e(t)}}class Fe{constructor({volumeName:t,textNumber:l,textName:u,contents:s}){R(this,"volumeName");R(this,"textNumber");R(this,"_textName");R(this,"rawContents");this.volumeName=t,this.textNumber=l,this._textName=u,this.rawContents=s}get contents(){return this.rawContents.map(t=>({volumeName:this.volumeName,textNumber:this.textNumber,textName:this.textName,...t})).map(Oe.instantiate)}get textName(){return this._textName.replace(/\.txt/,"")}set textName(t){this._textName=t}static instantiate(t){return new Fe(t)}}class Oe{constructor({volumeName:t,textNumber:l,textName:u,lineNumber:s,textus:i,versio:v}){R(this,"volumeName");R(this,"textNumber");R(this,"textName");R(this,"lineNumber");R(this,"textus");R(this,"versio");this.volumeName=t,this.textNumber=l,this.textName=u,this.lineNumber=s,this.textus=i,this.versio=v}get title(){return this.volumeName+": "+this.textName}get hash(){return"h"+Ct(this)}static instantiate(t){return new Oe(t)}}const Oa=_t("corpusWithTranslationStore",()=>{const e=La(),t=_a(),l=g(()=>{switch(t.value){case Qe.maalula:return tt.maalulaCorpusJson;case Qe.turoyo:default:return tt.turoyoNewCorpusJson}}),u=g(()=>{var v;return(v=e[l.value])==null?void 0:v.data}),s=At(()=>{var v;return((v=u.value)==null?void 0:v.map($e.instantiate))||[]},[]),i=g(()=>re.flatMap(s.value,"totalContents"));return{corpusArray:s,corpusLines:i}}),Ha=(e,t)=>{const l=E(e.indexOf(j(t))||0),u=g(()=>e[l.value]);function s(){l.value=(l.value+1)%e.length}return function(){return s(),u.value}},Ua={class:"d-flex ga-1"},Ka=ce({__name:"ModeSwitcher",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Tt(e,"modelValue"),l=Ha(Ye,t);function u(){t.value=l()}return(s,i)=>(T(),P("div",Ua,[(T(!0),P(U,null,we(j(Ye),v=>(T(),ie(Le,{key:v,variant:v===t.value?"outlined":"text",class:"d-none d-sm-block",size:"small",onClick:r=>t.value=v},{default:Z(()=>[ke(xe(v)+" mode ",1)]),_:2},1032,["variant","onClick"]))),128)),t.value?(T(),ie(Le,{key:0,class:"d-sm-none",variant:"outlined",onClick:i[0]||(i[0]=v=>u())},{default:Z(()=>[ke(xe(t.value)+" mode ",1)]),_:1})):ue("",!0)]))}}),gt=Symbol.for("vuetify:v-chip-group"),za=ee({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Pt},...$a(),...Se(),...It({selectedClass:"v-chip--selected"}),...rt(),...ut(),...ot({variant:"tonal"})},"VChipGroup");de()({name:"VChipGroup",props:za(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:l}=t;const{themeClasses:u}=it(e),{isSelected:s,select:i,next:v,prev:r,selected:o}=Et(e,gt);return Lt({VChip:{color:ne(e,"color"),disabled:ne(e,"disabled"),filter:ne(e,"filter"),variant:ne(e,"variant")}}),pe(()=>{const c=nt.filterProps(e);return d(nt,q(c,{class:["v-chip-group",{"v-chip-group--column":e.column},u.value,e.class],style:e.style}),{default:()=>{var y;return[(y=l.default)==null?void 0:y.call(l,{isSelected:s,select:i,next:v,prev:r,selected:o.value})]}})}),{}}});const Ga=ee({activeClass:String,appendAvatar:String,appendIcon:ge,closable:Boolean,closeIcon:{type:ge,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:ge,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:ze(),onClickOnce:ze(),...Qt(),...Se(),...Xt(),...Jt(),...Wt(),...jt(),...Gt(),...zt(),...rt({tag:"span"}),...ut(),...ot({variant:"tonal"})},"VChip"),ja=de()({name:"VChip",directives:{Ripple:Yt},props:Ga(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:l,emit:u,slots:s}=t;const{t:i}=ct(),{borderClasses:v}=Bt(e),{colorClasses:r,colorStyles:o,variantClasses:c}=Dt(e),{densityClasses:y}=Nt(e),{elevationClasses:x}=Rt(e),{roundedClasses:m}=qt(e),{sizeClasses:p}=Mt(e),{themeClasses:k}=it(e),V=Ve(e,"modelValue"),a=$t(e,gt,!1),f=Ft(e,l),b=g(()=>e.link!==!1&&f.isLink.value),w=g(()=>!e.disabled&&e.link!==!1&&(!!a||e.link||f.isClickable.value)),S=g(()=>({"aria-label":i(e.closeLabel),onClick(C){C.preventDefault(),C.stopPropagation(),V.value=!1,u("click:close",C)}}));function B(C){var K;u("click",C),w.value&&((K=f.navigate)==null||K.call(f,C),a==null||a.toggle())}function $(C){(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),B(C))}return()=>{const C=f.isLink.value?"a":e.tag,K=!!(e.appendIcon||e.appendAvatar),J=!!(K||s.append),z=!!(s.close||e.closable),X=!!(s.filter||e.filter)&&a,te=!!(e.prependIcon||e.prependAvatar),Q=!!(te||s.prepend),ae=!a||a.isSelected.value;return V.value&&Ke(d(C,q({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":w.value,"v-chip--filter":X,"v-chip--pill":e.pill},k.value,v.value,ae?r.value:void 0,y.value,x.value,m.value,p.value,c.value,a==null?void 0:a.selectedClass.value,e.class],style:[ae?o.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:w.value?0:void 0,onClick:B,onKeydown:w.value&&!b.value&&$},f.linkProps),{default:()=>{var M;return[Ht(w.value,"v-chip"),X&&d(Ut,{key:"filter"},{default:()=>[Ke(d("div",{class:"v-chip__filter"},[s.filter?d(oe,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},s.filter):d(se,{key:"filter-icon",icon:e.filterIcon},null)]),[[Kt,a.isSelected.value]])]}),Q&&d("div",{key:"prepend",class:"v-chip__prepend"},[s.prepend?d(oe,{key:"prepend-defaults",disabled:!te,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},s.prepend):d(U,null,[e.prependIcon&&d(se,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&d(Be,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),d("div",{class:"v-chip__content","data-no-activator":""},[((M=s.default)==null?void 0:M.call(s,{isSelected:a==null?void 0:a.isSelected.value,selectedClass:a==null?void 0:a.selectedClass.value,select:a==null?void 0:a.select,toggle:a==null?void 0:a.toggle,value:a==null?void 0:a.value.value,disabled:e.disabled}))??e.text]),J&&d("div",{key:"append",class:"v-chip__append"},[s.append?d(oe,{key:"append-defaults",disabled:!K,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},s.append):d(U,null,[e.appendIcon&&d(se,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&d(Be,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),z&&d("button",q({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},S.value),[s.close?d(oe,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},s.close):d(se,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Ot("ripple"),w.value&&e.ripple,null]])}}}),Wa=ee({id:String,submenu:Boolean,...dt(Na({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:yt}}),["absolute"])},"VMenu"),Ja=de()({name:"VMenu",props:Wa(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:l}=t;const u=Ve(e,"modelValue"),{scopeId:s}=Zt(),{isRtl:i}=ea(),v=ta(),r=g(()=>e.id||`v-menu-${v}`),o=E(),c=aa(lt,null),y=G(new Set);vt(lt,{register(){y.value.add(v)},unregister(){y.value.delete(v)},closeParents(a){setTimeout(()=>{var f;!y.value.size&&!e.persistent&&(a==null||(f=o.value)!=null&&f.contentEl&&!oa(a,o.value.contentEl))&&(u.value=!1,c==null||c.closeParents())},40)}}),la(()=>{c==null||c.unregister(),document.removeEventListener("focusin",x)}),na(()=>u.value=!1);async function x(a){var w,S,B;const f=a.relatedTarget,b=a.target;await qe(),u.value&&f!==b&&((w=o.value)!=null&&w.contentEl)&&((S=o.value)!=null&&S.globalTop)&&![document,o.value.contentEl].includes(b)&&!o.value.contentEl.contains(b)&&((B=Ge(o.value.contentEl)[0])==null||B.focus())}W(u,a=>{a?(c==null||c.register(),fe&&document.addEventListener("focusin",x,{once:!0})):(c==null||c.unregister(),fe&&document.removeEventListener("focusin",x))},{immediate:!0});function m(a){c==null||c.closeParents(a)}function p(a){var f,b,w,S,B;if(!e.disabled)if(a.key==="Tab"||a.key==="Enter"&&!e.closeOnContentClick){if(a.key==="Enter"&&(a.target instanceof HTMLTextAreaElement||a.target instanceof HTMLInputElement&&a.target.closest("form")))return;a.key==="Enter"&&a.preventDefault(),sa(Ge((f=o.value)==null?void 0:f.contentEl,!1),a.shiftKey?"prev":"next",C=>C.tabIndex>=0)||(u.value=!1,(w=(b=o.value)==null?void 0:b.activatorEl)==null||w.focus())}else e.submenu&&a.key===(i.value?"ArrowRight":"ArrowLeft")&&(u.value=!1,(B=(S=o.value)==null?void 0:S.activatorEl)==null||B.focus())}function k(a){var b;if(e.disabled)return;const f=(b=o.value)==null?void 0:b.contentEl;f&&u.value?a.key==="ArrowDown"?(a.preventDefault(),a.stopImmediatePropagation(),Te(f,"next")):a.key==="ArrowUp"?(a.preventDefault(),a.stopImmediatePropagation(),Te(f,"prev")):e.submenu&&(a.key===(i.value?"ArrowRight":"ArrowLeft")?u.value=!1:a.key===(i.value?"ArrowLeft":"ArrowRight")&&(a.preventDefault(),Te(f,"first"))):(e.submenu?a.key===(i.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(a.key))&&(u.value=!0,a.preventDefault(),setTimeout(()=>setTimeout(()=>k(a))))}const V=g(()=>q({"aria-haspopup":"menu","aria-expanded":String(u.value),"aria-owns":r.value,onKeydown:k},e.activatorProps));return pe(()=>{const a=at.filterProps(e);return d(at,q({ref:o,id:r.value,class:["v-menu",e.class],style:e.style},a,{modelValue:u.value,"onUpdate:modelValue":f=>u.value=f,absolute:!0,activatorProps:V.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":m,onKeydown:p},s),{activator:l.activator,default:function(){for(var f=arguments.length,b=new Array(f),w=0;w<f;w++)b[w]=arguments[w];return d(oe,{root:"VMenu"},{default:()=>{var S;return[(S=l.default)==null?void 0:S.call(l,...b)]}})}})}),bt({id:r,ΨopenChildren:y},o)}}),Xa=ee({renderless:Boolean,...Se()},"VVirtualScrollItem"),Qa=de()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Xa(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:l,emit:u,slots:s}=t;const{resizeRef:i,contentRect:v}=mt(void 0,"border");W(()=>{var r;return(r=v.value)==null?void 0:r.height},r=>{r!=null&&u("update:height",r)}),pe(()=>{var r,o;return e.renderless?d(U,null,[(r=s.default)==null?void 0:r.call(s,{itemRef:i})]):d("div",q({ref:i,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(o=s.default)==null?void 0:o.call(s)])})}}),Ya=-1,Za=1,Pe=100,el=ee({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function tl(e,t){const l=ua(),u=G(0);je(()=>{u.value=parseFloat(e.itemHeight||0)});const s=G(0),i=G(Math.ceil((parseInt(e.height)||l.height.value)/(u.value||16))||1),v=G(0),r=G(0),o=E(),c=E();let y=0;const{resizeRef:x,contentRect:m}=mt();je(()=>{x.value=o.value});const p=g(()=>{var n;return o.value===document.documentElement?l.height.value:((n=m.value)==null?void 0:n.height)||parseInt(e.height)||0}),k=g(()=>!!(o.value&&c.value&&p.value&&u.value));let V=Array.from({length:t.value.length}),a=Array.from({length:t.value.length});const f=G(0);let b=-1;function w(n){return V[n]||u.value}const S=ra(()=>{const n=performance.now();a[0]=0;const h=t.value.length;for(let A=1;A<=h-1;A++)a[A]=(a[A-1]||0)+w(A-1);f.value=Math.max(f.value,performance.now()-n)},f),B=W(k,n=>{n&&(B(),y=c.value.offsetTop,S.immediate(),M(),~b&&qe(()=>{fe&&window.requestAnimationFrame(()=>{be(b),b=-1})}))});ft(()=>{S.clear()});function $(n,h){const A=V[n],I=u.value;u.value=I?Math.min(u.value,h):h,(A!==h||I!==u.value)&&(V[n]=h,S())}function C(n){return n=Ie(n,0,t.value.length-1),a[n]||0}function K(n){return al(a,n)}let J=0,z=0,X=0;W(p,(n,h)=>{h&&(M(),n<h&&requestAnimationFrame(()=>{z=0,M()}))});function te(){if(!o.value||!c.value)return;const n=o.value.scrollTop,h=performance.now();h-X>500?(z=Math.sign(n-J),y=c.value.offsetTop):z=n-J,J=n,X=h,M()}function Q(){!o.value||!c.value||(z=0,X=0,M())}let ae=-1;function M(){cancelAnimationFrame(ae),ae=requestAnimationFrame(_e)}function _e(){if(!o.value||!p.value)return;const n=J-y,h=Math.sign(z),A=Math.max(0,n-Pe),I=Ie(K(A),0,t.value.length),F=n+p.value+Pe,_=Ie(K(F)+1,I+1,t.value.length);if((h!==Ya||I<s.value)&&(h!==Za||_>i.value)){const L=C(s.value)-C(I),D=C(_)-C(i.value);Math.max(L,D)>Pe?(s.value=I,i.value=_):(I<=0&&(s.value=I),_>=t.value.length&&(i.value=_))}v.value=C(s.value),r.value=C(t.value.length)-C(i.value)}function be(n){const h=C(n);!o.value||n&&!h?b=n:o.value.scrollTop=h}const Ae=g(()=>t.value.slice(s.value,i.value).map((n,h)=>({raw:n,index:h+s.value})));return W(t,()=>{V=Array.from({length:t.value.length}),a=Array.from({length:t.value.length}),S.immediate(),M()},{deep:!0}),{calculateVisibleItems:M,containerRef:o,markerRef:c,computedItems:Ae,paddingTop:v,paddingBottom:r,scrollToIndex:be,handleScroll:te,handleScrollend:Q,handleItemResize:$}}function al(e,t){let l=e.length-1,u=0,s=0,i=null,v=-1;if(e[l]<t)return l;for(;u<=l;)if(s=u+l>>1,i=e[s],i>t)l=s-1;else if(i<t)v=s,u=s+1;else return i===t?s:u;return v}const ll=ee({items:{type:Array,default:()=>[]},renderless:Boolean,...el(),...Se(),...va()},"VVirtualScroll"),nl=de()({name:"VVirtualScroll",props:ll(),setup(e,t){let{slots:l}=t;const u=ia("VVirtualScroll"),{dimensionStyles:s}=ca(e),{calculateVisibleItems:i,containerRef:v,markerRef:r,handleScroll:o,handleScrollend:c,handleItemResize:y,scrollToIndex:x,paddingTop:m,paddingBottom:p,computedItems:k}=tl(e,ne(e,"items"));return da(()=>e.renderless,()=>{function V(){var b,w;const f=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[f]("scroll",o,{passive:!0}),document[f]("scrollend",c)):((b=v.value)==null||b[f]("scroll",o,{passive:!0}),(w=v.value)==null||w[f]("scrollend",c))}Ce(()=>{v.value=Ra(u.vnode.el,!0),V(!0)}),ft(V)}),pe(()=>{const V=k.value.map(a=>d(Qa,{key:a.index,renderless:e.renderless,"onUpdate:height":f=>y(a.index,f)},{default:f=>{var b;return(b=l.default)==null?void 0:b.call(l,{item:a.raw,index:a.index,...f})}}));return e.renderless?d(U,null,[d("div",{ref:r,class:"v-virtual-scroll__spacer",style:{paddingTop:ye(m.value)}},null),V,d("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ye(p.value)}},null)]):d("div",{ref:v,class:["v-virtual-scroll",e.class],onScrollPassive:o,onScrollend:c,style:[s.value,e.style]},[d("div",{ref:r,class:"v-virtual-scroll__container",style:{paddingTop:ye(m.value),paddingBottom:ye(p.value)}},[V])])}),{calculateVisibleItems:i,scrollToIndex:x}}});function sl(e,t){const l=G(!1);let u;function s(r){cancelAnimationFrame(u),l.value=!0,u=requestAnimationFrame(()=>{u=requestAnimationFrame(()=>{l.value=!1})})}async function i(){await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>{if(l.value){const o=W(l,()=>{o(),r()})}else r()})}async function v(r){var y,x;if(r.key==="Tab"&&((y=t.value)==null||y.focus()),!["PageDown","PageUp","Home","End"].includes(r.key))return;const o=(x=e.value)==null?void 0:x.$el;if(!o)return;(r.key==="Home"||r.key==="End")&&o.scrollTo({top:r.key==="Home"?0:o.scrollHeight,behavior:"smooth"}),await i();const c=o.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(r.key==="PageDown"||r.key==="Home"){const m=o.getBoundingClientRect().top;for(const p of c)if(p.getBoundingClientRect().top>=m){p.focus();break}}else{const m=o.getBoundingClientRect().bottom;for(const p of[...c].reverse())if(p.getBoundingClientRect().bottom<=m){p.focus();break}}}return{onScrollPassive:s,onKeydown:v}}const ol=ee({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ge,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...ya({itemChildren:!1})},"Select"),ul=ee({...ol(),...dt(Ba({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ba({transition:{component:yt}})},"VSelect"),st=de()({name:"VSelect",props:ul(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:l}=t;const{t:u}=ct(),s=E(),i=E(),v=E(),r=Ve(e,"menu"),o=g({get:()=>r.value,set:n=>{var h;r.value&&!n&&((h=i.value)!=null&&h.ΨopenChildren.size)||(r.value=n)}}),{items:c,transformIn:y,transformOut:x}=ma(e),m=Ve(e,"modelValue",[],n=>y(n===null?[null]:fa(n)),n=>{const h=x(n);return e.multiple?h:h[0]??null}),p=g(()=>typeof e.counterValue=="function"?e.counterValue(m.value):typeof e.counterValue=="number"?e.counterValue:m.value.length),k=Da(),V=g(()=>m.value.map(n=>n.value)),a=G(!1),f=g(()=>o.value?e.closeText:e.openText);let b="",w;const S=g(()=>e.hideSelected?c.value.filter(n=>!m.value.some(h=>e.valueComparator(h,n))):c.value),B=g(()=>e.hideNoData&&!S.value.length||e.readonly||(k==null?void 0:k.isReadonly.value)),$=g(()=>{var n;return{...e.menuProps,activatorProps:{...((n=e.menuProps)==null?void 0:n.activatorProps)||{},"aria-haspopup":"listbox"}}}),C=E(),K=sl(C,s);function J(n){e.openOnClear&&(o.value=!0)}function z(){B.value||(o.value=!o.value)}function X(n){We(n)&&te(n)}function te(n){var F,_;if(!n.key||e.readonly||k!=null&&k.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(n.key)&&n.preventDefault(),["Enter","ArrowDown"," "].includes(n.key)&&(o.value=!0),["Escape","Tab"].includes(n.key)&&(o.value=!1),n.key==="Home"?(F=C.value)==null||F.focus("first"):n.key==="End"&&((_=C.value)==null||_.focus("last"));const h=1e3;if(e.multiple||!We(n))return;const A=performance.now();A-w>h&&(b=""),b+=n.key.toLowerCase(),w=A;const I=c.value.find(L=>L.title.toLowerCase().startsWith(b));if(I!==void 0){m.value=[I];const L=S.value.indexOf(I);fe&&window.requestAnimationFrame(()=>{var D;L>=0&&((D=v.value)==null||D.scrollToIndex(L))})}}function Q(n){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!n.props.disabled)if(e.multiple){const A=m.value.findIndex(F=>e.valueComparator(F.value,n.value)),I=h??!~A;if(~A){const F=I?[...m.value,n]:[...m.value];F.splice(A,1),m.value=F}else I&&(m.value=[...m.value,n])}else{const A=h!==!1;m.value=A?[n]:[],qe(()=>{o.value=!1})}}function ae(n){var h;(h=C.value)!=null&&h.$el.contains(n.relatedTarget)||(o.value=!1)}function M(){var n;e.eager&&((n=v.value)==null||n.calculateVisibleItems())}function _e(){var n;a.value&&((n=s.value)==null||n.focus())}function be(n){a.value=!0}function Ae(n){if(n==null)m.value=[];else if(Xe(s.value,":autofill")||Xe(s.value,":-webkit-autofill")){const h=c.value.find(A=>A.title===n);h&&Q(h)}else s.value&&(s.value.value="")}return W(o,()=>{if(!e.hideSelected&&o.value&&m.value.length){const n=S.value.findIndex(h=>m.value.some(A=>e.valueComparator(A.value,h.value)));fe&&window.requestAnimationFrame(()=>{var h;n>=0&&((h=v.value)==null||h.scrollToIndex(n))})}}),W(()=>e.items,(n,h)=>{o.value||a.value&&!h.length&&n.length&&(o.value=!0)}),pe(()=>{const n=!!(e.chips||l.chip),h=!!(!e.hideNoData||S.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),A=m.value.length>0,I=Ne.filterProps(e),F=A||!a.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return d(Ne,q({ref:s},I,{modelValue:m.value.map(_=>_.props.value).join(", "),"onUpdate:modelValue":Ae,focused:a.value,"onUpdate:focused":_=>a.value=_,validationValue:m.externalValue,counterValue:p.value,dirty:A,class:["v-select",{"v-select--active-menu":o.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":m.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:F,"onClick:clear":J,"onMousedown:control":z,onBlur:ae,onKeydown:te,"aria-label":u(f.value),title:u(f.value)}),{...l,default:()=>d(U,null,[d(Ja,q({ref:i,modelValue:o.value,"onUpdate:modelValue":_=>o.value=_,activator:"parent",contentClass:"v-select__content",disabled:B.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:M,onAfterLeave:_e},$.value),{default:()=>[h&&d(ha,q({ref:C,selected:V.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:_=>_.preventDefault(),onKeydown:X,onFocusin:be,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},K,e.listProps),{default:()=>{var _,L,D;return[(_=l["prepend-item"])==null?void 0:_.call(l),!S.value.length&&!e.hideNoData&&(((L=l["no-data"])==null?void 0:L.call(l))??d(Je,{title:u(e.noDataText)},null)),d(nl,{ref:v,renderless:!0,items:S.value},{default:Y=>{var Ue;let{item:O,index:le,itemRef:N}=Y;const He=q(O.props,{ref:N,key:le,onClick:()=>Q(O,null)});return((Ue=l.item)==null?void 0:Ue.call(l,{item:O,index:le,props:He}))??d(Je,q(He,{role:"option"}),{prepend:xt=>{let{isSelected:Vt}=xt;return d(U,null,[e.multiple&&!e.hideSelected?d(Ma,{key:O.value,modelValue:Vt,ripple:!1,tabindex:"-1"},null):void 0,O.props.prependAvatar&&d(Be,{image:O.props.prependAvatar},null),O.props.prependIcon&&d(se,{icon:O.props.prependIcon},null)])}})}}),(D=l["append-item"])==null?void 0:D.call(l)]}})]}),m.value.map((_,L)=>{function D(N){N.stopPropagation(),N.preventDefault(),Q(_,!1)}const Y={"onClick:close":D,onKeydown(N){N.key!=="Enter"&&N.key!==" "||(N.preventDefault(),N.stopPropagation(),D(N))},onMousedown(N){N.preventDefault(),N.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},O=n?!!l.chip:!!l.selection,le=O?pa(n?l.chip({item:_,index:L,props:Y}):l.selection({item:_,index:L})):void 0;if(!(O&&!le))return d("div",{key:_.value,class:"v-select__selection"},[n?l.chip?d(oe,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:_.title}}},{default:()=>[le]}):d(ja,q({key:"chip",closable:e.closableChips,size:"small",text:_.title,disabled:_.props.disabled},Y),null):le??d("span",{class:"v-select__selection-text"},[_.title,e.multiple&&L<m.value.length-1&&d("span",{class:"v-select__selection-comma"},[ke(",")])])])})]),"append-inner":function(){var Y;for(var _=arguments.length,L=new Array(_),D=0;D<_;D++)L[D]=arguments[D];return d(U,null,[(Y=l["append-inner"])==null?void 0:Y.call(l,...L),e.menuIcon?d(se,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),bt({isFocused:a,menu:o,select:Q},s)}}),rl={class:"browse-selects"},il={class:"selects mt-5 mb-8"},cl={class:"no-data-placeholder mr-5"},dl=ce({__name:"Browse",props:{corpusArr:{default:()=>[]},volumeLabel:{default:"Volume"},textLabel:{default:"Text"}},emits:["chosen"],setup(e,{emit:t}){const l={get chosen(){return{volume:"",text:""}}},u=t,s=he("volume"),i=he("text");s.value&&y(),i.value&&c(),Ce(c),ht(()=>{s.value=null,i.value=null});const v=g(()=>{if(s.value)return e.corpusArr.find(({volumeName:x})=>x===s.value)}),r=g(()=>v.value?v.value.texts:[]);function o(x,m){m==="volume"?(i.value=null,y()):c()}function c(){u("chosen",{volume:s.value,text:i.value})}function y(){u("chosen",l.chosen)}return(x,m)=>(T(),P("div",rl,[H("div",il,[d(st,{modelValue:j(s),"onUpdate:modelValue":[m[0]||(m[0]=p=>De(s)?s.value=p:null),m[1]||(m[1]=p=>o(p,"volume"))],items:x.corpusArr,label:x.volumeLabel,"item-title":"volumeName","item-value":"volumeName",variant:"outlined",density:"compact"},null,8,["modelValue","items","label"]),d(st,{modelValue:j(i),"onUpdate:modelValue":[m[2]||(m[2]=p=>De(i)?i.value=p:null),m[3]||(m[3]=p=>o(p,"text"))],items:r.value,label:x.textLabel,"item-title":"textName","item-value":"textNumber",variant:"outlined",density:"compact"},{"no-data":Z(()=>[m[4]||(m[4]=H("span",{class:"no-data-arrow"},"⬅",-1)),H("span",cl,xe(`A ${x.volumeLabel} should be chosen`),1)]),_:1},8,["modelValue","items","label"])])]))}}),vl=ve(dl,[["__scopeId","data-v-0b260389"]]),ml={},fl={height:"32",viewBox:"0 0 24 24",width:"32",xmlns:"http://www.w3.org/2000/svg"};function hl(e,t){return T(),P("svg",fl,t[0]||(t[0]=[H("path",{d:"M4.616 18q-.691 0-1.153-.462T3 16.384V7.616q0-.691.463-1.153T4.615 6h14.77q.69 0 1.152.463T21 7.616v8.769q0 .69-.463 1.153T19.385 18zm0-1h14.769q.23 0 .423-.192t.192-.424V7.616q0-.231-.192-.424T19.385 7H4.615q-.23 0-.423.192T4 7.616v8.769q0 .23.192.423t.423.192M9 15.77h6q.31 0 .54-.221q.23-.22.23-.549q0-.31-.23-.54t-.54-.23H9q-.31 0-.54.221q-.23.22-.23.549q0 .31.23.54t.54.23M4 17V7zm2-7.23q.31 0 .54-.23T6.77 9t-.23-.54T6 8.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23T9.77 9t-.23-.54T9 8.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m-12 3q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23m3 0q.31 0 .54-.23t.23-.54t-.23-.54t-.54-.23t-.54.23t-.23.54t.23.54t.54.23",fill:"lightgrey"},null,-1)]))}const pl=ve(ml,[["render",hl],["__scopeId","data-v-b5f80369"]]),bl={class:"d-flex align-center flex-column"},yl={class:"searchers-grid"},gl=ce({__name:"Search",props:{textusLabel:{default:"Search corpus"},versioLabel:{default:"Search translation"}},emits:["searchers","copy-to-clipboard"],setup(e,{emit:t}){const l=e,u={get searchers(){return{textus:null,versio:null}}},s=t,i=E(u.searchers),v=E(u.searchers),r=E(!1),o=E(null),c=he("textus"),y=he("versio");i.value.textus=c.value,i.value.versio=y.value;const x=g(()=>!i.value.textus&&!i.value.versio),m=g(()=>[{name:"textus",value:i.value.textus,label:l.textusLabel},{name:"versio",value:i.value.versio,label:l.versioLabel}]);function p(f,b){i.value[b]=f||"",f||V()}function k(f){i.value.textus=f,r.value&&V()}function V(){v.value=re.cloneDeep(i.value),s("searchers",re.cloneDeep(v.value)),a()}function a(){c.value=v.value.textus||null,y.value=v.value.versio||null}return Ce(()=>{V(),i.value.textus=c.value,i.value.versio=y.value,(i.value.textus||i.value.versio)&&V(),o.value=document.querySelector(".searchers-grid .v-text-field.input_textus input")}),ht(()=>{c.value=null,y.value=null}),(f,b)=>{const w=pl;return T(),P("div",bl,[H("div",yl,[d(w,{class:"keyboard-icon",onClick:b[0]||(b[0]=S=>r.value=!0)}),d(Le,{disabled:x.value,variant:"outlined",class:"search-btn",color:"success",onClick:V},{default:Z(()=>b[3]||(b[3]=[ke(" Search ")])),_:1},8,["disabled"]),d(Ze,{value:m.value[0].value,"input-el":o.value,class:"keyboard-regex",type:"regex",visible:"",onSubmit:k},null,8,["value","input-el"]),(T(!0),P(U,null,we(m.value,({value:S,label:B,name:$})=>(T(),ie(Ne,{key:$,"model-value":S,label:B,class:Me(`input_${$}`),style:{"min-width":"200px"},variant:"outlined",density:"compact","hide-details":"",clearable:"","onUpdate:modelValue":C=>p(C,$),onKeydown:ga(ka(V,["prevent"]),["enter"])},null,8,["model-value","label","class","onUpdate:modelValue","onKeydown"]))),128)),xa(f.$slots,"default",{class:"slot"},void 0,!0)]),d(qa,{modelValue:r.value,"onUpdate:modelValue":b[2]||(b[2]=S=>r.value=S),"hide-overlay":"",fullscreen:""},{default:Z(()=>[d(Ze,{visible:r.value,value:i.value.textus,"input-name":e.textusLabel,"onUpdate:visible":b[1]||(b[1]=S=>r.value=S),onSubmit:k},null,8,["visible","value","input-name"])]),_:1},8,["modelValue"])])}}}),kl=ve(gl,[["__scopeId","data-v-4dabff03"]]),kt=300;function Ee({hash:e="",keepLocation:t=!1,className:l="chosen"}){return new Promise(u=>{setTimeout(()=>{t||(location.hash=e,setTimeout(()=>scrollBy(0,-200),0));const s=document.querySelector(e);s&&(s.classList.add(l),setTimeout(u,1))},kt)})}function xl(e){const t=document.querySelector(e);t&&Re(t)}function Re(e,t="chosen"){e&&setTimeout(()=>{e.classList.remove(t)},kt)}const Vl=["id"],wl={class:"controls-wrapper"},Sl={class:"lines"},Cl=ce({__name:"LineCard",props:{line:{},searchers:{}},setup(e){const t=e,l=E(),u=pt(),s=Va(),i=g(()=>Aa.map(p=>({lineName:p,str:t.line[p],searcher:t.searchers.data[p]}))),v=g(()=>!t.searchers.areAllEmpty),r=g(()=>u.hash),o=g(()=>"#"+t.line.hash),c=g(()=>{var V;const p=((V=t.line)==null?void 0:V.volumeName.toLowerCase())||"";return p.includes("abou")?"":["jastrow","ritter","arnold","lehrbuch","luf","prym","hors","talay","baxa","ubbadin","maalula","lieder","britta"].some(a=>p.includes(a))?"German":""});function y(){Re(l.value,"chosen")}W(r,(p,k)=>{!p&&k&&y()});async function x(){if(!v.value)return;const{volumeName:p,textNumber:k}=t.line;await s.push({query:{mode:me.browse,volume:p,text:k}}),await Ee({hash:o.value})}function m(){if(!u.hash){Ee({hash:o.value});return}xl(u.hash),u.hash===o.value?s.replace({query:u.query,hash:""}):(Ee({hash:o.value,keepLocation:!0}),s.replace({query:u.query,hash:o.value}));const p=Array.from(document.querySelectorAll('div.line-card[id^="h"]'));for(const k of p)k.style.background&&k.id!==t.line.hash&&Re(k)}return(p,k)=>p.line?(T(),P("div",{key:0,class:"line-card",id:p.line.hash,ref_key:"lineCardRef",ref:l},[H("div",wl,[v.value?(T(),P("div",{key:1,class:"control-sign",onClick:k[1]||(k[1]=V=>x())},"▤")):(T(),P("div",{key:0,class:"control-sign",onClick:k[0]||(k[0]=V=>m())},"#"))]),H("div",Sl,[(T(!0),P(U,null,we(i.value,(V,a)=>(T(),ie(Ta,q({ref_for:!0},V,{key:a,"translation-language":V.lineName==="versio"&&c.value,class:"mb-1"}),null,16,["translation-language"]))),128)),k[2]||(k[2]=H("div",null,[H("br")],-1))])],8,Vl)):ue("",!0)}}),_l=ve(Cl,[["__scopeId","data-v-7742c643"]]),Al={key:1},Tl=ce({__name:"Results",props:{results:{},searchers:{}},setup(e){const t=window,l=E(),u=pt(),s=wa(),i=ne(s,"isDark"),v=g(()=>!e.searchers.areAllEmpty);return Ce(async()=>{var o;const r=u.hash;r&&(await Ia(1e3),(o=document.querySelector(r))==null||o.scrollIntoView({behavior:"smooth",block:"center"}))}),(r,o)=>{const c=Pa;return T(),P("div",{class:Me(["results w-100",{invert:i.value}])},[v.value?(T(),P("div",{key:0,ref_key:"stats",ref:l,class:"results-stats mb-1"},[H("div",null,"Found "+xe(r.results.length)+" contexts",1)],512)):ue("",!0),o[0]||(o[0]=H("br",null,null,-1)),r.results?(T(),P("div",Al,[d(c,{items:r.results,el:j(t)},{default:Z(({items:y})=>[(T(!0),P(U,null,we(y,x=>(T(),P("div",null,[x?(T(),ie(_l,{line:x,searchers:r.searchers,key:x.hash},null,8,["line","searchers"])):ue("",!0)]))),256))]),_:1},8,["items","el"])])):ue("",!0)],2)}}}),Il=ve(Tl,[["__scopeId","data-v-025f8b33"]]),Pl={key:0,class:"searcher-wrapper"},El=ce({__name:"BrowseAndSearch",setup(e){const t=Oa(),l=Sa(),u=g(()=>!!l.text.value),s=g(()=>c.value===me.search),i=g(()=>c.value===me.browse),v=g(()=>s.value?y.value:o.searchers),r=E(!1);vt(Ea.isEager,r);const o={get searchers(){return new et({textus:"",versio:""})}},c=he("mode");c.value||(c.value=me.search);const y=E(o.searchers),x=E({volume:null,text:null}),m=g(()=>{if(!x.value.text||!t.corpusArray.length)return[];const b=re.find(t.corpusArray,{volumeName:x.value.volume});return re.find(b.texts,{textNumber:x.value.text}).contents}),p=g(()=>t.corpusLines),k=g(()=>y.value.areAllEmpty?[]:p.value.filter(y.value.test)),V=g(()=>c.value===me.browse?m.value:k.value);function a(b){y.value=new et(b)}function f(b){x.value=b}return(b,w)=>(T(),P("div",{class:Me([{"no-hashes":u.value},"browse-and-search"]),ref:"wrapper"},[s.value?(T(),P("div",Pl,[d(kl,{"corpus-arr-prop":j(t).corpusArray,"textus-label":"Aramaic text","versio-label":"Translation text",onSearchers:a},{default:Z(()=>[d(Fa,{count:V.value.length,class:"mr-5",onClick:w[0]||(w[0]=S=>r.value=!0)},null,8,["count"])]),_:1},8,["corpus-arr-prop"])])):i.value?(T(),ie(vl,{key:1,"corpus-arr":j(t).corpusArray,onChosen:f},null,8,["corpus-arr"])):ue("",!0),d(Il,{results:V.value,searchers:v.value},null,8,["results","searchers"]),d(j(Ca),{to:"#app-bar-slot"},{default:Z(()=>[d(Ka,{modelValue:j(c),"onUpdate:modelValue":w[1]||(w[1]=S=>De(c)?c.value=S:null),class:"mr-5 button-switcher"},null,8,["modelValue"])]),_:1})],2))}}),zl=ve(El,[["__scopeId","data-v-dbfe28fd"]]);export{zl as B};
