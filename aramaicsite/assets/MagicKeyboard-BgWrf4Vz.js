import{c as b,a as M,e as L,a9 as K,w as N,E as T,b as P,r as D,aI as I,aJ as W,aK as k,aL as F,o as u,f as y,k as S,F as g,p as E,l as h,m as V,n as $,g as A,i as q,h as z,V as G,aM as R,_ as J}from"./index-DBTpNY50.js";import{V as U}from"./VTextarea-yRb4fFHE.js";import"./VInput-CyeSOqCD.js";import"./forwardRefs-DWGaNmQL.js";const j=["input","textarea"],B=i=>b(()=>{if(!(i!=null&&i.value))return null;const n=i.value.$el;return j.map(s=>n.querySelector(s)).find(Boolean)}),H=(i,n)=>{const s=B(i),t=M({start:0,end:0});return L(n,async()=>{const o=s.value;o&&(await K(),t.start=o.selectionStart||0,t.end=o.selectionEnd||0)},{immediate:!0}),N(()=>{const o=s.value;o&&(o.setSelectionRange(t.start,t.end),o.focus())}),t},O=(i,n)=>{const s=B(i),t=H(i,n),o=b(()=>s.value?n.value.slice(t.start-1,t.start):""),m=b(()=>/\S/.test(o.value));async function d(l,c=0){if(s.value){const e=n.value.slice(0,t.start-c),a=n.value.slice(t.end);n.value=e+l+a,await K(),t.start+=l.length-c,t.end=t.start}}function p(l){if(!m.value)return;const c=(o.value+l).normalize("NFC");d(c,1)}return{previousLetter:o,hasPreviousLetter:m,insertText:d,combineText:p}},v={Digit1:{name:"Grave Accent",unicode:"̀",keySymbol:"1"},Digit2:{name:"Acute Accent",unicode:"́",keySymbol:"2"},Digit3:{name:"Circumflex",unicode:"̂",keySymbol:"3"},Digit4:{name:"Tilde",unicode:"̃",keySymbol:"4"},Digit5:{name:"Dot Below",unicode:"̣",keySymbol:"5"},Digit6:{name:"Breve",unicode:"̆",keySymbol:"6"},Digit7:{name:"Dot Above",unicode:"̇",keySymbol:"7"},Digit8:{name:"Diaeresis",unicode:"̈",keySymbol:"8"},Digit9:{name:"Ring Above",unicode:"̊",keySymbol:"9"},KeyV:{name:"Caron",unicode:"̌",keySymbol:"v"},Minus:{name:"Macron",unicode:"̄",keySymbol:"-"},Equal:{name:"Macron Below",unicode:"̱",keySymbol:"="},Comma:{name:"Cedilla",unicode:"̧",keySymbol:","}},x=T.keys(v),f={KeyA:{name:"Glottal Stop",unicode:"ʔ",keySymbol:"a"},KeyW:{name:"Ayn",unicode:"ʕ",keySymbol:"w"}},_=T.keys(f),Q={class:"info-panel"},X={key:1,class:"array"},Y={class:"symbol"},Z=P({__name:"MagicKeyboard",setup(i){const n=D(null),s=D(""),{copy:t}=I({source:s}),{previousLetter:o,hasPreviousLetter:m,insertText:d,combineText:p}=O(n,s),l=W();k(n,()=>{var e;(e=n.value)==null||e.focus()}),F("keydown",e=>{[...x,..._].forEach(a=>{e.code===a&&e.altKey&&e.preventDefault()})}),x.forEach(e=>{const a=`alt_${e}`;k(l[a],()=>{p(v[e].unicode)})}),_.forEach(e=>{const a=`alt_${e}`;k(l[a],()=>{d(f[e].unicode)})});const c=b(()=>{if(!l.alt.value)return{text:"Press Alt to see the list of magic keys. Press any of them in combination with Alt to get the result",type:0};const e=m.value?x.map(r=>({symbol:v[r].keySymbol,text:o.value+v[r].unicode})):[],a=_.map(r=>({symbol:f[r].keySymbol,text:f[r].unicode}));return{value:[...e,...a],type:1}});function C(){t().then(()=>{R.success("Copied to clipboard")})}return(e,a)=>(u(),y(g,null,[S("div",Q,[c.value.type===0?(u(),y(g,{key:0},[E(h(c.value.text),1)],64)):V("",!0),c.value.type===1?(u(),y("div",X,[(u(!0),y(g,null,$(c.value.value,({symbol:r,text:w})=>(u(),y("div",{key:e.key},[S("div",Y,h(r),1),S("div",null,h(w),1)]))),128))])):V("",!0)]),A(q(U),{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=r=>s.value=r),ref_key:"textarea",ref:n,placeholder:"Type something",rows:"10",clearable:"","hide-details":""},null,8,["modelValue"]),A(G,{variant:"outlined",class:"copy-button",size:"large",onClick:C},{default:z(()=>a[1]||(a[1]=[E(" Copy to clipboard ")])),_:1})],64))}}),oe=J(Z,[["__scopeId","data-v-27f58f76"]]);export{oe as default};
