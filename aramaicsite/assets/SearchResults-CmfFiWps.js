import{c as h,b as z,bJ as D,m as y,r as b,o as c,f as m,g as d,h as S,L as H,n as f,_ as M,bK as A,E as C,d as J,a as $,e as E,aX as F,A as R,j as T,V as U,F as w,k as B,p as V,D as j,i as O}from"./index-CmcoFxdY.js";import{c as P,u as q,L as k,K as I,_ as G}from"./GrepLine.vue_vue_type_style_index_0_lang-C3GI3jLn.js";import{C as L}from"./Color-l8zxla4Y.js";import{V as Q}from"./VTooltip-C16e1cBo.js";import{u as W}from"./index-CZIleA7T.js";import{u as X,A as x}from"./assetsStore-CEYUxRnW.js";import{V as Y}from"./VTextField-CNfGjEfx.js";import{V as Z}from"./VDialog-DIGmKdDO.js";import{_ as ee}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-DGlI9GMy.js";const te=()=>{const i=W("search",""),e=h(()=>new P(i.value));return{searcherString:i,searcher:e}},se=["fill"],ae=z({__name:"KeyboardIcon",props:{tooltip:{type:String,default:"Click to open a virtual keyboard"}},emits:["click"],setup(i,{emit:e}){D(v=>({"343572bc":y(r),"75de9347":y(u)}));const a=i,o=e,n=b(!0),p=h(()=>!a.tooltip||!n.value),{darkGrey:r,lightBrown:u}=L;return(v,t)=>(c(),m("span",{onClick:t[0]||(t[0]=s=>o("click"))},[d(Q,{disabled:p.value,text:i.tooltip,location:"bottom","open-delay":"500"},{activator:S(({props:s})=>[(c(),m("svg",H(s,{fill:y(L).grey,class:"keyboard-icon-svg",height:"50px",viewBox:"0 0 24 24",width:"50px",xmlns:"http://www.w3.org/2000/svg"}),t[1]||(t[1]=[f("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"},null,-1)]),16,se))]),_:1},8,["disabled","text"])]))}}),re=M(ae,[["__scopeId","data-v-43d9ee52"]]),oe=A(function(e){return e?e.split(`======
`).map(n=>n.split(`
`)).map(n=>({title:C.head(n),lines:C.tail(n)})):[]}),ne=J("simpleCorpusStore",()=>{const i=X(),e=$({}),a=$({}),o=q(),n=h(()=>{switch(o.value){case k.turoyo:return x.turoyoCorpusJson;case k.urmi:return x.urmiCorpusJson;case k.maalula:default:return x.maalulaDictsJson}}),p=h(()=>i[n.value].data),r=oe(p),{searcherString:u,searcher:v}=te(),t=h(()=>{const l=[];if(!r.value)return l;for(const g of r.value){const{title:K,lines:_}=g;for(const N of _)l.push({title:K,line:N})}return l}),s=h(()=>u.value?t.value.reduce((l,g)=>{const _=v.value.regex.test(g.line)?[g]:[];return[...l,..._]},[]):[]);return{corporaObj:e,searcherStringsObj:a,searcher:v,searcherString:u,matchingLines:s}}),le={class:"searcher align-center flex-column"},ie={class:"searchers d-flex"},ue={class:"input-wrapper"},ce=z({__name:"Searcher",setup(i){const e=ne(),a=b(""),o=b(!1),n=b(null),p=[t=>!!t||"Search string should not be empty"],r=h({get:()=>a.value,set:t=>{a.value=C.isString(t)?t:"",a.value||u()}}),u=()=>{e.searcherString=r.value},v=t=>{r.value=t,o.value&&u()};return E(()=>e.searcherString,t=>{a.value=t},{immediate:!0}),F(()=>{n.value=document.querySelector(".input-wrapper .v-text-field input")}),(t,s)=>(c(),m(w,null,[f("div",le,[f("div",ie,[d(re,{onClick:s[0]||(s[0]=l=>o.value=!0)}),f("div",ue,[d(Y,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=l=>r.value=l),rules:p,autocomplete:"off",label:"Search string",color:"primary",variant:"outlined",density:"compact",clearable:"","hide-details":"",onKeyup:R(u,["enter"])},null,8,["modelValue"])]),d(U,{ref:"search_btn",disabled:!r.value,variant:"outlined",onClick:u},{default:S(()=>s[4]||(s[4]=[T(" Search ")])),_:1},8,["disabled"])]),d(I,{value:r.value,"input-el":n.value,type:"regex",visible:"",onSubmit:v},null,8,["value","input-el"])]),d(Z,{modelValue:o.value,"onUpdate:modelValue":s[3]||(s[3]=l=>o.value=l),"hide-overlay":"",fullscreen:""},{default:S(()=>[d(I,{visible:o.value,value:r.value,"input-name":"Search string",onSubmit:v,"onUpdate:visible":s[2]||(s[2]=l=>o.value=l)},null,8,["visible","value"])]),_:1},8,["modelValue"])],64))}}),ke=M(ce,[["__scopeId","data-v-360f7d34"]]),pe={key:0,class:"results-stats"},de={key:0,style:{color:"blueviolet"}},me=z({__name:"SearchResults",props:{linesMatching:{},searcher:{}},setup(i){return(e,a)=>(c(),m(w,null,[e.searcher.value?(c(),m("div",pe," Number of lines in output: "+B(e.linesMatching.length),1)):V("",!0),a[1]||(a[1]=f("br",null,null,-1)),e.linesMatching?(c(),j(ee,{key:1,items:e.linesMatching,class:"search-results-box results"},{default:S(({items:o})=>[(c(!0),m(w,null,O(o,({line:n,title:p},r)=>(c(),m("div",{key:r,class:"lines"},[p?(c(),m("div",de,B(p),1)):V("",!0),d(G,{str:n,searcher:e.searcher},null,8,["str","searcher"]),a[0]||(a[0]=f("br",null,null,-1))]))),128))]),_:1},8,["items"])):V("",!0)],64))}}),xe=M(me,[["__scopeId","data-v-a23d703e"]]);export{ke as S,xe as a,ne as b,te as u};
