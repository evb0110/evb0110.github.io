import{c as p,a9 as D,E as A,b as L,r as E,aI as M,aJ as N,aK as S,aL as I,o as y,f as m,k as g,F as h,p as V,l as _,m as K,n as P,g as T,i as w,h as F,V as R,aM as W,_ as $}from"./index-KPz2EIQn.js";import{V as q}from"./VTextarea-Bjo_ZZGO.js";import"./VInput-yumcb7Ku.js";import"./forwardRefs-DWGaNmQL.js";const G=["input","textarea"],z=c=>p(()=>{if(!(c!=null&&c.value))return null;const n=c.value.$el;return G.map(i=>n.querySelector(i)).find(Boolean)}),J=(c,n)=>{const i=z(c),u=p(()=>{const a=i.value;if(a){const e=a.selectionStart||0;return n.value.slice(e-1,e)}return""}),d=p(()=>/\S/.test(u.value));async function b(a){const e=i.value;if(e){const s=e.selectionStart||0,r=e.selectionEnd||0;n.value=n.value.slice(0,s)+a+n.value.slice(r),await D(),e.setSelectionRange(s+a.length,s+a.length),e.focus(),e.focus()}}async function k(a){if(!d.value)return;const e=i.value;if(e){const s=e.selectionStart||0,r=e.selectionEnd||0,t=(u.value+a).normalize("NFC");n.value=n.value.slice(0,s-1)+t+n.value.slice(r),await D(),e.setSelectionRange(s+a.length,s+a.length),e.focus(),e.focus()}}return{previousLetter:u,hasPreviousLetter:d,insertText:b,combineText:k}},v={Digit1:{name:"Grave Accent",unicode:"̀",keySymbol:"1"},Digit2:{name:"Acute Accent",unicode:"́",keySymbol:"2"},Digit3:{name:"Circumflex",unicode:"̂",keySymbol:"3"},Digit4:{name:"Tilde",unicode:"̃",keySymbol:"4"},Digit5:{name:"Dot Below",unicode:"̣",keySymbol:"5"},Digit6:{name:"Breve",unicode:"̆",keySymbol:"6"},Digit7:{name:"Dot Above",unicode:"̇",keySymbol:"7"},Digit8:{name:"Diaeresis",unicode:"̈",keySymbol:"8"},Digit9:{name:"Ring Above",unicode:"̊",keySymbol:"9"},KeyV:{name:"Caron",unicode:"̌",keySymbol:"v"},Minus:{name:"Macron",unicode:"̄",keySymbol:"-"},Equal:{name:"Macron Below",unicode:"̱",keySymbol:"="},Comma:{name:"Cedilla",unicode:"̧",keySymbol:","}},x=A.keys(v),f={KeyA:{name:"Glottal Stop",unicode:"ʔ",keySymbol:"a"},KeyE:{name:"Ayn",unicode:"ʕ",keySymbol:"e"}},C=A.keys(f),U={class:"info-panel"},j={key:1,class:"array"},H={class:"symbol"},O=L({__name:"MagicKeyboard",setup(c){const n=E(null),i=E(""),{copy:u}=M({source:i}),{previousLetter:d,hasPreviousLetter:b,insertText:k,combineText:a}=J(n,i),e=N();S(n,()=>{var t;(t=n.value)==null||t.focus()}),[...x,...C].forEach(t=>{I("keydown",o=>{o.code===t&&o.altKey&&o.preventDefault()})}),x.forEach(t=>{const o=`alt_${t}`;S(e[o],()=>{a(v[t].unicode)})}),C.forEach(t=>{const o=`alt_${t}`;S(e[o],()=>{k(f[t].unicode)})});const s=p(()=>{if(!e.alt.value)return{text:"Press Alt to see the list of magic keys",type:0};const t=b.value?x.map(l=>({symbol:v[l].keySymbol,text:d.value+v[l].unicode})):[],o=C.map(l=>({symbol:f[l].keySymbol,text:f[l].unicode}));return{value:[...t,...o],type:1}});function r(){u().then(()=>{W.success("Copied to clipboard")})}return(t,o)=>(y(),m(h,null,[g("div",U,[s.value.type===0?(y(),m(h,{key:0},[V(_(s.value.text),1)],64)):K("",!0),s.value.type===1?(y(),m("div",j,[(y(!0),m(h,null,P(s.value.value,({symbol:l,text:B})=>(y(),m("div",{key:t.key},[g("div",H,_(l),1),g("div",null,_(B),1)]))),128))])):K("",!0)]),T(w(q),{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=l=>i.value=l),ref_key:"textarea",ref:n,placeholder:"Type something",rows:"10",clearable:"","hide-details":""},null,8,["modelValue"]),T(R,{variant:"outlined",class:"copy-button",onClick:r},{default:F(()=>o[1]||(o[1]=[V(" Copy to clipboard ")])),_:1})],64))}}),ee=$(O,[["__scopeId","data-v-3d1701ef"]]);export{ee as default};
