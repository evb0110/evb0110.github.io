var Y=Object.defineProperty;var Z=(e,t,n)=>t in e?Y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var D=(e,t,n)=>Z(e,typeof t!="symbol"?t+"":t,n);import{r as v,bM as _,E as z,c as y,bA as ee,b as R,af as te,t as ae,w as q,aX as ne,o,f as d,n as K,D as F,A as se,p as b,F as B,i as N,g as $,h as E,j as T,k as M,ag as C,V as I,m as G,_ as X,a1 as le,U as re,b1 as ue,bN as oe,bO as ie}from"./index-C9Unu0ph.js";import{V as ce}from"./VTextField-shq9_0-x.js";import{b as ve}from"./betterSplit-CW8NIeFU.js";const de=e=>{const t=v(!1),n=v(!1),m=e.join(" or ");function u(r){return`extract only ${m} parts of the following text, give their translation into english, no other commentaries or explanations, return html fragment not md, give translations of the words in ${m} if they differ from forms used: ${r}, wrap in html tags and add bullets for readability`}async function i(r){var p;t.value=!0;const w=u(r),c=await((p=_)==null?void 0:p.generateContent(w)),x=await(c==null?void 0:c.response.text().replace(/`/g,"").replace(/^html/,"").replace(r,""))||"";return t.value=!1,n.value=!0,x}return{isLoading:t,isReady:n,getTranslation:i}};var V=(e=>(e.title="title",e.textus="textus",e.versio="versio",e))(V||{});const Oe=["title","textus","versio"];var me=(e=>(e.search="search",e.browse="browse",e))(me||{});const Pe=["search","browse"],fe="(?:a|e|i|iͧ|o|u|ä|å|ë|ö|ü|á|á̧|â|ä|å|é|ê|ë|í|î|ó|ô|ö|ú|û|ü|ā|ā́|ă|ą̂|ē|ĕ|ī|ı|ō|ŏ|ū|ŭ|ŭ́|ə|ə́|и|о|ю|ạ|ạ|ạ́|ậ|ắ|ẹ|ọ|ộ|ụ|ụ̂|а|о|у|э|ы|и|ь)",ge="(?:b|b́|c|c̄|d|f|f̣|g|h|j|k|k̇|l|m|n|n̄|p|p̄|p̣|q|q̣|r|r̄|r̄̄|s|s̄|t|t́|v|w|x|y|z|z̄|ç|ć|č|ğ|ġ|ģ|ķ|ń|ň|ŕ|ś|ŝ|ş|ş́|ş̇|š|ţ|ž|ǧ|ǧ̣|Ɂ|ɧ|ʔ|ʕ|ʕ́|ʕ̣|ʾ|ʿ|б|в|й|к|п|р|с|т|х|ҫ|ҫ́|ҫ̂|ҫ̄|ع|ḅ|ḇ|ḉ|ḍ|ḏ|ḏ̣|ḏ̣̣|ḥ|ḳ|ḳ̇|ḷ|ṃ|ṅ|ṇ|ṗ|ṛ|ṝ|ṡ|ṣ|ṫ|ṭ|ṯ|ẓ|ẖ|ﻉ)",he=new RegExp("[\\\\]v","gi"),ye=new RegExp("[\\\\]c","gi"),pe=z.memoize(function(t){return t.replace(he,fe).replace(ye,ge)});class A{constructor(t){D(this,"_value");this._value=t||""}get value(){return this._value}set value(t){this._value=t||""}get valueNormalized(){return pe(this.value)}get isEmpty(){return!this.value}get regex(){return RegExp(this.valueNormalized,"iu")}static instantiate(t){return new A(t)}}class Ue{constructor(t){D(this,"data");this.data=z.mapValues(t,A.instantiate)}get searchersArr(){return z.values(this.data)}get areAllEmpty(){return this.searchersArr.every(t=>t.isEmpty)}get test(){return t=>z.keys(this.data).every(n=>this.data[n].regex.test(t[n]))}}var L=(e=>(e.turoyo="turoyo",e.urmi="urmi",e.maalula="maalula",e))(L||{});const ke=()=>{const e=ee();return y(()=>e.path.split("/")[1])};function be(e){return new Promise(t=>setTimeout(t,e))}const we="a á ä ā b ḅ c č ç d ḍ ḏ ḏ̣ e é ē ə f g ǧ ġ ģ h ḥ i í î ī ı j k ḳ l m ṃ ň ṇ o ó ö p q r ṛ s š ṡ ş ṣ t ţ ṭ ṯ u ú ü ụ v w x y z ž ʔ ʕ",xe=we.split(/\s+/),Ce="a ä b ʙ c č ç d e ǝ ə f g Ģ h i I ı j k l m n o ö p q r s ş ṣ ș t ţ ṭ ț u ü v w x y z ž ƶ а ә б в г д е ж з и й к л м н о п р с т у ф х һ ц ч ш щ ъ ы ь э ю я",Se=Ce.split(/\s+/),Ee="ʔ ʕ a á ā b c ć č d ḍ ḏ ḏ̣ e é ē ə f g ǧ ġ h ḥ i í ī k ḳ l ḷ m n o ō p r s š ṣ t ṭ ṯ u ú ū w x y z ž ẓ",Te=Ee.split(/\s+/),Ie={[L.turoyo]:xe,[L.urmi]:Se,[L.maalula]:Te},Be=()=>{const e=ke();return y(()=>Ie[e.value])},Me={class:"working-block"},$e={class:"keyboard specific-keys"},ze={class:"keyboard common-keys"},Ne={key:1,class:"submit-wrapper"},Ve=R({__name:"Keyboard",props:{value:{default:""},inputName:{default:""},visible:{type:Boolean,default:!1},type:{default:"full"},inputEl:{default:null}},emits:["submit","update:visible"],setup(e,{emit:t}){const n=t,m=te(),u=ae(m,"isDark"),i=v(0),r=v(0),w=v(null),c=v(e.value),x=[String.raw`\v`,String.raw`\c`,"^","$","\\"],p=["⬅","space","del","backspace","⮕"],H=Be(),f=v(null);q(()=>{f.value=w.value||e.inputEl},{flush:"sync"}),q(()=>{c.value=e.value});function J(l){c.value=l,U()}function O(){n("update:visible",!1)}function P(){n("submit",c.value),O()}function U(){var l,a;i.value=((l=f.value)==null?void 0:l.selectionStart)||0,r.value=((a=f.value)==null?void 0:a.selectionEnd)||0}async function Q(){await be(20),U()}function j(l){if(!f.value)return;const a=c.value;i.value=f.value.selectionStart||0,r.value=f.value.selectionEnd||0;const{buttonValueMod:s,selectionStartMod:g,selectionEndMod:h}=W({buttonValue:l,selectionStart:i.value,selectionEnd:r.value,existingValue:a});f.value.value=a.slice(0,g)+s+a.slice(h,a.length),c.value=f.value.value,f.value.focus(),i.value=f.value.selectionStart=g+s.length,r.value=f.value.selectionEnd=g+s.length,e.type==="regex"&&n("submit",c.value)}ne(()=>{w.value=document.querySelector(".keyboard-wrapper .v-text-field input"),i.value=r.value=e.value.length});function W({buttonValue:l,selectionStart:a,selectionEnd:s,existingValue:g}){let h,k=a,S=s;return l==="backspace"?(a>0&&a===s&&(k=a-1),h=""):l==="del"?(a<g.length&&a===s&&(S=s+1),h=""):l==="space"?h=" ":l==="⬅"?(a<s?S=a:(k=Math.max(0,a-1),S=k),h=""):l==="⮕"?(a<s?k=s:(k=Math.min(g.length,a+1),S=k),h=""):(h=l,k=a,S=s),{buttonValueMod:h,selectionStartMod:k,selectionEndMod:S}}return(l,a)=>l.visible?(o(),d("div",{key:0,class:C([{full:l.type==="full",regex:l.type==="regex"},"keyboard-wrapper"])},[K("div",Me,[l.type==="full"?(o(),F(ce,{key:0,label:l.inputName,"model-value":c.value,class:"input",density:"compact",variant:"outlined",clearable:"",onFocus:Q,"onUpdate:modelValue":J,onKeyup:se(P,["enter","native"])},null,8,["label","model-value"])):b("",!0),K("div",$e,[x?(o(),d(B,{key:0},N(x,s=>$(I,{key:s,color:"warning",variant:"outlined",class:C({invert:u.value}),rounded:"",onClick:g=>j(s)},{default:E(()=>[T(M(s),1)]),_:2},1032,["class","onClick"])),64)):b("",!0),G(H)&&l.type==="full"?(o(!0),d(B,{key:1},N(G(H),s=>(o(),F(I,{key:s,variant:"outlined",rounded:"",onClick:g=>j(s)},{default:E(()=>[T(M(s),1)]),_:2},1032,["onClick"]))),128)):b("",!0)]),K("div",ze,[p&&l.type==="full"?(o(),d(B,{key:0},N(p,s=>$(I,{key:s,class:C({invert:u.value}),color:"teal",rounded:"",size:"large",variant:"outlined",onClick:g=>j(s)},{default:E(()=>[T(M(s),1)]),_:2},1032,["class","onClick"])),64)):b("",!0)]),l.type==="full"?(o(),d("div",Ne,[$(I,{class:"mr-5",variant:"outlined",onClick:O},{default:E(()=>a[0]||(a[0]=[T(" Cancel ")])),_:1}),$(I,{color:"primary",variant:"outlined",class:C({invert:u.value}),onClick:P},{default:E(()=>a[1]||(a[1]=[T(" Search ")])),_:1},8,["class"])])):b("",!0)])],2)):b("",!0)}}),Ge=X(Ve,[["__scopeId","data-v-c06dd1bc"]]),Le=Symbol("isEager"),Re={isEager:Le},Xe=R({__name:"InfiniteScroll",props:{el:{default:null},items:{},chunkSize:{default:50}},setup(e){const t=le(Re.isEager,v(!1)),n=re([]);ue(t,()=>{n.value=e.items});const m=v(null),u=v(0),i=v(null);q(()=>{u.value=e.chunkSize,i.value=e.el||m.value});const r=y(()=>e.items.slice(0,u.value)),w=y(()=>t.value?n.value:r.value);return oe(i,()=>{u.value+=e.chunkSize},{distance:50,canLoadMore:()=>!t.value&&u.value<e.items.length}),(c,x)=>(o(),d("div",{ref_key:"internalEl",ref:m},[ie(c.$slots,"default",{items:w.value})],512))}}),Ae=["innerHTML"],je=R({__name:"TranslateAI",props:{languages:{default:()=>[]},str:{}},setup(e){const t=v(),n=v(!1);async function m(){if(!e.languages.length||n.value)return;const{getTranslation:u}=de(e.languages);n.value=!0,t.value=await u(e.str),n.value=!1}return(u,i)=>(o(),d(B,null,[t.value?(o(),d("div",{key:1,class:"hint",onClick:i[0]||(i[0]=r=>t.value="")},"Collapse")):(o(),d("div",{key:0,onClick:m,class:C(["hint",{shimmer:n.value}])},M(`Translate from ${u.languages.join(" and ")}`),3)),t.value?(o(),d("div",{key:2,innerHTML:t.value,class:"translation"},null,8,Ae)):b("",!0)],64))}}),De=X(je,[["__scopeId","data-v-6edb8c04"]]),Je=R({__name:"GrepLine",props:{str:{default:""},searcher:{default:()=>new A},lineName:{default:""},translationLanguage:{}},setup(e){v();const t=y(()=>!e.searcher||e.searcher.isEmpty?[e.str]:ve(e.str,e.searcher.regex)),n=y(()=>e.lineName===V.title),m=y(()=>!e.lineName||e.lineName===V.textus),u=y(()=>e.lineName===V.versio),i=y(()=>({"line-title":n.value,textus:m.value,versio:u.value}));return(r,w)=>{const c=De;return o(),d("div",{class:C(i.value)},[(o(!0),d(B,null,N(t.value,(x,p)=>(o(),d("span",{key:p,class:C({highlight:p%2,invert:r.isDark})},M(x),3))),128)),r.translationLanguage?(o(),F(c,{key:0,languages:[r.translationLanguage],str:r.str},null,8,["languages","str"])):b("",!0)],2)}}});export{Pe as D,Re as I,Ge as K,L,Ue as S,Je as _,Oe as a,me as b,Xe as c,A as d,be as s,ke as u};
