var R=Object.defineProperty;var $=(s,e,t)=>e in s?R(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var h=(s,e,t)=>$(s,typeof e!="symbol"?e+"":e,t);import{d as j,a as G,c as m,w as F,bw as P,b as N,e as T,o as i,f,F as v,i as O,D as p,h as S,j as L,k as E,V as x,p as A,_ as z,g as B,bN as K,m as d,n as I}from"./index-D3YnXnPf.js";import{u as Q,L as C}from"./GrepLine-CAkFmPvJ.js";import{u as X}from"./index-Bi4bFbwn.js";import{u as q,S as H,a as U}from"./SearchResults-CudsvNiw.js";import{u as W,A as V}from"./assetsStore-DDUc8tER.js";var w=(s=>(s.BrowseAndSearch="BrowseAndSearch",s.DictsSearch="DictsSearch",s))(w||{});const M=j("componentMountStore",()=>{const s=G(new Set);function e(n){s.add(n)}function t(n){s.delete(n)}return{components:s,mount:e,unmount:t}}),Y={[C.turoyo]:[{key:"ritter",title:"Ritter",isChosen:!0,translationLanguage:"German"},{key:"jastrow",title:"Jastrow",isChosen:!1,translationLanguage:"German"},{key:"jan",title:"XÃ«zne",isChosen:!1,translationLanguage:"Swedish"}],[C.maalula]:[{key:"arnold",title:"Arnold",isChosen:!0,translationLanguage:"German"}]},Z=j("simpleDictStore",()=>{const s=W(),e=M(),t=Q(),n=m(()=>{switch(t.value){case C.turoyo:return V.turoyoDictsJson;case C.maalula:default:return V.maalulaDictsJson}}),l=m(()=>{var r;return((r=s[n.value])==null?void 0:r.data)||{}}),o=X("dict",[]),{searcher:c,searcherString:a}=q(),u=m(()=>Y[t.value]||[]);F(()=>{e.components.has(w.DictsSearch)&&!o.value.length&&(o.value=u.value.filter(({isChosen:r})=>r).map(({key:r})=>r))});const y=m(()=>a.value?u.value.map(({key:r,title:g,translationLanguage:b})=>{const J=k(r).filter(D=>c.value.regex.test(D)).map(D=>({title:"",line:D,translationLanguage:b}));return{key:r,title:g,lines:J}}):[]);function k(r){var g;return((g=l.value)==null?void 0:g[r])||[]}return{searcher:c,initialDicts:u,dictData:l,searcherString:a,chosenDictionaries:o,matchingDictLinesArr:y}}),ee=s=>{const e=M();e.mount(s),P(()=>{e.unmount(s)})};class _{constructor({key:e,title:t,isChosen:n}){h(this,"key");h(this,"title");h(this,"isChosen");this.key=e,this.title=t,this.isChosen=n}toggle(){this.isChosen=!this.isChosen}choose(){this.isChosen=!0}unchoose(){this.isChosen=!1}static instantiate(e){return new _(e)}}class te{constructor(e){h(this,"data");this.data=e.map(_.instantiate)}optionByKey(e){return this.data.find(t=>t.key===e)}toggle(e){var t;(t=this.optionByKey(e))==null||t.toggle()}chooseAll(){this.data.forEach(e=>e.choose())}unchooseAll(){this.data.forEach(e=>e.unchoose())}toggleAll(){this.areAllChosen?this.unchooseAll():this.chooseAll()}chooseKeys(e){this.unchooseAll(),this.data.forEach(t=>e!=null&&e.includes(t.key)?t.choose():t.unchoose())}get chosenKeys(){return this.data.filter(({isChosen:e})=>e).map(({key:e})=>e)}get areAllChosen(){return this.data.every(e=>e.isChosen)}}const se={class:"container d-flex justify-center"},ne=N({__name:"OptionsChooser",props:{optionsProp:{},hasAll:{type:Boolean},chosenOptions:{}},emits:["chosen-options"],setup(s,{emit:e}){const t=e,n=G(new te(s.optionsProp));T(()=>s.chosenOptions,o=>n.chooseKeys(o),{immediate:!0});const l=o=>{o?n.toggle(o):n.toggleAll(),t("chosen-options",n.chosenKeys)};return(o,c)=>(i(),f("div",se,[(i(!0),f(v,null,O(n.data,({title:a,key:u,isChosen:y})=>(i(),p(x,{key:u,variant:y?"outlined":"text",onClick:k=>l(u)},{default:S(()=>[L(E(a),1)]),_:2},1032,["variant","onClick"]))),128)),o.hasAll?(i(),p(x,{key:0,variant:n.areAllChosen?"outlined":"text"+o.foo,onClick:c[0]||(c[0]=a=>l())},{default:S(()=>c[1]||(c[1]=[L(" All ")])),_:1},8,["variant"])):A("",!0)]))}}),oe=z(ne,[["__scopeId","data-v-50fe08bd"]]),me=N({__name:"DictsSearch",setup(s){const e={jan:"Swedish",ritter:"German",jastrow:"German",arnold:"German"},t=Z();ee(w.DictsSearch);const n=m(()=>t.matchingDictLinesArr.filter(({key:o})=>t.chosenDictionaries.includes(o)));function l(o){t.chosenDictionaries=o}return(o,c)=>(i(),f(v,null,[B(K,{class:"searcher-wrapper"},{default:S(()=>[B(H)]),_:1}),d(t).initialDicts.length>1?(i(),p(oe,{key:0,"options-prop":d(t).initialDicts,"chosen-options":d(t).chosenDictionaries,"has-all":"",onChosenOptions:l},null,8,["options-prop","chosen-options"])):A("",!0),(i(!0),f(v,null,O(n.value,a=>(i(),p(K,{key:a.key},{default:S(()=>[I("h1",null,E(a.title),1),a.lines.length?(i(),p(U,{key:0,"lines-matching":a.lines,searcher:d(t).searcher,"translation-language":e[a.key]},null,8,["lines-matching","searcher","translation-language"])):A("",!0)]),_:2},1024))),128))],64))}});export{me as _};
