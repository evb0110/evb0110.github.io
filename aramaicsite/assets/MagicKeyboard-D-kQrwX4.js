import{c as b,a as I,e as L,a9 as K,w as M,E as T,b as P,r as D,aI as N,aJ as W,aK as p,aL as F,o as m,f as y,k,F as S,p as E,l as h,m as V,n as $,g as A,i as q,h as z,V as G,aM as R,_ as J}from"./index-CpeXymMj.js";import{V as U}from"./VTextarea-Dt9WIamf.js";import"./VInput-OXE_pVCr.js";import"./forwardRefs-DWGaNmQL.js";const j=["input","textarea"],w=i=>b(()=>{if(!(i!=null&&i.value))return null;const t=i.value.$el;return j.map(o=>t.querySelector(o)).find(Boolean)}),H=(i,t)=>{const o=w(i),e=I({start:0,end:0});return L(t,async()=>{const a=o.value;a&&(await K(),e.start=a.selectionStart||0,e.end=a.selectionEnd||0)},{immediate:!0}),M(()=>{const a=o.value;a&&(a.setSelectionRange(e.start,e.end),a.focus())}),e},O=(i,t)=>{const o=w(i),e=H(i,t),a=b(()=>{if(o.value){const l=Q(t.value,e.start);return console.log(t.value,e.start,l),t.value.slice(l,e.start)}return""}),u=b(()=>/\S/.test(a.value));async function d(c,l=0){if(o.value){const n=t.value.slice(0,e.start-l),s=t.value.slice(e.end);t.value=n+c+s,await K(),e.start+=c.length-l,e.end=e.start}}function g(c){if(!u.value)return;const l=(a.value+c).normalize("NFC");d(l,a.value.length)}return{previousLetter:a,hasPreviousLetter:u,insertText:d,combineText:g}};function Q(i,t){const o=new Intl.Segmenter("en",{granularity:"grapheme"});let e=0,a=0;for(const{segment:u}of o.segment(i)){if(a+=u.length,a>=t)break;e++}return e}const v={Digit1:{name:"Grave Accent",unicode:"̀",keySymbol:"1"},Digit2:{name:"Acute Accent",unicode:"́",keySymbol:"2"},Digit3:{name:"Circumflex",unicode:"̂",keySymbol:"3"},Digit4:{name:"Tilde",unicode:"̃",keySymbol:"4"},Digit5:{name:"Dot Below",unicode:"̣",keySymbol:"5"},Digit6:{name:"Breve",unicode:"̆",keySymbol:"6"},Digit7:{name:"Dot Above",unicode:"̇",keySymbol:"7"},Digit8:{name:"Diaeresis",unicode:"̈",keySymbol:"8"},Digit9:{name:"Ring Above",unicode:"̊",keySymbol:"9"},KeyV:{name:"Caron",unicode:"̌",keySymbol:"v"},Minus:{name:"Macron",unicode:"̄",keySymbol:"-"},Equal:{name:"Macron Below",unicode:"̱",keySymbol:"="},Comma:{name:"Cedilla",unicode:"̧",keySymbol:","}},x=T.keys(v),f={KeyA:{name:"Glottal Stop",unicode:"ʔ",keySymbol:"a"},KeyW:{name:"Ayn",unicode:"ʕ",keySymbol:"w"}},_=T.keys(f),X={class:"info-panel"},Y={key:1,class:"array"},Z={class:"symbol"},ee=P({__name:"MagicKeyboard",setup(i){const t=D(null),o=D(""),{copy:e}=N({source:o}),{previousLetter:a,hasPreviousLetter:u,insertText:d,combineText:g}=O(t,o),c=W();p(t,()=>{var n;(n=t.value)==null||n.focus()}),F("keydown",n=>{[...x,..._].forEach(s=>{n.code===s&&n.altKey&&n.preventDefault()})}),x.forEach(n=>{const s=`alt_${n}`;p(c[s],()=>{g(v[n].unicode)})}),_.forEach(n=>{const s=`alt_${n}`;p(c[s],()=>{d(f[n].unicode)})});const l=b(()=>{if(!c.alt.value)return{text:"Press Alt to see the list of magic keys. Press any of them in combination with Alt to get the result",type:0};const n=u.value?x.map(r=>({symbol:v[r].keySymbol,text:a.value+v[r].unicode})):[],s=_.map(r=>({symbol:f[r].keySymbol,text:f[r].unicode}));return{value:[...n,...s],type:1}});function C(){e().then(()=>{R.success("Copied to clipboard")})}return(n,s)=>(m(),y(S,null,[k("div",X,[l.value.type===0?(m(),y(S,{key:0},[E(h(l.value.text),1)],64)):V("",!0),l.value.type===1?(m(),y("div",Y,[(m(!0),y(S,null,$(l.value.value,({symbol:r,text:B})=>(m(),y("div",{key:n.key},[k("div",Z,h(r),1),k("div",null,h(B),1)]))),128))])):V("",!0)]),A(q(U),{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=r=>o.value=r),ref_key:"textarea",ref:t,placeholder:"Type something",rows:"10",clearable:"","hide-details":""},null,8,["modelValue"]),A(G,{variant:"outlined",class:"copy-button",size:"large",onClick:C},{default:z(()=>s[1]||(s[1]=[E(" Copy to clipboard ")])),_:1})],64))}}),se=J(ee,[["__scopeId","data-v-27f58f76"]]);export{se as default};
