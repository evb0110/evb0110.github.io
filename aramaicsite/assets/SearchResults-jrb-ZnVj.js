import{c as h,b as x,bK as N,m as b,r as S,o as d,f as v,g as m,h as y,L as H,n as f,_ as z,bL as A,E as C,d as R,a as M,e as T,aX as j,A as E,j as F,V as J,F as D,af as O,t as U,k as K,p as V,D as P,i as q,ag as G}from"./index-C9Unu0ph.js";import{d as Q,u as W,L as k,K as $,_ as X,c as Y}from"./GrepLine.vue_vue_type_style_index_0_lang-LubgEz9l.js";import{C as B}from"./Color-l8zxla4Y.js";import{V as Z}from"./VTooltip-O3NN8wpB.js";import{u as ee}from"./index-DrQCoBb7.js";import{u as te,A as w}from"./assetsStore-CxE89UaI.js";import{V as se}from"./VTextField-shq9_0-x.js";import{V as ae}from"./VDialog-Dpq6Vh4d.js";const re=()=>{const u=ee("search",""),r=h(()=>new Q(u.value));return{searcherString:u,searcher:r}},ne=["fill"],oe=x({__name:"KeyboardIcon",props:{tooltip:{type:String,default:"Click to open a virtual keyboard"}},emits:["click"],setup(u,{emit:r}){N(p=>({"343572bc":b(a),"75de9347":b(i)}));const l=u,n=r,e=S(!0),c=h(()=>!l.tooltip||!e.value),{darkGrey:a,lightBrown:i}=B;return(p,t)=>(d(),v("span",{onClick:t[0]||(t[0]=s=>n("click"))},[m(Z,{disabled:c.value,text:u.tooltip,location:"bottom","open-delay":"500"},{activator:y(({props:s})=>[(d(),v("svg",H(s,{fill:b(B).grey,class:"keyboard-icon-svg",height:"50px",viewBox:"0 0 24 24",width:"50px",xmlns:"http://www.w3.org/2000/svg"}),t[1]||(t[1]=[f("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"},null,-1)]),16,ne))]),_:1},8,["disabled","text"])]))}}),le=z(oe,[["__scopeId","data-v-43d9ee52"]]),ie=A(function(r){return r?r.split(`======
`).map(e=>e.split(`
`)).map(e=>({title:C.head(e),lines:C.tail(e)})):[]}),ue=R("simpleCorpusStore",()=>{const u=te(),r=M({}),l=M({}),n=W(),e=h(()=>{switch(n.value){case k.turoyo:return w.turoyoCorpusJson;case k.urmi:return w.urmiCorpusJson;case k.maalula:default:return w.maalulaDictsJson}}),c=h(()=>u[e.value].data),a=ie(c),{searcherString:i,searcher:p}=re(),t=h(()=>{const o=[];if(!a.value)return o;for(const g of a.value){const{title:L,lines:_}=g;for(const I of _)o.push({title:L,line:I})}return o}),s=h(()=>i.value?t.value.reduce((o,g)=>{const _=p.value.regex.test(g.line)?[g]:[];return[...o,..._]},[]):[]);return{corporaObj:r,searcherStringsObj:l,searcher:p,searcherString:i,matchingLines:s}}),ce={class:"searcher align-center flex-column"},pe={class:"searchers d-flex"},de={class:"input-wrapper"},me=x({__name:"Searcher",setup(u){const r=ue(),l=S(""),n=S(!1),e=S(null),c=[t=>!!t||"Search string should not be empty"],a=h({get:()=>l.value,set:t=>{l.value=C.isString(t)?t:"",l.value||i()}}),i=()=>{r.searcherString=a.value},p=t=>{a.value=t,n.value&&i()};return T(()=>r.searcherString,t=>{l.value=t},{immediate:!0}),j(()=>{e.value=document.querySelector(".input-wrapper .v-text-field input")}),(t,s)=>(d(),v(D,null,[f("div",ce,[f("div",pe,[m(le,{onClick:s[0]||(s[0]=o=>n.value=!0)}),f("div",de,[m(se,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=o=>a.value=o),rules:c,autocomplete:"off",label:"Search string",color:"primary",variant:"outlined",density:"compact",clearable:"","hide-details":"",onKeyup:E(i,["enter"])},null,8,["modelValue"])]),m(J,{ref:"search_btn",disabled:!a.value,variant:"outlined",onClick:i},{default:y(()=>s[4]||(s[4]=[F(" Search ")])),_:1},8,["disabled"])]),m($,{value:a.value,"input-el":e.value,type:"regex",visible:"",onSubmit:p},null,8,["value","input-el"])]),m(ae,{modelValue:n.value,"onUpdate:modelValue":s[3]||(s[3]=o=>n.value=o),"hide-overlay":"",fullscreen:""},{default:y(()=>[m($,{visible:n.value,value:a.value,"input-name":"Search string",onSubmit:p,"onUpdate:visible":s[2]||(s[2]=o=>n.value=o)},null,8,["visible","value"])]),_:1},8,["modelValue"])],64))}}),Ce=z(me,[["__scopeId","data-v-360f7d34"]]),ve={key:0,class:"results-stats"},he={key:0,style:{color:"blueviolet"}},fe=x({__name:"SearchResults",props:{linesMatching:{},searcher:{},translationLanguage:{}},setup(u){const r=O(),l=U(r,"isDark"),n=window;return(e,c)=>(d(),v("div",{class:G({invert:l.value})},[e.searcher.value?(d(),v("div",ve," Number of lines in output: "+K(e.linesMatching.length),1)):V("",!0),c[1]||(c[1]=f("br",null,null,-1)),e.linesMatching?(d(),P(Y,{key:1,items:e.linesMatching,el:b(n),class:"search-results-box results"},{default:y(({items:a})=>[(d(!0),v(D,null,q(a,({line:i,title:p},t)=>(d(),v("div",{key:t,class:"lines"},[p?(d(),v("div",he,K(p),1)):V("",!0),m(X,{str:i,searcher:e.searcher,"translation-language":e.translationLanguage},null,8,["str","searcher","translation-language"]),c[0]||(c[0]=f("br",null,null,-1))]))),128))]),_:1},8,["items","el"])):V("",!0)],2))}}),xe=z(fe,[["__scopeId","data-v-29fd8b2c"]]);export{Ce as S,xe as a,ue as b,re as u};
