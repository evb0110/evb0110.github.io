import{E as _,r as h,bH as i,C as x,bI as C,a9 as E,bJ as T,L as b,b as g,t as w,c as R,W as A,o as M,f as k,g as y,h as v,am as N,j as S,V,_ as j}from"./index-GVdDbXpU.js";import{s as B}from"./GrepLine.vue_vue_type_style_index_0_lang-svLu4q8r.js";import{V as L}from"./VTooltip-BLZL9Sep.js";function O(t){const o=document.createElement("div");o.contentEditable="true",o.style.position="absolute",o.style.left="-9999px",document.body.appendChild(o),o.innerHTML=t;const s=document.createRange();s.selectNodeContents(o);const e=getSelection();e==null||e.removeAllRanges(),e==null||e.addRange(s),document.execCommand("copy"),document.body.removeChild(o),e==null||e.removeAllRanges()}function P(t){const o=_.map(t,"outerHTML").join("");O(o)}const $=()=>{const t=h(!1);return{loading:t,do:o};async function o(s){if(s>500){i.warning(`Too many results to copy!
Please narrow down your search.`),t.value=!1;return}t.value=!0,await B(100);const a=document.querySelector(".results .results-stats"),c=Array.from(document.querySelectorAll(".results .lines"));try{P([a,...c]),i.success("Search results successfully copied to clipboard!")}catch(r){i.error((r==null?void 0:r.message)||"Something went wrong â€” nothing copied!")}t.value=!1}};function H(t,o){const s=typeof t=="string"?x(t):t,e=I(s,o);return{mounted:e,updated:e,unmounted(a){C(null,a)}}}function I(t,o){return function(s,e,a){var p,m,f;const c=typeof o=="function"?o(e):o,r=((p=e.value)==null?void 0:p.text)??e.value??(c==null?void 0:c.text),l=E(e.value)?e.value:{},n=()=>r??s.textContent,u=(a.ctx===e.instance.$?(m=q(a,e.instance.$))==null?void 0:m.provides:(f=a.ctx)==null?void 0:f.provides)??e.instance.$.provides,d=T(t,b(c,l),n);d.appContext=Object.assign(Object.create(null),e.instance.$.appContext,{provides:u}),C(d,s)}}function q(t,o){const s=new Set,e=c=>{var r,l;for(const n of c){if(!n)continue;if(n===t||n.el&&t.el&&n.el===t.el)return!0;s.add(n);let u;if(n.suspense?u=e([n.ssContent]):Array.isArray(n.children)?u=e(n.children):(r=n.component)!=null&&r.vnode&&(u=e([(l=n.component)==null?void 0:l.subTree])),u)return u;s.delete(n)}return!1};if(!e([o.subTree]))return o;const a=Array.from(s).reverse();for(const c of a)if(c.component)return c.component;return o}const D=H(L,t=>{var o;return{activator:"parent",location:(o=t.arg)==null?void 0:o.replace("-"," "),text:typeof t.value=="boolean"?void 0:t.value}}),F={class:"copy_btn"},U=g({__name:"CopyResults",props:{count:{default:0}},emits:["click"],setup(t,{emit:o}){const s=o,e=$(),a=w(e,"loading"),c=R(()=>t.count?t.count>500?"Too many results to copy":"Copy results":"No results to copy");async function r(){s("click"),e.do(t.count)}return(l,n)=>A((M(),k("div",F,[y(V,{disabled:!l.count||l.count>500,loading:a.value,variant:"outlined",onClick:r},{default:v(()=>[y(N,{left:""},{default:v(()=>n[0]||(n[0]=[S("mdi-content-copy")])),_:1})]),_:1},8,["disabled","loading"])])),[[D,c.value]])}}),z=j(U,[["__scopeId","data-v-3b9416ee"]]);export{z as _};
