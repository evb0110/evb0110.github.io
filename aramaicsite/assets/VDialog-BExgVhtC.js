import{m as S,a as w}from"./VOverlay-Ch8SMgnH.js";import{a as h,d as T,s as P,b as F,g as $,n as O,f as q}from"./forwardRefs-DWGaNmQL.js";import{v as L,g as E,O as y,bL as V,q as B,a2 as C,ad as I,r as R,ax as M,e as b,x as k,a9 as N,ao as W,bf as X}from"./index-RS2qBPc_.js";const Y=B({target:[Object,Array]},"v-dialog-transition"),j=L()({name:"VDialogTransition",props:Y(),setup(s,f){let{slots:n}=f;const i={onBeforeEnter(e){e.style.pointerEvents="none",e.style.visibility="hidden"},async onEnter(e,g){var r;await new Promise(o=>requestAnimationFrame(o)),await new Promise(o=>requestAnimationFrame(o)),e.style.visibility="";const{x:t,y:u,sx:d,sy:m,speed:a}=D(s.target,e),l=h(e,[{transform:`translate(${t}px, ${u}px) scale(${d}, ${m})`,opacity:0},{}],{duration:225*a,easing:T});(r=A(e))==null||r.forEach(o=>{h(o,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*a,easing:P})}),l.finished.then(()=>g())},onAfterEnter(e){e.style.removeProperty("pointer-events")},onBeforeLeave(e){e.style.pointerEvents="none"},async onLeave(e,g){var r;await new Promise(o=>requestAnimationFrame(o));const{x:t,y:u,sx:d,sy:m,speed:a}=D(s.target,e);h(e,[{},{transform:`translate(${t}px, ${u}px) scale(${d}, ${m})`,opacity:0}],{duration:125*a,easing:F}).finished.then(()=>g()),(r=A(e))==null||r.forEach(o=>{h(o,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*a,easing:P})})},onAfterLeave(e){e.style.removeProperty("pointer-events")}};return()=>s.target?E(V,y({name:"dialog-transition"},i,{css:!1}),n):E(V,{name:"dialog-transition"},n)}});function A(s){var n;const f=(n=s.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return f&&[...f]}function D(s,f){const n=$(s),i=O(f),[e,g]=getComputedStyle(f).transformOrigin.split(" ").map(x=>parseFloat(x)),[t,u]=getComputedStyle(f).getPropertyValue("--v-overlay-anchor-origin").split(" ");let d=n.left+n.width/2;t==="left"||u==="left"?d-=n.width/2:(t==="right"||u==="right")&&(d+=n.width/2);let m=n.top+n.height/2;t==="top"||u==="top"?m-=n.height/2:(t==="bottom"||u==="bottom")&&(m+=n.height/2);const a=n.width/i.width,l=n.height/i.height,r=Math.max(1,a,l),o=a/r||0,v=l/r||0,c=i.width*i.height/(window.innerWidth*window.innerHeight),p=c>.12?Math.min(1.5,(c-.12)*10+1):1;return{x:d-(e+i.left),y:m-(g+i.top),sx:o,sy:v,speed:p}}const z=B({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...S({origin:"center center",scrollStrategy:"block",transition:{component:j},zIndex:2400})},"VDialog"),J=L()({name:"VDialog",props:z(),emits:{"update:modelValue":s=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(s,f){let{emit:n,slots:i}=f;const e=C(s,"modelValue"),{scopeId:g}=I(),t=R();function u(a){var o,v;const l=a.relatedTarget,r=a.target;if(l!==r&&((o=t.value)!=null&&o.contentEl)&&((v=t.value)!=null&&v.globalTop)&&![document,t.value.contentEl].includes(r)&&!t.value.contentEl.contains(r)){const c=X(t.value.contentEl);if(!c.length)return;const p=c[0],x=c[c.length-1];l===p?x.focus():p.focus()}}M&&b(()=>e.value&&s.retainFocus,a=>{a?document.addEventListener("focusin",u):document.removeEventListener("focusin",u)},{immediate:!0});function d(){var a;n("afterEnter"),(a=t.value)!=null&&a.contentEl&&!t.value.contentEl.contains(document.activeElement)&&t.value.contentEl.focus({preventScroll:!0})}function m(){n("afterLeave")}return b(e,async a=>{var l;a||(await N(),(l=t.value.activatorEl)==null||l.focus({preventScroll:!0}))}),k(()=>{const a=w.filterProps(s),l=y({"aria-haspopup":"dialog"},s.activatorProps),r=y({tabindex:-1},s.contentProps);return E(w,y({ref:t,class:["v-dialog",{"v-dialog--fullscreen":s.fullscreen,"v-dialog--scrollable":s.scrollable},s.class],style:s.style},a,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,"aria-modal":"true",activatorProps:l,contentProps:r,role:"dialog",onAfterEnter:d,onAfterLeave:m},g),{activator:i.activator,default:function(){for(var o=arguments.length,v=new Array(o),c=0;c<o;c++)v[c]=arguments[c];return E(W,{root:"VDialog"},{default:()=>{var p;return[(p=i.default)==null?void 0:p.call(i,...v)]}})}})}),q({},t)}});export{J as V,j as a};
