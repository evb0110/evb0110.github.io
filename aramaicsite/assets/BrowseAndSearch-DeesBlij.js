var St=Object.defineProperty;var Tt=(e,t,a)=>t in e?St(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var N=(e,t,a)=>Tt(e,typeof t!="symbol"?t+"":t,a);import{b7 as Ct,E as ie,d as _t,c as g,b8 as At,r as B,m as le,b as ce,b9 as Pt,o as C,f as E,F as O,i as Te,D as z,h as ne,j as xe,k as Ve,V as Le,p as Z,v as ee,aR as ut,Y as rt,Z as it,av as It,x as Ce,ba as Et,q as de,P as ct,T as Bt,ad as Lt,t as oe,s as ye,g as v,L as M,S as dt,aK as Dt,aL as Rt,aa as Nt,aq as Mt,ar as qt,bb as $t,a0 as we,a2 as Ot,aO as Ft,W as Ke,X as Ht,aQ as Ut,bc as Kt,am as ue,al as re,a6 as zt,aJ as De,bd as Gt,aS as Wt,as as jt,a8 as Qt,at as Xt,ae as Jt,aW as Yt,be as ze,ao as ke,ap as Zt,ac as ea,Q as ta,ah as aa,a1 as la,U as W,b3 as na,a4 as qe,bf as Ge,bg as sa,e as j,ax as fe,bh as Pe,bi as oa,M as vt,$ as ua,bj as ra,bk as mt,bl as ia,w as We,bm as ca,b2 as Ie,bn as ft,bo as da,ak as va,bp as ma,aX as he,a5 as ge,an as fa,bq as ha,br as pa,bs as ya,bt as je,bu as Qe,bv as ba,bw as Xe,bx as ga,by as ka,bz as ht,n as q,l as Re,_ as ve,A as xa,aD as Va,ag as Se,bA as pt,B as wa,bB as Sa,af as Ta,bC as Ca,bD as _a,bE as Aa}from"./index-B63HtXKT.js";import{u as pe}from"./index-BxMWf5KN.js";import{u as Pa,L as Je,D as Ye,K as Ze,a as Ia,b as me,_ as Ea,s as Ba,S as et}from"./GrepLine.vue_vue_type_style_index_0_lang-DXUNTw49.js";import{u as La,A as tt}from"./assetsStore-lAVGe3YR.js";import{V as Ne,m as Da}from"./VTextField-3HCGbcLh.js";import{h as Ra}from"./VInput-C1HaYOu-.js";import{f as yt}from"./forwardRefs-DWGaNmQL.js";import{V as at,m as Na,a as lt,g as Ma}from"./VOverlay-CTTwTj3u.js";import{a as bt,V as qa}from"./VDialog-DMB-4uqy.js";import{V as $a}from"./VCheckboxBtn-DK6LjucR.js";import{m as Oa,V as nt}from"./VSlideGroup-D45qSLIQ.js";import{_ as Fa}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-CEDB7TG2.js";import{_ as Ha}from"./CopyResults.vue_vue_type_script_setup_true_lang-7b5ESbxR.js";class $e{constructor({volume:t,texts:a}){N(this,"volumeName");N(this,"texts");this.texts=a.map(o=>({volumeName:t,...o})).map(Oe.instantiate),this.volumeName=t}get totalContents(){return ie.flatMap(this.texts,"contents")}static instantiate(t){return new $e(t)}}class Oe{constructor({volumeName:t,textNumber:a,textName:o,contents:s}){N(this,"volumeName");N(this,"textNumber");N(this,"_textName");N(this,"rawContents");this.volumeName=t,this.textNumber=a,this._textName=o,this.rawContents=s}get contents(){return this.rawContents.map(t=>({volumeName:this.volumeName,textNumber:this.textNumber,textName:this.textName,...t})).map(Fe.instantiate)}get textName(){return this._textName.replace(/\.txt/,"")}set textName(t){this._textName=t}static instantiate(t){return new Oe(t)}}class Fe{constructor({volumeName:t,textNumber:a,textName:o,lineNumber:s,textus:i,versio:m}){N(this,"volumeName");N(this,"textNumber");N(this,"textName");N(this,"lineNumber");N(this,"textus");N(this,"versio");this.volumeName=t,this.textNumber=a,this.textName=o,this.lineNumber=s,this.textus=i,this.versio=m}get title(){return this.volumeName+": "+this.textName}get hash(){return"h"+Ct(this)}static instantiate(t){return new Fe(t)}}const Ua=_t("corpusWithTranslationStore",()=>{const e=La(),t=Pa(),a=g(()=>{switch(t.value){case Je.maalula:return tt.maalulaCorpusJson;case Je.turoyo:default:return tt.turoyoNewCorpusJson}}),o=g(()=>{var m;return(m=e[a.value])==null?void 0:m.data}),s=At(()=>{var m;return((m=o.value)==null?void 0:m.map($e.instantiate))||[]},[]),i=g(()=>ie.flatMap(s.value,"totalContents"));return{corpusArray:s,corpusLines:i}}),Ka=(e,t)=>{const a=B(e.indexOf(le(t))||0),o=g(()=>e[a.value]);function s(){a.value=(a.value+1)%e.length}return function(){return s(),o.value}},za={class:"d-flex ga-1"},Ga=ce({__name:"ModeSwitcher",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Pt(e,"modelValue"),a=Ka(Ye,t);function o(){t.value=a()}return(s,i)=>(C(),E("div",za,[(C(!0),E(O,null,Te(le(Ye),m=>(C(),z(Le,{key:m,variant:m===t.value?"outlined":"text",class:"d-none d-sm-block",size:"small",onClick:d=>t.value=m},{default:ne(()=>[xe(Ve(m)+" mode ",1)]),_:2},1032,["variant","onClick"]))),128)),t.value?(C(),z(Le,{key:0,class:"d-sm-none",variant:"outlined",onClick:i[0]||(i[0]=m=>o())},{default:ne(()=>[xe(Ve(t.value)+" mode ",1)]),_:1})):Z("",!0)]))}}),gt=Symbol.for("vuetify:v-chip-group"),Wa=ee({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Et},...Oa(),...Ce(),...It({selectedClass:"v-chip--selected"}),...it(),...rt(),...ut({variant:"tonal"})},"VChipGroup");de()({name:"VChipGroup",props:Wa(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const{themeClasses:o}=ct(e),{isSelected:s,select:i,next:m,prev:d,selected:u}=Bt(e,gt);return Lt({VChip:{color:oe(e,"color"),disabled:oe(e,"disabled"),filter:oe(e,"filter"),variant:oe(e,"variant")}}),ye(()=>{const c=nt.filterProps(e);return v(nt,M(c,{class:["v-chip-group",{"v-chip-group--column":e.column},o.value,e.class],style:e.style}),{default:()=>{var y;return[(y=a.default)==null?void 0:y.call(a,{isSelected:s,select:i,next:m,prev:d,selected:u.value})]}})}),{}}});const ja=ee({activeClass:String,appendAvatar:String,appendIcon:ke,closable:Boolean,closeIcon:{type:ke,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:ke,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:ze(),onClickOnce:ze(),...Yt(),...Ce(),...Jt(),...Xt(),...Qt(),...jt(),...Wt(),...Gt(),...it({tag:"span"}),...rt(),...ut({variant:"tonal"})},"VChip"),Qa=de()({name:"VChip",directives:{Ripple:Zt},props:ja(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:a,emit:o,slots:s}=t;const{t:i}=dt(),{borderClasses:m}=Dt(e),{colorClasses:d,colorStyles:u,variantClasses:c}=Rt(e),{densityClasses:y}=Nt(e),{elevationClasses:k}=Mt(e),{roundedClasses:r}=qt(e),{sizeClasses:p}=$t(e),{themeClasses:A}=ct(e),T=we(e,"modelValue"),l=Ot(e,gt,!1),f=Ft(e,a),b=g(()=>e.link!==!1&&f.isLink.value),x=g(()=>!e.disabled&&e.link!==!1&&(!!l||e.link||f.isClickable.value)),V=g(()=>({"aria-label":i(e.closeLabel),onClick(w){w.preventDefault(),w.stopPropagation(),T.value=!1,o("click:close",w)}}));function I(w){var K;o("click",w),x.value&&((K=f.navigate)==null||K.call(f,w),l==null||l.toggle())}function F(w){(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),I(w))}return()=>{const w=f.isLink.value?"a":e.tag,K=!!(e.appendIcon||e.appendAvatar),Q=!!(K||s.append),G=!!(s.close||e.closable),X=!!(s.filter||e.filter)&&l,te=!!(e.prependIcon||e.prependAvatar),J=!!(te||s.prepend),ae=!l||l.isSelected.value;return T.value&&Ke(v(w,M({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":x.value,"v-chip--filter":X,"v-chip--pill":e.pill},A.value,m.value,ae?d.value:void 0,y.value,k.value,r.value,p.value,c.value,l==null?void 0:l.selectedClass.value,e.class],style:[ae?u.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:x.value?0:void 0,onClick:I,onKeydown:x.value&&!b.value&&F},f.linkProps),{default:()=>{var $;return[Ut(x.value,"v-chip"),X&&v(Kt,{key:"filter"},{default:()=>[Ke(v("div",{class:"v-chip__filter"},[s.filter?v(re,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},s.filter):v(ue,{key:"filter-icon",icon:e.filterIcon},null)]),[[zt,l.isSelected.value]])]}),J&&v("div",{key:"prepend",class:"v-chip__prepend"},[s.prepend?v(re,{key:"prepend-defaults",disabled:!te,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},s.prepend):v(O,null,[e.prependIcon&&v(ue,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&v(De,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),v("div",{class:"v-chip__content","data-no-activator":""},[(($=s.default)==null?void 0:$.call(s,{isSelected:l==null?void 0:l.isSelected.value,selectedClass:l==null?void 0:l.selectedClass.value,select:l==null?void 0:l.select,toggle:l==null?void 0:l.toggle,value:l==null?void 0:l.value.value,disabled:e.disabled}))??e.text]),Q&&v("div",{key:"append",class:"v-chip__append"},[s.append?v(re,{key:"append-defaults",disabled:!K,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},s.append):v(O,null,[e.appendIcon&&v(ue,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&v(De,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),G&&v("button",M({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},V.value),[s.close?v(re,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},s.close):v(ue,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Ht("ripple"),x.value&&e.ripple,null]])}}}),Xa=ee({id:String,submenu:Boolean,...vt(Na({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:bt}}),["absolute"])},"VMenu"),Ja=de()({name:"VMenu",props:Xa(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const o=we(e,"modelValue"),{scopeId:s}=ea(),{isRtl:i}=ta(),m=aa(),d=g(()=>e.id||`v-menu-${m}`),u=B(),c=la(lt,null),y=W(new Set);ua(lt,{register(){y.value.add(m)},unregister(){y.value.delete(m)},closeParents(l){setTimeout(()=>{var f;!y.value.size&&!e.persistent&&(l==null||(f=u.value)!=null&&f.contentEl&&!ra(l,u.value.contentEl))&&(o.value=!1,c==null||c.closeParents())},40)}}),na(()=>{c==null||c.unregister(),document.removeEventListener("focusin",k)}),sa(()=>o.value=!1);async function k(l){var x,V,I;const f=l.relatedTarget,b=l.target;await qe(),o.value&&f!==b&&((x=u.value)!=null&&x.contentEl)&&((V=u.value)!=null&&V.globalTop)&&![document,u.value.contentEl].includes(b)&&!u.value.contentEl.contains(b)&&((I=Ge(u.value.contentEl)[0])==null||I.focus())}j(o,l=>{l?(c==null||c.register(),fe&&document.addEventListener("focusin",k,{once:!0})):(c==null||c.unregister(),fe&&document.removeEventListener("focusin",k))},{immediate:!0});function r(l){c==null||c.closeParents(l)}function p(l){var f,b,x,V,I;if(!e.disabled)if(l.key==="Tab"||l.key==="Enter"&&!e.closeOnContentClick){if(l.key==="Enter"&&(l.target instanceof HTMLTextAreaElement||l.target instanceof HTMLInputElement&&l.target.closest("form")))return;l.key==="Enter"&&l.preventDefault(),oa(Ge((f=u.value)==null?void 0:f.contentEl,!1),l.shiftKey?"prev":"next",w=>w.tabIndex>=0)||(o.value=!1,(x=(b=u.value)==null?void 0:b.activatorEl)==null||x.focus())}else e.submenu&&l.key===(i.value?"ArrowRight":"ArrowLeft")&&(o.value=!1,(I=(V=u.value)==null?void 0:V.activatorEl)==null||I.focus())}function A(l){var b;if(e.disabled)return;const f=(b=u.value)==null?void 0:b.contentEl;f&&o.value?l.key==="ArrowDown"?(l.preventDefault(),l.stopImmediatePropagation(),Pe(f,"next")):l.key==="ArrowUp"?(l.preventDefault(),l.stopImmediatePropagation(),Pe(f,"prev")):e.submenu&&(l.key===(i.value?"ArrowRight":"ArrowLeft")?o.value=!1:l.key===(i.value?"ArrowLeft":"ArrowRight")&&(l.preventDefault(),Pe(f,"first"))):(e.submenu?l.key===(i.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(l.key))&&(o.value=!0,l.preventDefault(),setTimeout(()=>setTimeout(()=>A(l))))}const T=g(()=>M({"aria-haspopup":"menu","aria-expanded":String(o.value),"aria-owns":d.value,onKeydown:A},e.activatorProps));return ye(()=>{const l=at.filterProps(e);return v(at,M({ref:u,id:d.value,class:["v-menu",e.class],style:e.style},l,{modelValue:o.value,"onUpdate:modelValue":f=>o.value=f,absolute:!0,activatorProps:T.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":r,onKeydown:p},s),{activator:a.activator,default:function(){for(var f=arguments.length,b=new Array(f),x=0;x<f;x++)b[x]=arguments[x];return v(re,{root:"VMenu"},{default:()=>{var V;return[(V=a.default)==null?void 0:V.call(a,...b)]}})}})}),yt({id:d,ΨopenChildren:y},u)}}),Ya=ee({renderless:Boolean,...Ce()},"VVirtualScrollItem"),Za=de()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Ya(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:a,emit:o,slots:s}=t;const{resizeRef:i,contentRect:m}=mt(void 0,"border");j(()=>{var d;return(d=m.value)==null?void 0:d.height},d=>{d!=null&&o("update:height",d)}),ye(()=>{var d,u;return e.renderless?v(O,null,[(d=s.default)==null?void 0:d.call(s,{itemRef:i})]):v("div",M({ref:i,class:["v-virtual-scroll__item",e.class],style:e.style},a),[(u=s.default)==null?void 0:u.call(s)])})}}),el=-1,tl=1,Ee=100,al=ee({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function ll(e,t){const a=ia(),o=W(0);We(()=>{o.value=parseFloat(e.itemHeight||0)});const s=W(0),i=W(Math.ceil((parseInt(e.height)||a.height.value)/(o.value||16))||1),m=W(0),d=W(0),u=B(),c=B();let y=0;const{resizeRef:k,contentRect:r}=mt();We(()=>{k.value=u.value});const p=g(()=>{var n;return u.value===document.documentElement?a.height.value:((n=r.value)==null?void 0:n.height)||parseInt(e.height)||0}),A=g(()=>!!(u.value&&c.value&&p.value&&o.value));let T=Array.from({length:t.value.length}),l=Array.from({length:t.value.length});const f=W(0);let b=-1;function x(n){return T[n]||o.value}const V=ca(()=>{const n=performance.now();l[0]=0;const h=t.value.length;for(let _=1;_<=h-1;_++)l[_]=(l[_-1]||0)+x(_-1);f.value=Math.max(f.value,performance.now()-n)},f),I=j(A,n=>{n&&(I(),y=c.value.offsetTop,V.immediate(),$(),~b&&qe(()=>{fe&&window.requestAnimationFrame(()=>{be(b),b=-1})}))});ft(()=>{V.clear()});function F(n,h){const _=T[n],P=o.value;o.value=P?Math.min(o.value,h):h,(_!==h||P!==o.value)&&(T[n]=h,V())}function w(n){return n=Ie(n,0,t.value.length-1),l[n]||0}function K(n){return nl(l,n)}let Q=0,G=0,X=0;j(p,(n,h)=>{h&&($(),n<h&&requestAnimationFrame(()=>{G=0,$()}))});function te(){if(!u.value||!c.value)return;const n=u.value.scrollTop,h=performance.now();h-X>500?(G=Math.sign(n-Q),y=c.value.offsetTop):G=n-Q,Q=n,X=h,$()}function J(){!u.value||!c.value||(G=0,X=0,$())}let ae=-1;function $(){cancelAnimationFrame(ae),ae=requestAnimationFrame(_e)}function _e(){if(!u.value||!p.value)return;const n=Q-y,h=Math.sign(G),_=Math.max(0,n-Ee),P=Ie(K(_),0,t.value.length),H=n+p.value+Ee,S=Ie(K(H)+1,P+1,t.value.length);if((h!==el||P<s.value)&&(h!==tl||S>i.value)){const L=w(s.value)-w(P),D=w(S)-w(i.value);Math.max(L,D)>Ee?(s.value=P,i.value=S):(P<=0&&(s.value=P),S>=t.value.length&&(i.value=S))}m.value=w(s.value),d.value=w(t.value.length)-w(i.value)}function be(n){const h=w(n);!u.value||n&&!h?b=n:u.value.scrollTop=h}const Ae=g(()=>t.value.slice(s.value,i.value).map((n,h)=>({raw:n,index:h+s.value})));return j(t,()=>{T=Array.from({length:t.value.length}),l=Array.from({length:t.value.length}),V.immediate(),$()},{deep:!0}),{calculateVisibleItems:$,containerRef:u,markerRef:c,computedItems:Ae,paddingTop:m,paddingBottom:d,scrollToIndex:be,handleScroll:te,handleScrollend:J,handleItemResize:F}}function nl(e,t){let a=e.length-1,o=0,s=0,i=null,m=-1;if(e[a]<t)return a;for(;o<=a;)if(s=o+a>>1,i=e[s],i>t)a=s-1;else if(i<t)m=s,o=s+1;else return i===t?s:o;return m}const sl=ee({items:{type:Array,default:()=>[]},renderless:Boolean,...al(),...Ce(),...fa()},"VVirtualScroll"),kt=de()({name:"VVirtualScroll",props:sl(),setup(e,t){let{slots:a}=t;const o=da("VVirtualScroll"),{dimensionStyles:s}=va(e),{calculateVisibleItems:i,containerRef:m,markerRef:d,handleScroll:u,handleScrollend:c,handleItemResize:y,scrollToIndex:k,paddingTop:r,paddingBottom:p,computedItems:A}=ll(e,oe(e,"items"));return ma(()=>e.renderless,()=>{function T(){var b,x;const f=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";m.value===document.documentElement?(document[f]("scroll",u,{passive:!0}),document[f]("scrollend",c)):((b=m.value)==null||b[f]("scroll",u,{passive:!0}),(x=m.value)==null||x[f]("scrollend",c))}he(()=>{m.value=Ma(o.vnode.el,!0),T(!0)}),ft(T)}),ye(()=>{const T=A.value.map(l=>v(Za,{key:l.index,renderless:e.renderless,"onUpdate:height":f=>y(l.index,f)},{default:f=>{var b;return(b=a.default)==null?void 0:b.call(a,{item:l.raw,index:l.index,...f})}}));return e.renderless?v(O,null,[v("div",{ref:d,class:"v-virtual-scroll__spacer",style:{paddingTop:ge(r.value)}},null),T,v("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ge(p.value)}},null)]):v("div",{ref:m,class:["v-virtual-scroll",e.class],onScrollPassive:u,onScrollend:c,style:[s.value,e.style]},[v("div",{ref:d,class:"v-virtual-scroll__container",style:{paddingTop:ge(r.value),paddingBottom:ge(p.value)}},[T])])}),{calculateVisibleItems:i,scrollToIndex:k}}});function ol(e,t){const a=W(!1);let o;function s(d){cancelAnimationFrame(o),a.value=!0,o=requestAnimationFrame(()=>{o=requestAnimationFrame(()=>{a.value=!1})})}async function i(){await new Promise(d=>requestAnimationFrame(d)),await new Promise(d=>requestAnimationFrame(d)),await new Promise(d=>requestAnimationFrame(d)),await new Promise(d=>{if(a.value){const u=j(a,()=>{u(),d()})}else d()})}async function m(d){var y,k;if(d.key==="Tab"&&((y=t.value)==null||y.focus()),!["PageDown","PageUp","Home","End"].includes(d.key))return;const u=(k=e.value)==null?void 0:k.$el;if(!u)return;(d.key==="Home"||d.key==="End")&&u.scrollTo({top:d.key==="Home"?0:u.scrollHeight,behavior:"smooth"}),await i();const c=u.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(d.key==="PageDown"||d.key==="Home"){const r=u.getBoundingClientRect().top;for(const p of c)if(p.getBoundingClientRect().top>=r){p.focus();break}}else{const r=u.getBoundingClientRect().bottom;for(const p of[...c].reverse())if(p.getBoundingClientRect().bottom<=r){p.focus();break}}}return{onScrollPassive:s,onKeydown:m}}const ul=ee({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ke,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...ka({itemChildren:!1})},"Select"),rl=ee({...ul(),...vt(Da({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ga({transition:{component:bt}})},"VSelect"),st=de()({name:"VSelect",props:rl(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:a}=t;const{t:o}=dt(),s=B(),i=B(),m=B(),d=we(e,"menu"),u=g({get:()=>d.value,set:n=>{var h;d.value&&!n&&((h=i.value)!=null&&h.ΨopenChildren.size)||(d.value=n)}}),{items:c,transformIn:y,transformOut:k}=ha(e),r=we(e,"modelValue",[],n=>y(n===null?[null]:pa(n)),n=>{const h=k(n);return e.multiple?h:h[0]??null}),p=g(()=>typeof e.counterValue=="function"?e.counterValue(r.value):typeof e.counterValue=="number"?e.counterValue:r.value.length),A=Ra(),T=g(()=>r.value.map(n=>n.value)),l=W(!1),f=g(()=>u.value?e.closeText:e.openText);let b="",x;const V=g(()=>e.hideSelected?c.value.filter(n=>!r.value.some(h=>e.valueComparator(h,n))):c.value),I=g(()=>e.hideNoData&&!V.value.length||e.readonly||(A==null?void 0:A.isReadonly.value)),F=g(()=>{var n;return{...e.menuProps,activatorProps:{...((n=e.menuProps)==null?void 0:n.activatorProps)||{},"aria-haspopup":"listbox"}}}),w=B(),K=ol(w,s);function Q(n){e.openOnClear&&(u.value=!0)}function G(){I.value||(u.value=!u.value)}function X(n){je(n)&&te(n)}function te(n){var H,S;if(!n.key||e.readonly||A!=null&&A.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(n.key)&&n.preventDefault(),["Enter","ArrowDown"," "].includes(n.key)&&(u.value=!0),["Escape","Tab"].includes(n.key)&&(u.value=!1),n.key==="Home"?(H=w.value)==null||H.focus("first"):n.key==="End"&&((S=w.value)==null||S.focus("last"));const h=1e3;if(e.multiple||!je(n))return;const _=performance.now();_-x>h&&(b=""),b+=n.key.toLowerCase(),x=_;const P=c.value.find(L=>L.title.toLowerCase().startsWith(b));if(P!==void 0){r.value=[P];const L=V.value.indexOf(P);fe&&window.requestAnimationFrame(()=>{var D;L>=0&&((D=m.value)==null||D.scrollToIndex(L))})}}function J(n){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!n.props.disabled)if(e.multiple){const _=r.value.findIndex(H=>e.valueComparator(H.value,n.value)),P=h??!~_;if(~_){const H=P?[...r.value,n]:[...r.value];H.splice(_,1),r.value=H}else P&&(r.value=[...r.value,n])}else{const _=h!==!1;r.value=_?[n]:[],qe(()=>{u.value=!1})}}function ae(n){var h;(h=w.value)!=null&&h.$el.contains(n.relatedTarget)||(u.value=!1)}function $(){var n;e.eager&&((n=m.value)==null||n.calculateVisibleItems())}function _e(){var n;l.value&&((n=s.value)==null||n.focus())}function be(n){l.value=!0}function Ae(n){if(n==null)r.value=[];else if(Xe(s.value,":autofill")||Xe(s.value,":-webkit-autofill")){const h=c.value.find(_=>_.title===n);h&&J(h)}else s.value&&(s.value.value="")}return j(u,()=>{if(!e.hideSelected&&u.value&&r.value.length){const n=V.value.findIndex(h=>r.value.some(_=>e.valueComparator(_.value,h.value)));fe&&window.requestAnimationFrame(()=>{var h;n>=0&&((h=m.value)==null||h.scrollToIndex(n))})}}),j(()=>e.items,(n,h)=>{u.value||l.value&&!h.length&&n.length&&(u.value=!0)}),ye(()=>{const n=!!(e.chips||a.chip),h=!!(!e.hideNoData||V.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),_=r.value.length>0,P=Ne.filterProps(e),H=_||!l.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return v(Ne,M({ref:s},P,{modelValue:r.value.map(S=>S.props.value).join(", "),"onUpdate:modelValue":Ae,focused:l.value,"onUpdate:focused":S=>l.value=S,validationValue:r.externalValue,counterValue:p.value,dirty:_,class:["v-select",{"v-select--active-menu":u.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":r.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,inputmode:"none",placeholder:H,"onClick:clear":Q,"onMousedown:control":G,onBlur:ae,onKeydown:te,"aria-label":o(f.value),title:o(f.value)}),{...a,default:()=>v(O,null,[v(Ja,M({ref:i,modelValue:u.value,"onUpdate:modelValue":S=>u.value=S,activator:"parent",contentClass:"v-select__content",disabled:I.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:$,onAfterLeave:_e},F.value),{default:()=>[h&&v(ya,M({ref:w,selected:T.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:S=>S.preventDefault(),onKeydown:X,onFocusin:be,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},K,e.listProps),{default:()=>{var S,L,D;return[(S=a["prepend-item"])==null?void 0:S.call(a),!V.value.length&&!e.hideNoData&&(((L=a["no-data"])==null?void 0:L.call(a))??v(Qe,{title:o(e.noDataText)},null)),v(kt,{ref:m,renderless:!0,items:V.value},{default:Y=>{var Ue;let{item:U,index:se,itemRef:R}=Y;const He=M(U.props,{ref:R,key:se,onClick:()=>J(U,null)});return((Ue=a.item)==null?void 0:Ue.call(a,{item:U,index:se,props:He}))??v(Qe,M(He,{role:"option"}),{prepend:Vt=>{let{isSelected:wt}=Vt;return v(O,null,[e.multiple&&!e.hideSelected?v($a,{key:U.value,modelValue:wt,ripple:!1,tabindex:"-1"},null):void 0,U.props.prependAvatar&&v(De,{image:U.props.prependAvatar},null),U.props.prependIcon&&v(ue,{icon:U.props.prependIcon},null)])}})}}),(D=a["append-item"])==null?void 0:D.call(a)]}})]}),r.value.map((S,L)=>{function D(R){R.stopPropagation(),R.preventDefault(),J(S,!1)}const Y={"onClick:close":D,onKeydown(R){R.key!=="Enter"&&R.key!==" "||(R.preventDefault(),R.stopPropagation(),D(R))},onMousedown(R){R.preventDefault(),R.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},U=n?!!a.chip:!!a.selection,se=U?ba(n?a.chip({item:S,index:L,props:Y}):a.selection({item:S,index:L})):void 0;if(!(U&&!se))return v("div",{key:S.value,class:"v-select__selection"},[n?a.chip?v(re,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:S.title}}},{default:()=>[se]}):v(Qa,M({key:"chip",closable:e.closableChips,size:"small",text:S.title,disabled:S.props.disabled},Y),null):se??v("span",{class:"v-select__selection-text"},[S.title,e.multiple&&L<r.value.length-1&&v("span",{class:"v-select__selection-comma"},[xe(",")])])])})]),"append-inner":function(){var Y;for(var S=arguments.length,L=new Array(S),D=0;D<S;D++)L[D]=arguments[D];return v(O,null,[(Y=a["append-inner"])==null?void 0:Y.call(a,...L),e.menuIcon?v(ue,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),yt({isFocused:l,menu:u,select:J},s)}}),il={class:"browse-selects"},cl={class:"selects mt-5 mb-8"},dl={class:"no-data-placeholder mr-5"},vl=ce({__name:"Browse",props:{corpusArr:{default:()=>[]},volumeLabel:{default:"Volume"},textLabel:{default:"Text"}},emits:["chosen"],setup(e,{emit:t}){const a={get chosen(){return{volume:"",text:""}}},o=t,s=pe("volume"),i=pe("text");s.value&&y(),i.value&&c(),he(c),ht(()=>{s.value=null,i.value=null});const m=g(()=>{if(s.value)return e.corpusArr.find(({volumeName:k})=>k===s.value)}),d=g(()=>m.value?m.value.texts:[]);function u(k,r){r==="volume"?(i.value=null,y()):c()}function c(){o("chosen",{volume:s.value,text:i.value})}function y(){o("chosen",a.chosen)}return(k,r)=>(C(),E("div",il,[q("div",cl,[v(st,{modelValue:le(s),"onUpdate:modelValue":[r[0]||(r[0]=p=>Re(s)?s.value=p:null),r[1]||(r[1]=p=>u(p,"volume"))],items:k.corpusArr,label:k.volumeLabel,"item-title":"volumeName","item-value":"volumeName",variant:"outlined",density:"compact"},null,8,["modelValue","items","label"]),v(st,{modelValue:le(i),"onUpdate:modelValue":[r[2]||(r[2]=p=>Re(i)?i.value=p:null),r[3]||(r[3]=p=>u(p,"text"))],items:d.value,label:k.textLabel,"item-title":"textName","item-value":"textNumber",variant:"outlined",density:"compact"},{"no-data":ne(()=>[r[4]||(r[4]=q("span",{class:"no-data-arrow"},"⬅",-1)),q("span",dl,Ve(`A ${k.volumeLabel} should be chosen`),1)]),_:1},8,["modelValue","items","label"])])]))}}),ml=ve(vl,[["__scopeId","data-v-0b260389"]]),fl={},hl={height:"3em",viewBox:"0 0 24 24",width:"3em",xmlns:"http://www.w3.org/2000/svg"};function pl(e,t){return C(),E("svg",hl,t[0]||(t[0]=[q("path",{d:"M3 20q-.825 0-1.412-.587T1 18V6q0-.825.588-1.412T3 4h18q.825 0 1.413.588T23 6v12q0 .825-.587 1.413T21 20zm0-2h18V6H3zm6-1h6q.425 0 .713-.288T16 16t-.288-.712T15 15H9q-.425 0-.712.288T8 16t.288.713T9 17m-6 1V6zm3-8q.425 0 .713-.288T7 9t-.288-.712T6 8t-.712.288T5 9t.288.713T6 10m4 0q.425 0 .713-.288T11 9t-.288-.712T10 8t-.712.288T9 9t.288.713T10 10m4 0q.425 0 .713-.288T15 9t-.288-.712T14 8t-.712.288T13 9t.288.713T14 10m4 0q.425 0 .713-.288T19 9t-.288-.712T18 8t-.712.288T17 9t.288.713T18 10M6 13.5q.425 0 .713-.288T7 12.5t-.288-.712T6 11.5t-.712.288T5 12.5t.288.713T6 13.5m4 0q.425 0 .713-.288T11 12.5t-.288-.712T10 11.5t-.712.288T9 12.5t.288.713t.712.287m4 0q.425 0 .713-.288T15 12.5t-.288-.712T14 11.5t-.712.288T13 12.5t.288.713t.712.287m4 0q.425 0 .713-.288T19 12.5t-.288-.712T18 11.5t-.712.288T17 12.5t.288.713t.712.287",fill:"lightGrey"},null,-1)]))}const yl=ve(fl,[["render",pl],["__scopeId","data-v-c2634224"]]),bl={class:"d-flex align-center flex-column"},gl={class:"searchers"},kl={class:"d-flex ga-3"},xl=ce({__name:"Search",props:{textusLabel:{default:"Search corpus"},versioLabel:{default:"Search translation"}},emits:["searchers","copy-to-clipboard"],setup(e,{emit:t}){const a=e,o={get searchers(){return{textus:null,versio:null}}},s=t,i=B(o.searchers),m=B(o.searchers),d=B(!1),u=B(null),c=pe("textus"),y=pe("versio");i.value.textus=c.value,i.value.versio=y.value;const k=g(()=>!i.value.textus&&!i.value.versio),r=g(()=>[{name:"textus",value:i.value.textus,label:a.textusLabel},{name:"versio",value:i.value.versio,label:a.versioLabel}]);he(T);function p(f,b){i.value[b]=f||"",f||T()}function A(f){i.value.textus=f,d.value&&T()}function T(){m.value=ie.cloneDeep(i.value),s("searchers",ie.cloneDeep(m.value)),l()}function l(){c.value=m.value.textus||null,y.value=m.value.versio||null}return he(()=>{i.value.textus=c.value,i.value.versio=y.value,(i.value.textus||i.value.versio)&&T(),u.value=document.querySelector(".searchers .v-text-field.input_textus input")}),ht(()=>{c.value=null,y.value=null}),(f,b)=>{const x=yl;return C(),E("div",bl,[q("div",gl,[q("div",null,[q("div",kl,[v(x,{class:"keyboard-icon",onClick:b[0]||(b[0]=V=>d.value=!0)}),v(Le,{disabled:k.value,variant:"outlined",class:"search-btn",onClick:T},{default:ne(()=>b[3]||(b[3]=[xe(" Search ")])),_:1},8,["disabled"])]),v(Ze,{value:r.value[0].value,"input-el":u.value,type:"regex",visible:"",onSubmit:A},null,8,["value","input-el"])]),(C(!0),E(O,null,Te(r.value,({value:V,label:I,name:F})=>(C(),z(Ne,{key:F,"model-value":V,label:I,class:Se(`input_${F}`),style:{"min-width":"200px"},variant:"outlined",density:"compact","hide-details":"",clearable:"","onUpdate:modelValue":w=>p(w,F),onKeydown:xa(Va(T,["prevent"]),["enter"])},null,8,["model-value","label","class","onUpdate:modelValue","onKeydown"]))),128))]),v(qa,{modelValue:d.value,"onUpdate:modelValue":b[2]||(b[2]=V=>d.value=V),"hide-overlay":"",fullscreen:""},{default:ne(()=>[v(Ze,{visible:d.value,value:i.value.textus,"input-name":e.textusLabel,"onUpdate:visible":b[1]||(b[1]=V=>d.value=V),onSubmit:A},null,8,["visible","value","input-name"])]),_:1},8,["modelValue"])])}}}),Vl=ve(xl,[["__scopeId","data-v-1f2e1014"]]),xt=300;function Be({hash:e="",keepLocation:t=!1,className:a="chosen"}){return new Promise(o=>{setTimeout(()=>{t||(location.hash=e,setTimeout(()=>scrollBy(0,-200),0));const s=document.querySelector(e);s&&(s.classList.add(a),setTimeout(o,1))},xt)})}function wl(e){const t=document.querySelector(e);t&&Me(t)}function Me(e,t="chosen"){e&&setTimeout(()=>{e.classList.remove(t)},xt)}const Sl=["id"],Tl={class:"controls-wrapper"},Cl={class:"lines"},_l=ce({__name:"LineCard",props:{line:{},searchers:{}},setup(e){const t=e,a=B(),o=pt(),s=wa(),i=g(()=>Ia.map(r=>({lineName:r,str:t.line[r],searcher:t.searchers.data[r]}))),m=g(()=>!t.searchers.areAllEmpty),d=g(()=>o.hash),u=g(()=>"#"+t.line.hash);function c(){Me(a.value,"chosen")}j(d,(r,p)=>{!r&&p&&c()});async function y(){if(!m.value)return;const{volumeName:r,textNumber:p}=t.line;await s.push({query:{mode:me.browse,volume:r,text:p}}),await Be({hash:u.value})}function k(){if(!o.hash){Be({hash:u.value});return}wl(o.hash),o.hash===u.value?s.replace({query:o.query,hash:""}):(Be({hash:u.value,keepLocation:!0}),s.replace({query:o.query,hash:u.value}));const r=Array.from(document.querySelectorAll('div.line-card[id^="h"]'));for(const p of r)p.style.background&&p.id!==t.line.hash&&Me(p)}return(r,p)=>r.line?(C(),E("div",{key:0,class:"line-card",id:r.line.hash,ref_key:"lineCardRef",ref:a},[q("div",Tl,[m.value?(C(),E("div",{key:1,class:"control-sign",onClick:p[1]||(p[1]=A=>y())},"▤")):(C(),E("div",{key:0,class:"control-sign",onClick:p[0]||(p[0]=A=>k())},"#"))]),q("div",Cl,[(C(!0),E(O,null,Te(i.value,(A,T)=>(C(),z(Ea,M({ref_for:!0},A,{key:T,class:"mb-1"}),null,16))),128)),p[2]||(p[2]=q("div",null,[q("br")],-1))])],8,Sl)):Z("",!0)}}),ot=ve(_l,[["__scopeId","data-v-88d2b5b0"]]),Al={key:1},Pl=ce({__name:"Results",props:{results:{},searchers:{}},setup(e){const t=B(),a=Sa(t),o=g(()=>innerHeight-a.bottom.value-40),s=g(()=>e.results.length>500),i=pt(),m=Ta(),d=oe(m,"isDark"),u=g(()=>!e.searchers.areAllEmpty);return he(async()=>{var y;const c=i.hash;c&&(await Ba(1e3),(y=document.querySelector(c))==null||y.scrollIntoView({behavior:"smooth",block:"center"}))}),(c,y)=>(C(),E("div",{class:Se(["results w-100",{many:s.value}])},[u.value?(C(),E("div",{key:0,ref_key:"stats",ref:t,class:Se(["results-stats mb-1",{invert:d.value}])},[q("div",null,"Found "+Ve(c.results.length)+" contexts",1)],2)):Z("",!0),y[0]||(y[0]=q("br",null,null,-1)),c.results?(C(),E("div",Al,[s.value?(C(),z(kt,{key:0,items:c.results,height:o.value},{default:ne(({item:k})=>[k?(C(),z(ot,{line:k,searchers:c.searchers,key:k.hash},null,8,["line","searchers"])):Z("",!0)]),_:1},8,["items","height"])):(C(),z(Fa,{key:1,items:c.results},{default:ne(({items:k})=>[(C(!0),E(O,null,Te(k,r=>(C(),E(O,null,[r?(C(),z(ot,{line:r,searchers:c.searchers,key:r.hash},null,8,["line","searchers"])):Z("",!0)],64))),256))]),_:1},8,["items"]))])):Z("",!0)],2))}}),Il=ve(Pl,[["__scopeId","data-v-1019f22c"]]),El={key:0,class:"searcher-wrapper"},Bl=ce({__name:"BrowseAndSearch",setup(e){const t=B(!0);Ca("drawer").on(x=>{t.value=!x});const o=Ua(),s=_a(),i=g(()=>!!s.text.value),m=g(()=>y.value===me.search),d=g(()=>y.value===me.browse),u=g(()=>m.value?k.value:c.searchers),c={get searchers(){return new et({textus:"",versio:""})}},y=pe("mode",me.search),k=B(c.searchers),r=B({volume:null,text:null}),p=g(()=>{if(!r.value.text||!o.corpusArray.length)return[];const x=ie.find(o.corpusArray,{volumeName:r.value.volume});return ie.find(x.texts,{textNumber:r.value.text}).contents}),A=g(()=>o.corpusLines),T=g(()=>k.value.areAllEmpty?[]:A.value.filter(k.value.test)),l=g(()=>y.value===me.browse?p.value:T.value);function f(x){k.value=new et(x)}function b(x){r.value=x}return(x,V)=>(C(),E("div",{class:Se([{"no-hashes":i.value},"browse-and-search"]),ref:"wrapper"},[m.value?(C(),E("div",El,[v(Ha,{count:l.value.length,class:"mr-5"},null,8,["count"]),v(Vl,{"corpus-arr-prop":le(o).corpusArray,"textus-label":"Aramaic text","versio-label":"Translation text",onSearchers:f},null,8,["corpus-arr-prop"])])):d.value?(C(),z(ml,{key:1,"corpus-arr":le(o).corpusArray,onChosen:b},null,8,["corpus-arr"])):Z("",!0),v(Il,{results:l.value,searchers:u.value},null,8,["results","searchers"]),t.value?(C(),z(Aa,{to:"#app-bar-slot",key:x.isVisible},[v(Ga,{modelValue:le(y),"onUpdate:modelValue":V[0]||(V[0]=I=>Re(y)?y.value=I:null),class:"mr-5 button-switcher"},null,8,["modelValue"])])):Z("",!0)],2))}}),Wl=ve(Bl,[["__scopeId","data-v-ea2f5b1b"]]);export{Wl as B};
