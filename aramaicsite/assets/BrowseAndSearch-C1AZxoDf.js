var St=Object.defineProperty;var Tt=(e,t,l)=>t in e?St(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var M=(e,t,l)=>Tt(e,typeof t!="symbol"?t+"":t,l);import{b7 as Ct,E as ie,d as _t,c as b,b8 as At,r as E,m as Z,b as ce,b9 as Pt,o as _,f as I,F as O,i as Te,D as z,h as ee,j as xe,k as Ve,V as Be,p as ne,v as te,aR as ut,Y as rt,Z as it,av as It,x as Ce,ba as Lt,q as de,P as ct,T as Et,ad as Bt,t as oe,s as ye,g as d,L as q,S as dt,aK as Dt,aL as Rt,aa as Nt,aq as Mt,ar as qt,bb as $t,a0 as we,a2 as Ot,aO as Ft,W as Ke,X as Ht,aQ as Ut,bc as Kt,am as ue,al as re,a6 as zt,aJ as De,bd as Gt,aS as jt,as as Wt,a8 as Qt,at as Xt,ae as Jt,aW as Yt,be as ze,ao as ke,ap as Zt,ac as ea,Q as ta,ah as aa,a1 as la,U as j,b3 as na,a4 as qe,bf as Ge,bg as sa,e as W,ax as fe,bh as Pe,bi as oa,M as vt,$ as ua,bj as ra,bk as mt,bl as ia,w as je,bm as ca,b2 as Ie,bn as ft,bo as da,ak as va,bp as ma,aX as he,a5 as be,an as fa,bq as ha,br as pa,bs as ya,bt as We,bu as Qe,bv as ga,bw as Xe,bx as ba,by as ka,bz as ht,n as R,l as Re,_ as ve,A as xa,aD as Va,ag as Se,bA as pt,B as wa,bB as Sa,af as Ta,bC as Ca,bD as _a}from"./index-DIqYqPqS.js";import{u as pe}from"./index-Db2tmFa4.js";import{u as Aa,L as Je,D as Ye,K as Ze,a as Pa,b as me,_ as Ia,s as La,S as et}from"./GrepLine.vue_vue_type_style_index_0_lang-CA3ltlSl.js";import{u as Ea,A as tt}from"./assetsStore-C_JR27pb.js";import{V as Ne,m as Ba}from"./VTextField-CmR8FYo3.js";import{h as Da}from"./VInput-BZGhzg1l.js";import{f as yt}from"./forwardRefs-DWGaNmQL.js";import{V as at,m as Ra,a as lt,g as Na}from"./VOverlay-Bur5WJaP.js";import{a as gt,V as Ma}from"./VDialog-C59xWWQY.js";import{V as qa}from"./VCheckboxBtn-DjQCM5-U.js";import{m as $a,V as nt}from"./VSlideGroup-CTcLwzVl.js";import{_ as Oa}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-CtwLn3X2.js";import{_ as Fa}from"./CopyResults.vue_vue_type_script_setup_true_lang-CRg8KeN5.js";class $e{constructor({volume:t,texts:l}){M(this,"volumeName");M(this,"texts");this.texts=l.map(u=>({volumeName:t,...u})).map(Oe.instantiate),this.volumeName=t}get totalContents(){return ie.flatMap(this.texts,"contents")}static instantiate(t){return new $e(t)}}class Oe{constructor({volumeName:t,textNumber:l,textName:u,contents:n}){M(this,"volumeName");M(this,"textNumber");M(this,"_textName");M(this,"rawContents");this.volumeName=t,this.textNumber=l,this._textName=u,this.rawContents=n}get contents(){return this.rawContents.map(t=>({volumeName:this.volumeName,textNumber:this.textNumber,textName:this.textName,...t})).map(Fe.instantiate)}get textName(){return this._textName.replace(/\.txt/,"")}set textName(t){this._textName=t}static instantiate(t){return new Oe(t)}}class Fe{constructor({volumeName:t,textNumber:l,textName:u,lineNumber:n,textus:r,versio:m}){M(this,"volumeName");M(this,"textNumber");M(this,"textName");M(this,"lineNumber");M(this,"textus");M(this,"versio");this.volumeName=t,this.textNumber=l,this.textName=u,this.lineNumber=n,this.textus=r,this.versio=m}get title(){return this.volumeName+": "+this.textName}get hash(){return"h"+Ct(this)}static instantiate(t){return new Fe(t)}}const Ha=_t("corpusWithTranslationStore",()=>{const e=Ea(),t=Aa(),l=b(()=>{switch(t.value){case Je.maalula:return tt.maalulaCorpusJson;case Je.turoyo:default:return tt.turoyoNewCorpusJson}}),u=b(()=>{var m;return(m=e[l.value])==null?void 0:m.data}),n=At(()=>{var m;return((m=u.value)==null?void 0:m.map($e.instantiate))||[]},[]),r=b(()=>ie.flatMap(n.value,"totalContents"));return{corpusArray:n,corpusLines:r}}),Ua=(e,t)=>{const l=E(e.indexOf(Z(t))||0),u=b(()=>e[l.value]);function n(){l.value=(l.value+1)%e.length}return function(){return n(),u.value}},Ka={class:"d-flex ga-1"},za=ce({__name:"ModeSwitcher",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Pt(e,"modelValue"),l=Ua(Ye,t);function u(){t.value=l()}return(n,r)=>(_(),I("div",Ka,[(_(!0),I(O,null,Te(Z(Ye),m=>(_(),z(Be,{key:m,variant:m===t.value?"outlined":"text",class:"d-none d-sm-block",size:"small",onClick:c=>t.value=m},{default:ee(()=>[xe(Ve(m)+" mode ",1)]),_:2},1032,["variant","onClick"]))),128)),t.value?(_(),z(Be,{key:0,class:"d-sm-none",variant:"outlined",onClick:r[0]||(r[0]=m=>u())},{default:ee(()=>[xe(Ve(t.value)+" mode ",1)]),_:1})):ne("",!0)]))}}),bt=Symbol.for("vuetify:v-chip-group"),Ga=te({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Lt},...$a(),...Ce(),...It({selectedClass:"v-chip--selected"}),...it(),...rt(),...ut({variant:"tonal"})},"VChipGroup");de()({name:"VChipGroup",props:Ga(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:l}=t;const{themeClasses:u}=ct(e),{isSelected:n,select:r,next:m,prev:c,selected:o}=Et(e,bt);return Bt({VChip:{color:oe(e,"color"),disabled:oe(e,"disabled"),filter:oe(e,"filter"),variant:oe(e,"variant")}}),ye(()=>{const i=nt.filterProps(e);return d(nt,q(i,{class:["v-chip-group",{"v-chip-group--column":e.column},u.value,e.class],style:e.style}),{default:()=>{var g;return[(g=l.default)==null?void 0:g.call(l,{isSelected:n,select:r,next:m,prev:c,selected:o.value})]}})}),{}}});const ja=te({activeClass:String,appendAvatar:String,appendIcon:ke,closable:Boolean,closeIcon:{type:ke,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:ke,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:ze(),onClickOnce:ze(),...Yt(),...Ce(),...Jt(),...Xt(),...Qt(),...Wt(),...jt(),...Gt(),...it({tag:"span"}),...rt(),...ut({variant:"tonal"})},"VChip"),Wa=de()({name:"VChip",directives:{Ripple:Zt},props:ja(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:l,emit:u,slots:n}=t;const{t:r}=dt(),{borderClasses:m}=Dt(e),{colorClasses:c,colorStyles:o,variantClasses:i}=Rt(e),{densityClasses:g}=Nt(e),{elevationClasses:x}=Mt(e),{roundedClasses:v}=qt(e),{sizeClasses:p}=$t(e),{themeClasses:k}=ct(e),V=we(e,"modelValue"),a=Ot(e,bt,!1),f=Ft(e,l),y=b(()=>e.link!==!1&&f.isLink.value),T=b(()=>!e.disabled&&e.link!==!1&&(!!a||e.link||f.isClickable.value)),C=b(()=>({"aria-label":r(e.closeLabel),onClick(w){w.preventDefault(),w.stopPropagation(),V.value=!1,u("click:close",w)}}));function B(w){var K;u("click",w),T.value&&((K=f.navigate)==null||K.call(f,w),a==null||a.toggle())}function F(w){(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),B(w))}return()=>{const w=f.isLink.value?"a":e.tag,K=!!(e.appendIcon||e.appendAvatar),Q=!!(K||n.append),G=!!(n.close||e.closable),X=!!(n.filter||e.filter)&&a,ae=!!(e.prependIcon||e.prependAvatar),J=!!(ae||n.prepend),le=!a||a.isSelected.value;return V.value&&Ke(d(w,q({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":T.value,"v-chip--filter":X,"v-chip--pill":e.pill},k.value,m.value,le?c.value:void 0,g.value,x.value,v.value,p.value,i.value,a==null?void 0:a.selectedClass.value,e.class],style:[le?o.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:T.value?0:void 0,onClick:B,onKeydown:T.value&&!y.value&&F},f.linkProps),{default:()=>{var $;return[Ut(T.value,"v-chip"),X&&d(Kt,{key:"filter"},{default:()=>[Ke(d("div",{class:"v-chip__filter"},[n.filter?d(re,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},n.filter):d(ue,{key:"filter-icon",icon:e.filterIcon},null)]),[[zt,a.isSelected.value]])]}),J&&d("div",{key:"prepend",class:"v-chip__prepend"},[n.prepend?d(re,{key:"prepend-defaults",disabled:!ae,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},n.prepend):d(O,null,[e.prependIcon&&d(ue,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&d(De,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),d("div",{class:"v-chip__content","data-no-activator":""},[(($=n.default)==null?void 0:$.call(n,{isSelected:a==null?void 0:a.isSelected.value,selectedClass:a==null?void 0:a.selectedClass.value,select:a==null?void 0:a.select,toggle:a==null?void 0:a.toggle,value:a==null?void 0:a.value.value,disabled:e.disabled}))??e.text]),Q&&d("div",{key:"append",class:"v-chip__append"},[n.append?d(re,{key:"append-defaults",disabled:!K,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},n.append):d(O,null,[e.appendIcon&&d(ue,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&d(De,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),G&&d("button",q({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},C.value),[n.close?d(re,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},n.close):d(ue,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Ht("ripple"),T.value&&e.ripple,null]])}}}),Qa=te({id:String,submenu:Boolean,...vt(Ra({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:gt}}),["absolute"])},"VMenu"),Xa=de()({name:"VMenu",props:Qa(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:l}=t;const u=we(e,"modelValue"),{scopeId:n}=ea(),{isRtl:r}=ta(),m=aa(),c=b(()=>e.id||`v-menu-${m}`),o=E(),i=la(lt,null),g=j(new Set);ua(lt,{register(){g.value.add(m)},unregister(){g.value.delete(m)},closeParents(a){setTimeout(()=>{var f;!g.value.size&&!e.persistent&&(a==null||(f=o.value)!=null&&f.contentEl&&!ra(a,o.value.contentEl))&&(u.value=!1,i==null||i.closeParents())},40)}}),na(()=>{i==null||i.unregister(),document.removeEventListener("focusin",x)}),sa(()=>u.value=!1);async function x(a){var T,C,B;const f=a.relatedTarget,y=a.target;await qe(),u.value&&f!==y&&((T=o.value)!=null&&T.contentEl)&&((C=o.value)!=null&&C.globalTop)&&![document,o.value.contentEl].includes(y)&&!o.value.contentEl.contains(y)&&((B=Ge(o.value.contentEl)[0])==null||B.focus())}W(u,a=>{a?(i==null||i.register(),fe&&document.addEventListener("focusin",x,{once:!0})):(i==null||i.unregister(),fe&&document.removeEventListener("focusin",x))},{immediate:!0});function v(a){i==null||i.closeParents(a)}function p(a){var f,y,T,C,B;if(!e.disabled)if(a.key==="Tab"||a.key==="Enter"&&!e.closeOnContentClick){if(a.key==="Enter"&&(a.target instanceof HTMLTextAreaElement||a.target instanceof HTMLInputElement&&a.target.closest("form")))return;a.key==="Enter"&&a.preventDefault(),oa(Ge((f=o.value)==null?void 0:f.contentEl,!1),a.shiftKey?"prev":"next",w=>w.tabIndex>=0)||(u.value=!1,(T=(y=o.value)==null?void 0:y.activatorEl)==null||T.focus())}else e.submenu&&a.key===(r.value?"ArrowRight":"ArrowLeft")&&(u.value=!1,(B=(C=o.value)==null?void 0:C.activatorEl)==null||B.focus())}function k(a){var y;if(e.disabled)return;const f=(y=o.value)==null?void 0:y.contentEl;f&&u.value?a.key==="ArrowDown"?(a.preventDefault(),a.stopImmediatePropagation(),Pe(f,"next")):a.key==="ArrowUp"?(a.preventDefault(),a.stopImmediatePropagation(),Pe(f,"prev")):e.submenu&&(a.key===(r.value?"ArrowRight":"ArrowLeft")?u.value=!1:a.key===(r.value?"ArrowLeft":"ArrowRight")&&(a.preventDefault(),Pe(f,"first"))):(e.submenu?a.key===(r.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(a.key))&&(u.value=!0,a.preventDefault(),setTimeout(()=>setTimeout(()=>k(a))))}const V=b(()=>q({"aria-haspopup":"menu","aria-expanded":String(u.value),"aria-owns":c.value,onKeydown:k},e.activatorProps));return ye(()=>{const a=at.filterProps(e);return d(at,q({ref:o,id:c.value,class:["v-menu",e.class],style:e.style},a,{modelValue:u.value,"onUpdate:modelValue":f=>u.value=f,absolute:!0,activatorProps:V.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":v,onKeydown:p},n),{activator:l.activator,default:function(){for(var f=arguments.length,y=new Array(f),T=0;T<f;T++)y[T]=arguments[T];return d(re,{root:"VMenu"},{default:()=>{var C;return[(C=l.default)==null?void 0:C.call(l,...y)]}})}})}),yt({id:c,ΨopenChildren:g},o)}}),Ja=te({renderless:Boolean,...Ce()},"VVirtualScrollItem"),Ya=de()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Ja(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:l,emit:u,slots:n}=t;const{resizeRef:r,contentRect:m}=mt(void 0,"border");W(()=>{var c;return(c=m.value)==null?void 0:c.height},c=>{c!=null&&u("update:height",c)}),ye(()=>{var c,o;return e.renderless?d(O,null,[(c=n.default)==null?void 0:c.call(n,{itemRef:r})]):d("div",q({ref:r,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(o=n.default)==null?void 0:o.call(n)])})}}),Za=-1,el=1,Le=100,tl=te({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function al(e,t){const l=ia(),u=j(0);je(()=>{u.value=parseFloat(e.itemHeight||0)});const n=j(0),r=j(Math.ceil((parseInt(e.height)||l.height.value)/(u.value||16))||1),m=j(0),c=j(0),o=E(),i=E();let g=0;const{resizeRef:x,contentRect:v}=mt();je(()=>{x.value=o.value});const p=b(()=>{var s;return o.value===document.documentElement?l.height.value:((s=v.value)==null?void 0:s.height)||parseInt(e.height)||0}),k=b(()=>!!(o.value&&i.value&&p.value&&u.value));let V=Array.from({length:t.value.length}),a=Array.from({length:t.value.length});const f=j(0);let y=-1;function T(s){return V[s]||u.value}const C=ca(()=>{const s=performance.now();a[0]=0;const h=t.value.length;for(let A=1;A<=h-1;A++)a[A]=(a[A-1]||0)+T(A-1);f.value=Math.max(f.value,performance.now()-s)},f),B=W(k,s=>{s&&(B(),g=i.value.offsetTop,C.immediate(),$(),~y&&qe(()=>{fe&&window.requestAnimationFrame(()=>{ge(y),y=-1})}))});ft(()=>{C.clear()});function F(s,h){const A=V[s],P=u.value;u.value=P?Math.min(u.value,h):h,(A!==h||P!==u.value)&&(V[s]=h,C())}function w(s){return s=Ie(s,0,t.value.length-1),a[s]||0}function K(s){return ll(a,s)}let Q=0,G=0,X=0;W(p,(s,h)=>{h&&($(),s<h&&requestAnimationFrame(()=>{G=0,$()}))});function ae(){if(!o.value||!i.value)return;const s=o.value.scrollTop,h=performance.now();h-X>500?(G=Math.sign(s-Q),g=i.value.offsetTop):G=s-Q,Q=s,X=h,$()}function J(){!o.value||!i.value||(G=0,X=0,$())}let le=-1;function $(){cancelAnimationFrame(le),le=requestAnimationFrame(_e)}function _e(){if(!o.value||!p.value)return;const s=Q-g,h=Math.sign(G),A=Math.max(0,s-Le),P=Ie(K(A),0,t.value.length),H=s+p.value+Le,S=Ie(K(H)+1,P+1,t.value.length);if((h!==Za||P<n.value)&&(h!==el||S>r.value)){const L=w(n.value)-w(P),D=w(S)-w(r.value);Math.max(L,D)>Le?(n.value=P,r.value=S):(P<=0&&(n.value=P),S>=t.value.length&&(r.value=S))}m.value=w(n.value),c.value=w(t.value.length)-w(r.value)}function ge(s){const h=w(s);!o.value||s&&!h?y=s:o.value.scrollTop=h}const Ae=b(()=>t.value.slice(n.value,r.value).map((s,h)=>({raw:s,index:h+n.value})));return W(t,()=>{V=Array.from({length:t.value.length}),a=Array.from({length:t.value.length}),C.immediate(),$()},{deep:!0}),{calculateVisibleItems:$,containerRef:o,markerRef:i,computedItems:Ae,paddingTop:m,paddingBottom:c,scrollToIndex:ge,handleScroll:ae,handleScrollend:J,handleItemResize:F}}function ll(e,t){let l=e.length-1,u=0,n=0,r=null,m=-1;if(e[l]<t)return l;for(;u<=l;)if(n=u+l>>1,r=e[n],r>t)l=n-1;else if(r<t)m=n,u=n+1;else return r===t?n:u;return m}const nl=te({items:{type:Array,default:()=>[]},renderless:Boolean,...tl(),...Ce(),...fa()},"VVirtualScroll"),kt=de()({name:"VVirtualScroll",props:nl(),setup(e,t){let{slots:l}=t;const u=da("VVirtualScroll"),{dimensionStyles:n}=va(e),{calculateVisibleItems:r,containerRef:m,markerRef:c,handleScroll:o,handleScrollend:i,handleItemResize:g,scrollToIndex:x,paddingTop:v,paddingBottom:p,computedItems:k}=al(e,oe(e,"items"));return ma(()=>e.renderless,()=>{function V(){var y,T;const f=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";m.value===document.documentElement?(document[f]("scroll",o,{passive:!0}),document[f]("scrollend",i)):((y=m.value)==null||y[f]("scroll",o,{passive:!0}),(T=m.value)==null||T[f]("scrollend",i))}he(()=>{m.value=Na(u.vnode.el,!0),V(!0)}),ft(V)}),ye(()=>{const V=k.value.map(a=>d(Ya,{key:a.index,renderless:e.renderless,"onUpdate:height":f=>g(a.index,f)},{default:f=>{var y;return(y=l.default)==null?void 0:y.call(l,{item:a.raw,index:a.index,...f})}}));return e.renderless?d(O,null,[d("div",{ref:c,class:"v-virtual-scroll__spacer",style:{paddingTop:be(v.value)}},null),V,d("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:be(p.value)}},null)]):d("div",{ref:m,class:["v-virtual-scroll",e.class],onScrollPassive:o,onScrollend:i,style:[n.value,e.style]},[d("div",{ref:c,class:"v-virtual-scroll__container",style:{paddingTop:be(v.value),paddingBottom:be(p.value)}},[V])])}),{calculateVisibleItems:r,scrollToIndex:x}}});function sl(e,t){const l=j(!1);let u;function n(c){cancelAnimationFrame(u),l.value=!0,u=requestAnimationFrame(()=>{u=requestAnimationFrame(()=>{l.value=!1})})}async function r(){await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>{if(l.value){const o=W(l,()=>{o(),c()})}else c()})}async function m(c){var g,x;if(c.key==="Tab"&&((g=t.value)==null||g.focus()),!["PageDown","PageUp","Home","End"].includes(c.key))return;const o=(x=e.value)==null?void 0:x.$el;if(!o)return;(c.key==="Home"||c.key==="End")&&o.scrollTo({top:c.key==="Home"?0:o.scrollHeight,behavior:"smooth"}),await r();const i=o.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(c.key==="PageDown"||c.key==="Home"){const v=o.getBoundingClientRect().top;for(const p of i)if(p.getBoundingClientRect().top>=v){p.focus();break}}else{const v=o.getBoundingClientRect().bottom;for(const p of[...i].reverse())if(p.getBoundingClientRect().bottom<=v){p.focus();break}}}return{onScrollPassive:n,onKeydown:m}}const ol=te({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ke,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...ka({itemChildren:!1})},"Select"),ul=te({...ol(),...vt(Ba({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ba({transition:{component:gt}})},"VSelect"),st=de()({name:"VSelect",props:ul(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:l}=t;const{t:u}=dt(),n=E(),r=E(),m=E(),c=we(e,"menu"),o=b({get:()=>c.value,set:s=>{var h;c.value&&!s&&((h=r.value)!=null&&h.ΨopenChildren.size)||(c.value=s)}}),{items:i,transformIn:g,transformOut:x}=ha(e),v=we(e,"modelValue",[],s=>g(s===null?[null]:pa(s)),s=>{const h=x(s);return e.multiple?h:h[0]??null}),p=b(()=>typeof e.counterValue=="function"?e.counterValue(v.value):typeof e.counterValue=="number"?e.counterValue:v.value.length),k=Da(),V=b(()=>v.value.map(s=>s.value)),a=j(!1),f=b(()=>o.value?e.closeText:e.openText);let y="",T;const C=b(()=>e.hideSelected?i.value.filter(s=>!v.value.some(h=>e.valueComparator(h,s))):i.value),B=b(()=>e.hideNoData&&!C.value.length||e.readonly||(k==null?void 0:k.isReadonly.value)),F=b(()=>{var s;return{...e.menuProps,activatorProps:{...((s=e.menuProps)==null?void 0:s.activatorProps)||{},"aria-haspopup":"listbox"}}}),w=E(),K=sl(w,n);function Q(s){e.openOnClear&&(o.value=!0)}function G(){B.value||(o.value=!o.value)}function X(s){We(s)&&ae(s)}function ae(s){var H,S;if(!s.key||e.readonly||k!=null&&k.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(s.key)&&s.preventDefault(),["Enter","ArrowDown"," "].includes(s.key)&&(o.value=!0),["Escape","Tab"].includes(s.key)&&(o.value=!1),s.key==="Home"?(H=w.value)==null||H.focus("first"):s.key==="End"&&((S=w.value)==null||S.focus("last"));const h=1e3;if(e.multiple||!We(s))return;const A=performance.now();A-T>h&&(y=""),y+=s.key.toLowerCase(),T=A;const P=i.value.find(L=>L.title.toLowerCase().startsWith(y));if(P!==void 0){v.value=[P];const L=C.value.indexOf(P);fe&&window.requestAnimationFrame(()=>{var D;L>=0&&((D=m.value)==null||D.scrollToIndex(L))})}}function J(s){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!s.props.disabled)if(e.multiple){const A=v.value.findIndex(H=>e.valueComparator(H.value,s.value)),P=h??!~A;if(~A){const H=P?[...v.value,s]:[...v.value];H.splice(A,1),v.value=H}else P&&(v.value=[...v.value,s])}else{const A=h!==!1;v.value=A?[s]:[],qe(()=>{o.value=!1})}}function le(s){var h;(h=w.value)!=null&&h.$el.contains(s.relatedTarget)||(o.value=!1)}function $(){var s;e.eager&&((s=m.value)==null||s.calculateVisibleItems())}function _e(){var s;a.value&&((s=n.value)==null||s.focus())}function ge(s){a.value=!0}function Ae(s){if(s==null)v.value=[];else if(Xe(n.value,":autofill")||Xe(n.value,":-webkit-autofill")){const h=i.value.find(A=>A.title===s);h&&J(h)}else n.value&&(n.value.value="")}return W(o,()=>{if(!e.hideSelected&&o.value&&v.value.length){const s=C.value.findIndex(h=>v.value.some(A=>e.valueComparator(A.value,h.value)));fe&&window.requestAnimationFrame(()=>{var h;s>=0&&((h=m.value)==null||h.scrollToIndex(s))})}}),W(()=>e.items,(s,h)=>{o.value||a.value&&!h.length&&s.length&&(o.value=!0)}),ye(()=>{const s=!!(e.chips||l.chip),h=!!(!e.hideNoData||C.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),A=v.value.length>0,P=Ne.filterProps(e),H=A||!a.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return d(Ne,q({ref:n},P,{modelValue:v.value.map(S=>S.props.value).join(", "),"onUpdate:modelValue":Ae,focused:a.value,"onUpdate:focused":S=>a.value=S,validationValue:v.externalValue,counterValue:p.value,dirty:A,class:["v-select",{"v-select--active-menu":o.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":v.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:H,"onClick:clear":Q,"onMousedown:control":G,onBlur:le,onKeydown:ae,"aria-label":u(f.value),title:u(f.value)}),{...l,default:()=>d(O,null,[d(Xa,q({ref:r,modelValue:o.value,"onUpdate:modelValue":S=>o.value=S,activator:"parent",contentClass:"v-select__content",disabled:B.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:$,onAfterLeave:_e},F.value),{default:()=>[h&&d(ya,q({ref:w,selected:V.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:S=>S.preventDefault(),onKeydown:X,onFocusin:ge,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},K,e.listProps),{default:()=>{var S,L,D;return[(S=l["prepend-item"])==null?void 0:S.call(l),!C.value.length&&!e.hideNoData&&(((L=l["no-data"])==null?void 0:L.call(l))??d(Qe,{title:u(e.noDataText)},null)),d(kt,{ref:m,renderless:!0,items:C.value},{default:Y=>{var Ue;let{item:U,index:se,itemRef:N}=Y;const He=q(U.props,{ref:N,key:se,onClick:()=>J(U,null)});return((Ue=l.item)==null?void 0:Ue.call(l,{item:U,index:se,props:He}))??d(Qe,q(He,{role:"option"}),{prepend:Vt=>{let{isSelected:wt}=Vt;return d(O,null,[e.multiple&&!e.hideSelected?d(qa,{key:U.value,modelValue:wt,ripple:!1,tabindex:"-1"},null):void 0,U.props.prependAvatar&&d(De,{image:U.props.prependAvatar},null),U.props.prependIcon&&d(ue,{icon:U.props.prependIcon},null)])}})}}),(D=l["append-item"])==null?void 0:D.call(l)]}})]}),v.value.map((S,L)=>{function D(N){N.stopPropagation(),N.preventDefault(),J(S,!1)}const Y={"onClick:close":D,onKeydown(N){N.key!=="Enter"&&N.key!==" "||(N.preventDefault(),N.stopPropagation(),D(N))},onMousedown(N){N.preventDefault(),N.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},U=s?!!l.chip:!!l.selection,se=U?ga(s?l.chip({item:S,index:L,props:Y}):l.selection({item:S,index:L})):void 0;if(!(U&&!se))return d("div",{key:S.value,class:"v-select__selection"},[s?l.chip?d(re,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:S.title}}},{default:()=>[se]}):d(Wa,q({key:"chip",closable:e.closableChips,size:"small",text:S.title,disabled:S.props.disabled},Y),null):se??d("span",{class:"v-select__selection-text"},[S.title,e.multiple&&L<v.value.length-1&&d("span",{class:"v-select__selection-comma"},[xe(",")])])])})]),"append-inner":function(){var Y;for(var S=arguments.length,L=new Array(S),D=0;D<S;D++)L[D]=arguments[D];return d(O,null,[(Y=l["append-inner"])==null?void 0:Y.call(l,...L),e.menuIcon?d(ue,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),yt({isFocused:a,menu:o,select:J},n)}}),rl={class:"browse-selects"},il={class:"selects mt-5 mb-8"},cl={class:"no-data-placeholder mr-5"},dl=ce({__name:"Browse",props:{corpusArr:{default:()=>[]},volumeLabel:{default:"Volume"},textLabel:{default:"Text"}},emits:["chosen"],setup(e,{emit:t}){const l={get chosen(){return{volume:"",text:""}}},u=t,n=pe("volume"),r=pe("text");n.value&&g(),r.value&&i(),he(i),ht(()=>{n.value=null,r.value=null});const m=b(()=>{if(n.value)return e.corpusArr.find(({volumeName:x})=>x===n.value)}),c=b(()=>m.value?m.value.texts:[]);function o(x,v){v==="volume"?(r.value=null,g()):i()}function i(){u("chosen",{volume:n.value,text:r.value})}function g(){u("chosen",l.chosen)}return(x,v)=>(_(),I("div",rl,[R("div",il,[d(st,{modelValue:Z(n),"onUpdate:modelValue":[v[0]||(v[0]=p=>Re(n)?n.value=p:null),v[1]||(v[1]=p=>o(p,"volume"))],items:x.corpusArr,label:x.volumeLabel,"item-title":"volumeName","item-value":"volumeName",variant:"outlined",density:"compact"},null,8,["modelValue","items","label"]),d(st,{modelValue:Z(r),"onUpdate:modelValue":[v[2]||(v[2]=p=>Re(r)?r.value=p:null),v[3]||(v[3]=p=>o(p,"text"))],items:c.value,label:x.textLabel,"item-title":"textName","item-value":"textNumber",variant:"outlined",density:"compact"},{"no-data":ee(()=>[v[4]||(v[4]=R("span",{class:"no-data-arrow"},"⬅",-1)),R("span",cl,Ve(`A ${x.volumeLabel} should be chosen`),1)]),_:1},8,["modelValue","items","label"])])]))}}),vl=ve(dl,[["__scopeId","data-v-0b260389"]]),ml={},fl={height:"3em",viewBox:"0 0 24 24",width:"3em",xmlns:"http://www.w3.org/2000/svg"};function hl(e,t){return _(),I("svg",fl,t[0]||(t[0]=[R("path",{d:"M3 20q-.825 0-1.412-.587T1 18V6q0-.825.588-1.412T3 4h18q.825 0 1.413.588T23 6v12q0 .825-.587 1.413T21 20zm0-2h18V6H3zm6-1h6q.425 0 .713-.288T16 16t-.288-.712T15 15H9q-.425 0-.712.288T8 16t.288.713T9 17m-6 1V6zm3-8q.425 0 .713-.288T7 9t-.288-.712T6 8t-.712.288T5 9t.288.713T6 10m4 0q.425 0 .713-.288T11 9t-.288-.712T10 8t-.712.288T9 9t.288.713T10 10m4 0q.425 0 .713-.288T15 9t-.288-.712T14 8t-.712.288T13 9t.288.713T14 10m4 0q.425 0 .713-.288T19 9t-.288-.712T18 8t-.712.288T17 9t.288.713T18 10M6 13.5q.425 0 .713-.288T7 12.5t-.288-.712T6 11.5t-.712.288T5 12.5t.288.713T6 13.5m4 0q.425 0 .713-.288T11 12.5t-.288-.712T10 11.5t-.712.288T9 12.5t.288.713t.712.287m4 0q.425 0 .713-.288T15 12.5t-.288-.712T14 11.5t-.712.288T13 12.5t.288.713t.712.287m4 0q.425 0 .713-.288T19 12.5t-.288-.712T18 11.5t-.712.288T17 12.5t.288.713t.712.287",fill:"lightGrey"},null,-1)]))}const pl=ve(ml,[["render",hl],["__scopeId","data-v-c2634224"]]),yl={class:"d-flex align-center flex-column"},gl={class:"searchers"},bl={class:"d-flex ga-3"},kl={class:"d-flex flex-column flex-md-row ga-2"},xl=ce({__name:"Search",props:{textusLabel:{default:"Search corpus"},versioLabel:{default:"Search translation"}},emits:["searchers","copy-to-clipboard"],setup(e,{emit:t}){const l=e,u={get searchers(){return{textus:null,versio:null}}},n=t,r=E(u.searchers),m=E(u.searchers),c=E(!1),o=E(null),i=pe("textus"),g=pe("versio");r.value.textus=i.value,r.value.versio=g.value;const x=b(()=>!r.value.textus&&!r.value.versio),v=b(()=>[{name:"textus",value:r.value.textus,label:l.textusLabel},{name:"versio",value:r.value.versio,label:l.versioLabel}]);he(V);function p(f,y){r.value[y]=f||"",f||V()}function k(f){r.value.textus=f,c.value&&V()}function V(){m.value=ie.cloneDeep(r.value),n("searchers",ie.cloneDeep(m.value)),a()}function a(){i.value=m.value.textus||null,g.value=m.value.versio||null}return he(()=>{r.value.textus=i.value,r.value.versio=g.value,(r.value.textus||r.value.versio)&&V(),o.value=document.querySelector(".searchers .v-text-field.input_textus input")}),ht(()=>{i.value=null,g.value=null}),(f,y)=>{const T=pl;return _(),I("div",yl,[R("div",gl,[R("div",null,[R("div",bl,[d(T,{class:"keyboard-icon",onClick:y[0]||(y[0]=C=>c.value=!0)}),d(Be,{disabled:x.value,variant:"outlined",class:"search-btn",onClick:V},{default:ee(()=>y[3]||(y[3]=[xe(" Search ")])),_:1},8,["disabled"])]),d(Ze,{value:v.value[0].value,"input-el":o.value,type:"regex",visible:"",onSubmit:k},null,8,["value","input-el"])]),R("div",kl,[(_(!0),I(O,null,Te(v.value,({value:C,label:B,name:F})=>(_(),z(Ne,{key:F,"model-value":C,label:B,class:Se(`input_${F}`),style:{"min-width":"200px"},variant:"outlined",density:"compact","hide-details":"",clearable:"","onUpdate:modelValue":w=>p(w,F),onKeydown:xa(Va(V,["prevent"]),["enter"])},null,8,["model-value","label","class","onUpdate:modelValue","onKeydown"]))),128))])]),d(Ma,{modelValue:c.value,"onUpdate:modelValue":y[2]||(y[2]=C=>c.value=C),"hide-overlay":"",fullscreen:""},{default:ee(()=>[d(Ze,{visible:c.value,value:r.value.textus,"input-name":e.textusLabel,"onUpdate:visible":y[1]||(y[1]=C=>c.value=C),onSubmit:k},null,8,["visible","value","input-name"])]),_:1},8,["modelValue"])])}}}),Vl=ve(xl,[["__scopeId","data-v-ad131bff"]]),xt=300;function Ee({hash:e="",keepLocation:t=!1,className:l="chosen"}){return new Promise(u=>{setTimeout(()=>{t||(location.hash=e,setTimeout(()=>scrollBy(0,-200),0));const n=document.querySelector(e);n&&(n.classList.add(l),setTimeout(u,1))},xt)})}function wl(e){const t=document.querySelector(e);t&&Me(t)}function Me(e,t="chosen"){e&&setTimeout(()=>{e.classList.remove(t)},xt)}const Sl=["id"],Tl={class:"controls-wrapper"},Cl={class:"lines"},_l=ce({__name:"LineCard",props:{line:{},searchers:{}},setup(e){const t=e,l=E(),u=pt(),n=wa(),r=b(()=>Pa.map(p=>({lineName:p,str:t.line[p],searcher:t.searchers.data[p]}))),m=b(()=>!t.searchers.areAllEmpty),c=b(()=>u.hash),o=b(()=>"#"+t.line.hash),i=b(()=>{var V;const p=((V=t.line)==null?void 0:V.volumeName.toLowerCase())||"";return p.includes("abou")?"":["jastrow","ritter","arnold","lehrbuch","luf","prym","hors","talay","baxa","ubbadin","maalula","lieder","britta"].some(a=>p.includes(a))?"German":""});function g(){Me(l.value,"chosen")}W(c,(p,k)=>{!p&&k&&g()});async function x(){if(!m.value)return;const{volumeName:p,textNumber:k}=t.line;await n.push({query:{mode:me.browse,volume:p,text:k}}),await Ee({hash:o.value})}function v(){if(!u.hash){Ee({hash:o.value});return}wl(u.hash),u.hash===o.value?n.replace({query:u.query,hash:""}):(Ee({hash:o.value,keepLocation:!0}),n.replace({query:u.query,hash:o.value}));const p=Array.from(document.querySelectorAll('div.line-card[id^="h"]'));for(const k of p)k.style.background&&k.id!==t.line.hash&&Me(k)}return(p,k)=>p.line?(_(),I("div",{key:0,class:"line-card",id:p.line.hash,ref_key:"lineCardRef",ref:l},[R("div",Tl,[m.value?(_(),I("div",{key:1,class:"control-sign",onClick:k[1]||(k[1]=V=>x())},"▤")):(_(),I("div",{key:0,class:"control-sign",onClick:k[0]||(k[0]=V=>v())},"#"))]),R("div",Cl,[(_(!0),I(O,null,Te(r.value,(V,a)=>(_(),z(Ia,q({ref_for:!0},V,{key:a,"translation-language":V.lineName==="versio"&&i.value,class:"mb-1"}),null,16,["translation-language"]))),128)),k[2]||(k[2]=R("div",null,[R("br")],-1))])],8,Sl)):ne("",!0)}}),ot=ve(_l,[["__scopeId","data-v-9341a2ff"]]),Al={key:1},Pl=ce({__name:"Results",props:{results:{},searchers:{}},setup(e){const t=E(),l=Sa(t),u=b(()=>innerHeight-l.bottom.value-40),n=b(()=>e.results.length>500),r=pt(),m=Ta(),c=oe(m,"isDark"),o=b(()=>!e.searchers.areAllEmpty);return he(async()=>{var g;const i=r.hash;i&&(await La(1e3),(g=document.querySelector(i))==null||g.scrollIntoView({behavior:"smooth",block:"center"}))}),(i,g)=>(_(),I("div",{class:Se(["results w-100",{many:n.value}])},[o.value?(_(),I("div",{key:0,ref_key:"stats",ref:t,class:Se(["results-stats mb-1",{invert:c.value}])},[R("div",null,"Found "+Ve(i.results.length)+" contexts",1)],2)):ne("",!0),g[0]||(g[0]=R("br",null,null,-1)),i.results?(_(),I("div",Al,[n.value?(_(),z(kt,{key:0,items:i.results,height:u.value},{default:ee(({item:x})=>[x?(_(),z(ot,{line:x,searchers:i.searchers,key:x.hash},null,8,["line","searchers"])):ne("",!0)]),_:1},8,["items","height"])):(_(),z(Oa,{key:1,items:i.results},{default:ee(({items:x})=>[(_(!0),I(O,null,Te(x,v=>(_(),I(O,null,[v?(_(),z(ot,{line:v,searchers:i.searchers,key:v.hash},null,8,["line","searchers"])):ne("",!0)],64))),256))]),_:1},8,["items"]))])):ne("",!0)],2))}}),Il=ve(Pl,[["__scopeId","data-v-1019f22c"]]),Ll={key:0,class:"searcher-wrapper"},El=ce({__name:"BrowseAndSearch",setup(e){const t=Ha(),l=Ca(),u=b(()=>!!l.text.value),n=b(()=>o.value===me.search),r=b(()=>o.value===me.browse),m=b(()=>n.value?i.value:c.searchers),c={get searchers(){return new et({textus:"",versio:""})}},o=pe("mode");o.value||(o.value=me.search);const i=E(c.searchers),g=E({volume:null,text:null}),x=b(()=>{if(!g.value.text||!t.corpusArray.length)return[];const f=ie.find(t.corpusArray,{volumeName:g.value.volume});return ie.find(f.texts,{textNumber:g.value.text}).contents}),v=b(()=>t.corpusLines),p=b(()=>i.value.areAllEmpty?[]:v.value.filter(i.value.test)),k=b(()=>o.value===me.browse?x.value:p.value);function V(f){i.value=new et(f)}function a(f){g.value=f}return(f,y)=>(_(),I("div",{class:Se([{"no-hashes":u.value},"browse-and-search"]),ref:"wrapper"},[n.value?(_(),I("div",Ll,[d(Fa,{count:k.value.length,class:"mr-5"},null,8,["count"]),d(Vl,{"corpus-arr-prop":Z(t).corpusArray,"textus-label":"Aramaic text","versio-label":"Translation text",onSearchers:V},null,8,["corpus-arr-prop"])])):r.value?(_(),z(vl,{key:1,"corpus-arr":Z(t).corpusArray,onChosen:a},null,8,["corpus-arr"])):ne("",!0),d(Il,{results:k.value,searchers:m.value},null,8,["results","searchers"]),(_(),z(Z(_a),{to:"#app-bar-slot",key:f.isVisible},{default:ee(()=>[d(za,{modelValue:Z(o),"onUpdate:modelValue":y[0]||(y[0]=T=>Re(o)?o.value=T:null),class:"mr-5 button-switcher"},null,8,["modelValue"])]),_:1}))],2))}}),jl=ve(El,[["__scopeId","data-v-34979e87"]]);export{jl as B};
