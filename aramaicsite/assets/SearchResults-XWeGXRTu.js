import{B as y,aH as L,c as m,d as $,a as x,r as k,b as K,Y as N,o as u,e as c,f as v,h as p,y as I,i as V,k as F,V as J,F as C,_ as M,g as B,v as S,A as R,C as U}from"./index-BMVER-wz.js";import{c as O,L as b,u as T,K as j,b as A,a as E,_ as H}from"./GrepLine.vue_vue_type_style_index_0_lang-T-6QM-9T.js";import{a as P}from"./axios-CCb-kr4I.js";import{a as _}from"./assets-xkPoxekU.js";import{V as Q}from"./VTextField-kItJq7Ui.js";import{_ as W}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-Dq4Br4UP.js";function Y(i){return i.split(`======
`).map(s=>s.split(`
`)).map(s=>({title:y.head(s),lines:y.tail(s)}))}const q=()=>{const i=L("search",""),t=m(()=>new O(i.value));return{searcherString:i,searcher:t}},z={[b.turoyo]:_.turoyoCorpusJson.link,[b.urmi]:_.urmiCorpusJson.link,[b.maalula]:_.maalulaDictsJson.link},G=$("simpleCorpusStore",()=>{const i=x({}),t=x({}),e=k(),{language:s}=T(),d=m(()=>z[s.value]),{searcherString:r,searcher:l}=q(),f=m(()=>{const a=[];if(!e.value)return a;for(const h of e.value){const{title:w,lines:g}=h;for(const D of g)a.push({title:w,line:D})}return a}),o=m(()=>r.value?f.value.reduce((a,h)=>{const g=l.value.regex.test(h.line)?[h]:[];return[...a,...g]},[]):[]);async function n(){const a=await P.get(d.value);e.value=Y(a.data)}return{corporaObj:i,searcherStringsObj:t,searcher:l,searcherString:r,matchingLines:o,initCorpusData:n}}),X={class:"searcher align-center flex-column"},Z={class:"searchers d-flex"},ee={class:"input-wrapper"},se=K({__name:"Searcher",setup(i){const t=G(),e=k(""),s=k(!1),d=[o=>!!o||"Search string should not be empty"],r=m({get:()=>e.value,set:o=>{e.value=y.isString(o)?o:"",e.value||l()}}),l=()=>{t.searcherString=r.value},f=o=>{r.value=o,l()};return N(()=>t.searcherString,o=>{e.value=o},{immediate:!0}),(o,n)=>(u(),c(C,null,[v("div",X,[v("div",Z,[p(j,{onClick:n[0]||(n[0]=a=>s.value=!0)}),v("div",ee,[p(Q,{modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=a=>r.value=a),rules:d,autocomplete:"off",label:"Search string",color:"primary",variant:"outlined",density:"compact",clearable:"",onKeyup:I(l,["enter"])},null,8,["modelValue"])]),p(J,{ref:"search_btn",disabled:!r.value,variant:"outlined",onClick:l},{default:V(()=>n[4]||(n[4]=[F(" Search ")])),_:1},8,["disabled"])])]),p(E,{modelValue:s.value,"onUpdate:modelValue":n[3]||(n[3]=a=>s.value=a),"hide-overlay":"",fullscreen:""},{default:V(()=>[p(A,{visible:s.value,value:r.value,"input-name":"Search string",onSubmit:f,"onUpdate:visible":n[2]||(n[2]=a=>s.value=a)},null,8,["visible","value"])]),_:1},8,["modelValue"])],64))}}),pe=M(se,[["__scopeId","data-v-3b109e14"]]),ae={key:0,class:"results-stats"},te={key:0,style:{color:"blueviolet"}},re=K({__name:"SearchResults",props:{linesMatching:{},searcher:{}},setup(i){return(t,e)=>(u(),c(C,null,[t.searcher.value?(u(),c("div",ae," Number of lines in output: "+B(t.linesMatching.length),1)):S("",!0),e[1]||(e[1]=v("br",null,null,-1)),t.linesMatching?(u(),R(W,{key:1,items:t.linesMatching,class:"search-results-box results"},{default:V(({items:s})=>[(u(!0),c(C,null,U(s,({line:d,title:r},l)=>(u(),c("div",{key:l,class:"lines"},[r?(u(),c("div",te,B(r),1)):S("",!0),p(H,{str:d,searcher:t.searcher},null,8,["str","searcher"]),e[0]||(e[0]=v("br",null,null,-1))]))),128))]),_:1},8,["items"])):S("",!0)],64))}}),de=M(re,[["__scopeId","data-v-a23d703e"]]);export{pe as S,de as a,G as b,q as u};
