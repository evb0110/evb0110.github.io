var J=Object.defineProperty;var R=(s,e,t)=>e in s?J(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var h=(s,e,t)=>R(s,typeof e!="symbol"?e+"":e,t);import{d as V,a as O,c as m,w as $,b as E,e as F,o as r,f,F as v,i as M,D as d,h as S,j as x,k as N,V as B,p as A,_ as I,bn as P,g as L,m as p,bI as K,n as T}from"./index-BUJKkyK7.js";import{u as z,L as C}from"./GrepLine.vue_vue_type_style_index_0_lang-BA5YT5de.js";import{u as Q}from"./index-BPQKcxe7.js";import{u as X,S as q,a as G}from"./SearchResults-C3iNSI6M.js";import{u as H}from"./assetsStore-BC6kyCeU.js";var _=(s=>(s.BrowseAndSearch="BrowseAndSearch",s.DictsSearch="DictsSearch",s))(_||{});const b=V("componentMountStore",()=>{const s=O(new Set);function e(o){s.add(o)}function t(o){s.delete(o)}return{components:s,mount:e,unmount:t}}),U={[C.turoyo]:[{key:"ritter",title:"Ritter",isChosen:!0},{key:"jastrow",title:"Jastrow",isChosen:!1},{key:"jan",title:"XÃ«zne",isChosen:!1}],[C.maalula]:[{key:"arnold",title:"Arnold",isChosen:!0}]},W=V("simpleDictStore",()=>{const s=H(),e=b(),t=z(),o=m(()=>{switch(t.value){case C.turoyo:return"turoyoDictsJson";case C.maalula:return"maalulaDictsJson";default:return null}}),l=m(()=>o.value&&s[o.value].data||{}),n=Q("dict",[]),{searcher:i,searcherString:a}=X(),u=m(()=>U[t.value]||[]);$(()=>{e.components.has(_.DictsSearch)&&!n.value.length&&(n.value=u.value.filter(({isChosen:c})=>c).map(({key:c})=>c))});const D=m(()=>a.value?u.value.map(({key:c,title:g})=>{const j=w(c).filter(y=>i.value.regex.test(y)).map(y=>({title:"",line:y}));return{key:c,title:g,lines:j}}):[]);function w(c){var g;return((g=l.value)==null?void 0:g[c])||[]}return{searcher:i,initialDicts:u,dictData:l,searcherString:a,chosenDictionaries:n,matchingDictLinesArr:D}});class k{constructor({key:e,title:t,isChosen:o}){h(this,"key");h(this,"title");h(this,"isChosen");this.key=e,this.title=t,this.isChosen=o}toggle(){this.isChosen=!this.isChosen}choose(){this.isChosen=!0}unchoose(){this.isChosen=!1}static instantiate(e){return new k(e)}}class Y{constructor(e){h(this,"data");this.data=e.map(k.instantiate)}optionByKey(e){return this.data.find(t=>t.key===e)}toggle(e){var t;(t=this.optionByKey(e))==null||t.toggle()}chooseAll(){this.data.forEach(e=>e.choose())}unchooseAll(){this.data.forEach(e=>e.unchoose())}toggleAll(){this.areAllChosen?this.unchooseAll():this.chooseAll()}chooseKeys(e){this.unchooseAll(),this.data.forEach(t=>e!=null&&e.includes(t.key)?t.choose():t.unchoose())}get chosenKeys(){return this.data.filter(({isChosen:e})=>e).map(({key:e})=>e)}get areAllChosen(){return this.data.every(e=>e.isChosen)}}const Z={class:"container d-flex justify-center"},ee=E({__name:"OptionsChooser",props:{optionsProp:{},hasAll:{type:Boolean},chosenOptions:{}},emits:["chosen-options"],setup(s,{emit:e}){const t=e,o=O(new Y(s.optionsProp));F(()=>s.chosenOptions,n=>o.chooseKeys(n),{immediate:!0});const l=n=>{n?o.toggle(n):o.toggleAll(),t("chosen-options",o.chosenKeys)};return(n,i)=>(r(),f("div",Z,[(r(!0),f(v,null,M(o.data,({title:a,key:u,isChosen:D})=>(r(),d(B,{key:u,variant:D?"outlined":"text",onClick:w=>l(u)},{default:S(()=>[x(N(a),1)]),_:2},1032,["variant","onClick"]))),128)),n.hasAll?(r(),d(B,{key:0,variant:o.areAllChosen?"outlined":"text"+n.foo,onClick:i[0]||(i[0]=a=>l())},{default:S(()=>i[1]||(i[1]=[x(" All ")])),_:1},8,["variant"])):A("",!0)]))}}),te=I(ee,[["__scopeId","data-v-50fe08bd"]]),se=s=>{const e=b();e.mount(s),P(()=>{e.unmount(s)})},ue=E({__name:"DictsSearch",setup(s){const e=W();se(_.DictsSearch);const t=m(()=>e.matchingDictLinesArr.filter(({key:n})=>e.chosenDictionaries.includes(n)));function o(n){e.searcherString=n}function l(n){e.chosenDictionaries=n}return(n,i)=>(r(),f(v,null,[L(K,{class:"searcher-wrapper"},{default:S(()=>[L(q,{"searcher-string":p(e).searcherString,"corpus-name":n.corpusName,onSearcherString:o},null,8,["searcher-string","corpus-name"])]),_:1}),p(e).initialDicts.length>1?(r(),d(te,{key:0,"options-prop":p(e).initialDicts,"chosen-options":p(e).chosenDictionaries,"has-all":"",onChosenOptions:l},null,8,["options-prop","chosen-options"])):A("",!0),(r(!0),f(v,null,M(t.value,a=>(r(),d(K,{key:a.key},{default:S(()=>[T("h1",null,N(a.title),1),a.lines.length?(r(),d(G,{key:0,"lines-matching":a.lines,searcher:p(e).searcher},null,8,["lines-matching","searcher"])):A("",!0)]),_:2},1024))),128))],64))}});export{ue as _};
