import{bC as R,B as d,bO as x,bP as O,a4 as _,bQ as p,e as g}from"./index-DgXQk_m9.js";const a=new WeakMap;function M(o,n,f={}){const{mode:q="replace",route:i=R(),router:t=d(),transform:l=s=>s}=f;a.has(t)||a.set(t,new Map);const u=a.get(t);let e=i.query[o];x(()=>{e=void 0});let c;const b=O((s,y)=>(c=y,{get(){return s(),l(e!==void 0?e:p(n))},set(r){e!==r&&(e=r===n||r===null?void 0:r,u.set(o,r===n||r===null?void 0:r),y(),_(()=>{if(u.size===0)return;const h=Object.fromEntries(u.entries());u.clear();const{params:m,query:w,hash:Q}=i;t[p(q)]({params:m,query:{...w,...h},hash:Q})}))}}));return g(()=>i.query[o],s=>{e!==s&&(e=s,c())},{flush:"sync"}),b}export{M as u};
