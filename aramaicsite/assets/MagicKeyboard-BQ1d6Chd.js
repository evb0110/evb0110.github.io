import{c as p,a as B,e as M,a9 as L,E as T,b as w,r as D,aI as N,aJ as P,aK as S,aL as I,o as m,f as y,k as g,F as x,p as V,l as h,m as A,n as W,g as K,i as F,h as $,V as q,aM as z,_ as G}from"./index-DfxChptF.js";import{V as R}from"./VTextarea-B7lg3lXx.js";import"./VInput-BU-dax9P.js";import"./forwardRefs-DWGaNmQL.js";const J=["input","textarea"],U=c=>p(()=>{if(!(c!=null&&c.value))return null;const a=c.value.$el;return J.map(i=>a.querySelector(i)).find(Boolean)}),j=(c,a)=>{const i=U(c),s=B({start:0,end:0}),r=p(()=>{const t=i.value;if(t){const n=t.selectionStart||0;return a.value.slice(n-1,n)}return""}),d=p(()=>/\S/.test(r.value));M(a,()=>{const t=i.value;t&&(s.start=t.selectionStart||0,s.end=t.selectionEnd||0)},{immediate:!0});async function v(t,n=0){const u=i.value;u&&(a.value=a.value.slice(0,s.start-n)+t+a.value.slice(s.end),await L(),s.start+=t.length-n,s.end=s.start,u.setSelectionRange(s.start,s.end),u.focus())}function k(t){if(!d.value)return;const n=(r.value+t).normalize("NFC");v(n,1)}return{previousLetter:r,hasPreviousLetter:d,insertText:v,combineText:k}},b={Digit1:{name:"Grave Accent",unicode:"̀",keySymbol:"1"},Digit2:{name:"Acute Accent",unicode:"́",keySymbol:"2"},Digit3:{name:"Circumflex",unicode:"̂",keySymbol:"3"},Digit4:{name:"Tilde",unicode:"̃",keySymbol:"4"},Digit5:{name:"Dot Below",unicode:"̣",keySymbol:"5"},Digit6:{name:"Breve",unicode:"̆",keySymbol:"6"},Digit7:{name:"Dot Above",unicode:"̇",keySymbol:"7"},Digit8:{name:"Diaeresis",unicode:"̈",keySymbol:"8"},Digit9:{name:"Ring Above",unicode:"̊",keySymbol:"9"},KeyV:{name:"Caron",unicode:"̌",keySymbol:"v"},Minus:{name:"Macron",unicode:"̄",keySymbol:"-"},Equal:{name:"Macron Below",unicode:"̱",keySymbol:"="},Comma:{name:"Cedilla",unicode:"̧",keySymbol:","}},_=T.keys(b),f={KeyA:{name:"Glottal Stop",unicode:"ʔ",keySymbol:"a"},KeyW:{name:"Ayn",unicode:"ʕ",keySymbol:"w"}},C=T.keys(f),H={class:"info-panel"},O={key:1,class:"array"},Q={class:"symbol"},X=w({__name:"MagicKeyboard",setup(c){const a=D(null),i=D(""),{copy:s}=N({source:i}),{previousLetter:r,hasPreviousLetter:d,insertText:v,combineText:k}=j(a,i),t=P();S(a,()=>{var e;(e=a.value)==null||e.focus()}),I("keydown",e=>{[..._,...C].forEach(o=>{e.code===o&&e.altKey&&e.preventDefault()})}),_.forEach(e=>{const o=`alt_${e}`;S(t[o],()=>{k(b[e].unicode)})}),C.forEach(e=>{const o=`alt_${e}`;S(t[o],()=>{v(f[e].unicode)})});const n=p(()=>{if(!t.alt.value)return{text:"Press Alt to see the list of magic keys. Press any of them in combination with Alt to get the result",type:0};const e=d.value?_.map(l=>({symbol:b[l].keySymbol,text:r.value+b[l].unicode})):[],o=C.map(l=>({symbol:f[l].keySymbol,text:f[l].unicode}));return{value:[...e,...o],type:1}});function u(){s().then(()=>{z.success("Copied to clipboard")})}return(e,o)=>(m(),y(x,null,[g("div",H,[n.value.type===0?(m(),y(x,{key:0},[V(h(n.value.text),1)],64)):A("",!0),n.value.type===1?(m(),y("div",O,[(m(!0),y(x,null,W(n.value.value,({symbol:l,text:E})=>(m(),y("div",{key:e.key},[g("div",Q,h(l),1),g("div",null,h(E),1)]))),128))])):A("",!0)]),K(F(R),{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=l=>i.value=l),ref_key:"textarea",ref:a,placeholder:"Type something",rows:"10",clearable:"","hide-details":""},null,8,["modelValue"]),K(q,{variant:"outlined",class:"copy-button",size:"large",onClick:u},{default:$(()=>o[1]||(o[1]=[V(" Copy to clipboard ")])),_:1})],64))}}),ae=G(X,[["__scopeId","data-v-27f58f76"]]);export{ae as default};
