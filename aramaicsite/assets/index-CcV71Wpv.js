import{W as x,as as M,c7 as Q,c8 as _,aM as g,c9 as p,e as k}from"./index-CdId13z1.js";const i=new WeakMap;function W(o,n,f={}){const{mode:q="replace",route:c=x(),router:t=M(),transform:l=s=>s}=f;i.has(t)||i.set(t,new Map);const u=i.get(t);let e=c.query[o];Q(()=>{e=void 0});let a;const h=_((s,y)=>(a=y,{get(){return s(),l(e!==void 0?e:p(n))},set(r){e!==r&&(e=r===n||r===null?void 0:r,u.set(o,r===n||r===null?void 0:r),y(),g(()=>{if(u.size===0)return;const m=Object.fromEntries(u.entries());u.clear();const{params:w,query:R,hash:d}=c;t[p(q)]({params:w,query:{...R,...m},hash:d})}))}}));return k(()=>c.query[o],s=>{e!==s&&(e=s,a())},{flush:"sync"}),h}export{W as u};
