var ie=Object.defineProperty;var le=(o,e,s)=>e in o?ie(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s;var k=(o,e,s)=>le(o,typeof e!="symbol"?e+"":e,s);import{a as re,e as ue,aN as L,w as ce,at as F,c as R,b as G,o as l,v as T,h as i,g as u,j as v,k as _,n as x,f as y,i as V,F as D,V as w,av as C,p as H,_ as U,y as me,u as de,r as P,by as fe,t as W,bz as ye,bA as ve,bB as be,bC as ge,P as j,U as pe,R as z,l as ke,m as c}from"./index-DZd0l_Ui.js";import{a as he,b as xe,c as Ce,V as _e}from"./VCard-CZDMsZvF.js";import{V as Te}from"./VDialog-dnyAfGlT.js";import{V as we}from"./VTextarea-5qewm54C.js";import"./VAvatar-BRe-XGd3.js";import"./transition-DD7NTUm4.js";import"./index-oQ0exmSc.js";import"./VOverlay-P_wla6nf.js";import"./index-B6QGlVGp.js";import"./scopeId-BsCWLfm1.js";import"./dialog-transition-BpNs2Bgl.js";import"./VField-OZLmlP_-.js";const De=(o,e)=>{const s=re({start:0,end:0});return ue(e,async()=>{const t=o.value;t&&(await L(),s.start=t.selectionStart||0,s.end=t.selectionEnd||0)},{immediate:!0}),ce(()=>{const t=o.value;t&&(t.setSelectionRange(s.start,s.end),t.focus())}),F(()=>{s.start=e.value.length,s.end=e.value.length}),s},Ae=["input","textarea"],Re=o=>R(()=>{if(!(o!=null&&o.value))return null;const e=o.value.$el;return Ae.map(s=>e.querySelector(s)).find(Boolean)}),Ve=(o,e)=>{const s=Re(o),t=De(s,e),a=R(()=>{const f=e.value.slice(0,t.start),g=Se(f);return f.slice(g,t.start)}),m=R(()=>/\S/.test(a.value));async function d(f,g=!1){const A=g?a.value.length:0,S=e.value.slice(0,t.start-A),M=e.value.slice(t.end);e.value=S+f+M,await L(),t.start+=f.length-A,t.end=t.start}function b(f){if(!m.value)return;const g=(a.value+f).normalize("NFC");d(g,!0)}return{previousLetter:a,insertText:d,combineText:b}},Le=new Intl.Segmenter("en",{granularity:"grapheme"});function Se(o){const e=Array.from(Le.segment(o));let s=o.length;for(const t of e.reverse())if(s-=t.segment.length,s<o.length)break;return Math.max(s,0)}const Me=[{key:"Digit1",name:"Grave Accent",text:"̀",symbol:"1"},{key:"Digit2",name:"Acute Accent",text:"́",symbol:"2"},{key:"Digit3",name:"Circumflex",text:"̂",symbol:"3"},{key:"Digit4",name:"Tilde",text:"̃",symbol:"4"},{key:"Digit5",name:"Dot Below",text:"̣",symbol:"5"},{key:"Digit6",name:"Breve",text:"̆",symbol:"6"},{key:"Digit7",name:"Dot Above",text:"̇",symbol:"7"},{key:"Digit8",name:"Diaeresis",text:"̈",symbol:"8"},{key:"Digit9",name:"Ring Above",text:"̊",symbol:"9"},{key:"KeyV",name:"Caron",text:"̌",symbol:"v"},{key:"Minus",name:"Macron",text:"̄",symbol:"-"},{key:"Equal",name:"Macron Below",text:"̱",symbol:"="},{key:"Comma",name:"Cedilla",text:"̧",symbol:","}],Be=[{key:"KeyA",name:"Glottal Stop",text:"ʔ",symbol:"a"},{key:"KeyW",name:"Ayn",text:"ʕ",symbol:"w"}],Ee=()=>{F(async()=>{var o;await L(),(o=document.activeElement)==null||o.blur()})},Ie=G({__name:"ConfirmDialog",props:{title:{default:"Confirmation"},messages:{default:()=>["Are you sure?"]},buttonNames:{default:()=>["Confirm","Cancel"]},buttonIcons:{},buttonContents:{default:()=>[{color:"secondary",action:"confirm"},{color:"warning",action:"cancel"}]}},emits:["action"],setup(o,{emit:e}){const s=e;return Ee(),(t,a)=>(l(),T(Te,{"model-value":!0,height:"60vh","max-width":"60vw","overlay-color":"rgba(0, 0, 0, 1)","overlay-opacity":"1",class:"opaque-overlay"},{default:i(()=>[u(_e,{class:"pt-3 pl-3 pr-3 h-100"},{default:i(()=>[u(he,{class:"ml-2"},{default:i(()=>[v(_(t.title),1)]),_:1}),a[0]||(a[0]=x("hr",{class:"ml-3 mr-3"},null,-1)),u(xe,{class:"mt-5 h-100 d-flex flex-column justify-center ga-5"},{default:i(()=>[(l(!0),y(D,null,V(t.messages,m=>(l(),y("p",null,_(m),1))),256))]),_:1}),u(Ce,{class:"d-flex ga-6 mb-3 mr-5"},{default:i(()=>[(l(!0),y(D,null,V(t.buttonNames,(m,d)=>(l(),T(w,{key:t.buttonContents[d].action,color:t.buttonContents[d].color,variant:"outlined",size:"large",onClick:b=>s("action",t.buttonContents[d].action)},{default:i(()=>[t.buttonIcons?(l(),T(C,{key:0,class:"mr-3"},{default:i(()=>[v(_(t.buttonIcons[d]),1)]),_:2},1024)):H("",!0),v(" "+_(m),1)]),_:2},1032,["color","onClick"]))),128))]),_:1})]),_:1})]),_:1}))}}),Ne=U(Ie,[["__scopeId","data-v-5f41fbec"]]);class ${constructor(e={}){k(this,"key");k(this,"name");k(this,"text");k(this,"symbol");k(this,"modifier");k(this,"str");this.key=e.key||"",this.name=e.name||"",this.text=e.text||"",this.symbol=e.symbol||"",this.modifier=e.modifier||"alt",this.str=e.str}get keyWithModifier(){return[this.modifier,this.key].join("_")}applyTo(e){return new $({...this,text:e+this.text,str:e})}}class q{constructor(e=[],s="alt",t=void 0){this.rawList=e,this.modifier=s,this.str=t}get list(){return this.rawList.map(e=>new $({...e,modifier:this.modifier,str:this.str}))}get keys(){return me.map(this.list,"key")}getListAppliedTo(e){return this.list.map(s=>s.applyTo(e.trim()))}}const Ke=(o,e)=>{const s=de(o,e),t=s.value;s.value=e;const a=t!==e;function m(){s.value=t}return{state:s,isRestorable:a,restore:m}},Pe={class:"info-panel"},ze={class:"symbol"},$e={class:"text"},We=["innerHTML"],je={class:"buttons"},qe="magic-keyboard-content",Fe=G({__name:"MagicKeyboard",setup(o){const e=P(null),s=P(null),t=P(null),{state:a,restore:m,isRestorable:d}=Ke(qe,""),b=fe(),f=W(b,"isRevealed");d&&b.reveal(),b.onConfirm(A);function g(r){b[r]()}async function A(){var n,h;m(),await L(),(n=t.value)==null||n.focus();const r=a.value.length;(h=t.value)==null||h.setSelectionRange(r,r)}const{undo:S,redo:M,canUndo:O,canRedo:J}=ye(a,{debounce:1e3}),{copy:Q,copied:X}=ve({source:a}),{previousLetter:Y,insertText:Z,combineText:ee}=Ve(t,a),B=be(),E=W(B,"alt"),I=new q(Me),N=new q(Be),te=new Set([...I.keys,...N.keys]);ge("keydown",r=>{r.altKey&&te.has(r.code)&&r.preventDefault()}),I.list.forEach(({text:r,keyWithModifier:n})=>{j(B[n],()=>{ee(r)})}),N.list.forEach(({text:r,keyWithModifier:n})=>{j(B[n],()=>{Z(r)})});const se=["Press <kbd>Alt</kbd> to see the list of magic keys.","Press any of them in combination with <kbd>Alt</kbd> to get the result."],oe=R(()=>[...N.list,...I.getListAppliedTo(Y.value)]);return(r,n)=>{const h=pe("visibility");return l(),y(D,null,[x("div",Pe,[z((l(),y("div",{ref_key:"array",ref:e,class:"array"},[(l(!0),y(D,null,V(oe.value,({symbol:p,text:K,str:ne},ae)=>z((l(),y("div",{key:ae},[x("div",ze,_(p),1),x("div",$e,_(K),1)])),[[h,E.value&&ne!==""]])),128))])),[[h,E.value]]),z((l(),y("div",{ref_key:"infoTexts",ref:s,class:"info-texts"},[(l(),y(D,null,V(se,(p,K)=>x("p",{innerHTML:p,key:K},null,8,We)),64))])),[[h,!E.value]])]),u(c(we),{modelValue:c(a),"onUpdate:modelValue":n[0]||(n[0]=p=>ke(a)?a.value=p:null),ref_key:"textarea",ref:t,placeholder:"Type something",rows:"10",variant:"outlined","hide-details":"","auto-grow":""},null,8,["modelValue"]),x("div",je,[u(w,{variant:"outlined",class:"copy-button",size:"large",disabled:c(a)==="",onClick:n[1]||(n[1]=p=>c(Q)())},{default:i(()=>[c(X)?(l(),T(C,{key:0,left:""},{default:i(()=>n[3]||(n[3]=[v("mdi-check")])),_:1})):(l(),T(C,{key:1,left:""},{default:i(()=>n[4]||(n[4]=[v("mdi-content-copy")])),_:1}))]),_:1},8,["disabled"]),u(w,{disabled:!c(O),variant:"outlined",size:"large",onClick:c(S)},{default:i(()=>[u(C,null,{default:i(()=>n[5]||(n[5]=[v("mdi-undo")])),_:1})]),_:1},8,["disabled","onClick"]),u(w,{disabled:!c(J),variant:"outlined",size:"large",onClick:c(M)},{default:i(()=>[u(C,null,{default:i(()=>n[6]||(n[6]=[v("mdi-redo")])),_:1})]),_:1},8,["disabled","onClick"]),u(w,{onClick:n[2]||(n[2]=p=>a.value=""),disabled:c(a)==="",variant:"outlined",size:"large"},{default:i(()=>[u(C,{left:""},{default:i(()=>n[7]||(n[7]=[v("mdi-broom")])),_:1})]),_:1},8,["disabled"])]),f.value?(l(),T(Ne,{key:0,title:"Restore Previous Text",messages:["We found unsaved text from your previous session.","Would you like to restore it?"],buttonNames:["Restore","Discard"],"button-icons":["mdi-restore","mdi-delete"],onAction:g})):H("",!0)],64)}}}),nt=U(Fe,[["__scopeId","data-v-2db25278"]]);export{nt as default};
