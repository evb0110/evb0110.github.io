import{V as w,m as T}from"./VOverlay-C2QpL6Ip.js";import{g as S,n as F,a as y,b as $,s as P,d as C,f as O}from"./forwardRefs-DWGaNmQL.js";import{q as B,g as E,T as p,bZ as V,v as D,an as q,r as I,bg as R,bp as W,aL as H,e as b,ar as M,s as k,aC as N}from"./index-B06T7W4V.js";import{a as U}from"./scopeId-CUDULmKC.js";const X=D({target:[Object,Array]},"v-dialog-transition"),Y=B()({name:"VDialogTransition",props:X(),setup(e,f){let{slots:o}=f;const s={onBeforeEnter(t){t.style.pointerEvents="none",t.style.visibility="hidden"},async onEnter(t,g){var r;await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),t.style.visibility="";const{x:n,y:c,sx:d,sy:m,speed:a}=L(e.target,t),l=y(t,[{transform:`translate(${n}px, ${c}px) scale(${d}, ${m})`,opacity:0},{}],{duration:225*a,easing:C});(r=A(t))==null||r.forEach(i=>{y(i,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*a,easing:P})}),l.finished.then(()=>g())},onAfterEnter(t){t.style.removeProperty("pointer-events")},onBeforeLeave(t){t.style.pointerEvents="none"},async onLeave(t,g){var r;await new Promise(i=>requestAnimationFrame(i));const{x:n,y:c,sx:d,sy:m,speed:a}=L(e.target,t);y(t,[{},{transform:`translate(${n}px, ${c}px) scale(${d}, ${m})`,opacity:0}],{duration:125*a,easing:$}).finished.then(()=>g()),(r=A(t))==null||r.forEach(i=>{y(i,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*a,easing:P})})},onAfterLeave(t){t.style.removeProperty("pointer-events")}};return()=>e.target?E(V,p({name:"dialog-transition"},s,{css:!1}),o):E(V,{name:"dialog-transition"},o)}});function A(e){var o;const f=(o=e.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:o.children;return f&&[...f]}function L(e,f){const o=S(e),s=F(f),[t,g]=getComputedStyle(f).transformOrigin.split(" ").map(x=>parseFloat(x)),[n,c]=getComputedStyle(f).getPropertyValue("--v-overlay-anchor-origin").split(" ");let d=o.left+o.width/2;n==="left"||c==="left"?d-=o.width/2:(n==="right"||c==="right")&&(d+=o.width/2);let m=o.top+o.height/2;n==="top"||c==="top"?m-=o.height/2:(n==="bottom"||c==="bottom")&&(m+=o.height/2);const a=o.width/s.width,l=o.height/s.height,r=Math.max(1,a,l),i=a/r||0,v=l/r||0,u=s.width*s.height/(window.innerWidth*window.innerHeight),h=u>.12?Math.min(1.5,(u-.12)*10+1):1;return{x:d-(t+s.left),y:m-(g+s.top),sx:i,sy:v,speed:h}}const j=D({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...T({origin:"center center",scrollStrategy:"block",transition:{component:Y},zIndex:2400})},"VDialog"),K=B()({name:"VDialog",props:j(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,f){let{emit:o,slots:s}=f;const t=q(e,"modelValue"),{scopeId:g}=U(),n=I();function c(a){var i,v;const l=a.relatedTarget,r=a.target;if(l!==r&&((i=n.value)!=null&&i.contentEl)&&((v=n.value)!=null&&v.globalTop)&&![document,n.value.contentEl].includes(r)&&!n.value.contentEl.contains(r)){const u=W(n.value.contentEl);if(!u.length)return;const h=u[0],x=u[u.length-1];l===h?x.focus():h.focus()}}R(()=>{document.removeEventListener("focusin",c)}),H&&b(()=>t.value&&e.retainFocus,a=>{a?document.addEventListener("focusin",c):document.removeEventListener("focusin",c)},{immediate:!0});function d(){var a;o("afterEnter"),(a=n.value)!=null&&a.contentEl&&!n.value.contentEl.contains(document.activeElement)&&n.value.contentEl.focus({preventScroll:!0})}function m(){o("afterLeave")}return b(t,async a=>{var l;a||(await M(),(l=n.value.activatorEl)==null||l.focus({preventScroll:!0}))}),k(()=>{const a=w.filterProps(e),l=p({"aria-haspopup":"dialog"},e.activatorProps),r=p({tabindex:-1},e.contentProps);return E(w,p({ref:n,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},a,{modelValue:t.value,"onUpdate:modelValue":i=>t.value=i,"aria-modal":"true",activatorProps:l,contentProps:r,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:d,onAfterLeave:m},g),{activator:s.activator,default:function(){for(var i=arguments.length,v=new Array(i),u=0;u<i;u++)v[u]=arguments[u];return E(N,{root:"VDialog"},{default:()=>{var h;return[(h=s.default)==null?void 0:h.call(s,...v)]}})}})}),O({},n)}});export{K as V,Y as a};
