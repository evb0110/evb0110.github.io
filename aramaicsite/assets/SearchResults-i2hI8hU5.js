import{c as h,b as x,a1 as N,m as b,r as S,o as m,f as v,g as p,h as y,T as H,n as f,_ as z,bS as T,M as C,d as A,a as L,e as R,b8 as j,A as F,j as G,V as J,F as $,aw as O,t as U,k as B,p as V,D as E,i as P,ax as q}from"./index-CeV07O9O.js";import{c as Q,u as W,L as k,K as D,G as X}from"./GrepLine-DWVW_te5.js";import{C as K}from"./Color-l8zxla4Y.js";import{V as Y}from"./VTooltip-tq4HgjOo.js";import{u as Z}from"./index-B6578Jde.js";import{u as ee,A as w}from"./assetsStore-8P3q0JxE.js";import{s as se}from"./startViewTransition-CnFw7TNy.js";import{V as te}from"./VTextField-tS98DTEO.js";import{V as ae}from"./VDialog-D-zEkkpl.js";import{_ as re}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-DlkFFKfL.js";const oe=()=>{const u=Z("search",""),r=h(()=>new Q(u.value));return{searcherString:u,searcher:r}},ne=["fill"],le=x({__name:"KeyboardIcon",props:{tooltip:{type:String,default:"Click to open a virtual keyboard"}},emits:["click"],setup(u,{emit:r}){N(d=>({"184ed29d":b(a),"8dc10230":b(i)}));const l=u,o=r,e=S(!0),c=h(()=>!l.tooltip||!e.value),{darkGrey:a,lightBrown:i}=K;return(d,s)=>(m(),v("span",{onClick:s[0]||(s[0]=t=>o("click"))},[p(Y,{disabled:c.value,text:u.tooltip,location:"bottom","open-delay":"500"},{activator:y(({props:t})=>[(m(),v("svg",H(t,{fill:b(K).grey,class:"keyboard-icon-svg",viewBox:"6 5 12 14",xmlns:"http://www.w3.org/2000/svg"}),s[1]||(s[1]=[f("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"},null,-1)]),16,ne))]),_:1},8,["disabled","text"])]))}}),ie=z(le,[["__scopeId","data-v-3d83a20e"]]),ue=T(function(r){return r?r.split(`======
`).map(e=>e.split(`
`)).map(e=>({title:C.head(e),lines:C.tail(e)})):[]}),ce=A("simpleCorpusStore",()=>{const u=ee(),r=L({}),l=L({}),o=W(),e=h(()=>{switch(o.value){case k.turoyo:return w.turoyoCorpusJson;case k.urmi:return w.urmiCorpusJson;case k.maalula:default:return w.maalulaDictsJson}}),c=h(()=>u[e.value].data),a=ue(c),{searcherString:i,searcher:d}=oe(),s=h(()=>{const n=[];if(!a.value)return n;for(const g of a.value){const{title:M,lines:_}=g;for(const I of _)n.push({title:M,line:I})}return n}),t=h(()=>i.value?s.value.reduce((n,g)=>{const _=d.value.regex.test(g.line)?[g]:[];return[...n,..._]},[]):[]);return{corporaObj:r,searcherStringsObj:l,searcher:d,searcherString:i,matchingLines:t}}),de={class:"searcher"},me={class:"searchers"},pe={class:"text-field"},ve=x({__name:"Searcher",setup(u){const r=ce(),l=S(""),o=S(!1),e=S(null),c=[s=>!!s||"Search string should not be empty"],a=h({get:()=>l.value,set:s=>{l.value=C.isString(s)?s:"",l.value||i()}}),i=()=>{se(()=>{r.searcherString=a.value})},d=s=>{a.value=s,o.value&&i()};return R(()=>r.searcherString,s=>{l.value=s},{immediate:!0}),j(()=>{e.value=document.querySelector(".text-field .v-text-field input")}),(s,t)=>(m(),v($,null,[f("div",de,[f("div",me,[f("div",pe,[p(te,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=n=>a.value=n),rules:c,autocomplete:"off",label:"Search string",color:"primary",variant:"outlined",density:"compact",clearable:"","hide-details":"",onKeyup:F(i,["enter"])},null,8,["modelValue"])]),p(D,{value:a.value,"input-el":e.value,type:"regex",class:"regex",visible:"",onSubmit:d},null,8,["value","input-el"]),p(J,{ref:"search_btn",disabled:!a.value,variant:"outlined",class:"button",onClick:i},{default:y(()=>t[4]||(t[4]=[G(" Search ")])),_:1},8,["disabled"]),p(ie,{class:"icon",onClick:t[1]||(t[1]=n=>o.value=!0)})])]),p(ae,{modelValue:o.value,"onUpdate:modelValue":t[3]||(t[3]=n=>o.value=n),"hide-overlay":"",fullscreen:""},{default:y(()=>[p(D,{visible:o.value,value:a.value,"input-name":"Search string",onSubmit:d,"onUpdate:visible":t[2]||(t[2]=n=>o.value=n)},null,8,["visible","value"])]),_:1},8,["modelValue"])],64))}}),Me=z(ve,[["__scopeId","data-v-51e00605"]]),he={key:0,class:"results-stats"},fe={key:0,style:{color:"blueviolet"}},ge=x({__name:"SearchResults",props:{linesMatching:{},searcher:{},translationLanguage:{}},setup(u){const r=O(),l=U(r,"isDark"),o=window;return(e,c)=>(m(),v("div",{class:q({invert:l.value})},[e.searcher.value?(m(),v("div",he," Number of lines in output: "+B(e.linesMatching.length),1)):V("",!0),c[1]||(c[1]=f("br",null,null,-1)),e.linesMatching?(m(),E(re,{key:1,items:e.linesMatching,el:b(o),class:"search-results-box results"},{default:y(({items:a})=>[(m(!0),v($,null,P(a,({line:i,title:d},s)=>(m(),v("div",{key:s,class:"lines"},[d?(m(),v("div",fe,B(d),1)):V("",!0),p(X,{str:i,searcher:e.searcher,"translation-language":e.translationLanguage},null,8,["str","searcher","translation-language"]),c[0]||(c[0]=f("br",null,null,-1))]))),128))]),_:1},8,["items","el"])):V("",!0)],2))}}),Le=z(ge,[["__scopeId","data-v-05046efd"]]);export{Me as S,Le as a,ce as b,oe as u};
