var R=Object.defineProperty;var j=(a,e,t)=>e in a?R(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var h=(a,e,t)=>j(a,typeof e!="symbol"?e+"":e,t);import{d as J,bH as M,c as f,aB as $,w as F,bC as N,b as V,a as I,e as P,o as r,f as d,F as k,n as O,D as p,h as C,p as A,l as b,V as _,m as v,_ as T,g as x,i as u,bI as B,k as z}from"./index-BQse0XbG.js";import{a as L}from"./assets-C9ESoKS9.js";import{L as w,u as G}from"./GrepLine.vue_vue_type_style_index_0_lang-BuyWC5qA.js";import{u as H,S as Q,a as X}from"./SearchResults-Dy1nWWBc.js";import{u as q}from"./useGetResource-D6hU2FnT.js";import{u as U}from"./useComponentMountTracker-DBmf-gUy.js";const K={[w.turoyo]:{link:L.turoyoDictsJson.link,dicts:[{key:"ritter",title:"Ritter",isChosen:!0},{key:"jastrow",title:"Jastrow",isChosen:!1},{key:"jan",title:"XÃ«zne",isChosen:!1}]},[w.maalula]:{link:L.maalulaDictsJson.link,dicts:[{key:"arnold",title:"Arnold",isChosen:!0}]}},W=J("simpleDictStore",()=>{const a=M(),e=G(),t=f(()=>{var o;return(o=K[e.value])==null?void 0:o.link}),n=q(t,{}),c=$("dict",[]),{searcher:s,searcherString:l}=H(),i=f(()=>{var o;return((o=K[e.value])==null?void 0:o.dicts)||[]});F(()=>{a.components.has(N.DictsSearch)&&!c.value.length&&(c.value=i.value.filter(({isChosen:o})=>o).map(({key:o})=>o))});const m=f(()=>l.value?i.value.map(({key:o,title:g})=>{const E=y(o).filter(D=>s.value.regex.test(D)).map(D=>({title:"",line:D}));return{key:o,title:g,lines:E}}):[]);function y(o){var g;return((g=n.value)==null?void 0:g[o])||[]}return{searcher:s,initialDicts:i,dictData:n,searcherString:l,chosenDictionaries:c,matchingDictLinesArr:m}});class S{constructor({key:e,title:t,isChosen:n}){h(this,"key");h(this,"title");h(this,"isChosen");this.key=e,this.title=t,this.isChosen=n}toggle(){this.isChosen=!this.isChosen}choose(){this.isChosen=!0}unchoose(){this.isChosen=!1}static instantiate(e){return new S(e)}}class Y{constructor(e){h(this,"data");this.data=e.map(S.instantiate)}optionByKey(e){return this.data.find(t=>t.key===e)}toggle(e){var t;(t=this.optionByKey(e))==null||t.toggle()}chooseAll(){this.data.forEach(e=>e.choose())}unchooseAll(){this.data.forEach(e=>e.unchoose())}toggleAll(){this.areAllChosen?this.unchooseAll():this.chooseAll()}chooseKeys(e){this.unchooseAll(),this.data.forEach(t=>e!=null&&e.includes(t.key)?t.choose():t.unchoose())}get chosenKeys(){return this.data.filter(({isChosen:e})=>e).map(({key:e})=>e)}get areAllChosen(){return this.data.every(e=>e.isChosen)}}const Z={class:"container d-flex justify-center"},ee=V({__name:"OptionsChooser",props:{optionsProp:{},hasAll:{type:Boolean},chosenOptions:{}},emits:["chosen-options"],setup(a,{emit:e}){const t=e,n=I(new Y(a.optionsProp));P(()=>a.chosenOptions,s=>n.chooseKeys(s),{immediate:!0});const c=s=>{s?n.toggle(s):n.toggleAll(),t("chosen-options",n.chosenKeys)};return(s,l)=>(r(),d("div",Z,[(r(!0),d(k,null,O(n.data,({title:i,key:m,isChosen:y})=>(r(),p(_,{key:m,variant:y?"outlined":"text",onClick:o=>c(m)},{default:C(()=>[A(b(i),1)]),_:2},1032,["variant","onClick"]))),128)),s.hasAll?(r(),p(_,{key:0,variant:n.areAllChosen?"outlined":"text"+s.foo,onClick:l[0]||(l[0]=i=>c())},{default:C(()=>l[1]||(l[1]=[A(" All ")])),_:1},8,["variant"])):v("",!0)]))}}),te=T(ee,[["__scopeId","data-v-50fe08bd"]]),he=V({__name:"DictsSearch",setup(a){const e=W();U(N.DictsSearch);const t=f(()=>e.matchingDictLinesArr.filter(({key:s})=>e.chosenDictionaries.includes(s)));function n(s){e.searcherString=s}function c(s){e.chosenDictionaries=s}return(s,l)=>(r(),d(k,null,[x(B,{class:"searcher-wrapper"},{default:C(()=>[x(Q,{"searcher-string":u(e).searcherString,"corpus-name":s.corpusName,onSearcherString:n},null,8,["searcher-string","corpus-name"])]),_:1}),u(e).initialDicts.length>1?(r(),p(te,{key:0,"options-prop":u(e).initialDicts,"chosen-options":u(e).chosenDictionaries,"has-all":"",onChosenOptions:c},null,8,["options-prop","chosen-options"])):v("",!0),(r(!0),d(k,null,O(t.value,i=>(r(),p(B,{key:i.key},{default:C(()=>[z("h1",null,b(i.title),1),i.lines.length?(r(),p(X,{key:0,"lines-matching":i.lines,searcher:u(e).searcher},null,8,["lines-matching","searcher"])):v("",!0)]),_:2},1024))),128))],64))}});export{he as _};
