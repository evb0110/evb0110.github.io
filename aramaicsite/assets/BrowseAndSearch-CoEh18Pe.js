import{aO as kt,d as Vt,r as E,c as x,p as J,aP as xt,m as Ve,aA as wt,P as et,Q as tt,aQ as at,l as oe,S as lt,W as St,ae as Ct,t as ae,n as ce,h as d,N as R,aq as he,aR as Fe,aS as At,aa as Pt,aw as It,a3 as _t,ax as Tt,aT as Et,aU as Lt,as as Dt,U as nt,aV as Bt,aW as Rt,ab as Nt,ay as Mt,az as Ot,aX as Ft,a2 as ye,a4 as $t,aY as Ut,$ as $e,a0 as Ht,aZ as Kt,a_ as qt,av as le,au as ne,a6 as zt,F as U,a$ as Pe,K as st,ad as Gt,T as Wt,ao as jt,a1 as Qt,X as z,Z as Xt,b0 as Jt,ai as ot,b1 as Yt,Y as G,a9 as Ee,b2 as Ue,b3 as Zt,b4 as Se,b5 as ut,b6 as ea,w as He,b7 as rt,am as Ce,b8 as ta,aD as Ie,ar as aa,b9 as la,at as na,ba as sa,a8 as fe,ah as se,bb as oa,bc as ua,bd as ra,be as ia,bf as Ke,bg as ca,k as it,bh as da,bi as qe,bj as ze,b as de,aH as ge,bk as ct,o as _,e as N,f as O,u as K,G as Ge,i as be,x as dt,g as vt,_ as ve,B as ke,C as Le,V as va,A as ie,y as ma,aJ as fa,j as De,v as re,bl as ha,bm as ue,D as pa,an as mt,a as ya,bn as ga}from"./index-DWFSysCc.js";import{L as We,u as ba,V as ft,K as ka,a as Va,b as xa,_ as wa,S as je}from"./GrepLine.vue_vue_type_style_index_0_lang-BXw58Vt2.js";import{a as Sa}from"./axios-CCb-kr4I.js";import{a as Qe}from"./assets-DXyqMUP3.js";import{m as Ca,V as _e}from"./VTextField-6x3B-b13.js";import{h as Aa}from"./VInput-CmBlCg-s.js";import{f as ht}from"./forwardRefs-DWGaNmQL.js";import{m as Pa,a as Xe,b as Je,g as Ia}from"./VTooltip-CURk_Dhu.js";import{V as _a}from"./VCheckboxBtn-CE9kihVu.js";import{m as Ta,V as Ye}from"./VSlideGroup-BIa-EsIS.js";import{s as Ea}from"./sleep-mAKpSMLY.js";import{_ as La}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-WuTBIAMy.js";import{_ as Da}from"./CopyResults.vue_vue_type_script_setup_true_lang-DSWvBM0-.js";const pt=300;function pe({hash:e="",keepLocation:o=!1,className:n="chosen"}){return new Promise(u=>{setTimeout(()=>{o||(location.hash=e,setTimeout(()=>scrollBy(0,-200),0));const l=document.querySelector(e);l&&(l.classList.add(n),setTimeout(u,1))},pt)})}function Ba(e){const o=document.querySelector(e);o&&Te(o)}function Te(e,o="chosen"){e&&setTimeout(()=>{e.classList.remove(o)},pt)}class Be{constructor({volume:o,texts:n}){this.texts=n.map(u=>({volumeName:o,...u})).map(Re.instantiate),this.volumeName=o}static instantiate(o){return new Be(o)}}class Re{constructor({volumeName:o,textNumber:n,textName:u,contents:l}){this.volumeName=o,this.textNumber=n,this._textName=u,this.rawContents=l}get contents(){return this.rawContents.map(o=>({volumeName:this.volumeName,textNumber:this.textNumber,textName:this.textName,...o})).map(Ne.instantiate)}get textName(){return this._textName.replace(/\.txt/,"")}set textName(o){this._textName=o}static instantiate(o){return new Re(o)}}class Ne{constructor({volumeName:o,textNumber:n,textName:u,lineNumber:l,textus:r,versio:v}){this.volumeName=o,this.textNumber=n,this.textName=u,this.lineNumber=l,this.textus=r,this.versio=v}get title(){return this.volumeName+": "+this.textName}get hash(){return"h"+kt(this)}static instantiate(o){return new Ne(o)}}const Ra={[We.maalula]:{link:Qe.maalulaCorpusJson.link},[We.turoyo]:{link:Qe.turoyoNewCorpusJson.link}},Na=Vt("corpusWithTranslationStore",()=>{const e=E([]),{language:o}=ba(),n=x(()=>e.value.flatMap(l=>l.texts).flatMap(l=>l.contents));async function u(){const l=(await Sa.get(Ra[o.value].link)).data;e.value=l.map(Be.instantiate)}return{corpusArray:e,corpusLines:n,initCorpus:u}}),yt=Symbol.for("vuetify:v-chip-group"),Ma=J({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:xt},...Ta(),...Ve(),...wt({selectedClass:"v-chip--selected"}),...et(),...tt(),...at({variant:"tonal"})},"VChipGroup");oe()({name:"VChipGroup",props:Ma(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:n}=o;const{themeClasses:u}=lt(e),{isSelected:l,select:r,next:v,prev:c,selected:s}=St(e,yt);return Ct({VChip:{color:ae(e,"color"),disabled:ae(e,"disabled"),filter:ae(e,"filter"),variant:ae(e,"variant")}}),ce(()=>{const f=Ye.filterProps(e);return d(Ye,R(f,{class:["v-chip-group",{"v-chip-group--column":e.column},u.value,e.class],style:e.style}),{default:()=>{var V;return[(V=n.default)==null?void 0:V.call(n,{isSelected:l,select:r,next:v,prev:c,selected:s.value})]}})}),{}}});const Oa=J({activeClass:String,appendAvatar:String,appendIcon:he,closable:Boolean,closeIcon:{type:he,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:he,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:Fe(),onClickOnce:Fe(),...At(),...Ve(),...Pt(),...It(),..._t(),...Tt(),...Et(),...Lt(),...et({tag:"span"}),...tt(),...at({variant:"tonal"})},"VChip"),Fa=oe()({name:"VChip",directives:{Ripple:Dt},props:Oa(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,o){let{attrs:n,emit:u,slots:l}=o;const{t:r}=nt(),{borderClasses:v}=Bt(e),{colorClasses:c,colorStyles:s,variantClasses:f}=Rt(e),{densityClasses:V}=Nt(e),{elevationClasses:w}=Mt(e),{roundedClasses:i}=Ot(e),{sizeClasses:p}=Ft(e),{themeClasses:C}=lt(e),g=ye(e,"modelValue"),t=$t(e,yt,!1),m=Ut(e,n),y=x(()=>e.link!==!1&&m.isLink.value),S=x(()=>!e.disabled&&e.link!==!1&&(!!t||e.link||m.isClickable.value)),P=x(()=>({"aria-label":r(e.closeLabel),onClick(k){k.preventDefault(),k.stopPropagation(),g.value=!1,u("click:close",k)}}));function L(k){var H;u("click",k),S.value&&((H=m.navigate)==null||H.call(m,k),t==null||t.toggle())}function Y(k){(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),L(k))}return()=>{const k=m.isLink.value?"a":e.tag,H=!!(e.appendIcon||e.appendAvatar),W=!!(H||l.append),q=!!(l.close||e.closable),j=!!(l.filter||e.filter)&&t,Z=!!(e.prependIcon||e.prependAvatar),Q=!!(Z||l.prepend),ee=!t||t.isSelected.value;return g.value&&$e(d(k,R({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":S.value,"v-chip--filter":j,"v-chip--pill":e.pill},C.value,v.value,ee?c.value:void 0,V.value,w.value,i.value,p.value,f.value,t==null?void 0:t.selectedClass.value,e.class],style:[ee?s.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:S.value?0:void 0,onClick:L,onKeydown:S.value&&!y.value&&Y},m.linkProps),{default:()=>{var M;return[Kt(S.value,"v-chip"),j&&d(qt,{key:"filter"},{default:()=>[$e(d("div",{class:"v-chip__filter"},[l.filter?d(ne,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},l.filter):d(le,{key:"filter-icon",icon:e.filterIcon},null)]),[[zt,t.isSelected.value]])]}),Q&&d("div",{key:"prepend",class:"v-chip__prepend"},[l.prepend?d(ne,{key:"prepend-defaults",disabled:!Z,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},l.prepend):d(U,null,[e.prependIcon&&d(le,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&d(Pe,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),d("div",{class:"v-chip__content","data-no-activator":""},[((M=l.default)==null?void 0:M.call(l,{isSelected:t==null?void 0:t.isSelected.value,selectedClass:t==null?void 0:t.selectedClass.value,select:t==null?void 0:t.select,toggle:t==null?void 0:t.toggle,value:t==null?void 0:t.value.value,disabled:e.disabled}))??e.text]),W&&d("div",{key:"append",class:"v-chip__append"},[l.append?d(ne,{key:"append-defaults",disabled:!H,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},l.append):d(U,null,[e.appendIcon&&d(le,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&d(Pe,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),q&&d("button",R({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},P.value),[l.close?d(ne,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},l.close):d(le,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Ht("ripple"),S.value&&e.ripple,null]])}}}),$a=J({id:String,submenu:Boolean,...st(Pa({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:ft}}),["absolute"])},"VMenu"),Ua=oe()({name:"VMenu",props:$a(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:n}=o;const u=ye(e,"modelValue"),{scopeId:l}=Gt(),{isRtl:r}=Wt(),v=jt(),c=x(()=>e.id||`v-menu-${v}`),s=E(),f=Qt(Xe,null),V=z(new Set);Xt(Xe,{register(){V.value.add(v)},unregister(){V.value.delete(v)},closeParents(t){setTimeout(()=>{var m;!V.value.size&&!e.persistent&&(t==null||(m=s.value)!=null&&m.contentEl&&!Jt(t,s.value.contentEl))&&(u.value=!1,f==null||f.closeParents())},40)}}),ot(()=>f==null?void 0:f.unregister()),Yt(()=>u.value=!1);async function w(t){var S,P,L;const m=t.relatedTarget,y=t.target;await Ee(),u.value&&m!==y&&((S=s.value)!=null&&S.contentEl)&&((P=s.value)!=null&&P.globalTop)&&![document,s.value.contentEl].includes(y)&&!s.value.contentEl.contains(y)&&((L=Ue(s.value.contentEl)[0])==null||L.focus())}G(u,t=>{t?(f==null||f.register(),document.addEventListener("focusin",w,{once:!0})):(f==null||f.unregister(),document.removeEventListener("focusin",w))});function i(t){f==null||f.closeParents(t)}function p(t){var m,y,S,P,L;if(!e.disabled)if(t.key==="Tab"||t.key==="Enter"&&!e.closeOnContentClick){if(t.key==="Enter"&&(t.target instanceof HTMLTextAreaElement||t.target instanceof HTMLInputElement&&t.target.closest("form")))return;t.key==="Enter"&&t.preventDefault(),Zt(Ue((m=s.value)==null?void 0:m.contentEl,!1),t.shiftKey?"prev":"next",k=>k.tabIndex>=0)||(u.value=!1,(S=(y=s.value)==null?void 0:y.activatorEl)==null||S.focus())}else e.submenu&&t.key===(r.value?"ArrowRight":"ArrowLeft")&&(u.value=!1,(L=(P=s.value)==null?void 0:P.activatorEl)==null||L.focus())}function C(t){var y;if(e.disabled)return;const m=(y=s.value)==null?void 0:y.contentEl;m&&u.value?t.key==="ArrowDown"?(t.preventDefault(),t.stopImmediatePropagation(),Se(m,"next")):t.key==="ArrowUp"?(t.preventDefault(),t.stopImmediatePropagation(),Se(m,"prev")):e.submenu&&(t.key===(r.value?"ArrowRight":"ArrowLeft")?u.value=!1:t.key===(r.value?"ArrowLeft":"ArrowRight")&&(t.preventDefault(),Se(m,"first"))):(e.submenu?t.key===(r.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(t.key))&&(u.value=!0,t.preventDefault(),setTimeout(()=>setTimeout(()=>C(t))))}const g=x(()=>R({"aria-haspopup":"menu","aria-expanded":String(u.value),"aria-owns":c.value,onKeydown:C},e.activatorProps));return ce(()=>{const t=Je.filterProps(e);return d(Je,R({ref:s,id:c.value,class:["v-menu",e.class],style:e.style},t,{modelValue:u.value,"onUpdate:modelValue":m=>u.value=m,absolute:!0,activatorProps:g.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":i,onKeydown:p},l),{activator:n.activator,default:function(){for(var m=arguments.length,y=new Array(m),S=0;S<m;S++)y[S]=arguments[S];return d(ne,{root:"VMenu"},{default:()=>{var P;return[(P=n.default)==null?void 0:P.call(n,...y)]}})}})}),ht({id:c,ΨopenChildren:V},s)}}),Ha=J({renderless:Boolean,...Ve()},"VVirtualScrollItem"),Ka=oe()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Ha(),emits:{"update:height":e=>!0},setup(e,o){let{attrs:n,emit:u,slots:l}=o;const{resizeRef:r,contentRect:v}=ut(void 0,"border");G(()=>{var c;return(c=v.value)==null?void 0:c.height},c=>{c!=null&&u("update:height",c)}),ce(()=>{var c,s;return e.renderless?d(U,null,[(c=l.default)==null?void 0:c.call(l,{itemRef:r})]):d("div",R({ref:r,class:["v-virtual-scroll__item",e.class],style:e.style},n),[(s=l.default)==null?void 0:s.call(l)])})}}),qa=-1,za=1,Ae=100,Ga=J({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function Wa(e,o){const n=ea(),u=z(0);He(()=>{u.value=parseFloat(e.itemHeight||0)});const l=z(0),r=z(Math.ceil((parseInt(e.height)||n.height.value)/(u.value||16))||1),v=z(0),c=z(0),s=E(),f=E();let V=0;const{resizeRef:w,contentRect:i}=ut();He(()=>{w.value=s.value});const p=x(()=>{var a;return s.value===document.documentElement?n.height.value:((a=i.value)==null?void 0:a.height)||parseInt(e.height)||0}),C=x(()=>!!(s.value&&f.value&&p.value&&u.value));let g=Array.from({length:o.value.length}),t=Array.from({length:o.value.length});const m=z(0);let y=-1;function S(a){return g[a]||u.value}const P=ta(()=>{const a=performance.now();t[0]=0;const h=o.value.length;for(let A=1;A<=h-1;A++)t[A]=(t[A-1]||0)+S(A-1);m.value=Math.max(m.value,performance.now()-a)},m),L=G(C,a=>{a&&(L(),V=f.value.offsetTop,P.immediate(),M(),~y&&Ee(()=>{Ie&&window.requestAnimationFrame(()=>{me(y),y=-1})}))});rt(()=>{P.clear()});function Y(a,h){const A=g[a],I=u.value;u.value=I?Math.min(u.value,h):h,(A!==h||I!==u.value)&&(g[a]=h,P())}function k(a){return a=Ce(a,0,o.value.length-1),t[a]||0}function H(a){return ja(t,a)}let W=0,q=0,j=0;G(p,(a,h)=>{h&&(M(),a<h&&requestAnimationFrame(()=>{q=0,M()}))});function Z(){if(!s.value||!f.value)return;const a=s.value.scrollTop,h=performance.now();h-j>500?(q=Math.sign(a-W),V=f.value.offsetTop):q=a-W,W=a,j=h,M()}function Q(){!s.value||!f.value||(q=0,j=0,M())}let ee=-1;function M(){cancelAnimationFrame(ee),ee=requestAnimationFrame(xe)}function xe(){if(!s.value||!p.value)return;const a=W-V,h=Math.sign(q),A=Math.max(0,a-Ae),I=Ce(H(A),0,o.value.length),F=a+p.value+Ae,b=Ce(H(F)+1,I+1,o.value.length);if((h!==qa||I<l.value)&&(h!==za||b>r.value)){const T=k(l.value)-k(I),D=k(b)-k(r.value);Math.max(T,D)>Ae?(l.value=I,r.value=b):(I<=0&&(l.value=I),b>=o.value.length&&(r.value=b))}v.value=k(l.value),c.value=k(o.value.length)-k(r.value)}function me(a){const h=k(a);!s.value||a&&!h?y=a:s.value.scrollTop=h}const we=x(()=>o.value.slice(l.value,r.value).map((a,h)=>({raw:a,index:h+l.value})));return G(o,()=>{g=Array.from({length:o.value.length}),t=Array.from({length:o.value.length}),P.immediate(),M()},{deep:!0}),{calculateVisibleItems:M,containerRef:s,markerRef:f,computedItems:we,paddingTop:v,paddingBottom:c,scrollToIndex:me,handleScroll:Z,handleScrollend:Q,handleItemResize:Y}}function ja(e,o){let n=e.length-1,u=0,l=0,r=null,v=-1;if(e[n]<o)return n;for(;u<=n;)if(l=u+n>>1,r=e[l],r>o)n=l-1;else if(r<o)v=l,u=l+1;else return r===o?l:u;return v}const Qa=J({items:{type:Array,default:()=>[]},renderless:Boolean,...Ga(),...Ve(),...aa()},"VVirtualScroll"),Xa=oe()({name:"VVirtualScroll",props:Qa(),setup(e,o){let{slots:n}=o;const u=la("VVirtualScroll"),{dimensionStyles:l}=na(e),{calculateVisibleItems:r,containerRef:v,markerRef:c,handleScroll:s,handleScrollend:f,handleItemResize:V,scrollToIndex:w,paddingTop:i,paddingBottom:p,computedItems:C}=Wa(e,ae(e,"items"));return sa(()=>e.renderless,()=>{function g(){var y,S;const m=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[m]("scroll",s,{passive:!0}),document[m]("scrollend",f)):((y=v.value)==null||y[m]("scroll",s,{passive:!0}),(S=v.value)==null||S[m]("scrollend",f))}se(()=>{v.value=Ia(u.vnode.el,!0),g(!0)}),rt(g)}),ce(()=>{const g=C.value.map(t=>d(Ka,{key:t.index,renderless:e.renderless,"onUpdate:height":m=>V(t.index,m)},{default:m=>{var y;return(y=n.default)==null?void 0:y.call(n,{item:t.raw,index:t.index,...m})}}));return e.renderless?d(U,null,[d("div",{ref:c,class:"v-virtual-scroll__spacer",style:{paddingTop:fe(i.value)}},null),g,d("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:fe(p.value)}},null)]):d("div",{ref:v,class:["v-virtual-scroll",e.class],onScrollPassive:s,onScrollend:f,style:[l.value,e.style]},[d("div",{ref:c,class:"v-virtual-scroll__container",style:{paddingTop:fe(i.value),paddingBottom:fe(p.value)}},[g])])}),{calculateVisibleItems:r,scrollToIndex:w}}});function Ja(e,o){const n=z(!1);let u;function l(c){cancelAnimationFrame(u),n.value=!0,u=requestAnimationFrame(()=>{u=requestAnimationFrame(()=>{n.value=!1})})}async function r(){await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>{if(n.value){const s=G(n,()=>{s(),c()})}else c()})}async function v(c){var V,w;if(c.key==="Tab"&&((V=o.value)==null||V.focus()),!["PageDown","PageUp","Home","End"].includes(c.key))return;const s=(w=e.value)==null?void 0:w.$el;if(!s)return;(c.key==="Home"||c.key==="End")&&s.scrollTo({top:c.key==="Home"?0:s.scrollHeight,behavior:"smooth"}),await r();const f=s.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(c.key==="PageDown"||c.key==="Home"){const i=s.getBoundingClientRect().top;for(const p of f)if(p.getBoundingClientRect().top>=i){p.focus();break}}else{const i=s.getBoundingClientRect().bottom;for(const p of[...f].reverse())if(p.getBoundingClientRect().bottom<=i){p.focus();break}}}return{onScrollPassive:l,onKeydown:v}}const Ya=J({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:he,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...oa({itemChildren:!1})},"Select"),Za=J({...Ya(),...st(Ca({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ua({transition:{component:ft}})},"VSelect"),Ze=oe()({name:"VSelect",props:Za(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,o){let{slots:n}=o;const{t:u}=nt(),l=E(),r=E(),v=E(),c=ye(e,"menu"),s=x({get:()=>c.value,set:a=>{var h;c.value&&!a&&((h=r.value)!=null&&h.ΨopenChildren.size)||(c.value=a)}}),{items:f,transformIn:V,transformOut:w}=ra(e),i=ye(e,"modelValue",[],a=>V(a===null?[null]:da(a)),a=>{const h=w(a);return e.multiple?h:h[0]??null}),p=x(()=>typeof e.counterValue=="function"?e.counterValue(i.value):typeof e.counterValue=="number"?e.counterValue:i.value.length),C=Aa(),g=x(()=>i.value.map(a=>a.value)),t=z(!1),m=x(()=>s.value?e.closeText:e.openText);let y="",S;const P=x(()=>e.hideSelected?f.value.filter(a=>!i.value.some(h=>e.valueComparator(h,a))):f.value),L=x(()=>e.hideNoData&&!P.value.length||e.readonly||(C==null?void 0:C.isReadonly.value)),Y=x(()=>{var a;return{...e.menuProps,activatorProps:{...((a=e.menuProps)==null?void 0:a.activatorProps)||{},"aria-haspopup":"listbox"}}}),k=E(),H=Ja(k,l);function W(a){e.openOnClear&&(s.value=!0)}function q(){L.value||(s.value=!s.value)}function j(a){qe(a)&&Z(a)}function Z(a){var F,b;if(!a.key||e.readonly||C!=null&&C.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"," "].includes(a.key)&&(s.value=!0),["Escape","Tab"].includes(a.key)&&(s.value=!1),a.key==="Home"?(F=k.value)==null||F.focus("first"):a.key==="End"&&((b=k.value)==null||b.focus("last"));const h=1e3;if(e.multiple||!qe(a))return;const A=performance.now();A-S>h&&(y=""),y+=a.key.toLowerCase(),S=A;const I=f.value.find(T=>T.title.toLowerCase().startsWith(y));if(I!==void 0){i.value=[I];const T=P.value.indexOf(I);Ie&&window.requestAnimationFrame(()=>{var D;T>=0&&((D=v.value)==null||D.scrollToIndex(T))})}}function Q(a){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!a.props.disabled)if(e.multiple){const A=i.value.findIndex(F=>e.valueComparator(F.value,a.value)),I=h??!~A;if(~A){const F=I?[...i.value,a]:[...i.value];F.splice(A,1),i.value=F}else I&&(i.value=[...i.value,a])}else{const A=h!==!1;i.value=A?[a]:[],Ee(()=>{s.value=!1})}}function ee(a){var h;(h=k.value)!=null&&h.$el.contains(a.relatedTarget)||(s.value=!1)}function M(){var a;e.eager&&((a=v.value)==null||a.calculateVisibleItems())}function xe(){var a;t.value&&((a=l.value)==null||a.focus())}function me(a){t.value=!0}function we(a){if(a==null)i.value=[];else if(ze(l.value,":autofill")||ze(l.value,":-webkit-autofill")){const h=f.value.find(A=>A.title===a);h&&Q(h)}else l.value&&(l.value.value="")}return G(s,()=>{if(!e.hideSelected&&s.value&&i.value.length){const a=P.value.findIndex(h=>i.value.some(A=>e.valueComparator(A.value,h.value)));Ie&&window.requestAnimationFrame(()=>{var h;a>=0&&((h=v.value)==null||h.scrollToIndex(a))})}}),G(()=>e.items,(a,h)=>{s.value||t.value&&!h.length&&a.length&&(s.value=!0)}),ce(()=>{const a=!!(e.chips||n.chip),h=!!(!e.hideNoData||P.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),A=i.value.length>0,I=_e.filterProps(e),F=A||!t.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return d(_e,R({ref:l},I,{modelValue:i.value.map(b=>b.props.value).join(", "),"onUpdate:modelValue":we,focused:t.value,"onUpdate:focused":b=>t.value=b,validationValue:i.externalValue,counterValue:p.value,dirty:A,class:["v-select",{"v-select--active-menu":s.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:F,"onClick:clear":W,"onMousedown:control":q,onBlur:ee,onKeydown:Z,"aria-label":u(m.value),title:u(m.value)}),{...n,default:()=>d(U,null,[d(Ua,R({ref:r,modelValue:s.value,"onUpdate:modelValue":b=>s.value=b,activator:"parent",contentClass:"v-select__content",disabled:L.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:M,onAfterLeave:xe},Y.value),{default:()=>[h&&d(ia,R({ref:k,selected:g.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:b=>b.preventDefault(),onKeydown:j,onFocusin:me,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},H,e.listProps),{default:()=>{var b,T,D;return[(b=n["prepend-item"])==null?void 0:b.call(n),!P.value.length&&!e.hideNoData&&(((T=n["no-data"])==null?void 0:T.call(n))??d(Ke,{title:u(e.noDataText)},null)),d(Xa,{ref:v,renderless:!0,items:P.value},{default:X=>{var Oe;let{item:$,index:te,itemRef:B}=X;const Me=R($.props,{ref:B,key:te,onClick:()=>Q($,null)});return((Oe=n.item)==null?void 0:Oe.call(n,{item:$,index:te,props:Me}))??d(Ke,R(Me,{role:"option"}),{prepend:gt=>{let{isSelected:bt}=gt;return d(U,null,[e.multiple&&!e.hideSelected?d(_a,{key:$.value,modelValue:bt,ripple:!1,tabindex:"-1"},null):void 0,$.props.prependAvatar&&d(Pe,{image:$.props.prependAvatar},null),$.props.prependIcon&&d(le,{icon:$.props.prependIcon},null)])}})}}),(D=n["append-item"])==null?void 0:D.call(n)]}})]}),i.value.map((b,T)=>{function D(B){B.stopPropagation(),B.preventDefault(),Q(b,!1)}const X={"onClick:close":D,onKeydown(B){B.key!=="Enter"&&B.key!==" "||(B.preventDefault(),B.stopPropagation(),D(B))},onMousedown(B){B.preventDefault(),B.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},$=a?!!n.chip:!!n.selection,te=$?ca(a?n.chip({item:b,index:T,props:X}):n.selection({item:b,index:T})):void 0;if(!($&&!te))return d("div",{key:b.value,class:"v-select__selection"},[a?n.chip?d(ne,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:b.title}}},{default:()=>[te]}):d(Fa,R({key:"chip",closable:e.closableChips,size:"small",text:b.title,disabled:b.props.disabled},X),null):te??d("span",{class:"v-select__selection-text"},[b.title,e.multiple&&T<i.value.length-1&&d("span",{class:"v-select__selection-comma"},[it(",")])])])})]),"append-inner":function(){var X;for(var b=arguments.length,T=new Array(b),D=0;D<b;D++)T[D]=arguments[D];return d(U,null,[(X=n["append-inner"])==null?void 0:X.call(n,...T),e.menuIcon?d(le,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),ht({isFocused:t,menu:s,select:Q},l)}}),el={class:"browse-selects"},tl={class:"selects mt-5 mb-8"},al={class:"no-data-placeholder"},ll=de({__name:"Browse",props:{corpusArr:{default:()=>[]},volumeLabel:{default:"Volume"},textLabel:{default:"Text"}},emits:["chosen"],setup(e,{emit:o}){dt();const n={get chosen(){return{volume:"",text:""}}},u=o,l=ge("volume"),r=ge("text");l.value&&V(),r.value&&f(),se(f),ct(()=>{l.value=null,r.value=null});const v=x(()=>{if(l.value)return e.corpusArr.find(({volumeName:w})=>w===l.value)}),c=x(()=>v.value?v.value.texts:[]);function s(w,i){i==="volume"?(r.value=null,V()):f()}function f(){u("chosen",{volume:l.value,text:r.value})}function V(){u("chosen",n.chosen)}return(w,i)=>(_(),N("div",el,[O("div",tl,[d(Ze,{modelValue:K(l),"onUpdate:modelValue":[i[0]||(i[0]=p=>Ge(l)?l.value=p:null),i[1]||(i[1]=p=>s(p,"volume"))],items:w.corpusArr,label:w.volumeLabel,"item-title":"volumeName","item-value":"volumeName",variant:"outlined",density:"compact"},null,8,["modelValue","items","label"]),d(Ze,{modelValue:K(r),"onUpdate:modelValue":[i[2]||(i[2]=p=>Ge(r)?r.value=p:null),i[3]||(i[3]=p=>s(p,"text"))],items:c.value,label:w.textLabel,"item-title":"textName","item-value":"textNumber",variant:"outlined",density:"compact"},{"no-data":be(()=>[i[4]||(i[4]=O("span",{class:"no-data-arrow"},"⬅",-1)),O("span",al,vt(`A ${w.volumeLabel} should be chosen`),1)]),_:1},8,["modelValue","items","label"])])]))}}),nl=ve(ll,[["__scopeId","data-v-3e07b508"]]),sl={class:"d-flex align-center flex-column"},ol={class:"searchers d-flex mt-5"},ul=de({__name:"Search",props:{textusLabel:{default:"Search corpus"},versioLabel:{default:"Search translation"}},emits:["searchers","copy-to-clipboard"],setup(e,{emit:o}){const n=e,u={get searchers(){return{textus:null,versio:null}}},l=o,r=E(u.searchers),v=E(u.searchers),c=E(!1),s=ge("textus"),f=ge("versio");r.value.textus=s.value,r.value.versio=f.value;const V=x(()=>!r.value.textus&&!r.value.versio),w=x(()=>[{name:"textus",value:r.value.textus,label:n.textusLabel},{name:"versio",value:r.value.versio,label:n.versioLabel}]);se(C);function i(t,m){r.value[m]=t,t||C()}function p(t){r.value.textus=t,C()}function C(){v.value=ke.cloneDeep(r.value),l("searchers",ke.cloneDeep(v.value)),g()}function g(){s.value=v.value.textus,f.value=v.value.versio}return se(()=>{r.value.textus=s.value,r.value.versio=f.value,(r.value.textus||r.value.versio)&&C()}),ct(()=>{s.value=null,f.value=null}),(t,m)=>(_(),N("div",sl,[O("div",ol,[d(ka,{onClick:m[0]||(m[0]=y=>c.value=!0)}),(_(!0),N(U,null,Le(w.value,({value:y,label:S,name:P})=>(_(),ie(_e,{key:P,"model-value":y,label:S,variant:"outlined",density:"compact",clearable:"","onUpdate:modelValue":L=>i(L,P),onKeydown:ma(fa(C,["prevent"]),["enter"])},null,8,["model-value","label","onUpdate:modelValue","onKeydown"]))),128)),d(va,{disabled:V.value,variant:"outlined",onClick:C},{default:be(()=>m[3]||(m[3]=[it(" Search ")])),_:1},8,["disabled"])]),d(Va,{modelValue:c.value,"onUpdate:modelValue":m[2]||(m[2]=y=>c.value=y),"hide-overlay":"",fullscreen:""},{default:be(()=>[d(xa,{visible:c.value,value:r.value.textus,"input-name":e.textusLabel,"onUpdate:visible":m[1]||(m[1]=y=>c.value=y),onSubmit:p},null,8,["visible","value","input-name"])]),_:1},8,["modelValue"])]))}}),rl=ve(ul,[["__scopeId","data-v-0de3c3cb"]]),il=["id"],cl={class:"controls-wrapper"},dl={class:"lines"},vl=de({__name:"LineCard",props:{line:{},searchers:{}},setup(e){const o=e,n=E(null),u=De(),l=dt(),r=x(()=>ha.map(i=>({lineName:i,str:o.line[i],searcher:o.searchers.data[i]}))),v=x(()=>!o.searchers.areAllEmpty),c=x(()=>u.hash),s=x(()=>"#"+o.line.hash);function f(){Te(n.value,"chosen")}G(c,(i,p)=>{!i&&p&&f()});async function V(){if(!v.value)return;const{volumeName:i,textNumber:p}=o.line;await l.push({query:{mode:ue.browse,volume:i,text:p}}),await pe({hash:s.value})}function w(){if(!u.hash){pe({hash:s.value});return}Ba(u.hash),u.hash===s.value?l.replace({query:u.query,hash:""}):(pe({hash:s.value,keepLocation:!0}),l.replace({query:u.query,hash:s.value}));const i=Array.from(document.querySelectorAll('div.line-card[id^="h"]'));for(const p of i)p.style.background&&p.id!==o.line.hash&&Te(p)}return(i,p)=>i.line?(_(),N("div",{key:0,class:"line-card",id:i.line.hash,ref_key:"lineCardRef",ref:n},[O("div",cl,[v.value?(_(),N("div",{key:1,class:"control-sign",onClick:V},"▤")):(_(),N("div",{key:0,class:"control-sign",onClick:w},"#"))]),O("div",dl,[(_(!0),N(U,null,Le(r.value,(C,g)=>(_(),ie(wa,R({ref_for:!0},C,{key:g,class:"mb-1"}),null,16))),128)),p[0]||(p[0]=O("div",null,[O("br")],-1))])],8,il)):re("",!0)}}),ml=ve(vl,[["__scopeId","data-v-114feac8"]]),fl={class:"results"},hl=de({__name:"Results",props:{results:{},searchers:{}},setup(e){const o=De(),n=pa(),u=ae(n,"isDark"),l=x(()=>!e.searchers.areAllEmpty);return se(async()=>{var v;const r=o.hash;r&&(await Ea(1e3),(v=document.querySelector(r))==null||v.scrollIntoView({behavior:"smooth",block:"center"}))}),(r,v)=>(_(),N("div",fl,[l.value?(_(),N("div",{key:0,class:mt(["results-stats",{invert:u.value}])},[O("div",null,"Found "+vt(r.results.length)+" contexts",1),v[0]||(v[0]=O("div",null,[O("br")],-1))],2)):re("",!0),O("div",null,[r.results?(_(),ie(La,{key:0,items:r.results},{default:be(({items:c})=>[(_(!0),N(U,null,Le(c,s=>(_(),N(U,null,[s?(_(),ie(ml,{line:s,searchers:r.searchers,key:s.hash},null,8,["line","searchers"])):re("",!0)],64))),256))]),_:1},8,["items"])):re("",!0)])]))}}),pl=ve(hl,[["__scopeId","data-v-caf26020"]]),yl={key:0,class:"searcher-wrapper"},gl=de({__name:"BrowseAndSearch",setup(e){const o=De(),n=Na();n.initCorpus();const u={get chosen(){return{volume:null,text:null}},get searchers(){return new je({textus:"",versio:""})}};ya({text:"Copy to Clipboard",loading:!1});const l=E(!1),r=E(u.searchers),v=E({volume:null,text:null});E(!1);let c=null;const s=ga(),f=x(()=>{if(!v.value.text||!n.corpusArray.length)return[];const g=ke.find(n.corpusArray,{volumeName:v.value.volume});return ke.find(g.texts,{textNumber:v.value.text}).contents}),V=x(()=>n.corpusLines),w=x(()=>r.value.areAllEmpty?[]:V.value.filter(r.value.test)),i=x(()=>s.mode===ue.browse?f.value:w.value);se(()=>{c=setInterval(()=>{var t;l.value=!!((t=getSelection())!=null&&t.toString())},100);const g=o.hash;g&&pe({hash:g})}),ot(()=>{clearInterval(c)});function p(g){r.value=new je(g)}function C(g){v.value=g}return(g,t)=>(_(),N("div",{class:mt({"no-hashes":l.value})},[K(s).mode===K(ue).search?(_(),N("div",yl,[d(Da,{count:i.value.length},null,8,["count"]),d(rl,{"corpus-arr-prop":K(n).corpusArray,"textus-label":"Aramaic text","versio-label":"Translation text",onSearchers:p},null,8,["corpus-arr-prop"])])):K(s).mode===K(ue).browse?(_(),ie(nl,{key:1,"corpus-arr":K(n).corpusArray,onChosen:C},null,8,["corpus-arr"])):re("",!0),d(pl,{results:i.value,searchers:K(s).mode===K(ue).search?r.value:u.searchers},null,8,["results","searchers"])],2))}}),Ll=ve(gl,[["__scopeId","data-v-f65ecefd"]]);export{Ll as B};
