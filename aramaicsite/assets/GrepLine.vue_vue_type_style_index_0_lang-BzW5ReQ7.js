var W=Object.defineProperty;var Y=(e,t,l)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var j=(e,t,l)=>Y(e,typeof t!="symbol"?t+"":t,l);import{r as m,bL as Z,E as N,c as b,bA as ee,b as q,af as te,t as ae,w as G,aX as ne,o as u,f as c,n as D,D as K,A as se,p as k,F as V,i as $,g as M,h as B,j as E,k as L,ag as w,V as S,m as O,_ as U}from"./index-BoiOrObW.js";import{V as le}from"./VTextField-BexRD-2a.js";import{b as re}from"./betterSplit-CW8NIeFU.js";const ue=e=>{const t=m(!1),l=m(!1),p=e.join(" or ");function v(r){return`extract only ${p} parts of the following text, give their translation into english, no other commentaries or explanations, return html fragment not md, give translations of the words in ${p} if they differ from forms used: ${r}, wrap in html tags and add bullets for readability`}async function i(r){var h;t.value=!0;const T=v(r),o=await((h=Z)==null?void 0:h.generateContent(T)),x=await(o==null?void 0:o.response.text().replace(/`/g,"").replace(/^html/,"").replace(r,""))||"";return t.value=!1,l.value=!0,x}return{isLoading:t,isReady:l,getTranslation:i}};var z=(e=>(e.title="title",e.textus="textus",e.versio="versio",e))(z||{});const Ie=["title","textus","versio"];var oe=(e=>(e.search="search",e.browse="browse",e))(oe||{});const je=["search","browse"],ie="(?:a|e|i|iͧ|o|u|ä|å|ë|ö|ü|á|á̧|â|ä|å|é|ê|ë|í|î|ó|ô|ö|ú|û|ü|ā|ā́|ă|ą̂|ē|ĕ|ī|ı|ō|ŏ|ū|ŭ|ŭ́|ə|ə́|и|о|ю|ạ|ạ|ạ́|ậ|ắ|ẹ|ọ|ộ|ụ|ụ̂|а|о|у|э|ы|и|ь)",ce="(?:b|b́|c|c̄|d|f|f̣|g|h|j|k|k̇|l|m|n|n̄|p|p̄|p̣|q|q̣|r|r̄|r̄̄|s|s̄|t|t́|v|w|x|y|z|z̄|ç|ć|č|ğ|ġ|ģ|ķ|ń|ň|ŕ|ś|ŝ|ş|ş́|ş̇|š|ţ|ž|ǧ|ǧ̣|Ɂ|ɧ|ʔ|ʕ|ʕ́|ʕ̣|ʾ|ʿ|б|в|й|к|п|р|с|т|х|ҫ|ҫ́|ҫ̂|ҫ̄|ع|ḅ|ḇ|ḉ|ḍ|ḏ|ḏ̣|ḏ̣̣|ḥ|ḳ|ḳ̇|ḷ|ṃ|ṅ|ṇ|ṗ|ṛ|ṝ|ṡ|ṣ|ṫ|ṭ|ṯ|ẓ|ẖ|ﻉ)",ve=new RegExp("[\\\\]v","gi"),de=new RegExp("[\\\\]c","gi"),me=N.memoize(function(t){return t.replace(ve,ie).replace(de,ce)});class R{constructor(t){j(this,"_value");this._value=t||""}get value(){return this._value}set value(t){this._value=t||""}get valueNormalized(){return me(this.value)}get isEmpty(){return!this.value}get regex(){return RegExp(this.valueNormalized,"iu")}static instantiate(t){return new R(t)}}class De{constructor(t){j(this,"data");this.data=N.mapValues(t,R.instantiate)}get searchersArr(){return N.values(this.data)}get areAllEmpty(){return this.searchersArr.every(t=>t.isEmpty)}get test(){return t=>N.keys(this.data).every(l=>this.data[l].regex.test(t[l]))}}var A=(e=>(e.turoyo="turoyo",e.urmi="urmi",e.maalula="maalula",e))(A||{});const fe=()=>{const e=ee();return b(()=>e.path.split("/")[1])};function ge(e){return new Promise(t=>setTimeout(t,e))}const pe="a á ä ā b ḅ c č ç d ḍ ḏ ḏ̣ e é ē ə f g ǧ ġ ģ h ḥ i í î ī ı j k ḳ l m ṃ ň ṇ o ó ö p q r ṛ s š ṡ ş ṣ t ţ ṭ ṯ u ú ü ụ v w x y z ž ʔ ʕ",he=pe.split(/\s+/),ye="a ä b ʙ c č ç d e ǝ ə f g Ģ h i I ı j k l m n o ö p q r s ş ṣ ș t ţ ṭ ț u ü v w x y z ž ƶ а ә б в г д е ж з и й к л м н о п р с т у ф х һ ц ч ш щ ъ ы ь э ю я",ke=ye.split(/\s+/),be="ʔ ʕ a á ā b c ć č d ḍ ḏ ḏ̣ e é ē ə f g ǧ ġ h ḥ i í ī k ḳ l ḷ m n o ō p r s š ṣ t ṭ ṯ u ú ū w x y z ž ẓ",we=be.split(/\s+/),xe={[A.turoyo]:he,[A.urmi]:ke,[A.maalula]:we},Ce=()=>{const e=fe();return b(()=>xe[e.value])},Te={class:"working-block"},Be={class:"keyboard specific-keys"},Ee={class:"keyboard common-keys"},Se={key:1,class:"submit-wrapper"},Ve=q({__name:"Keyboard",props:{value:{default:""},inputName:{default:""},visible:{type:Boolean,default:!1},type:{default:"full"},inputEl:{default:null}},emits:["submit","update:visible"],setup(e,{emit:t}){const l=t,p=te(),v=ae(p,"isDark"),i=m(0),r=m(0),T=m(null),o=m(e.value),x=[String.raw`\v`,String.raw`\c`,"^","$","\\"],h=["⬅","space","del","backspace","⮕"],F=Ce(),d=m(null);G(()=>{d.value=T.value||e.inputEl},{flush:"sync"}),G(()=>{o.value=e.value});function X(s){o.value=s,P()}function _(){l("update:visible",!1)}function H(){l("submit",o.value),_()}function P(){var s,a;i.value=((s=d.value)==null?void 0:s.selectionStart)||0,r.value=((a=d.value)==null?void 0:a.selectionEnd)||0}async function J(){await ge(20),P()}function I(s){if(!d.value)return;const a=o.value;i.value=d.value.selectionStart||0,r.value=d.value.selectionEnd||0;const{buttonValueMod:n,selectionStartMod:f,selectionEndMod:g}=Q({buttonValue:s,selectionStart:i.value,selectionEnd:r.value,existingValue:a});d.value.value=a.slice(0,f)+n+a.slice(g,a.length),o.value=d.value.value,d.value.focus(),i.value=d.value.selectionStart=f+n.length,r.value=d.value.selectionEnd=f+n.length,e.type==="regex"&&l("submit",o.value)}ne(()=>{T.value=document.querySelector(".keyboard-wrapper .v-text-field input"),i.value=r.value=e.value.length});function Q({buttonValue:s,selectionStart:a,selectionEnd:n,existingValue:f}){let g,y=a,C=n;return s==="backspace"?(a>0&&a===n&&(y=a-1),g=""):s==="del"?(a<f.length&&a===n&&(C=n+1),g=""):s==="space"?g=" ":s==="⬅"?(a<n?C=a:(y=Math.max(0,a-1),C=y),g=""):s==="⮕"?(a<n?y=n:(y=Math.min(f.length,a+1),C=y),g=""):(g=s,y=a,C=n),{buttonValueMod:g,selectionStartMod:y,selectionEndMod:C}}return(s,a)=>s.visible?(u(),c("div",{key:0,class:w([{full:s.type==="full",regex:s.type==="regex"},"keyboard-wrapper"])},[D("div",Te,[s.type==="full"?(u(),K(le,{key:0,label:s.inputName,"model-value":o.value,class:"input",density:"compact",variant:"outlined",clearable:"",onFocus:J,"onUpdate:modelValue":X,onKeyup:se(H,["enter","native"])},null,8,["label","model-value"])):k("",!0),D("div",Be,[x?(u(),c(V,{key:0},$(x,n=>M(S,{key:n,color:"warning",variant:"outlined",class:w({invert:v.value}),rounded:"",onClick:f=>I(n)},{default:B(()=>[E(L(n),1)]),_:2},1032,["class","onClick"])),64)):k("",!0),O(F)&&s.type==="full"?(u(!0),c(V,{key:1},$(O(F),n=>(u(),K(S,{key:n,variant:"outlined",rounded:"",onClick:f=>I(n)},{default:B(()=>[E(L(n),1)]),_:2},1032,["onClick"]))),128)):k("",!0)]),D("div",Ee,[h&&s.type==="full"?(u(),c(V,{key:0},$(h,n=>M(S,{key:n,class:w({invert:v.value}),color:"teal",rounded:"",size:"large",variant:"outlined",onClick:f=>I(n)},{default:B(()=>[E(L(n),1)]),_:2},1032,["class","onClick"])),64)):k("",!0)]),s.type==="full"?(u(),c("div",Se,[M(S,{class:"mr-5",variant:"outlined",onClick:_},{default:B(()=>a[0]||(a[0]=[E(" Cancel ")])),_:1}),M(S,{color:"primary",variant:"outlined",class:w({invert:v.value}),onClick:H},{default:B(()=>a[1]||(a[1]=[E(" Search ")])),_:1},8,["class"])])):k("",!0)])],2)):k("",!0)}}),Ke=U(Ve,[["__scopeId","data-v-e7e93995"]]),Le=["innerHTML"],Me=q({__name:"TranslateAI",props:{languages:{default:()=>[]},str:{}},setup(e){const t=m(),l=m(!1);async function p(){if(!e.languages.length||l.value)return;const{getTranslation:v}=ue(e.languages);l.value=!0,t.value=await v(e.str),l.value=!1}return(v,i)=>(u(),c(V,null,[t.value?(u(),c("div",{key:1,class:"hint",onClick:i[0]||(i[0]=r=>t.value="")},"Collapse")):(u(),c("div",{key:0,onClick:p,class:w(["hint",{shimmer:l.value}])},L(`Translate from ${v.languages.join(" and ")}`),3)),t.value?(u(),c("div",{key:2,innerHTML:t.value,class:"translation"},null,8,Le)):k("",!0)],64))}}),Ne=U(Me,[["__scopeId","data-v-6edb8c04"]]),qe=q({__name:"GrepLine",props:{str:{default:""},searcher:{default:()=>new R},lineName:{default:""},translationLanguage:{}},setup(e){m();const t=b(()=>!e.searcher||e.searcher.isEmpty?[e.str]:re(e.str,e.searcher.regex)),l=b(()=>e.lineName===z.title),p=b(()=>!e.lineName||e.lineName===z.textus),v=b(()=>e.lineName===z.versio),i=b(()=>({"line-title":l.value,textus:p.value,versio:v.value}));return(r,T)=>{const o=Ne;return u(),c("div",{class:w(i.value)},[(u(!0),c(V,null,$(t.value,(x,h)=>(u(),c("span",{key:h,class:w({highlight:h%2,invert:r.isDark})},L(x),3))),128)),r.translationLanguage?(u(),K(o,{key:0,languages:[r.translationLanguage],str:r.str},null,8,["languages","str"])):k("",!0)],2)}}});export{je as D,Ke as K,A as L,De as S,qe as _,Ie as a,oe as b,R as c,ge as s,fe as u};
