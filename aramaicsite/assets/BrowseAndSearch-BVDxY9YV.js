var wt=Object.defineProperty;var St=(e,t,l)=>t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l;var M=(e,t,l)=>St(e,typeof t!="symbol"?t+"":t,l);import{b7 as Ct,E as ie,d as Tt,c as g,b8 as _t,r as E,m as j,b as ce,b9 as At,o as A,f as P,F as U,i as Se,D as ae,h as le,j as xe,k as Ve,V as Le,p as re,v as Z,aR as ot,Y as ut,Z as rt,av as It,x as Ce,ba as Pt,q as de,P as it,T as Et,ad as Lt,t as se,s as ye,g as d,L as q,S as ct,aK as Bt,aL as Dt,aa as Rt,aq as Nt,ar as Mt,bb as qt,a0 as we,a2 as $t,aO as Ot,W as Ke,X as Ft,aQ as Ht,bc as Ut,am as oe,al as ue,a6 as Kt,aJ as Be,bd as zt,aS as Gt,as as jt,a8 as Wt,at as Qt,ae as Xt,aW as Jt,be as ze,ao as ke,ap as Yt,ac as Zt,Q as ea,ah as ta,a1 as aa,U as G,b3 as la,a4 as Me,bf as Ge,bg as na,e as W,ax as fe,bh as Ae,bi as sa,M as dt,$ as vt,bj as oa,bk as mt,bl as ua,w as je,bm as ra,b2 as Ie,bn as ft,bo as ia,ak as ca,bp as da,aX as he,a5 as ge,an as va,bq as ma,br as fa,bs as ha,bt as We,bu as Qe,bv as pa,bw as Xe,bx as ya,by as ba,bz as ht,n as R,l as De,_ as ve,A as ga,aD as ka,ag as qe,bA as pt,B as xa,af as Va,bB as wa,bC as Sa}from"./index-wqI0NW7N.js";import{u as pe}from"./index-Dt2_Lpnx.js";import{u as Ca,L as Je,D as Ye,K as Ze,a as Ta,b as me,_ as _a,s as Aa,c as Ia,S as et,I as Pa}from"./GrepLine.vue_vue_type_style_index_0_lang-DRAAeACt.js";import{u as Ea,A as tt}from"./assetsStore-Axe9xE9o.js";import{V as Re,m as La}from"./VTextField-CuU92ZC_.js";import{h as Ba}from"./VInput-CyzNd8LV.js";import{f as yt}from"./forwardRefs-DWGaNmQL.js";import{V as at,m as Da,a as lt,g as Ra}from"./VOverlay-CA7CuyNF.js";import{a as bt,V as Na}from"./VDialog-DS1v_3xU.js";import{V as Ma}from"./VCheckboxBtn-CG_EpOMD.js";import{m as qa,V as nt}from"./VSlideGroup-Ce-aysBW.js";import{_ as $a}from"./CopyResults-Dd9q-nCq.js";class $e{constructor({volume:t,texts:l}){M(this,"volumeName");M(this,"texts");this.texts=l.map(u=>({volumeName:t,...u})).map(Oe.instantiate),this.volumeName=t}get totalContents(){return ie.flatMap(this.texts,"contents")}static instantiate(t){return new $e(t)}}class Oe{constructor({volumeName:t,textNumber:l,textName:u,contents:s}){M(this,"volumeName");M(this,"textNumber");M(this,"_textName");M(this,"rawContents");this.volumeName=t,this.textNumber=l,this._textName=u,this.rawContents=s}get contents(){return this.rawContents.map(t=>({volumeName:this.volumeName,textNumber:this.textNumber,textName:this.textName,...t})).map(Fe.instantiate)}get textName(){return this._textName.replace(/\.txt/,"")}set textName(t){this._textName=t}static instantiate(t){return new Oe(t)}}class Fe{constructor({volumeName:t,textNumber:l,textName:u,lineNumber:s,textus:i,versio:v}){M(this,"volumeName");M(this,"textNumber");M(this,"textName");M(this,"lineNumber");M(this,"textus");M(this,"versio");this.volumeName=t,this.textNumber=l,this.textName=u,this.lineNumber=s,this.textus=i,this.versio=v}get title(){return this.volumeName+": "+this.textName}get hash(){return"h"+Ct(this)}static instantiate(t){return new Fe(t)}}const Oa=Tt("corpusWithTranslationStore",()=>{const e=Ea(),t=Ca(),l=g(()=>{switch(t.value){case Je.maalula:return tt.maalulaCorpusJson;case Je.turoyo:default:return tt.turoyoNewCorpusJson}}),u=g(()=>{var v;return(v=e[l.value])==null?void 0:v.data}),s=_t(()=>{var v;return((v=u.value)==null?void 0:v.map($e.instantiate))||[]},[]),i=g(()=>ie.flatMap(s.value,"totalContents"));return{corpusArray:s,corpusLines:i}}),Fa=(e,t)=>{const l=E(e.indexOf(j(t))||0),u=g(()=>e[l.value]);function s(){l.value=(l.value+1)%e.length}return function(){return s(),u.value}},Ha={class:"d-flex ga-1"},Ua=ce({__name:"ModeSwitcher",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=At(e,"modelValue"),l=Fa(Ye,t);function u(){t.value=l()}return(s,i)=>(A(),P("div",Ha,[(A(!0),P(U,null,Se(j(Ye),v=>(A(),ae(Le,{key:v,variant:v===t.value?"outlined":"text",class:"d-none d-sm-block",size:"small",onClick:r=>t.value=v},{default:le(()=>[xe(Ve(v)+" mode ",1)]),_:2},1032,["variant","onClick"]))),128)),t.value?(A(),ae(Le,{key:0,class:"d-sm-none",variant:"outlined",onClick:i[0]||(i[0]=v=>u())},{default:le(()=>[xe(Ve(t.value)+" mode ",1)]),_:1})):re("",!0)]))}}),gt=Symbol.for("vuetify:v-chip-group"),Ka=Z({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:Pt},...qa(),...Ce(),...It({selectedClass:"v-chip--selected"}),...rt(),...ut(),...ot({variant:"tonal"})},"VChipGroup");de()({name:"VChipGroup",props:Ka(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:l}=t;const{themeClasses:u}=it(e),{isSelected:s,select:i,next:v,prev:r,selected:o}=Et(e,gt);return Lt({VChip:{color:se(e,"color"),disabled:se(e,"disabled"),filter:se(e,"filter"),variant:se(e,"variant")}}),ye(()=>{const c=nt.filterProps(e);return d(nt,q(c,{class:["v-chip-group",{"v-chip-group--column":e.column},u.value,e.class],style:e.style}),{default:()=>{var b;return[(b=l.default)==null?void 0:b.call(l,{isSelected:s,select:i,next:v,prev:r,selected:o.value})]}})}),{}}});const za=Z({activeClass:String,appendAvatar:String,appendIcon:ke,closable:Boolean,closeIcon:{type:ke,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:ke,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:ze(),onClickOnce:ze(),...Jt(),...Ce(),...Xt(),...Qt(),...Wt(),...jt(),...Gt(),...zt(),...rt({tag:"span"}),...ut(),...ot({variant:"tonal"})},"VChip"),Ga=de()({name:"VChip",directives:{Ripple:Yt},props:za(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:l,emit:u,slots:s}=t;const{t:i}=ct(),{borderClasses:v}=Bt(e),{colorClasses:r,colorStyles:o,variantClasses:c}=Dt(e),{densityClasses:b}=Rt(e),{elevationClasses:x}=Nt(e),{roundedClasses:m}=Mt(e),{sizeClasses:y}=qt(e),{themeClasses:k}=it(e),V=we(e,"modelValue"),a=$t(e,gt,!1),f=Ot(e,l),p=g(()=>e.link!==!1&&f.isLink.value),w=g(()=>!e.disabled&&e.link!==!1&&(!!a||e.link||f.isClickable.value)),S=g(()=>({"aria-label":i(e.closeLabel),onClick(C){C.preventDefault(),C.stopPropagation(),V.value=!1,u("click:close",C)}}));function B(C){var K;u("click",C),w.value&&((K=f.navigate)==null||K.call(f,C),a==null||a.toggle())}function O(C){(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),B(C))}return()=>{const C=f.isLink.value?"a":e.tag,K=!!(e.appendIcon||e.appendAvatar),Q=!!(K||s.append),z=!!(s.close||e.closable),X=!!(s.filter||e.filter)&&a,ee=!!(e.prependIcon||e.prependAvatar),J=!!(ee||s.prepend),te=!a||a.isSelected.value;return V.value&&Ke(d(C,q({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":w.value,"v-chip--filter":X,"v-chip--pill":e.pill},k.value,v.value,te?r.value:void 0,b.value,x.value,m.value,y.value,c.value,a==null?void 0:a.selectedClass.value,e.class],style:[te?o.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:w.value?0:void 0,onClick:B,onKeydown:w.value&&!p.value&&O},f.linkProps),{default:()=>{var $;return[Ht(w.value,"v-chip"),X&&d(Ut,{key:"filter"},{default:()=>[Ke(d("div",{class:"v-chip__filter"},[s.filter?d(ue,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},s.filter):d(oe,{key:"filter-icon",icon:e.filterIcon},null)]),[[Kt,a.isSelected.value]])]}),J&&d("div",{key:"prepend",class:"v-chip__prepend"},[s.prepend?d(ue,{key:"prepend-defaults",disabled:!ee,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},s.prepend):d(U,null,[e.prependIcon&&d(oe,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&d(Be,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),d("div",{class:"v-chip__content","data-no-activator":""},[(($=s.default)==null?void 0:$.call(s,{isSelected:a==null?void 0:a.isSelected.value,selectedClass:a==null?void 0:a.selectedClass.value,select:a==null?void 0:a.select,toggle:a==null?void 0:a.toggle,value:a==null?void 0:a.value.value,disabled:e.disabled}))??e.text]),Q&&d("div",{key:"append",class:"v-chip__append"},[s.append?d(ue,{key:"append-defaults",disabled:!K,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},s.append):d(U,null,[e.appendIcon&&d(oe,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&d(Be,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),z&&d("button",q({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},S.value),[s.close?d(ue,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},s.close):d(oe,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Ft("ripple"),w.value&&e.ripple,null]])}}}),ja=Z({id:String,submenu:Boolean,...dt(Da({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:bt}}),["absolute"])},"VMenu"),Wa=de()({name:"VMenu",props:ja(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:l}=t;const u=we(e,"modelValue"),{scopeId:s}=Zt(),{isRtl:i}=ea(),v=ta(),r=g(()=>e.id||`v-menu-${v}`),o=E(),c=aa(lt,null),b=G(new Set);vt(lt,{register(){b.value.add(v)},unregister(){b.value.delete(v)},closeParents(a){setTimeout(()=>{var f;!b.value.size&&!e.persistent&&(a==null||(f=o.value)!=null&&f.contentEl&&!oa(a,o.value.contentEl))&&(u.value=!1,c==null||c.closeParents())},40)}}),la(()=>{c==null||c.unregister(),document.removeEventListener("focusin",x)}),na(()=>u.value=!1);async function x(a){var w,S,B;const f=a.relatedTarget,p=a.target;await Me(),u.value&&f!==p&&((w=o.value)!=null&&w.contentEl)&&((S=o.value)!=null&&S.globalTop)&&![document,o.value.contentEl].includes(p)&&!o.value.contentEl.contains(p)&&((B=Ge(o.value.contentEl)[0])==null||B.focus())}W(u,a=>{a?(c==null||c.register(),fe&&document.addEventListener("focusin",x,{once:!0})):(c==null||c.unregister(),fe&&document.removeEventListener("focusin",x))},{immediate:!0});function m(a){c==null||c.closeParents(a)}function y(a){var f,p,w,S,B;if(!e.disabled)if(a.key==="Tab"||a.key==="Enter"&&!e.closeOnContentClick){if(a.key==="Enter"&&(a.target instanceof HTMLTextAreaElement||a.target instanceof HTMLInputElement&&a.target.closest("form")))return;a.key==="Enter"&&a.preventDefault(),sa(Ge((f=o.value)==null?void 0:f.contentEl,!1),a.shiftKey?"prev":"next",C=>C.tabIndex>=0)||(u.value=!1,(w=(p=o.value)==null?void 0:p.activatorEl)==null||w.focus())}else e.submenu&&a.key===(i.value?"ArrowRight":"ArrowLeft")&&(u.value=!1,(B=(S=o.value)==null?void 0:S.activatorEl)==null||B.focus())}function k(a){var p;if(e.disabled)return;const f=(p=o.value)==null?void 0:p.contentEl;f&&u.value?a.key==="ArrowDown"?(a.preventDefault(),a.stopImmediatePropagation(),Ae(f,"next")):a.key==="ArrowUp"?(a.preventDefault(),a.stopImmediatePropagation(),Ae(f,"prev")):e.submenu&&(a.key===(i.value?"ArrowRight":"ArrowLeft")?u.value=!1:a.key===(i.value?"ArrowLeft":"ArrowRight")&&(a.preventDefault(),Ae(f,"first"))):(e.submenu?a.key===(i.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(a.key))&&(u.value=!0,a.preventDefault(),setTimeout(()=>setTimeout(()=>k(a))))}const V=g(()=>q({"aria-haspopup":"menu","aria-expanded":String(u.value),"aria-owns":r.value,onKeydown:k},e.activatorProps));return ye(()=>{const a=at.filterProps(e);return d(at,q({ref:o,id:r.value,class:["v-menu",e.class],style:e.style},a,{modelValue:u.value,"onUpdate:modelValue":f=>u.value=f,absolute:!0,activatorProps:V.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":m,onKeydown:y},s),{activator:l.activator,default:function(){for(var f=arguments.length,p=new Array(f),w=0;w<f;w++)p[w]=arguments[w];return d(ue,{root:"VMenu"},{default:()=>{var S;return[(S=l.default)==null?void 0:S.call(l,...p)]}})}})}),yt({id:r,ΨopenChildren:b},o)}}),Qa=Z({renderless:Boolean,...Ce()},"VVirtualScrollItem"),Xa=de()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Qa(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:l,emit:u,slots:s}=t;const{resizeRef:i,contentRect:v}=mt(void 0,"border");W(()=>{var r;return(r=v.value)==null?void 0:r.height},r=>{r!=null&&u("update:height",r)}),ye(()=>{var r,o;return e.renderless?d(U,null,[(r=s.default)==null?void 0:r.call(s,{itemRef:i})]):d("div",q({ref:i,class:["v-virtual-scroll__item",e.class],style:e.style},l),[(o=s.default)==null?void 0:o.call(s)])})}}),Ja=-1,Ya=1,Pe=100,Za=Z({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function el(e,t){const l=ua(),u=G(0);je(()=>{u.value=parseFloat(e.itemHeight||0)});const s=G(0),i=G(Math.ceil((parseInt(e.height)||l.height.value)/(u.value||16))||1),v=G(0),r=G(0),o=E(),c=E();let b=0;const{resizeRef:x,contentRect:m}=mt();je(()=>{x.value=o.value});const y=g(()=>{var n;return o.value===document.documentElement?l.height.value:((n=m.value)==null?void 0:n.height)||parseInt(e.height)||0}),k=g(()=>!!(o.value&&c.value&&y.value&&u.value));let V=Array.from({length:t.value.length}),a=Array.from({length:t.value.length});const f=G(0);let p=-1;function w(n){return V[n]||u.value}const S=ra(()=>{const n=performance.now();a[0]=0;const h=t.value.length;for(let _=1;_<=h-1;_++)a[_]=(a[_-1]||0)+w(_-1);f.value=Math.max(f.value,performance.now()-n)},f),B=W(k,n=>{n&&(B(),b=c.value.offsetTop,S.immediate(),$(),~p&&Me(()=>{fe&&window.requestAnimationFrame(()=>{be(p),p=-1})}))});ft(()=>{S.clear()});function O(n,h){const _=V[n],I=u.value;u.value=I?Math.min(u.value,h):h,(_!==h||I!==u.value)&&(V[n]=h,S())}function C(n){return n=Ie(n,0,t.value.length-1),a[n]||0}function K(n){return tl(a,n)}let Q=0,z=0,X=0;W(y,(n,h)=>{h&&($(),n<h&&requestAnimationFrame(()=>{z=0,$()}))});function ee(){if(!o.value||!c.value)return;const n=o.value.scrollTop,h=performance.now();h-X>500?(z=Math.sign(n-Q),b=c.value.offsetTop):z=n-Q,Q=n,X=h,$()}function J(){!o.value||!c.value||(z=0,X=0,$())}let te=-1;function $(){cancelAnimationFrame(te),te=requestAnimationFrame(Te)}function Te(){if(!o.value||!y.value)return;const n=Q-b,h=Math.sign(z),_=Math.max(0,n-Pe),I=Ie(K(_),0,t.value.length),F=n+y.value+Pe,T=Ie(K(F)+1,I+1,t.value.length);if((h!==Ja||I<s.value)&&(h!==Ya||T>i.value)){const L=C(s.value)-C(I),D=C(T)-C(i.value);Math.max(L,D)>Pe?(s.value=I,i.value=T):(I<=0&&(s.value=I),T>=t.value.length&&(i.value=T))}v.value=C(s.value),r.value=C(t.value.length)-C(i.value)}function be(n){const h=C(n);!o.value||n&&!h?p=n:o.value.scrollTop=h}const _e=g(()=>t.value.slice(s.value,i.value).map((n,h)=>({raw:n,index:h+s.value})));return W(t,()=>{V=Array.from({length:t.value.length}),a=Array.from({length:t.value.length}),S.immediate(),$()},{deep:!0}),{calculateVisibleItems:$,containerRef:o,markerRef:c,computedItems:_e,paddingTop:v,paddingBottom:r,scrollToIndex:be,handleScroll:ee,handleScrollend:J,handleItemResize:O}}function tl(e,t){let l=e.length-1,u=0,s=0,i=null,v=-1;if(e[l]<t)return l;for(;u<=l;)if(s=u+l>>1,i=e[s],i>t)l=s-1;else if(i<t)v=s,u=s+1;else return i===t?s:u;return v}const al=Z({items:{type:Array,default:()=>[]},renderless:Boolean,...Za(),...Ce(),...va()},"VVirtualScroll"),ll=de()({name:"VVirtualScroll",props:al(),setup(e,t){let{slots:l}=t;const u=ia("VVirtualScroll"),{dimensionStyles:s}=ca(e),{calculateVisibleItems:i,containerRef:v,markerRef:r,handleScroll:o,handleScrollend:c,handleItemResize:b,scrollToIndex:x,paddingTop:m,paddingBottom:y,computedItems:k}=el(e,se(e,"items"));return da(()=>e.renderless,()=>{function V(){var p,w;const f=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";v.value===document.documentElement?(document[f]("scroll",o,{passive:!0}),document[f]("scrollend",c)):((p=v.value)==null||p[f]("scroll",o,{passive:!0}),(w=v.value)==null||w[f]("scrollend",c))}he(()=>{v.value=Ra(u.vnode.el,!0),V(!0)}),ft(V)}),ye(()=>{const V=k.value.map(a=>d(Xa,{key:a.index,renderless:e.renderless,"onUpdate:height":f=>b(a.index,f)},{default:f=>{var p;return(p=l.default)==null?void 0:p.call(l,{item:a.raw,index:a.index,...f})}}));return e.renderless?d(U,null,[d("div",{ref:r,class:"v-virtual-scroll__spacer",style:{paddingTop:ge(m.value)}},null),V,d("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ge(y.value)}},null)]):d("div",{ref:v,class:["v-virtual-scroll",e.class],onScrollPassive:o,onScrollend:c,style:[s.value,e.style]},[d("div",{ref:r,class:"v-virtual-scroll__container",style:{paddingTop:ge(m.value),paddingBottom:ge(y.value)}},[V])])}),{calculateVisibleItems:i,scrollToIndex:x}}});function nl(e,t){const l=G(!1);let u;function s(r){cancelAnimationFrame(u),l.value=!0,u=requestAnimationFrame(()=>{u=requestAnimationFrame(()=>{l.value=!1})})}async function i(){await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>requestAnimationFrame(r)),await new Promise(r=>{if(l.value){const o=W(l,()=>{o(),r()})}else r()})}async function v(r){var b,x;if(r.key==="Tab"&&((b=t.value)==null||b.focus()),!["PageDown","PageUp","Home","End"].includes(r.key))return;const o=(x=e.value)==null?void 0:x.$el;if(!o)return;(r.key==="Home"||r.key==="End")&&o.scrollTo({top:r.key==="Home"?0:o.scrollHeight,behavior:"smooth"}),await i();const c=o.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(r.key==="PageDown"||r.key==="Home"){const m=o.getBoundingClientRect().top;for(const y of c)if(y.getBoundingClientRect().top>=m){y.focus();break}}else{const m=o.getBoundingClientRect().bottom;for(const y of[...c].reverse())if(y.getBoundingClientRect().bottom<=m){y.focus();break}}}return{onScrollPassive:s,onKeydown:v}}const sl=Z({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ke,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...ba({itemChildren:!1})},"Select"),ol=Z({...sl(),...dt(La({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ya({transition:{component:bt}})},"VSelect"),st=de()({name:"VSelect",props:ol(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:l}=t;const{t:u}=ct(),s=E(),i=E(),v=E(),r=we(e,"menu"),o=g({get:()=>r.value,set:n=>{var h;r.value&&!n&&((h=i.value)!=null&&h.ΨopenChildren.size)||(r.value=n)}}),{items:c,transformIn:b,transformOut:x}=ma(e),m=we(e,"modelValue",[],n=>b(n===null?[null]:fa(n)),n=>{const h=x(n);return e.multiple?h:h[0]??null}),y=g(()=>typeof e.counterValue=="function"?e.counterValue(m.value):typeof e.counterValue=="number"?e.counterValue:m.value.length),k=Ba(),V=g(()=>m.value.map(n=>n.value)),a=G(!1),f=g(()=>o.value?e.closeText:e.openText);let p="",w;const S=g(()=>e.hideSelected?c.value.filter(n=>!m.value.some(h=>e.valueComparator(h,n))):c.value),B=g(()=>e.hideNoData&&!S.value.length||e.readonly||(k==null?void 0:k.isReadonly.value)),O=g(()=>{var n;return{...e.menuProps,activatorProps:{...((n=e.menuProps)==null?void 0:n.activatorProps)||{},"aria-haspopup":"listbox"}}}),C=E(),K=nl(C,s);function Q(n){e.openOnClear&&(o.value=!0)}function z(){B.value||(o.value=!o.value)}function X(n){We(n)&&ee(n)}function ee(n){var F,T;if(!n.key||e.readonly||k!=null&&k.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(n.key)&&n.preventDefault(),["Enter","ArrowDown"," "].includes(n.key)&&(o.value=!0),["Escape","Tab"].includes(n.key)&&(o.value=!1),n.key==="Home"?(F=C.value)==null||F.focus("first"):n.key==="End"&&((T=C.value)==null||T.focus("last"));const h=1e3;if(e.multiple||!We(n))return;const _=performance.now();_-w>h&&(p=""),p+=n.key.toLowerCase(),w=_;const I=c.value.find(L=>L.title.toLowerCase().startsWith(p));if(I!==void 0){m.value=[I];const L=S.value.indexOf(I);fe&&window.requestAnimationFrame(()=>{var D;L>=0&&((D=v.value)==null||D.scrollToIndex(L))})}}function J(n){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!n.props.disabled)if(e.multiple){const _=m.value.findIndex(F=>e.valueComparator(F.value,n.value)),I=h??!~_;if(~_){const F=I?[...m.value,n]:[...m.value];F.splice(_,1),m.value=F}else I&&(m.value=[...m.value,n])}else{const _=h!==!1;m.value=_?[n]:[],Me(()=>{o.value=!1})}}function te(n){var h;(h=C.value)!=null&&h.$el.contains(n.relatedTarget)||(o.value=!1)}function $(){var n;e.eager&&((n=v.value)==null||n.calculateVisibleItems())}function Te(){var n;a.value&&((n=s.value)==null||n.focus())}function be(n){a.value=!0}function _e(n){if(n==null)m.value=[];else if(Xe(s.value,":autofill")||Xe(s.value,":-webkit-autofill")){const h=c.value.find(_=>_.title===n);h&&J(h)}else s.value&&(s.value.value="")}return W(o,()=>{if(!e.hideSelected&&o.value&&m.value.length){const n=S.value.findIndex(h=>m.value.some(_=>e.valueComparator(_.value,h.value)));fe&&window.requestAnimationFrame(()=>{var h;n>=0&&((h=v.value)==null||h.scrollToIndex(n))})}}),W(()=>e.items,(n,h)=>{o.value||a.value&&!h.length&&n.length&&(o.value=!0)}),ye(()=>{const n=!!(e.chips||l.chip),h=!!(!e.hideNoData||S.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),_=m.value.length>0,I=Re.filterProps(e),F=_||!a.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return d(Re,q({ref:s},I,{modelValue:m.value.map(T=>T.props.value).join(", "),"onUpdate:modelValue":_e,focused:a.value,"onUpdate:focused":T=>a.value=T,validationValue:m.externalValue,counterValue:y.value,dirty:_,class:["v-select",{"v-select--active-menu":o.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":m.value.length,"v-select--selection-slot":!!l.selection},e.class],style:e.style,inputmode:"none",placeholder:F,"onClick:clear":Q,"onMousedown:control":z,onBlur:te,onKeydown:ee,"aria-label":u(f.value),title:u(f.value)}),{...l,default:()=>d(U,null,[d(Wa,q({ref:i,modelValue:o.value,"onUpdate:modelValue":T=>o.value=T,activator:"parent",contentClass:"v-select__content",disabled:B.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:$,onAfterLeave:Te},O.value),{default:()=>[h&&d(ha,q({ref:C,selected:V.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:T=>T.preventDefault(),onKeydown:X,onFocusin:be,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},K,e.listProps),{default:()=>{var T,L,D;return[(T=l["prepend-item"])==null?void 0:T.call(l),!S.value.length&&!e.hideNoData&&(((L=l["no-data"])==null?void 0:L.call(l))??d(Qe,{title:u(e.noDataText)},null)),d(ll,{ref:v,renderless:!0,items:S.value},{default:Y=>{var Ue;let{item:H,index:ne,itemRef:N}=Y;const He=q(H.props,{ref:N,key:ne,onClick:()=>J(H,null)});return((Ue=l.item)==null?void 0:Ue.call(l,{item:H,index:ne,props:He}))??d(Qe,q(He,{role:"option"}),{prepend:xt=>{let{isSelected:Vt}=xt;return d(U,null,[e.multiple&&!e.hideSelected?d(Ma,{key:H.value,modelValue:Vt,ripple:!1,tabindex:"-1"},null):void 0,H.props.prependAvatar&&d(Be,{image:H.props.prependAvatar},null),H.props.prependIcon&&d(oe,{icon:H.props.prependIcon},null)])}})}}),(D=l["append-item"])==null?void 0:D.call(l)]}})]}),m.value.map((T,L)=>{function D(N){N.stopPropagation(),N.preventDefault(),J(T,!1)}const Y={"onClick:close":D,onKeydown(N){N.key!=="Enter"&&N.key!==" "||(N.preventDefault(),N.stopPropagation(),D(N))},onMousedown(N){N.preventDefault(),N.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},H=n?!!l.chip:!!l.selection,ne=H?pa(n?l.chip({item:T,index:L,props:Y}):l.selection({item:T,index:L})):void 0;if(!(H&&!ne))return d("div",{key:T.value,class:"v-select__selection"},[n?l.chip?d(ue,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:T.title}}},{default:()=>[ne]}):d(Ga,q({key:"chip",closable:e.closableChips,size:"small",text:T.title,disabled:T.props.disabled},Y),null):ne??d("span",{class:"v-select__selection-text"},[T.title,e.multiple&&L<m.value.length-1&&d("span",{class:"v-select__selection-comma"},[xe(",")])])])})]),"append-inner":function(){var Y;for(var T=arguments.length,L=new Array(T),D=0;D<T;D++)L[D]=arguments[D];return d(U,null,[(Y=l["append-inner"])==null?void 0:Y.call(l,...L),e.menuIcon?d(oe,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),yt({isFocused:a,menu:o,select:J},s)}}),ul={class:"browse-selects"},rl={class:"selects mt-5 mb-8"},il={class:"no-data-placeholder mr-5"},cl=ce({__name:"Browse",props:{corpusArr:{default:()=>[]},volumeLabel:{default:"Volume"},textLabel:{default:"Text"}},emits:["chosen"],setup(e,{emit:t}){const l={get chosen(){return{volume:"",text:""}}},u=t,s=pe("volume"),i=pe("text");s.value&&b(),i.value&&c(),he(c),ht(()=>{s.value=null,i.value=null});const v=g(()=>{if(s.value)return e.corpusArr.find(({volumeName:x})=>x===s.value)}),r=g(()=>v.value?v.value.texts:[]);function o(x,m){m==="volume"?(i.value=null,b()):c()}function c(){u("chosen",{volume:s.value,text:i.value})}function b(){u("chosen",l.chosen)}return(x,m)=>(A(),P("div",ul,[R("div",rl,[d(st,{modelValue:j(s),"onUpdate:modelValue":[m[0]||(m[0]=y=>De(s)?s.value=y:null),m[1]||(m[1]=y=>o(y,"volume"))],items:x.corpusArr,label:x.volumeLabel,"item-title":"volumeName","item-value":"volumeName",variant:"outlined",density:"compact"},null,8,["modelValue","items","label"]),d(st,{modelValue:j(i),"onUpdate:modelValue":[m[2]||(m[2]=y=>De(i)?i.value=y:null),m[3]||(m[3]=y=>o(y,"text"))],items:r.value,label:x.textLabel,"item-title":"textName","item-value":"textNumber",variant:"outlined",density:"compact"},{"no-data":le(()=>[m[4]||(m[4]=R("span",{class:"no-data-arrow"},"⬅",-1)),R("span",il,Ve(`A ${x.volumeLabel} should be chosen`),1)]),_:1},8,["modelValue","items","label"])])]))}}),dl=ve(cl,[["__scopeId","data-v-0b260389"]]),vl={},ml={height:"3em",viewBox:"0 0 24 24",width:"3em",xmlns:"http://www.w3.org/2000/svg"};function fl(e,t){return A(),P("svg",ml,t[0]||(t[0]=[R("path",{d:"M3 20q-.825 0-1.412-.587T1 18V6q0-.825.588-1.412T3 4h18q.825 0 1.413.588T23 6v12q0 .825-.587 1.413T21 20zm0-2h18V6H3zm6-1h6q.425 0 .713-.288T16 16t-.288-.712T15 15H9q-.425 0-.712.288T8 16t.288.713T9 17m-6 1V6zm3-8q.425 0 .713-.288T7 9t-.288-.712T6 8t-.712.288T5 9t.288.713T6 10m4 0q.425 0 .713-.288T11 9t-.288-.712T10 8t-.712.288T9 9t.288.713T10 10m4 0q.425 0 .713-.288T15 9t-.288-.712T14 8t-.712.288T13 9t.288.713T14 10m4 0q.425 0 .713-.288T19 9t-.288-.712T18 8t-.712.288T17 9t.288.713T18 10M6 13.5q.425 0 .713-.288T7 12.5t-.288-.712T6 11.5t-.712.288T5 12.5t.288.713T6 13.5m4 0q.425 0 .713-.288T11 12.5t-.288-.712T10 11.5t-.712.288T9 12.5t.288.713t.712.287m4 0q.425 0 .713-.288T15 12.5t-.288-.712T14 11.5t-.712.288T13 12.5t.288.713t.712.287m4 0q.425 0 .713-.288T19 12.5t-.288-.712T18 11.5t-.712.288T17 12.5t.288.713t.712.287",fill:"lightGrey"},null,-1)]))}const hl=ve(vl,[["render",fl],["__scopeId","data-v-c2634224"]]),pl={class:"d-flex align-center flex-column"},yl={class:"searchers"},bl={class:"d-flex ga-3"},gl={class:"d-flex flex-column flex-md-row ga-2"},kl=ce({__name:"Search",props:{textusLabel:{default:"Search corpus"},versioLabel:{default:"Search translation"}},emits:["searchers","copy-to-clipboard"],setup(e,{emit:t}){const l=e,u={get searchers(){return{textus:null,versio:null}}},s=t,i=E(u.searchers),v=E(u.searchers),r=E(!1),o=E(null),c=pe("textus"),b=pe("versio");i.value.textus=c.value,i.value.versio=b.value;const x=g(()=>!i.value.textus&&!i.value.versio),m=g(()=>[{name:"textus",value:i.value.textus,label:l.textusLabel},{name:"versio",value:i.value.versio,label:l.versioLabel}]);he(V);function y(f,p){i.value[p]=f||"",f||V()}function k(f){i.value.textus=f,r.value&&V()}function V(){v.value=ie.cloneDeep(i.value),s("searchers",ie.cloneDeep(v.value)),a()}function a(){c.value=v.value.textus||null,b.value=v.value.versio||null}return he(()=>{i.value.textus=c.value,i.value.versio=b.value,(i.value.textus||i.value.versio)&&V(),o.value=document.querySelector(".searchers .v-text-field.input_textus input")}),ht(()=>{c.value=null,b.value=null}),(f,p)=>{const w=hl;return A(),P("div",pl,[R("div",yl,[R("div",null,[R("div",bl,[d(w,{class:"keyboard-icon",onClick:p[0]||(p[0]=S=>r.value=!0)}),d(Le,{disabled:x.value,variant:"outlined",class:"search-btn",onClick:V},{default:le(()=>p[3]||(p[3]=[xe(" Search ")])),_:1},8,["disabled"])]),d(Ze,{value:m.value[0].value,"input-el":o.value,type:"regex",visible:"",onSubmit:k},null,8,["value","input-el"])]),R("div",gl,[(A(!0),P(U,null,Se(m.value,({value:S,label:B,name:O})=>(A(),ae(Re,{key:O,"model-value":S,label:B,class:qe(`input_${O}`),style:{"min-width":"200px"},variant:"outlined",density:"compact","hide-details":"",clearable:"","onUpdate:modelValue":C=>y(C,O),onKeydown:ga(ka(V,["prevent"]),["enter"])},null,8,["model-value","label","class","onUpdate:modelValue","onKeydown"]))),128))])]),d(Na,{modelValue:r.value,"onUpdate:modelValue":p[2]||(p[2]=S=>r.value=S),"hide-overlay":"",fullscreen:""},{default:le(()=>[d(Ze,{visible:r.value,value:i.value.textus,"input-name":e.textusLabel,"onUpdate:visible":p[1]||(p[1]=S=>r.value=S),onSubmit:k},null,8,["visible","value","input-name"])]),_:1},8,["modelValue"])])}}}),xl=ve(kl,[["__scopeId","data-v-ad131bff"]]),kt=300;function Ee({hash:e="",keepLocation:t=!1,className:l="chosen"}){return new Promise(u=>{setTimeout(()=>{t||(location.hash=e,setTimeout(()=>scrollBy(0,-200),0));const s=document.querySelector(e);s&&(s.classList.add(l),setTimeout(u,1))},kt)})}function Vl(e){const t=document.querySelector(e);t&&Ne(t)}function Ne(e,t="chosen"){e&&setTimeout(()=>{e.classList.remove(t)},kt)}const wl=["id"],Sl={class:"controls-wrapper"},Cl={class:"lines"},Tl=ce({__name:"LineCard",props:{line:{},searchers:{}},setup(e){const t=e,l=E(),u=pt(),s=xa(),i=g(()=>Ta.map(y=>({lineName:y,str:t.line[y],searcher:t.searchers.data[y]}))),v=g(()=>!t.searchers.areAllEmpty),r=g(()=>u.hash),o=g(()=>"#"+t.line.hash),c=g(()=>{var V;const y=((V=t.line)==null?void 0:V.volumeName.toLowerCase())||"";return y.includes("abou")?"":["jastrow","ritter","arnold","lehrbuch","luf","prym","hors","talay","baxa","ubbadin","maalula","lieder","britta"].some(a=>y.includes(a))?"German":""});function b(){Ne(l.value,"chosen")}W(r,(y,k)=>{!y&&k&&b()});async function x(){if(!v.value)return;const{volumeName:y,textNumber:k}=t.line;await s.push({query:{mode:me.browse,volume:y,text:k}}),await Ee({hash:o.value})}function m(){if(!u.hash){Ee({hash:o.value});return}Vl(u.hash),u.hash===o.value?s.replace({query:u.query,hash:""}):(Ee({hash:o.value,keepLocation:!0}),s.replace({query:u.query,hash:o.value}));const y=Array.from(document.querySelectorAll('div.line-card[id^="h"]'));for(const k of y)k.style.background&&k.id!==t.line.hash&&Ne(k)}return(y,k)=>y.line?(A(),P("div",{key:0,class:"line-card",id:y.line.hash,ref_key:"lineCardRef",ref:l},[R("div",Sl,[v.value?(A(),P("div",{key:1,class:"control-sign",onClick:k[1]||(k[1]=V=>x())},"▤")):(A(),P("div",{key:0,class:"control-sign",onClick:k[0]||(k[0]=V=>m())},"#"))]),R("div",Cl,[(A(!0),P(U,null,Se(i.value,(V,a)=>(A(),ae(_a,q({ref_for:!0},V,{key:a,"translation-language":V.lineName==="versio"&&c.value,class:"mb-1"}),null,16,["translation-language"]))),128)),k[2]||(k[2]=R("div",null,[R("br")],-1))])],8,wl)):re("",!0)}}),_l=ve(Tl,[["__scopeId","data-v-7742c643"]]),Al={key:1},Il=ce({__name:"Results",props:{results:{},searchers:{}},setup(e){const t=window,l=E(),u=pt(),s=Va(),i=se(s,"isDark"),v=g(()=>!e.searchers.areAllEmpty);return he(async()=>{var o;const r=u.hash;r&&(await Aa(1e3),(o=document.querySelector(r))==null||o.scrollIntoView({behavior:"smooth",block:"center"}))}),(r,o)=>{const c=Ia;return A(),P("div",{class:qe(["results w-100",{invert:i.value}])},[v.value?(A(),P("div",{key:0,ref_key:"stats",ref:l,class:"results-stats mb-1"},[R("div",null,"Found "+Ve(r.results.length)+" contexts",1)],512)):re("",!0),o[0]||(o[0]=R("br",null,null,-1)),r.results?(A(),P("div",Al,[d(c,{items:r.results,el:j(t)},{default:le(({items:b})=>[(A(!0),P(U,null,Se(b,x=>(A(),P("div",null,[x?(A(),ae(_l,{line:x,searchers:r.searchers,key:x.hash},null,8,["line","searchers"])):re("",!0)]))),256))]),_:1},8,["items","el"])])):re("",!0)],2)}}}),Pl=ve(Il,[["__scopeId","data-v-025f8b33"]]),El={key:0,class:"searcher-wrapper"},Ll=ce({__name:"BrowseAndSearch",setup(e){const t=Oa(),l=wa(),u=g(()=>!!l.text.value),s=g(()=>c.value===me.search),i=g(()=>c.value===me.browse),v=g(()=>s.value?b.value:o.searchers),r=E(!1);vt(Pa.isEager,r);const o={get searchers(){return new et({textus:"",versio:""})}},c=pe("mode");c.value||(c.value=me.search);const b=E(o.searchers),x=E({volume:null,text:null}),m=g(()=>{if(!x.value.text||!t.corpusArray.length)return[];const p=ie.find(t.corpusArray,{volumeName:x.value.volume});return ie.find(p.texts,{textNumber:x.value.text}).contents}),y=g(()=>t.corpusLines),k=g(()=>b.value.areAllEmpty?[]:y.value.filter(b.value.test)),V=g(()=>c.value===me.browse?m.value:k.value);function a(p){b.value=new et(p)}function f(p){x.value=p}return(p,w)=>(A(),P("div",{class:qe([{"no-hashes":u.value},"browse-and-search"]),ref:"wrapper"},[s.value?(A(),P("div",El,[d($a,{count:V.value.length,class:"mr-5",onClick:w[0]||(w[0]=S=>r.value=!0)},null,8,["count"]),d(xl,{"corpus-arr-prop":j(t).corpusArray,"textus-label":"Aramaic text","versio-label":"Translation text",onSearchers:a},null,8,["corpus-arr-prop"])])):i.value?(A(),ae(dl,{key:1,"corpus-arr":j(t).corpusArray,onChosen:f},null,8,["corpus-arr"])):re("",!0),d(Pl,{results:V.value,searchers:v.value},null,8,["results","searchers"]),(A(),ae(j(Sa),{to:"#app-bar-slot",key:p.isVisible},{default:le(()=>[d(Ua,{modelValue:j(c),"onUpdate:modelValue":w[1]||(w[1]=S=>De(c)?c.value=S:null),class:"mr-5 button-switcher"},null,8,["modelValue"])]),_:1}))],2))}}),Gl=ve(Ll,[["__scopeId","data-v-923cbf9c"]]);export{Gl as B};
