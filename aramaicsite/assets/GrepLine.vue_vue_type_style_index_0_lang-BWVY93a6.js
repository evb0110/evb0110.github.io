var Z=Object.defineProperty;var _=(e,t,n)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var I=(e,t,n)=>_(e,typeof t!="symbol"?t+"":t,n);import{E as N,c as p,bA as ee,b as X,af as H,t as J,r as w,w as O,aX as te,o as r,f as d,n as $,D as P,A as ae,p as y,F as z,i as M,g as V,h as x,j as C,k as R,ag as h,V as B,m as U,_ as se}from"./index-CzBZoTs2.js";import{V as le}from"./VTextField-DfbEJcNb.js";import{b as ne}from"./betterSplit-CW8NIeFU.js";var T=(e=>(e.title="title",e.textus="textus",e.versio="versio",e))(T||{});const Re=["title","textus","versio"];var ue=(e=>(e.search="search",e.browse="browse",e))(ue||{});const Te=["search","browse"],re="(?:a|e|i|iͧ|o|u|ä|å|ë|ö|ü|á|á̧|â|ä|å|é|ê|ë|í|î|ó|ô|ö|ú|û|ü|ā|ā́|ă|ą̂|ē|ĕ|ī|ı|ō|ŏ|ū|ŭ|ŭ́|ə|ə́|и|о|ю|ạ|ạ|ạ́|ậ|ắ|ẹ|ọ|ộ|ụ|ụ̂|а|о|у|э|ы|и|ь)",oe="(?:b|b́|c|c̄|d|f|f̣|g|h|j|k|k̇|l|m|n|n̄|p|p̄|p̣|q|q̣|r|r̄|r̄̄|s|s̄|t|t́|v|w|x|y|z|z̄|ç|ć|č|ğ|ġ|ģ|ķ|ń|ň|ŕ|ś|ŝ|ş|ş́|ş̇|š|ţ|ž|ǧ|ǧ̣|Ɂ|ɧ|ʔ|ʕ|ʕ́|ʕ̣|ʾ|ʿ|б|в|й|к|п|р|с|т|х|ҫ|ҫ́|ҫ̂|ҫ̄|ع|ḅ|ḇ|ḉ|ḍ|ḏ|ḏ̣|ḏ̣̣|ḥ|ḳ|ḳ̇|ḷ|ṃ|ṅ|ṇ|ṗ|ṛ|ṝ|ṡ|ṣ|ṫ|ṭ|ṯ|ẓ|ẖ|ﻉ)",ie=new RegExp("[\\\\]v","gi"),ce=new RegExp("[\\\\]c","gi"),ve=N.memoize(function(t){return t.replace(ie,re).replace(ce,oe)});class D{constructor(t){I(this,"_value");this._value=t||""}get value(){return this._value}set value(t){this._value=t||""}get valueNormalized(){return ve(this.value)}get isEmpty(){return!this.value}get regex(){return RegExp(this.valueNormalized,"iu")}static instantiate(t){return new D(t)}}class Ae{constructor(t){I(this,"data");this.data=N.mapValues(t,D.instantiate)}get searchersArr(){return N.values(this.data)}get areAllEmpty(){return this.searchersArr.every(t=>t.isEmpty)}get test(){return t=>N.keys(this.data).every(n=>this.data[n].regex.test(t[n]))}}var A=(e=>(e.turoyo="turoyo",e.urmi="urmi",e.maalula="maalula",e))(A||{});const de=()=>{const e=ee();return p(()=>e.path.split("/")[1])};function me(e){return new Promise(t=>setTimeout(t,e))}const fe="a á ä ā b ḅ c č ç d ḍ ḏ ḏ̣ e é ē ə f g ǧ ġ ģ h ḥ i í î ī ı j k ḳ l m ṃ ň ṇ o ó ö p q r ṛ s š ṡ ş ṣ t ţ ṭ ṯ u ú ü ụ v w x y z ž ʔ ʕ",pe=fe.split(/\s+/),ge="a ä b ʙ c č ç d e ǝ ə f g Ģ h i I ı j k l m n o ö p q r s ş ṣ ș t ţ ṭ ț u ü v w x y z ž ƶ а ә б в г д е ж з и й к л м н о п р с т у ф х һ ц ч ш щ ъ ы ь э ю я",ye=ge.split(/\s+/),he="ʔ ʕ a á ā b c ć č d ḍ ḏ ḏ̣ e é ē ə f g ǧ ġ h ḥ i í ī k ḳ l ḷ m n o ō p r s š ṣ t ṭ ṯ u ú ū w x y z ž ẓ",ke=he.split(/\s+/),be={[A.turoyo]:pe,[A.urmi]:ye,[A.maalula]:ke},we=()=>{const e=de();return p(()=>be[e.value])},xe={class:"working-block"},Ce={class:"keyboard specific-keys"},Be={class:"keyboard common-keys"},Ee={key:1,class:"submit-wrapper"},Se=X({__name:"Keyboard",props:{value:{default:""},inputName:{default:""},visible:{type:Boolean,default:!1},type:{default:"full"},inputEl:{default:null}},emits:["submit","update:visible"],setup(e,{emit:t}){const n=t,K=H(),k=J(K,"isDark"),m=w(0),f=w(0),E=w(null),c=w(e.value),j=[String.raw`\v`,String.raw`\c`,"^","$","\\"],S=["⬅","space","del","backspace","⮕"],b=we(),u=w(null);O(()=>{u.value=E.value||e.inputEl},{flush:"sync"}),O(()=>{c.value=e.value});function Q(l){c.value=l,G()}function F(){n("update:visible",!1)}function L(){n("submit",c.value),F()}function G(){var l,a;m.value=((l=u.value)==null?void 0:l.selectionStart)||0,f.value=((a=u.value)==null?void 0:a.selectionEnd)||0}async function W(){await me(20),G()}function q(l){if(!u.value)return;const a=c.value;m.value=u.value.selectionStart||0,f.value=u.value.selectionEnd||0;const{buttonValueMod:s,selectionStartMod:o,selectionEndMod:i}=Y({buttonValue:l,selectionStart:m.value,selectionEnd:f.value,existingValue:a});u.value.value=a.slice(0,o)+s+a.slice(i,a.length),c.value=u.value.value,u.value.focus(),m.value=u.value.selectionStart=o+s.length,f.value=u.value.selectionEnd=o+s.length,e.type==="regex"&&n("submit",c.value)}te(()=>{E.value=document.querySelector(".keyboard-wrapper .v-text-field input"),m.value=f.value=e.value.length});function Y({buttonValue:l,selectionStart:a,selectionEnd:s,existingValue:o}){let i,v=a,g=s;return l==="backspace"?(a>0&&a===s&&(v=a-1),i=""):l==="del"?(a<o.length&&a===s&&(g=s+1),i=""):l==="space"?i=" ":l==="⬅"?(a<s?g=a:(v=Math.max(0,a-1),g=v),i=""):l==="⮕"?(a<s?v=s:(v=Math.min(o.length,a+1),g=v),i=""):(i=l,v=a,g=s),{buttonValueMod:i,selectionStartMod:v,selectionEndMod:g}}return(l,a)=>l.visible?(r(),d("div",{key:0,class:h([{full:l.type==="full",regex:l.type==="regex"},"keyboard-wrapper"])},[$("div",xe,[l.type==="full"?(r(),P(le,{key:0,label:l.inputName,"model-value":c.value,class:"input",density:"compact",variant:"outlined",clearable:"",onFocus:W,"onUpdate:modelValue":Q,onKeyup:ae(L,["enter","native"])},null,8,["label","model-value"])):y("",!0),$("div",Ce,[j?(r(),d(z,{key:0},M(j,s=>V(B,{key:s,color:"warning",variant:"outlined",class:h({invert:k.value}),rounded:"",onClick:o=>q(s)},{default:x(()=>[C(R(s),1)]),_:2},1032,["class","onClick"])),64)):y("",!0),U(b)&&l.type==="full"?(r(!0),d(z,{key:1},M(U(b),s=>(r(),P(B,{key:s,variant:"outlined",rounded:"",onClick:o=>q(s)},{default:x(()=>[C(R(s),1)]),_:2},1032,["onClick"]))),128)):y("",!0)]),$("div",Be,[S&&l.type==="full"?(r(),d(z,{key:0},M(S,s=>V(B,{key:s,class:h({invert:k.value}),color:"teal",rounded:"",size:"large",variant:"outlined",onClick:o=>q(s)},{default:x(()=>[C(R(s),1)]),_:2},1032,["class","onClick"])),64)):y("",!0)]),l.type==="full"?(r(),d("div",Ee,[V(B,{class:"mr-5",variant:"outlined",onClick:F},{default:x(()=>a[0]||(a[0]=[C(" Cancel ")])),_:1}),V(B,{color:"primary",variant:"outlined",class:h({invert:k.value}),onClick:L},{default:x(()=>a[1]||(a[1]=[C(" Search ")])),_:1},8,["class"])])):y("",!0)])],2)):y("",!0)}}),De=se(Se,[["__scopeId","data-v-e7e93995"]]),Ke=X({__name:"GrepLine",props:{str:{default:""},searcher:{default:()=>new D},lineName:{default:""}},setup(e){const t=H(),n=J(t,"isDark"),K=p(()=>!e.searcher||e.searcher.isEmpty?[e.str]:ne(e.str,e.searcher.regex)),k=p(()=>e.lineName===T.title),m=p(()=>!e.lineName||e.lineName===T.textus),f=p(()=>e.lineName===T.versio),E=p(()=>({"line-title":k.value,textus:m.value,versio:f.value}));return(c,j)=>(r(),d("div",{class:h(E.value)},[(r(!0),d(z,null,M(K.value,(S,b)=>(r(),d("span",{key:b,class:h({highlight:b%2,invert:n.value})},R(S),3))),128))],2))}});export{Te as D,De as K,A as L,Ae as S,Ke as _,Re as a,ue as b,D as c,me as s,de as u};
