import{E as y,aH as L,c as m,d as $,a as x,r as k,b as D,e as N,o as u,f as c,k as v,g as p,B as I,h as V,p as F,V as J,F as C,_ as K,l as B,m as S,D as R,n as U}from"./index-CSO_HsTE.js";import{c as E,L as b,u as O,K as T,b as j,a as H,_ as P}from"./GrepLine.vue_vue_type_style_index_0_lang-C-qug5Xq.js";import{a as Q}from"./axios-CCb-kr4I.js";import{a as _}from"./assets-D_6YDweb.js";import{V as W}from"./VTextField-QQaoy0J4.js";import{_ as q}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-DuUdaMnf.js";function z(i){return i.split(`======
`).map(s=>s.split(`
`)).map(s=>({title:y.head(s),lines:y.tail(s)}))}const A=()=>{const i=L("search",""),t=m(()=>new E(i.value));return{searcherString:i,searcher:t}},G={[b.turoyo]:_.turoyoCorpusJson.link,[b.urmi]:_.urmiCorpusJson.link,[b.maalula]:_.maalulaDictsJson.link},X=$("simpleCorpusStore",()=>{const i=x({}),t=x({}),e=k(),{language:s}=O(),d=m(()=>G[s.value]),{searcherString:r,searcher:o}=A(),f=m(()=>{const a=[];if(!e.value)return a;for(const h of e.value){const{title:w,lines:g}=h;for(const M of g)a.push({title:w,line:M})}return a}),l=m(()=>r.value?f.value.reduce((a,h)=>{const g=o.value.regex.test(h.line)?[h]:[];return[...a,...g]},[]):[]);async function n(){const a=await Q.get(d.value);e.value=z(a.data)}return{corporaObj:i,searcherStringsObj:t,searcher:o,searcherString:r,matchingLines:l,initCorpusData:n}}),Y={class:"searcher align-center flex-column"},Z={class:"searchers d-flex"},ee={class:"input-wrapper"},se=D({__name:"Searcher",setup(i){const t=X(),e=k(""),s=k(!1),d=[l=>!!l||"Search string should not be empty"],r=m({get:()=>e.value,set:l=>{e.value=y.isString(l)?l:"",e.value||o()}}),o=()=>{t.searcherString=r.value},f=l=>{r.value=l,o()};return N(()=>t.searcherString,l=>{e.value=l},{immediate:!0}),(l,n)=>(u(),c(C,null,[v("div",Y,[v("div",Z,[p(T,{onClick:n[0]||(n[0]=a=>s.value=!0)}),v("div",ee,[p(W,{modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=a=>r.value=a),rules:d,autocomplete:"off",label:"Search string",color:"primary",variant:"outlined",density:"compact",clearable:"",onKeyup:I(o,["enter"])},null,8,["modelValue"])]),p(J,{ref:"search_btn",disabled:!r.value,variant:"outlined",onClick:o},{default:V(()=>n[4]||(n[4]=[F(" Search ")])),_:1},8,["disabled"])])]),p(H,{modelValue:s.value,"onUpdate:modelValue":n[3]||(n[3]=a=>s.value=a),"hide-overlay":"",fullscreen:""},{default:V(()=>[p(j,{visible:s.value,value:r.value,"input-name":"Search string",onSubmit:f,"onUpdate:visible":n[2]||(n[2]=a=>s.value=a)},null,8,["visible","value"])]),_:1},8,["modelValue"])],64))}}),pe=K(se,[["__scopeId","data-v-3b109e14"]]),ae={key:0,class:"results-stats"},te={key:0,style:{color:"blueviolet"}},re=D({__name:"SearchResults",props:{linesMatching:{},searcher:{}},setup(i){return(t,e)=>(u(),c(C,null,[t.searcher.value?(u(),c("div",ae," Number of lines in output: "+B(t.linesMatching.length),1)):S("",!0),e[1]||(e[1]=v("br",null,null,-1)),t.linesMatching?(u(),R(q,{key:1,items:t.linesMatching,class:"search-results-box results"},{default:V(({items:s})=>[(u(!0),c(C,null,U(s,({line:d,title:r},o)=>(u(),c("div",{key:o,class:"lines"},[r?(u(),c("div",te,B(r),1)):S("",!0),p(P,{str:d,searcher:t.searcher},null,8,["str","searcher"]),e[0]||(e[0]=v("br",null,null,-1))]))),128))]),_:1},8,["items"])):S("",!0)],64))}}),de=K(re,[["__scopeId","data-v-a23d703e"]]);export{pe as S,de as a,X as b,A as u};
