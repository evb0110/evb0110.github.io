import{y as _,r as h,c1 as i,s as x,c2 as C,b0 as T,aa as E,I as g,b as R,t as b,c as w,R as A,o as M,f as k,g as y,h as v,av as N,j as S,V,_ as j}from"./index-CdId13z1.js";import{s as B}from"./GrepLine-CrRVRYTz.js";import{V as O}from"./VTooltip-DDW8A1jk.js";function L(t){const o=document.createElement("div");o.contentEditable="true",o.style.position="absolute",o.style.left="-9999px",document.body.appendChild(o),o.innerHTML=t;const s=document.createRange();s.selectNodeContents(o);const e=getSelection();e==null||e.removeAllRanges(),e==null||e.addRange(s),document.execCommand("copy"),document.body.removeChild(o),e==null||e.removeAllRanges()}function P(t){const o=_.map(t,"outerHTML").join("");L(o)}const $=()=>{const t=h(!1);return{loading:t,do:o};async function o(s){if(s>500){i.warning(`Too many results to copy!
Please narrow down your search.`),t.value=!1;return}t.value=!0,await B(100);const a=document.querySelector(".results .results-stats"),c=Array.from(document.querySelectorAll(".results .lines"));try{P([a,...c]),i.success("Search results successfully copied to clipboard!")}catch(r){i.error((r==null?void 0:r.message)||"Something went wrong â€” nothing copied!")}t.value=!1}};function I(t,o){const s=typeof t=="string"?x(t):t,e=q(s,o);return{mounted:e,updated:e,unmounted(a){C(null,a)}}}function q(t,o){return function(s,e,a){var p,f,m;const c=typeof o=="function"?o(e):o,r=((p=e.value)==null?void 0:p.text)??e.value??(c==null?void 0:c.text),l=T(e.value)?e.value:{},n=()=>r??s.textContent,u=(a.ctx===e.instance.$?(f=D(a,e.instance.$))==null?void 0:f.provides:(m=a.ctx)==null?void 0:m.provides)??e.instance.$.provides,d=E(t,g(c,l),n);d.appContext=Object.assign(Object.create(null),e.instance.$.appContext,{provides:u}),C(d,s)}}function D(t,o){const s=new Set,e=c=>{var r,l;for(const n of c){if(!n)continue;if(n===t||n.el&&t.el&&n.el===t.el)return!0;s.add(n);let u;if(n.suspense?u=e([n.ssContent]):Array.isArray(n.children)?u=e(n.children):(r=n.component)!=null&&r.vnode&&(u=e([(l=n.component)==null?void 0:l.subTree])),u)return u;s.delete(n)}return!1};if(!e([o.subTree]))return o;const a=Array.from(s).reverse();for(const c of a)if(c.component)return c.component;return o}const F=I(O,t=>{var o;return{activator:"parent",location:(o=t.arg)==null?void 0:o.replace("-"," "),text:typeof t.value=="boolean"?void 0:t.value}}),H={class:"copy_btn"},U=R({__name:"CopyResults",props:{count:{default:0}},emits:["click"],setup(t,{emit:o}){const s=o,e=$(),a=b(e,"loading"),c=w(()=>t.count?t.count>500?"Too many results to copy":"Copy results":"No results to copy");async function r(){s("click"),e.do(t.count)}return(l,n)=>A((M(),k("div",H,[y(V,{disabled:!l.count||l.count>500,loading:a.value,variant:"outlined",onClick:r},{default:v(()=>[y(N,{left:""},{default:v(()=>n[0]||(n[0]=[S("mdi-content-copy")])),_:1})]),_:1},8,["disabled","loading"])])),[[F,c.value]])}}),J=j(U,[["__scopeId","data-v-79bfe372"]]);export{J as _};
