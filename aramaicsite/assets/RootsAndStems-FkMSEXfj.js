var z=Object.defineProperty;var H=(t,e,a)=>e in t?z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var A=(t,e,a)=>H(t,typeof e!="symbol"?e+"":e,a);import{E as M,d as q,r as N,c as u,b as G,o as n,f as l,F as v,i as _,k as S,_ as L,a as J,G as Q,n as c,g as h,A as W,h as p,j as k,V as O,H as T,m as E,l as X,p as Y,D as Z}from"./index-BUJKkyK7.js";import{g as ee}from"./getRegexFilterFn-CU_0py8y.js";import{C as $}from"./Color-l8zxla4Y.js";import{u as te}from"./assetsStore-BC6kyCeU.js";import{_ as se}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-DWYg9hHL.js";import{V as ae}from"./VTextField-HmWh8qYo.js";import{V as re,a as ne}from"./VTabs-D8Kx0i0i.js";import"./VInput-OnM-2_W-.js";import"./forwardRefs-DWGaNmQL.js";import"./lazy-Btflh4tJ.js";import"./VSlideGroup-F-xWwHW-.js";var I=(t=>(t.any="any",t.yes="yes",t.no="no",t))(I||{});const le=["any","yes","no"],D={any:"",yes:$.green,no:$.tomato};class B{constructor(e){A(this,"number");A(this,"state","any");this.number=e}static instantiate(e){return new B(e)}get searcherString(){return`^${M.escapeRegExp(this.number)} `}get style(){return{backgroundColor:D[this.state],color:D[this.state]&&$.white}}getStyle(e){return this.state===e&&this.style}clearState(){this.state="any"}static get clearState(){return e=>e.clearState()}setOption(e){if(e===this.state){this.clearState();return}this.state=I[e]}}class C{constructor(e){this.stems=e}get positiveStemSearcherStrings(){return this.getStemSearcherStringsByState(I.yes)}get negativeStemSearcherStrings(){return this.getStemSearcherStringsByState(I.no)}clearAll(){this.stems.forEach(B.clearState)}setOption(e,a){var m;(m=this.stems[e])==null||m.setOption(a)}get positiveStemRegexes(){return this.positiveStemSearcherStrings.map(C.getRegex)}get negativeStemRegexes(){return this.negativeStemSearcherStrings.map(C.getRegex)}stemsByState(e){return M.filter(this.stems,{state:e})}getStemSearcherStringsByState(e){return this.stemsByState(e).map(a=>a.searcherString)}static get getRegex(){return e=>RegExp(e,"iums")}}const oe=q("maalulaVerbalStore",()=>{const t=te(),e=N(0),a=u(()=>{switch(e.value){case 0:return"maalulaVerbalRoots";case 1:return"maalulaPerfects";default:return""}}),m=u(()=>a.value&&t[a.value].data||[]);return{tab:e,tabData:m}}),ie={class:"grep-multiline"},ce=G({__name:"GrepMultiline",props:{multiline:{type:String,default:""},colorSearcherString:{type:String,default:""}},setup(t){const e=u(()=>t.multiline.split(/\n+/)),a=u(()=>new RegExp(`(${t.colorSearcherString})`,"iu")),m=i=>t.colorSearcherString?i.split(a.value):[i],w=u(()=>e.value.map(m));return(i,g)=>(n(),l("div",ie,[(n(!0),l(v,null,_(w.value,(o,f)=>(n(),l("div",{key:f,class:"stem"},[(n(!0),l(v,null,_(o,(x,R)=>(n(),l("span",{key:R,class:"part"},S(x),1))),128))]))),128))]))}}),ue=L(ce,[["__scopeId","data-v-ec7f7d79"]]),me={class:"external-wrapper"},ge={class:"searcher"},Se={class:"searcher__internal"},de={class:"external"},he={class:"table"},pe=["onClick"],ve={class:"option-text"},_e={class:"results"},fe={class:"results__internal"},ye={key:0,class:"stats"},be=G({__name:"RootsAndStems",setup(t){const e=oe(),a=[{key:"roots",name:"Roots and Stems"},{key:"perfect",name:"Perfects"}],w=["I","II","III","IV","I(2)","II(2)","III(2)","IV(2)","I(7)","I(8)","I(10)"].map(B.instantiate),i=N(""),g=N(""),o=J(new C(w)),{tab:f,tabData:x}=Q(e),R=u(()=>o.positiveStemSearcherStrings.length||o.negativeStemSearcherStrings.length||g.value),F=u(()=>{if(!R.value)return[];const b=g.value?[RegExp(g.value,"iums")]:[],s=[...o.positiveStemRegexes,...b],r=o.negativeStemRegexes;return x.value.filter(ee(s,r))}),j=u(()=>[...o.positiveStemSearcherStrings,g.value].map(s=>`(?:${s})`).join("|"));function K(b,s){o.setOption(b,s),y()}function y(){g.value=i.value}function P(){i.value="",y()}function U(){g.value=i.value="",o.clearAll()}return(b,s)=>(n(),l("div",me,[c("div",ge,[c("div",Se,[h(ae,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=r=>i.value=r),label:"Search string",variant:"outlined",density:"compact",class:"searcher__text-field",clearable:"","onClick:clear":P,onKeyup:W(y,["native","enter"])},null,8,["modelValue"]),h(O,{variant:"outlined",class:"searcher__search-button top-button",onClick:y},{default:p(()=>s[2]||(s[2]=[k(" Search ")])),_:1}),h(O,{variant:"outlined",class:"top-button",onClick:U},{default:p(()=>s[3]||(s[3]=[k(" Clear all ")])),_:1})])]),c("div",de,[c("table",he,[(n(!0),l(v,null,_(o.stems,(r,V)=>(n(),l("tr",{key:r.number},[c("td",{style:T(r.style),class:"stem"},S(r.number),5),(n(!0),l(v,null,_(E(le),d=>(n(),l("td",{key:d,style:T(r.getStyle(d)),class:"option",onClick:xe=>K(V,d)},[c("div",ve,S(d),1)],12,pe))),128))]))),128))])]),h(ne,{modelValue:E(f),"onUpdate:modelValue":s[1]||(s[1]=r=>X(f)?f.value=r:null),"align-tabs":"center",class:"tabs",onChange:y},{default:p(()=>[(n(),l(v,null,_(a,r=>h(re,{key:r.key,color:"blue"},{default:p(()=>[k(S(r.name),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),c("div",_e,[c("div",fe,[R.value?(n(),l("div",ye,S(F.value.length)+" verbal roots of "+S(E(x).length)+". ",1)):Y("",!0),h(se,{items:F.value},{default:p(({items:r})=>[(n(!0),l(v,null,_(r,(V,d)=>(n(),Z(ue,{key:d,multiline:V,"color-searcher-string":j.value},{default:p(()=>[k(S(V)+" ",1),s[4]||(s[4]=c("hr",null,null,-1))]),_:2},1032,["multiline","color-searcher-string"]))),128))]),_:1},8,["items"])])])]))}}),Oe=L(be,[["__scopeId","data-v-45d40989"]]);export{Oe as default};
