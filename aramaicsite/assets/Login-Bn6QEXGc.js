import{z as x,r as V,H as L,g as m,J as P,ac as B,b as S,as as q,q as I,t as N,a as H,co as z,o as g,f as v,n as _,h as w,a4 as b,c4 as k,m as F,V as C,j as R,k as D,p as K,_ as T}from"./index-DGANnDqU.js";import{V as h}from"./VTextField-BgMyuI0J.js";import{h as U,i as E}from"./VField-BntbhxpE.js";import{f as M}from"./index-KodB9ykN.js";import"./index-CRzc9MH5.js";import"./transition-Dv-y1MVq.js";const j=P({...B(),...E()},"VForm"),A=x()({name:"VForm",props:j(),emits:{"update:modelValue":r=>!0,submit:r=>!0},setup(r,c){let{slots:l,emit:f}=c;const o=U(r),i=V();function d(s){s.preventDefault(),o.reset()}function u(s){const t=s,a=o.validate();t.then=a.then.bind(a),t.catch=a.catch.bind(a),t.finally=a.finally.bind(a),f("submit",t),t.defaultPrevented||a.then(y=>{var e;let{valid:n}=y;n&&((e=i.value)==null||e.submit())}),t.preventDefault()}return L(()=>{var s;return m("form",{ref:i,class:["v-form",r.class],style:r.style,novalidate:!0,onReset:d,onSubmit:u},[(s=l.default)==null?void 0:s.call(l,o)])}),M(o,i)}}),J={class:"login-and-logout"},O={key:0,class:"login"},Y={class:"login__form-wrapper"},G={key:0,class:"login__error"},Q={key:1,class:"logout"},W=S({__name:"Login",setup(r){const c=q(),l=I(),f=N(l,"isLoggedIn"),o=H({isValid:!1,login:"",password:""}),i=z({login:[n=>!!n||"Login is required"],password:[n=>!!n||"Password is required"]}),d=V(!0),u=V(""),s=()=>{d.value=!d.value},t=V(null),a=async()=>{(await t.value.validate()).valid&&(await l.validateCredentials({login:o.login,password:o.password}),f?(u.value="",c.replace({name:k.Hello})):u.value="The provided credentials are invalid")},y=()=>{l.logOut(),c.replace({name:k.Hello})};return(n,e)=>(g(),v("div",J,[f.value?(g(),v("div",Q,[e[5]||(e[5]=_("h1",null,"You are already logged in.",-1)),e[6]||(e[6]=_("h1",null,"If you'd like to, you can",-1)),m(C,{class:"logout__button",color:"primary",variant:"outlined",size:"large",onClick:y},{default:w(()=>e[4]||(e[4]=[R(" Log out ")])),_:1})])):(g(),v("div",O,[_("div",Y,[m(A,{modelValue:o.isValid,"onUpdate:modelValue":e[2]||(e[2]=p=>o.isValid=p),ref_key:"loginForm",ref:t,class:"login__login-form"},{default:w(()=>[m(h,{modelValue:o.login,"onUpdate:modelValue":e[0]||(e[0]=p=>o.login=p),rules:F(i).login,autocomplete:Math.random(),variant:"outlined",label:"Login",required:"",onKeyup:b(a,["native","enter"])},null,8,["modelValue","rules","autocomplete"]),m(h,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=p=>o.password=p),rules:F(i).password,type:d.value?"password":"text",autocomplete:Math.random(),"append-inner-icon":d.value?"mdi-eye":"mdi-eye-off",variant:"outlined",label:"Password",required:"","onClick:appendInner":s,onKeyup:b(a,["native","enter"])},null,8,["modelValue","rules","type","autocomplete","append-inner-icon"]),m(C,{class:"login__submit-button",color:"primary",variant:"outlined",size:"large",onClick:a},{default:w(()=>e[3]||(e[3]=[R(" Submit ")])),_:1})]),_:1},8,["modelValue"]),u.value?(g(),v("div",G,D(u.value),1)):K("",!0)])]))]))}}),te=T(W,[["__scopeId","data-v-4cba0806"]]);export{te as default};
