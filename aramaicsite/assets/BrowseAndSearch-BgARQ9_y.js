var xt=Object.defineProperty;var Vt=(e,t,a)=>t in e?xt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var q=(e,t,a)=>Vt(e,typeof t!="symbol"?t+"":t,a);import{E as ce,b7 as wt,d as St,c as b,aG as Tt,b as ve,b8 as Ct,o as A,f as E,F as O,n as Se,i as le,D as Y,h as de,V as Le,m as ie,p as xe,l as Ve,_ as ne,q as Z,b9 as _t,s as Te,au as At,P as st,Q as ot,aP as ut,v as me,S as rt,W as It,ad as Pt,t as oe,x as ye,g as d,N as M,ak as ke,ba as Ke,aK as Et,a9 as Lt,aq as Bt,a2 as Dt,ar as Rt,aO as Nt,bb as qt,am as Mt,U as it,aQ as $t,aR as Ot,aa as Ft,as as Ut,at as Ht,bc as Kt,a1 as we,a3 as zt,aU as Gt,Z as ze,$ as Wt,aW as jt,bd as Qt,ap as ue,ao as re,a5 as Xt,aJ as Be,K as ct,ac as Jt,T as Yt,ah as Zt,r as R,a0 as ea,X as G,Y as ta,be as aa,b3 as la,bf as na,a8 as qe,bg as Ge,e as W,ax as fe,bh as sa,bi as Ae,bj as dt,bk as oa,w as We,bl as vt,b6 as Ie,bm as ua,al as ra,bn as ia,an as ca,bo as da,a7 as ge,aX as he,bp as va,bq as ma,br as fa,bs as ha,bt as je,bu as pa,bv as ya,bw as Qe,bx as Xe,by as mt,k as D,j as De,ag as Me,B as ba,aC as ga,bz as ft,A as ka,af as xa,bA as Va,bB as wa}from"./index-C2jqICQq.js";import{u as pe}from"./index-CGfIlLV6.js";import{L as Je,u as Sa,D as ae,a as Ta,K as Ye,_ as Ca,b as _a,S as Ze}from"./GrepLine.vue_vue_type_style_index_0_lang-DiPn0gdf.js";import{a as Aa}from"./axios-CCb-kr4I.js";import{a as et}from"./assets-B5EdzI92.js";import{m as Ia,V as Re}from"./VTextField-C_U7I_jL.js";import{h as Pa}from"./VInput-DVjbxBRK.js";import{f as ht}from"./forwardRefs-DWGaNmQL.js";import{a as pt,V as Ea}from"./VDialog-CpfOqqh8.js";import{m as La,V as tt,a as at,g as Ba}from"./VOverlay-BvtILAXT.js";import{V as Da}from"./VCheckboxBtn-DJXZvZ6n.js";import{m as Ra,V as lt}from"./VSlideGroup-C0rVijgi.js";import{s as Na}from"./sleep-mAKpSMLY.js";import{_ as qa}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-dDS2gh7k.js";import{_ as Ma}from"./CopyResults.vue_vue_type_script_setup_true_lang-6SEAtGmf.js";class $e{constructor({volume:t,texts:a}){q(this,"volumeName");q(this,"texts");this.texts=a.map(u=>({volumeName:t,...u})).map(Oe.instantiate),this.volumeName=t}get totalContents(){return ce.flatMap(this.texts,"contents")}static instantiate(t){return new $e(t)}}class Oe{constructor({volumeName:t,textNumber:a,textName:u,contents:l}){q(this,"volumeName");q(this,"textNumber");q(this,"_textName");q(this,"rawContents");this.volumeName=t,this.textNumber=a,this._textName=u,this.rawContents=l}get contents(){return this.rawContents.map(t=>({volumeName:this.volumeName,textNumber:this.textNumber,textName:this.textName,...t})).map(Fe.instantiate)}get textName(){return this._textName.replace(/\.txt/,"")}set textName(t){this._textName=t}static instantiate(t){return new Oe(t)}}class Fe{constructor({volumeName:t,textNumber:a,textName:u,lineNumber:l,textus:r,versio:f}){q(this,"volumeName");q(this,"textNumber");q(this,"textName");q(this,"lineNumber");q(this,"textus");q(this,"versio");this.volumeName=t,this.textNumber=a,this.textName=u,this.lineNumber=l,this.textus=r,this.versio=f}get title(){return this.volumeName+": "+this.textName}get hash(){return"h"+wt(this)}static instantiate(t){return new Fe(t)}}const $a={[Je.maalula]:{link:et.maalulaCorpusJson.link},[Je.turoyo]:{link:et.turoyoNewCorpusJson.link}},Oa=St("corpusWithTranslationStore",()=>{const e=Sa(),t=b(()=>{var l;return(l=$a[e.value])==null?void 0:l.link}),a=Tt(async()=>t.value?(await Aa.get(t.value)).data.map($e.instantiate):[],[]),u=b(()=>ce.flatMap(a.value,"totalContents"));return{corpusArray:a,corpusLines:u}}),Fa=(e,t)=>{const a=b(()=>e.indexOf(t.value)),u=b(()=>(a.value+1)%e.length);return function(){t.value=e[u.value]}},Ua={class:"button-switcher"},Ha=ve({__name:"ModeSwitcher",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Ct(e,"modelValue"),a=Fa([ae.search,ae.browse],t);return(u,l)=>(A(),E("div",Ua,[(A(!0),E(O,null,Se(le(Ta),r=>(A(),Y(Le,{key:r,variant:r===t.value?"outlined":"text",class:"button-switcher__button show-on-desktop",size:"small",onClick:f=>t.value=r},{default:de(()=>[xe(Ve(r)+" mode ",1)]),_:2},1032,["variant","onClick"]))),128)),t.value?(A(),Y(Le,{key:0,class:"show-on-mobile",variant:"outlined",onClick:l[0]||(l[0]=r=>le(a)())},{default:de(()=>[xe(Ve(t.value)+" mode ",1)]),_:1})):ie("",!0)]))}}),Ka=ne(Ha,[["__scopeId","data-v-2a3d99cf"]]),yt=Symbol.for("vuetify:v-chip-group"),za=Z({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:_t},...Ra(),...Te(),...At({selectedClass:"v-chip--selected"}),...st(),...ot(),...ut({variant:"tonal"})},"VChipGroup");me()({name:"VChipGroup",props:za(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const{themeClasses:u}=rt(e),{isSelected:l,select:r,next:f,prev:c,selected:o}=It(e,yt);return Pt({VChip:{color:oe(e,"color"),disabled:oe(e,"disabled"),filter:oe(e,"filter"),variant:oe(e,"variant")}}),ye(()=>{const v=lt.filterProps(e);return d(lt,M(v,{class:["v-chip-group",{"v-chip-group--column":e.column},u.value,e.class],style:e.style}),{default:()=>{var g;return[(g=a.default)==null?void 0:g.call(a,{isSelected:l,select:r,next:f,prev:c,selected:o.value})]}})}),{}}});const Ga=Z({activeClass:String,appendAvatar:String,appendIcon:ke,closable:Boolean,closeIcon:{type:ke,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:ke,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:Ke(),onClickOnce:Ke(),...Et(),...Te(),...Lt(),...Bt(),...Dt(),...Rt(),...Nt(),...qt(),...st({tag:"span"}),...ot(),...ut({variant:"tonal"})},"VChip"),Wa=me()({name:"VChip",directives:{Ripple:Mt},props:Ga(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0,"group:selected":e=>!0,click:e=>!0},setup(e,t){let{attrs:a,emit:u,slots:l}=t;const{t:r}=it(),{borderClasses:f}=$t(e),{colorClasses:c,colorStyles:o,variantClasses:v}=Ot(e),{densityClasses:g}=Ft(e),{elevationClasses:S}=Ut(e),{roundedClasses:i}=Ht(e),{sizeClasses:p}=Kt(e),{themeClasses:_}=rt(e),T=we(e,"modelValue"),n=zt(e,yt,!1),m=Gt(e,a),y=b(()=>e.link!==!1&&m.isLink.value),V=b(()=>!e.disabled&&e.link!==!1&&(!!n||e.link||m.isClickable.value)),w=b(()=>({"aria-label":r(e.closeLabel),onClick(k){k.preventDefault(),k.stopPropagation(),T.value=!1,u("click:close",k)}}));function L(k){var K;u("click",k),V.value&&((K=m.navigate)==null||K.call(m,k),n==null||n.toggle())}function F(k){(k.key==="Enter"||k.key===" ")&&(k.preventDefault(),L(k))}return()=>{const k=m.isLink.value?"a":e.tag,K=!!(e.appendIcon||e.appendAvatar),j=!!(K||l.append),z=!!(l.close||e.closable),Q=!!(l.filter||e.filter)&&n,ee=!!(e.prependIcon||e.prependAvatar),X=!!(ee||l.prepend),te=!n||n.isSelected.value;return T.value&&ze(d(k,M({class:["v-chip",{"v-chip--disabled":e.disabled,"v-chip--label":e.label,"v-chip--link":V.value,"v-chip--filter":Q,"v-chip--pill":e.pill},_.value,f.value,te?c.value:void 0,g.value,S.value,i.value,p.value,v.value,n==null?void 0:n.selectedClass.value,e.class],style:[te?o.value:void 0,e.style],disabled:e.disabled||void 0,draggable:e.draggable,tabindex:V.value?0:void 0,onClick:L,onKeydown:V.value&&!y.value&&F},m.linkProps),{default:()=>{var $;return[jt(V.value,"v-chip"),Q&&d(Qt,{key:"filter"},{default:()=>[ze(d("div",{class:"v-chip__filter"},[l.filter?d(re,{key:"filter-defaults",disabled:!e.filterIcon,defaults:{VIcon:{icon:e.filterIcon}}},l.filter):d(ue,{key:"filter-icon",icon:e.filterIcon},null)]),[[Xt,n.isSelected.value]])]}),X&&d("div",{key:"prepend",class:"v-chip__prepend"},[l.prepend?d(re,{key:"prepend-defaults",disabled:!ee,defaults:{VAvatar:{image:e.prependAvatar,start:!0},VIcon:{icon:e.prependIcon,start:!0}}},l.prepend):d(O,null,[e.prependIcon&&d(ue,{key:"prepend-icon",icon:e.prependIcon,start:!0},null),e.prependAvatar&&d(Be,{key:"prepend-avatar",image:e.prependAvatar,start:!0},null)])]),d("div",{class:"v-chip__content","data-no-activator":""},[(($=l.default)==null?void 0:$.call(l,{isSelected:n==null?void 0:n.isSelected.value,selectedClass:n==null?void 0:n.selectedClass.value,select:n==null?void 0:n.select,toggle:n==null?void 0:n.toggle,value:n==null?void 0:n.value.value,disabled:e.disabled}))??e.text]),j&&d("div",{key:"append",class:"v-chip__append"},[l.append?d(re,{key:"append-defaults",disabled:!K,defaults:{VAvatar:{end:!0,image:e.appendAvatar},VIcon:{end:!0,icon:e.appendIcon}}},l.append):d(O,null,[e.appendIcon&&d(ue,{key:"append-icon",end:!0,icon:e.appendIcon},null),e.appendAvatar&&d(Be,{key:"append-avatar",end:!0,image:e.appendAvatar},null)])]),z&&d("button",M({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},w.value),[l.close?d(re,{key:"close-defaults",defaults:{VIcon:{icon:e.closeIcon,size:"x-small"}}},l.close):d(ue,{key:"close-icon",icon:e.closeIcon,size:"x-small"},null)])]}}),[[Wt("ripple"),V.value&&e.ripple,null]])}}}),ja=Z({id:String,submenu:Boolean,...ct(La({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:pt}}),["absolute"])},"VMenu"),Qa=me()({name:"VMenu",props:ja(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const u=we(e,"modelValue"),{scopeId:l}=Jt(),{isRtl:r}=Yt(),f=Zt(),c=b(()=>e.id||`v-menu-${f}`),o=R(),v=ea(tt,null),g=G(new Set);ta(tt,{register(){g.value.add(f)},unregister(){g.value.delete(f)},closeParents(n){setTimeout(()=>{var m;!g.value.size&&!e.persistent&&(n==null||(m=o.value)!=null&&m.contentEl&&!aa(n,o.value.contentEl))&&(u.value=!1,v==null||v.closeParents())},40)}}),la(()=>{v==null||v.unregister(),document.removeEventListener("focusin",S)}),na(()=>u.value=!1);async function S(n){var V,w,L;const m=n.relatedTarget,y=n.target;await qe(),u.value&&m!==y&&((V=o.value)!=null&&V.contentEl)&&((w=o.value)!=null&&w.globalTop)&&![document,o.value.contentEl].includes(y)&&!o.value.contentEl.contains(y)&&((L=Ge(o.value.contentEl)[0])==null||L.focus())}W(u,n=>{n?(v==null||v.register(),fe&&document.addEventListener("focusin",S,{once:!0})):(v==null||v.unregister(),fe&&document.removeEventListener("focusin",S))},{immediate:!0});function i(n){v==null||v.closeParents(n)}function p(n){var m,y,V,w,L;if(!e.disabled)if(n.key==="Tab"||n.key==="Enter"&&!e.closeOnContentClick){if(n.key==="Enter"&&(n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLInputElement&&n.target.closest("form")))return;n.key==="Enter"&&n.preventDefault(),sa(Ge((m=o.value)==null?void 0:m.contentEl,!1),n.shiftKey?"prev":"next",k=>k.tabIndex>=0)||(u.value=!1,(V=(y=o.value)==null?void 0:y.activatorEl)==null||V.focus())}else e.submenu&&n.key===(r.value?"ArrowRight":"ArrowLeft")&&(u.value=!1,(L=(w=o.value)==null?void 0:w.activatorEl)==null||L.focus())}function _(n){var y;if(e.disabled)return;const m=(y=o.value)==null?void 0:y.contentEl;m&&u.value?n.key==="ArrowDown"?(n.preventDefault(),n.stopImmediatePropagation(),Ae(m,"next")):n.key==="ArrowUp"?(n.preventDefault(),n.stopImmediatePropagation(),Ae(m,"prev")):e.submenu&&(n.key===(r.value?"ArrowRight":"ArrowLeft")?u.value=!1:n.key===(r.value?"ArrowLeft":"ArrowRight")&&(n.preventDefault(),Ae(m,"first"))):(e.submenu?n.key===(r.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(n.key))&&(u.value=!0,n.preventDefault(),setTimeout(()=>setTimeout(()=>_(n))))}const T=b(()=>M({"aria-haspopup":"menu","aria-expanded":String(u.value),"aria-owns":c.value,onKeydown:_},e.activatorProps));return ye(()=>{const n=at.filterProps(e);return d(at,M({ref:o,id:c.value,class:["v-menu",e.class],style:e.style},n,{modelValue:u.value,"onUpdate:modelValue":m=>u.value=m,absolute:!0,activatorProps:T.value,location:e.location??(e.submenu?"end":"bottom"),"onClick:outside":i,onKeydown:p},l),{activator:a.activator,default:function(){for(var m=arguments.length,y=new Array(m),V=0;V<m;V++)y[V]=arguments[V];return d(re,{root:"VMenu"},{default:()=>{var w;return[(w=a.default)==null?void 0:w.call(a,...y)]}})}})}),ht({id:c,ΨopenChildren:g},o)}}),Xa=Z({renderless:Boolean,...Te()},"VVirtualScrollItem"),Ja=me()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Xa(),emits:{"update:height":e=>!0},setup(e,t){let{attrs:a,emit:u,slots:l}=t;const{resizeRef:r,contentRect:f}=dt(void 0,"border");W(()=>{var c;return(c=f.value)==null?void 0:c.height},c=>{c!=null&&u("update:height",c)}),ye(()=>{var c,o;return e.renderless?d(O,null,[(c=l.default)==null?void 0:c.call(l,{itemRef:r})]):d("div",M({ref:r,class:["v-virtual-scroll__item",e.class],style:e.style},a),[(o=l.default)==null?void 0:o.call(l)])})}}),Ya=-1,Za=1,Pe=100,el=Z({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function tl(e,t){const a=oa(),u=G(0);We(()=>{u.value=parseFloat(e.itemHeight||0)});const l=G(0),r=G(Math.ceil((parseInt(e.height)||a.height.value)/(u.value||16))||1),f=G(0),c=G(0),o=R(),v=R();let g=0;const{resizeRef:S,contentRect:i}=dt();We(()=>{S.value=o.value});const p=b(()=>{var s;return o.value===document.documentElement?a.height.value:((s=i.value)==null?void 0:s.height)||parseInt(e.height)||0}),_=b(()=>!!(o.value&&v.value&&p.value&&u.value));let T=Array.from({length:t.value.length}),n=Array.from({length:t.value.length});const m=G(0);let y=-1;function V(s){return T[s]||u.value}const w=ua(()=>{const s=performance.now();n[0]=0;const h=t.value.length;for(let C=1;C<=h-1;C++)n[C]=(n[C-1]||0)+V(C-1);m.value=Math.max(m.value,performance.now()-s)},m),L=W(_,s=>{s&&(L(),g=v.value.offsetTop,w.immediate(),$(),~y&&qe(()=>{fe&&window.requestAnimationFrame(()=>{be(y),y=-1})}))});vt(()=>{w.clear()});function F(s,h){const C=T[s],I=u.value;u.value=I?Math.min(u.value,h):h,(C!==h||I!==u.value)&&(T[s]=h,w())}function k(s){return s=Ie(s,0,t.value.length-1),n[s]||0}function K(s){return al(n,s)}let j=0,z=0,Q=0;W(p,(s,h)=>{h&&($(),s<h&&requestAnimationFrame(()=>{z=0,$()}))});function ee(){if(!o.value||!v.value)return;const s=o.value.scrollTop,h=performance.now();h-Q>500?(z=Math.sign(s-j),g=v.value.offsetTop):z=s-j,j=s,Q=h,$()}function X(){!o.value||!v.value||(z=0,Q=0,$())}let te=-1;function $(){cancelAnimationFrame(te),te=requestAnimationFrame(Ce)}function Ce(){if(!o.value||!p.value)return;const s=j-g,h=Math.sign(z),C=Math.max(0,s-Pe),I=Ie(K(C),0,t.value.length),U=s+p.value+Pe,x=Ie(K(U)+1,I+1,t.value.length);if((h!==Ya||I<l.value)&&(h!==Za||x>r.value)){const P=k(l.value)-k(I),B=k(x)-k(r.value);Math.max(P,B)>Pe?(l.value=I,r.value=x):(I<=0&&(l.value=I),x>=t.value.length&&(r.value=x))}f.value=k(l.value),c.value=k(t.value.length)-k(r.value)}function be(s){const h=k(s);!o.value||s&&!h?y=s:o.value.scrollTop=h}const _e=b(()=>t.value.slice(l.value,r.value).map((s,h)=>({raw:s,index:h+l.value})));return W(t,()=>{T=Array.from({length:t.value.length}),n=Array.from({length:t.value.length}),w.immediate(),$()},{deep:!0}),{calculateVisibleItems:$,containerRef:o,markerRef:v,computedItems:_e,paddingTop:f,paddingBottom:c,scrollToIndex:be,handleScroll:ee,handleScrollend:X,handleItemResize:F}}function al(e,t){let a=e.length-1,u=0,l=0,r=null,f=-1;if(e[a]<t)return a;for(;u<=a;)if(l=u+a>>1,r=e[l],r>t)a=l-1;else if(r<t)f=l,u=l+1;else return r===t?l:u;return f}const ll=Z({items:{type:Array,default:()=>[]},renderless:Boolean,...el(),...Te(),...ra()},"VVirtualScroll"),nl=me()({name:"VVirtualScroll",props:ll(),setup(e,t){let{slots:a}=t;const u=ia("VVirtualScroll"),{dimensionStyles:l}=ca(e),{calculateVisibleItems:r,containerRef:f,markerRef:c,handleScroll:o,handleScrollend:v,handleItemResize:g,scrollToIndex:S,paddingTop:i,paddingBottom:p,computedItems:_}=tl(e,oe(e,"items"));return da(()=>e.renderless,()=>{function T(){var y,V;const m=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";f.value===document.documentElement?(document[m]("scroll",o,{passive:!0}),document[m]("scrollend",v)):((y=f.value)==null||y[m]("scroll",o,{passive:!0}),(V=f.value)==null||V[m]("scrollend",v))}he(()=>{f.value=Ba(u.vnode.el,!0),T(!0)}),vt(T)}),ye(()=>{const T=_.value.map(n=>d(Ja,{key:n.index,renderless:e.renderless,"onUpdate:height":m=>g(n.index,m)},{default:m=>{var y;return(y=a.default)==null?void 0:y.call(a,{item:n.raw,index:n.index,...m})}}));return e.renderless?d(O,null,[d("div",{ref:c,class:"v-virtual-scroll__spacer",style:{paddingTop:ge(i.value)}},null),T,d("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ge(p.value)}},null)]):d("div",{ref:f,class:["v-virtual-scroll",e.class],onScrollPassive:o,onScrollend:v,style:[l.value,e.style]},[d("div",{ref:c,class:"v-virtual-scroll__container",style:{paddingTop:ge(i.value),paddingBottom:ge(p.value)}},[T])])}),{calculateVisibleItems:r,scrollToIndex:S}}});function sl(e,t){const a=G(!1);let u;function l(c){cancelAnimationFrame(u),a.value=!0,u=requestAnimationFrame(()=>{u=requestAnimationFrame(()=>{a.value=!1})})}async function r(){await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>{if(a.value){const o=W(a,()=>{o(),c()})}else c()})}async function f(c){var g,S;if(c.key==="Tab"&&((g=t.value)==null||g.focus()),!["PageDown","PageUp","Home","End"].includes(c.key))return;const o=(S=e.value)==null?void 0:S.$el;if(!o)return;(c.key==="Home"||c.key==="End")&&o.scrollTo({top:c.key==="Home"?0:o.scrollHeight,behavior:"smooth"}),await r();const v=o.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(c.key==="PageDown"||c.key==="Home"){const i=o.getBoundingClientRect().top;for(const p of v)if(p.getBoundingClientRect().top>=i){p.focus();break}}else{const i=o.getBoundingClientRect().bottom;for(const p of[...v].reverse())if(p.getBoundingClientRect().bottom<=i){p.focus();break}}}return{onScrollPassive:l,onKeydown:f}}const ol=Z({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ke,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...va({itemChildren:!1})},"Select"),ul=Z({...ol(),...ct(Ia({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ma({transition:{component:pt}})},"VSelect"),nt=me()({name:"VSelect",props:ul(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{slots:a}=t;const{t:u}=it(),l=R(),r=R(),f=R(),c=we(e,"menu"),o=b({get:()=>c.value,set:s=>{var h;c.value&&!s&&((h=r.value)!=null&&h.ΨopenChildren.size)||(c.value=s)}}),{items:v,transformIn:g,transformOut:S}=fa(e),i=we(e,"modelValue",[],s=>g(s===null?[null]:ya(s)),s=>{const h=S(s);return e.multiple?h:h[0]??null}),p=b(()=>typeof e.counterValue=="function"?e.counterValue(i.value):typeof e.counterValue=="number"?e.counterValue:i.value.length),_=Pa(),T=b(()=>i.value.map(s=>s.value)),n=G(!1),m=b(()=>o.value?e.closeText:e.openText);let y="",V;const w=b(()=>e.hideSelected?v.value.filter(s=>!i.value.some(h=>e.valueComparator(h,s))):v.value),L=b(()=>e.hideNoData&&!w.value.length||e.readonly||(_==null?void 0:_.isReadonly.value)),F=b(()=>{var s;return{...e.menuProps,activatorProps:{...((s=e.menuProps)==null?void 0:s.activatorProps)||{},"aria-haspopup":"listbox"}}}),k=R(),K=sl(k,l);function j(s){e.openOnClear&&(o.value=!0)}function z(){L.value||(o.value=!o.value)}function Q(s){Qe(s)&&ee(s)}function ee(s){var U,x;if(!s.key||e.readonly||_!=null&&_.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(s.key)&&s.preventDefault(),["Enter","ArrowDown"," "].includes(s.key)&&(o.value=!0),["Escape","Tab"].includes(s.key)&&(o.value=!1),s.key==="Home"?(U=k.value)==null||U.focus("first"):s.key==="End"&&((x=k.value)==null||x.focus("last"));const h=1e3;if(e.multiple||!Qe(s))return;const C=performance.now();C-V>h&&(y=""),y+=s.key.toLowerCase(),V=C;const I=v.value.find(P=>P.title.toLowerCase().startsWith(y));if(I!==void 0){i.value=[I];const P=w.value.indexOf(I);fe&&window.requestAnimationFrame(()=>{var B;P>=0&&((B=f.value)==null||B.scrollToIndex(P))})}}function X(s){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!s.props.disabled)if(e.multiple){const C=i.value.findIndex(U=>e.valueComparator(U.value,s.value)),I=h??!~C;if(~C){const U=I?[...i.value,s]:[...i.value];U.splice(C,1),i.value=U}else I&&(i.value=[...i.value,s])}else{const C=h!==!1;i.value=C?[s]:[],qe(()=>{o.value=!1})}}function te(s){var h;(h=k.value)!=null&&h.$el.contains(s.relatedTarget)||(o.value=!1)}function $(){var s;e.eager&&((s=f.value)==null||s.calculateVisibleItems())}function Ce(){var s;n.value&&((s=l.value)==null||s.focus())}function be(s){n.value=!0}function _e(s){if(s==null)i.value=[];else if(Xe(l.value,":autofill")||Xe(l.value,":-webkit-autofill")){const h=v.value.find(C=>C.title===s);h&&X(h)}else l.value&&(l.value.value="")}return W(o,()=>{if(!e.hideSelected&&o.value&&i.value.length){const s=w.value.findIndex(h=>i.value.some(C=>e.valueComparator(C.value,h.value)));fe&&window.requestAnimationFrame(()=>{var h;s>=0&&((h=f.value)==null||h.scrollToIndex(s))})}}),W(()=>e.items,(s,h)=>{o.value||n.value&&!h.length&&s.length&&(o.value=!0)}),ye(()=>{const s=!!(e.chips||a.chip),h=!!(!e.hideNoData||w.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),C=i.value.length>0,I=Re.filterProps(e),U=C||!n.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return d(Re,M({ref:l},I,{modelValue:i.value.map(x=>x.props.value).join(", "),"onUpdate:modelValue":_e,focused:n.value,"onUpdate:focused":x=>n.value=x,validationValue:i.externalValue,counterValue:p.value,dirty:C,class:["v-select",{"v-select--active-menu":o.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":i.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,inputmode:"none",placeholder:U,"onClick:clear":j,"onMousedown:control":z,onBlur:te,onKeydown:ee,"aria-label":u(m.value),title:u(m.value)}),{...a,default:()=>d(O,null,[d(Qa,M({ref:r,modelValue:o.value,"onUpdate:modelValue":x=>o.value=x,activator:"parent",contentClass:"v-select__content",disabled:L.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:$,onAfterLeave:Ce},F.value),{default:()=>[h&&d(ha,M({ref:k,selected:T.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:x=>x.preventDefault(),onKeydown:Q,onFocusin:be,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},K,e.listProps),{default:()=>{var x,P,B;return[(x=a["prepend-item"])==null?void 0:x.call(a),!w.value.length&&!e.hideNoData&&(((P=a["no-data"])==null?void 0:P.call(a))??d(je,{title:u(e.noDataText)},null)),d(nl,{ref:f,renderless:!0,items:w.value},{default:J=>{var He;let{item:H,index:se,itemRef:N}=J;const Ue=M(H.props,{ref:N,key:se,onClick:()=>X(H,null)});return((He=a.item)==null?void 0:He.call(a,{item:H,index:se,props:Ue}))??d(je,M(Ue,{role:"option"}),{prepend:gt=>{let{isSelected:kt}=gt;return d(O,null,[e.multiple&&!e.hideSelected?d(Da,{key:H.value,modelValue:kt,ripple:!1,tabindex:"-1"},null):void 0,H.props.prependAvatar&&d(Be,{image:H.props.prependAvatar},null),H.props.prependIcon&&d(ue,{icon:H.props.prependIcon},null)])}})}}),(B=a["append-item"])==null?void 0:B.call(a)]}})]}),i.value.map((x,P)=>{function B(N){N.stopPropagation(),N.preventDefault(),X(x,!1)}const J={"onClick:close":B,onKeydown(N){N.key!=="Enter"&&N.key!==" "||(N.preventDefault(),N.stopPropagation(),B(N))},onMousedown(N){N.preventDefault(),N.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},H=s?!!a.chip:!!a.selection,se=H?pa(s?a.chip({item:x,index:P,props:J}):a.selection({item:x,index:P})):void 0;if(!(H&&!se))return d("div",{key:x.value,class:"v-select__selection"},[s?a.chip?d(re,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:x.title}}},{default:()=>[se]}):d(Wa,M({key:"chip",closable:e.closableChips,size:"small",text:x.title,disabled:x.props.disabled},J),null):se??d("span",{class:"v-select__selection-text"},[x.title,e.multiple&&P<i.value.length-1&&d("span",{class:"v-select__selection-comma"},[xe(",")])])])})]),"append-inner":function(){var J;for(var x=arguments.length,P=new Array(x),B=0;B<x;B++)P[B]=arguments[B];return d(O,null,[(J=a["append-inner"])==null?void 0:J.call(a,...P),e.menuIcon?d(ue,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),ht({isFocused:n,menu:o,select:X},l)}}),rl={class:"browse-selects"},il={class:"selects mt-5 mb-8"},cl={class:"no-data-placeholder"},dl=ve({__name:"Browse",props:{corpusArr:{default:()=>[]},volumeLabel:{default:"Volume"},textLabel:{default:"Text"}},emits:["chosen"],setup(e,{emit:t}){const a={get chosen(){return{volume:"",text:""}}},u=t,l=pe("volume"),r=pe("text");l.value&&g(),r.value&&v(),he(v),mt(()=>{l.value=null,r.value=null});const f=b(()=>{if(l.value)return e.corpusArr.find(({volumeName:S})=>S===l.value)}),c=b(()=>f.value?f.value.texts:[]);function o(S,i){i==="volume"?(r.value=null,g()):v()}function v(){u("chosen",{volume:l.value,text:r.value})}function g(){u("chosen",a.chosen)}return(S,i)=>(A(),E("div",rl,[D("div",il,[d(nt,{modelValue:le(l),"onUpdate:modelValue":[i[0]||(i[0]=p=>De(l)?l.value=p:null),i[1]||(i[1]=p=>o(p,"volume"))],items:S.corpusArr,label:S.volumeLabel,"item-title":"volumeName","item-value":"volumeName",variant:"outlined",density:"compact"},null,8,["modelValue","items","label"]),d(nt,{modelValue:le(r),"onUpdate:modelValue":[i[2]||(i[2]=p=>De(r)?r.value=p:null),i[3]||(i[3]=p=>o(p,"text"))],items:c.value,label:S.textLabel,"item-title":"textName","item-value":"textNumber",variant:"outlined",density:"compact"},{"no-data":de(()=>[i[4]||(i[4]=D("span",{class:"no-data-arrow"},"⬅",-1)),D("span",cl,Ve(`A ${S.volumeLabel} should be chosen`),1)]),_:1},8,["modelValue","items","label"])])]))}}),vl=ne(dl,[["__scopeId","data-v-69ac25b0"]]),ml={},fl={height:"3em",viewBox:"0 0 24 24",width:"3em",xmlns:"http://www.w3.org/2000/svg"};function hl(e,t){return A(),E("svg",fl,t[0]||(t[0]=[D("path",{d:"M3 20q-.825 0-1.412-.587T1 18V6q0-.825.588-1.412T3 4h18q.825 0 1.413.588T23 6v12q0 .825-.587 1.413T21 20zm0-2h18V6H3zm6-1h6q.425 0 .713-.288T16 16t-.288-.712T15 15H9q-.425 0-.712.288T8 16t.288.713T9 17m-6 1V6zm3-8q.425 0 .713-.288T7 9t-.288-.712T6 8t-.712.288T5 9t.288.713T6 10m4 0q.425 0 .713-.288T11 9t-.288-.712T10 8t-.712.288T9 9t.288.713T10 10m4 0q.425 0 .713-.288T15 9t-.288-.712T14 8t-.712.288T13 9t.288.713T14 10m4 0q.425 0 .713-.288T19 9t-.288-.712T18 8t-.712.288T17 9t.288.713T18 10M6 13.5q.425 0 .713-.288T7 12.5t-.288-.712T6 11.5t-.712.288T5 12.5t.288.713T6 13.5m4 0q.425 0 .713-.288T11 12.5t-.288-.712T10 11.5t-.712.288T9 12.5t.288.713t.712.287m4 0q.425 0 .713-.288T15 12.5t-.288-.712T14 11.5t-.712.288T13 12.5t.288.713t.712.287m4 0q.425 0 .713-.288T19 12.5t-.288-.712T18 11.5t-.712.288T17 12.5t.288.713t.712.287",fill:"lightGrey"},null,-1)]))}const pl=ne(ml,[["render",hl],["__scopeId","data-v-c2634224"]]),yl={class:"d-flex align-center flex-column"},bl={class:"searchers"},gl={class:"d-flex ga-3"},kl=ve({__name:"Search",props:{textusLabel:{default:"Search corpus"},versioLabel:{default:"Search translation"}},emits:["searchers","copy-to-clipboard"],setup(e,{emit:t}){const a=e,u={get searchers(){return{textus:null,versio:null}}},l=t,r=R(u.searchers),f=R(u.searchers),c=R(!1),o=R(null),v=pe("textus"),g=pe("versio");r.value.textus=v.value,r.value.versio=g.value;const S=b(()=>!r.value.textus&&!r.value.versio),i=b(()=>[{name:"textus",value:r.value.textus,label:a.textusLabel},{name:"versio",value:r.value.versio,label:a.versioLabel}]);he(T);function p(m,y){r.value[y]=m||"",m||T()}function _(m){r.value.textus=m,c.value&&T()}function T(){f.value=ce.cloneDeep(r.value),l("searchers",ce.cloneDeep(f.value)),n()}function n(){v.value=f.value.textus||null,g.value=f.value.versio||null}return he(()=>{r.value.textus=v.value,r.value.versio=g.value,(r.value.textus||r.value.versio)&&T(),o.value=document.querySelector(".searchers .v-text-field.input_textus input")}),mt(()=>{v.value=null,g.value=null}),(m,y)=>{const V=pl;return A(),E("div",yl,[D("div",bl,[D("div",null,[D("div",gl,[d(V,{class:"keyboard-icon",onClick:y[0]||(y[0]=w=>c.value=!0)}),d(Le,{disabled:S.value,variant:"outlined",class:"search-btn",onClick:T},{default:de(()=>y[3]||(y[3]=[xe(" Search ")])),_:1},8,["disabled"])]),d(Ye,{value:i.value[0].value,"input-el":o.value,type:"regex",visible:"",onSubmit:_},null,8,["value","input-el"])]),(A(!0),E(O,null,Se(i.value,({value:w,label:L,name:F})=>(A(),Y(Re,{key:F,"model-value":w,label:L,class:Me(`input_${F}`),style:{"min-width":"200px"},variant:"outlined",density:"compact","hide-details":"",clearable:"","onUpdate:modelValue":k=>p(k,F),onKeydown:ba(ga(T,["prevent"]),["enter"])},null,8,["model-value","label","class","onUpdate:modelValue","onKeydown"]))),128))]),d(Ea,{modelValue:c.value,"onUpdate:modelValue":y[2]||(y[2]=w=>c.value=w),"hide-overlay":"",fullscreen:""},{default:de(()=>[d(Ye,{visible:c.value,value:r.value.textus,"input-name":e.textusLabel,"onUpdate:visible":y[1]||(y[1]=w=>c.value=w),onSubmit:_},null,8,["visible","value","input-name"])]),_:1},8,["modelValue"])])}}}),xl=ne(kl,[["__scopeId","data-v-1f2e1014"]]),bt=300;function Ee({hash:e="",keepLocation:t=!1,className:a="chosen"}){return new Promise(u=>{setTimeout(()=>{t||(location.hash=e,setTimeout(()=>scrollBy(0,-200),0));const l=document.querySelector(e);l&&(l.classList.add(a),setTimeout(u,1))},bt)})}function Vl(e){const t=document.querySelector(e);t&&Ne(t)}function Ne(e,t="chosen"){e&&setTimeout(()=>{e.classList.remove(t)},bt)}const wl=["id"],Sl={class:"controls-wrapper"},Tl={class:"lines"},Cl=ve({__name:"LineCard",props:{line:{},searchers:{}},setup(e){const t=e,a=R(null),u=ft(),l=ka(),r=b(()=>_a.map(i=>({lineName:i,str:t.line[i],searcher:t.searchers.data[i]}))),f=b(()=>!t.searchers.areAllEmpty),c=b(()=>u.hash),o=b(()=>"#"+t.line.hash);function v(){Ne(a.value,"chosen")}W(c,(i,p)=>{!i&&p&&v()});async function g(){if(!f.value)return;const{volumeName:i,textNumber:p}=t.line;await l.push({query:{mode:ae.browse,volume:i,text:p}}),await Ee({hash:o.value})}function S(){if(!u.hash){Ee({hash:o.value});return}Vl(u.hash),u.hash===o.value?l.replace({query:u.query,hash:""}):(Ee({hash:o.value,keepLocation:!0}),l.replace({query:u.query,hash:o.value}));const i=Array.from(document.querySelectorAll('div.line-card[id^="h"]'));for(const p of i)p.style.background&&p.id!==t.line.hash&&Ne(p)}return(i,p)=>i.line?(A(),E("div",{key:0,class:"line-card",id:i.line.hash,ref_key:"lineCardRef",ref:a},[D("div",Sl,[f.value?(A(),E("div",{key:1,class:"control-sign",onClick:p[1]||(p[1]=_=>g())},"▤")):(A(),E("div",{key:0,class:"control-sign",onClick:p[0]||(p[0]=_=>S())},"#"))]),D("div",Tl,[(A(!0),E(O,null,Se(r.value,(_,T)=>(A(),Y(Ca,M({ref_for:!0},_,{key:T,class:"mb-1"}),null,16))),128)),p[2]||(p[2]=D("div",null,[D("br")],-1))])],8,wl)):ie("",!0)}}),_l=ne(Cl,[["__scopeId","data-v-a1346a56"]]),Al={class:"results"},Il=ve({__name:"Results",props:{results:{},searchers:{}},setup(e){const t=ft(),a=xa(),u=oe(a,"isDark"),l=b(()=>!e.searchers.areAllEmpty);return he(async()=>{var f;const r=t.hash;r&&(await Na(1e3),(f=document.querySelector(r))==null||f.scrollIntoView({behavior:"smooth",block:"center"}))}),(r,f)=>(A(),E("div",Al,[l.value?(A(),E("div",{key:0,class:Me(["results-stats",{invert:u.value}])},[D("div",null,"Found "+Ve(r.results.length)+" contexts",1),f[0]||(f[0]=D("div",null,[D("br")],-1))],2)):ie("",!0),D("div",null,[r.results?(A(),Y(qa,{key:0,items:r.results},{default:de(({items:c})=>[(A(!0),E(O,null,Se(c,o=>(A(),E(O,null,[o?(A(),Y(_l,{line:o,searchers:r.searchers,key:o.hash},null,8,["line","searchers"])):ie("",!0)],64))),256))]),_:1},8,["items"])):ie("",!0)])]))}}),Pl=ne(Il,[["__scopeId","data-v-ad9959c5"]]),El={key:0,class:"searcher-wrapper"},Ll=ve({__name:"BrowseAndSearch",setup(e){const t=Oa(),a=Va(),u=b(()=>!!a.text.value),l=b(()=>o.value===ae.search),r=b(()=>o.value===ae.browse),f=b(()=>l.value?v:c.searchers),c={get chosen(){return{volume:null,text:null}},get searchers(){return new Ze({textus:"",versio:""})}},o=pe("mode",ae.search),v=R(c.searchers),g=R({volume:null,text:null}),S=b(()=>{if(!g.value.text||!t.corpusArray.length)return[];const m=ce.find(t.corpusArray,{volumeName:g.value.volume});return ce.find(m.texts,{textNumber:g.value.text}).contents}),i=b(()=>t.corpusLines),p=b(()=>v.value.areAllEmpty?[]:i.value.filter(v.value.test)),_=b(()=>o.value===ae.browse?S.value:p.value);function T(m){v.value=new Ze(m)}function n(m){g.value=m}return(m,y)=>(A(),E("div",{class:Me([{"no-hashes":u.value},"browse-and-search"])},[l.value?(A(),E("div",El,[d(Ma,{count:_.value.length},null,8,["count"]),d(xl,{"corpus-arr-prop":le(t).corpusArray,"textus-label":"Aramaic text","versio-label":"Translation text",onSearchers:T},null,8,["corpus-arr-prop"])])):r.value?(A(),Y(vl,{key:1,"corpus-arr":le(t).corpusArray,onChosen:n},null,8,["corpus-arr"])):ie("",!0),d(Pl,{results:_.value,searchers:f.value},null,8,["results","searchers"]),(A(),Y(wa,{to:"#app-bar-slot"},[d(Ka,{modelValue:le(o),"onUpdate:modelValue":y[0]||(y[0]=V=>De(o)?o.value=V:null),class:"mr-5 button-switcher"},null,8,["modelValue"])]))],2))}}),Ql=ne(Ll,[["__scopeId","data-v-6dc65592"]]);export{Ql as B};
