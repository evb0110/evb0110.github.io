import{b as w,bJ as L,r as g,c as h,o as u,f as m,g as d,h as b,O as H,i as _,k as f,_ as z,E as x,aB as N,d as J,a as M,e as E,aX as F,B as O,p as R,V as T,F as C,l as $,m as y,D as U,n as P}from"./index-Dk0unzr7.js";import{a as j,L as V,u as q,K,_ as G}from"./GrepLine.vue_vue_type_style_index_0_lang-BahjyBcu.js";import{C as D}from"./Color-l8zxla4Y.js";import{V as Q}from"./VTooltip-CyaeFOj9.js";import{a as W}from"./axios-CCb-kr4I.js";import{a as k}from"./assets-MsLU388D.js";import{V as X}from"./VTextField-B-GkrlCn.js";import{V as A}from"./VDialog-DNEGB6y1.js";import{_ as Y}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-COueMdv1.js";const Z=["fill"],ee=w({__name:"KeyboardIcon",props:{tooltip:{type:String,default:"Click to open a virtual keyboard"}},emits:["click"],setup(n,{emit:r}){L(v=>({"343572bc":_(o),"75de9347":_(p)}));const s=n,t=r,c=g(!0),i=h(()=>!s.tooltip||!c.value),{darkGrey:o,lightBrown:p}=D;return(v,a)=>(u(),m("span",{onClick:a[0]||(a[0]=e=>t("click"))},[d(Q,{disabled:i.value,text:n.tooltip,location:"bottom","open-delay":"500"},{activator:b(({props:e})=>[(u(),m("svg",H(e,{fill:_(D).grey,class:"keyboard-icon-svg",height:"50px",viewBox:"0 0 24 24",width:"50px",xmlns:"http://www.w3.org/2000/svg"}),a[1]||(a[1]=[f("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"},null,-1)]),16,Z))]),_:1},8,["disabled","text"])]))}}),te=z(ee,[["__scopeId","data-v-43d9ee52"]]);function se(n){return n.split(`======
`).map(t=>t.split(`
`)).map(t=>({title:x.head(t),lines:x.tail(t)}))}const ae=()=>{const n=N("search",""),r=h(()=>new j(n.value));return{searcherString:n,searcher:r}},re={[V.turoyo]:k.turoyoCorpusJson.link,[V.urmi]:k.urmiCorpusJson.link,[V.maalula]:k.maalulaDictsJson.link},oe=J("simpleCorpusStore",()=>{const n=M({}),r=M({}),s=g(),{language:t}=q(),c=h(()=>re[t.value]),{searcherString:i,searcher:o}=ae(),p=h(()=>{const e=[];if(!s.value)return e;for(const l of s.value){const{title:B,lines:S}=l;for(const I of S)e.push({title:B,line:I})}return e}),v=h(()=>i.value?p.value.reduce((e,l)=>{const S=o.value.regex.test(l.line)?[l]:[];return[...e,...S]},[]):[]);async function a(){const e=await W.get(c.value);s.value=se(e.data)}return{corporaObj:n,searcherStringsObj:r,searcher:o,searcherString:i,matchingLines:v,initCorpusData:a}}),ne={class:"searcher align-center flex-column"},le={class:"searchers d-flex"},ie={class:"input-wrapper"},ue=w({__name:"Searcher",setup(n){const r=oe(),s=g(""),t=g(!1),c=g(null),i=[a=>!!a||"Search string should not be empty"],o=h({get:()=>s.value,set:a=>{s.value=x.isString(a)?a:"",s.value||p()}}),p=()=>{r.searcherString=o.value},v=a=>{o.value=a,t.value&&p()};return E(()=>r.searcherString,a=>{s.value=a},{immediate:!0}),F(()=>{c.value=document.querySelector(".input-wrapper .v-text-field input")}),(a,e)=>(u(),m(C,null,[f("div",ne,[f("div",le,[d(te,{onClick:e[0]||(e[0]=l=>t.value=!0)}),f("div",ie,[d(X,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value=l),rules:i,autocomplete:"off",label:"Search string",color:"primary",variant:"outlined",density:"compact",clearable:"","hide-details":"",onKeyup:O(p,["enter"])},null,8,["modelValue"])]),d(T,{ref:"search_btn",disabled:!o.value,variant:"outlined",onClick:p},{default:b(()=>e[4]||(e[4]=[R(" Search ")])),_:1},8,["disabled"])]),d(K,{value:o.value,"input-el":c.value,type:"regex",visible:"",onSubmit:v},null,8,["value","input-el"])]),d(A,{modelValue:t.value,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value=l),"hide-overlay":"",fullscreen:""},{default:b(()=>[d(K,{visible:t.value,value:o.value,"input-name":"Search string",onSubmit:v,"onUpdate:visible":e[2]||(e[2]=l=>t.value=l)},null,8,["visible","value"])]),_:1},8,["modelValue"])],64))}}),Ve=z(ue,[["__scopeId","data-v-360f7d34"]]),ce={key:0,class:"results-stats"},pe={key:0,style:{color:"blueviolet"}},de=w({__name:"SearchResults",props:{linesMatching:{},searcher:{}},setup(n){return(r,s)=>(u(),m(C,null,[r.searcher.value?(u(),m("div",ce," Number of lines in output: "+$(r.linesMatching.length),1)):y("",!0),s[1]||(s[1]=f("br",null,null,-1)),r.linesMatching?(u(),U(Y,{key:1,items:r.linesMatching,class:"search-results-box results"},{default:b(({items:t})=>[(u(!0),m(C,null,P(t,({line:c,title:i},o)=>(u(),m("div",{key:o,class:"lines"},[i?(u(),m("div",pe,$(i),1)):y("",!0),d(G,{str:c,searcher:r.searcher},null,8,["str","searcher"]),s[0]||(s[0]=f("br",null,null,-1))]))),128))]),_:1},8,["items"])):y("",!0)],64))}}),ke=z(de,[["__scopeId","data-v-a23d703e"]]);export{Ve as S,ke as a,oe as b,ae as u};
