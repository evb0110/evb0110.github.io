"use strict";(self["webpackChunkaramaicsite"]=self["webpackChunkaramaicsite"]||[]).push([[959],{2175:function(e,t,s){s.r(t),s.d(t,{default:function(){return T}});var r=function(){var e=this,t=e._self._c;return t("DictsSearch",{attrs:{"corpus-name":e.corpusName}})},n=[],i=s(374),o=function(){var e=this,t=e._self._c;return t("div",[t(i.A,{staticClass:"searcher-wrapper"},[t("Searcher",{attrs:{"searcher-string":e.searcherString,"corpus-name":e.corpusName},on:{"searcher-string":e.onSearcherString}})],1),t("OptionsChooser",{attrs:{"options-prop":e.dicts,"chosen-options":e.chosenDictionaries,"has-all":""},on:{"chosen-options":e.onChosenDictionaries}}),e._l(e.matchingDictLinesArr,(function(s){return t(i.A,{key:s.key},[t("h1",[e._v(e._s(s.title))]),s.lines.length?t("SearchResults",{attrs:{"lines-matching":s.lines,"searcher-string":e.searcherStringWrapper,"disable-infinite-scroll":!0}}):e._e()],1)}))],2)},a=[],c=(s(4114),s(9511)),l=s(9991),h=s(8301),u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"searcher d-flex align-center flex-column"},[t("div",{staticClass:"searchers d-flex"},[t("KeyboardIcon",{on:{click:function(t){e.isKeyboardOpen=!0}}}),t(h.A,{attrs:{rules:e.rules,autocomplete:"off",label:"Search string",color:"primary",outlined:"",dense:"",clearable:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.searcherInternal,callback:function(t){e.searcherInternal=t},expression:"searcherInternal"}}),t(c.A,{ref:"search_btn",attrs:{disabled:!e.searcherInternal,depressed:"",outlined:""},on:{click:e.search}},[e._v("Search")])],1),t(l.A,{attrs:{"hide-overlay":"",fullscreen:""},model:{value:e.isKeyboardOpen,callback:function(t){e.isKeyboardOpen=t},expression:"isKeyboardOpen"}},[t("Keyboard",{attrs:{visible:e.isKeyboardOpen,buttons:e.buttonsArray,value:e.searcherInternal,"input-name":"Search string"},on:{"update:visible":function(t){e.isKeyboardOpen=t},submit:e.onKeyboardSubmit}})],1)],1)},p=[],d=s(969),g=s(8882),m={name:"Searcher",props:["searcherString","corpusName"],components:{Keyboard:d.A,KeyboardIcon:g.A},data(){return{inputElement:null,searcherPrivate:"",rules:[e=>!!e||"Search string should not be empty"],isKeyboardOpen:!1}},computed:{buttonsArray(){return this.$store.getters.buttonsArrayByCorpus(this.corpusName)},searcherInternal:{set(e){e=_.isString(e)?e:"",this.searcherPrivate=e,e||this.search()},get(){return this.searcherPrivate}}},watch:{searcherString(e){this.searcherInternal=e}},async mounted(){await this.$nextTick(),this.inputElement=document.querySelector(".v-text-field input")},methods:{search(){this.$emit("searcher-string",this.searcherInternal)},onKeyboardSubmit(e){this.searcherInternal=e,this.search()}}},f=m,y=s(1656),S=(0,y.A)(f,u,p,!1,null,"606ade14",null),b=S.exports,v=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-results"},[e.searcherString?t("div",{staticClass:"results-stats",staticStyle:{color:"brown","font-weight":"bold"}},[e._v(" Number of lines in output: "+e._s(e.linesMatching.length)+" ")]):e._e(),t("br"),e.linesMatching?t("InfiniteScroll",{staticClass:"search-results-box",attrs:{items:e.linesMatching,disable:e.linesMatching.length<500||e.disableInfiniteScroll},scopedSlots:e._u([{key:"default",fn:function({items:s}){return e._l(s,(function({line:s,title:r},n){return t("div",{key:n},[r?t("div",{staticStyle:{color:"blueviolet"}},[e._v(e._s(r))]):e._e(),t("GrepLine",{attrs:{str:s,searcher:e.searcherString}}),t("br")],1)}))}}],null,!1,3310479469)}):e._e()],1)},A=[],C=s(6909),k=s(9699),D={name:"SearchResults",props:["linesMatching","searcherString","disableInfiniteScroll"],components:{GrepLine:C.A,InfiniteScroll:k.A}},N=D,x=(0,y.A)(N,v,A,!1,null,"c4fff8fe",null),K=x.exports,I=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container d-flex justify-center"},[e._l(e.options,(function({title:s,key:r,isChosen:n}){return t(c.A,{key:r,attrs:{depressed:"",large:"",tile:"",text:!n,outlined:n},on:{click:function(t){return e.toggle(r)}}},[e._v(e._s(s))])})),e.hasAll?t(c.A,{attrs:{depressed:"",large:"",tile:"",text:!e.areAllChosen,outlined:e.areAllChosen},on:{click:e.toggleAll}},[e._v("All")]):e._e()],2)},$=[];function O({key:e,title:t,isChosen:s}){const r={key:e,title:t,isChosen:s},n={toggle:{value(){r.isChosen=!r.isChosen}},choose:{value(){r.isChosen=!0}},unchoose:{value(){r.isChosen=!1}}};return Object.defineProperties(r,n),r}function q(e){const t=e.map(O);function s(e){return t.find((t=>t.key===e))}const r={toggle:{value(e){s(e).toggle()}},chooseAll:{value(){t.forEach((e=>e.choose()))}},unchooseAll:{value(){t.forEach((e=>e.unchoose()))}},isChosen:{value(e){return s(e).isChosen}},toggleAll:{value(){t.areAllChosen?t.unchooseAll():t.chooseAll()}},chooseKeys:{value(e){t.unchooseAll(),t.forEach((t=>e.includes(t.key)?t.choose():t.unchoose()))}}},n={chosenKeys:{get(){return t.filter((({isChosen:e})=>e)).map((({key:e})=>e))}},areAllChosen:{get(){return t.every((e=>e.isChosen))}}};return Object.defineProperties(t,{...r,...n}),t}var w={name:"OptionsChooser",props:{optionsProp:{type:Array,default:()=>[]},hasAll:{type:Boolean},chosenOptions:{default:()=>[]}},data(){return{options:q(this.optionsProp)}},computed:{areAllChosen(){return this.options.areAllChosen}},methods:{toggle(e){this.options.toggle(e),this.emitValues()},toggleAll(){this.options.toggleAll(),this.emitValues()},emitValues(){this.$emit("chosen-options",this.options.chosenKeys)}},created(){this.options.chooseKeys(this.chosenOptions)}},E=w,P=(0,y.A)(E,I,$,!1,null,"11317324",null),B=P.exports,L=s(7257),M={name:"DictsSearch",components:{Searcher:b,SearchResults:K,OptionsChooser:B},props:["corpusName"],data(){return{searcherString:"",disableInfiniteScroll:!1,chosenDictionaries:[]}},computed:{dicts(){return this.$store.getters.dictsByCorpusNames(this.corpusName)},matchingDictLinesArr(){return this.$store.getters.matchingDictLinesArrByCorpus(this.corpusName).filter((({key:e})=>this.chosenDictionaries.includes(e)))},query(){const e=this.searcherString?{search:this.searcherString}:{},t=this.chosenDictionaries?{dicts:this.chosenDictionaries.join("_")}:{};return{...t,...e}},searcherStringWrapper(){return new L.D(this.searcherString)}},watch:{query:{deep:!0,handler(e){_.isEqual(e,this.$route.query)||this.$router.push({query:e})}}},methods:{onSearcherString(e){this.searcherString=e,this.$store.commit("setSearcherString",{corpusName:this.corpusName,searcherString:this.searcherStringWrapper})},onChosenDictionaries(e){this.chosenDictionaries=e}},created(){this.$store.dispatch("initializeDictData",{corpusName:this.corpusName}),this.$route.query.dicts?this.chosenDictionaries=this.$route.query.dicts.split("_"):this.chosenDictionaries=this.$store.getters.dictsByCorpusNames(this.corpusName).filter((({isChosen:e})=>e)).map((({key:e})=>e)),this.$store.commit("setSearcherString",{corpusName:this.corpusName,searcherString:this.searcherStringWrapper})},mounted(){this.$route.query.search&&this.onSearcherString(this.$route.query.search)}},j=M,W=(0,y.A)(j,o,a,!1,null,"3d0f4730",null),R=W.exports,V={name:"Dictionaries",components:{DictsSearch:R},computed:{corpusName(){return"turoyo"}}},G=V,z=(0,y.A)(G,r,n,!1,null,null,null),T=z.exports}}]);