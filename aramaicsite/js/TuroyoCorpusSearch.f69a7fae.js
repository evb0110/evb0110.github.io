(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TuroyoCorpusSearch"],{"01e9":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-container",{staticClass:"searcher-wrapper"},[r("v-btn",{ref:"search_btn",staticClass:"mr-10 d-none d-md-block",attrs:{loading:t.copyToClipboardBtn.loading,depressed:"",outlined:""},on:{click:t.copyToClipboardProxy}},[t._v(t._s(t.copyToClipboardBtn.text))]),r("Searcher",{attrs:{"searcher-string":t.searcherString,"corpus-name":t.corpusName},on:{"searcher-string":t.onSearcherString}})],1),r("v-container",[t.matchingLines?r("SearchResults",{ref:"search_results",attrs:{"lines-matching":t.matchingLines,"searcher-string":t.searcherString,"disable-infinite-scroll":t.disableInfiniteScroll}}):t._e()],1),r("v-snackbar",{attrs:{color:t.snackbar.color,top:"",left:"",outlined:""},model:{value:t.snackbar.isVisible,callback:function(e){t.$set(t.snackbar,"isVisible",e)},expression:"snackbar.isVisible"}},[t._v(t._s(t.snackbar.text))])],1)},s=[],a=(r("ac1f"),r("841c"),r("96cf"),r("1da1")),i=r("a995"),c=r("190c"),o=r("adaa"),l=r("fab4"),u={name:"CorpusSearch",props:["corpusName"],mixins:[l["a"]],components:{Searcher:i["a"],SearchResults:c["a"]},data:function(){return{searcherString:"",disableInfiniteScroll:!1,copyToClipboardBtn:{text:"Copy to Clipboard",loading:!1},snackbar:{isVisible:!1,text:"",color:"success"}}},computed:{matchingLines:function(){return this.$store.getters.matchingLinesByCorpus(this.corpusName)}},created:function(){this.$store.dispatch("initializeCorpusData",{corpusName:this.corpusName}),this.$store.commit("setSearcherString",{corpusName:this.corpusName,searcherString:this.searcherString})},mounted:function(){this.$route.query.search&&this.onSearcherString(this.$route.query.search)},watch:{searcherString:function(t,e){t===e&&t||this.setQuery()}},methods:{onSearcherString:function(t){this.searcherString=t,this.$store.commit("setSearcherString",{corpusName:this.corpusName,searcherString:this.searcherString})},setQuery:function(){var t=this.searcherString?{search:this.searcherString}:{};_.isEqual(t,this.$route.query)||this.$router.push({query:t})},copyToClipboardProxy:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.copyToClipboardBtn.loading=!0,e.next=4,Object(o["a"])(100);case 4:return t.disableInfiniteScroll=!0,e.next=7,Object(o["a"])(200);case 7:r=".search-results",n=document.querySelector(r),window.getSelection().removeAllRanges(),s=window.getSelection(),s.selectAllChildren(n),document.execCommand("copy"),t.copyToClipboardBtn.loading=!1,s.removeAllRanges(),t.disableInfiniteScroll=!1,t.snackbar.text="Search results successfully copied to clipboard!",t.snackbar.color="success",e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](0),t.snackbar.text="Something went wrong â€” nothing copied!",t.snackbar.color="error";case 24:t.snackbar.isVisible=!0;case 25:case"end":return e.stop()}}),e,null,[[0,20]])})))()}}},h=u,d=(r("0276"),r("2877")),p=r("6544"),b=r.n(p),f=r("8336"),m=r("a523"),v=r("2db4"),g=Object(d["a"])(h,n,s,!1,null,"2092c410",null);e["a"]=g.exports;b()(g,{VBtn:f["a"],VContainer:m["a"],VSnackbar:v["a"]})},"0276":function(t,e,r){"use strict";r("bf0b")},"190c":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"search-results"},[r("div",{staticClass:"results-stats",staticStyle:{color:"brown","font-weight":"bold"}},[t._v(" Number of lines in output: "+t._s(t.linesMatching.length)+" ")]),r("br"),t.linesMatching?r("InfiniteScroll",{staticClass:"search-results-box",attrs:{items:t.linesMatching,disable:t.linesMatching.length<500||t.disableInfiniteScroll},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.items;return t._l(n,(function(e,n){var s=e.line,a=e.title;return r("div",{key:n},[a?r("div",{staticStyle:{color:"blueviolet"}},[t._v(t._s(a))]):t._e(),r("GrepLine",{attrs:{str:s,searcher:t.searcherString}}),r("br")],1)}))}}],null,!1,3310479469)}):t._e()],1)},s=[],a=r("8529"),i=r("aaf8"),c={name:"SearchResults",props:["linesMatching","searcherString","disableInfiniteScroll"],components:{GrepLine:a["a"],InfiniteScroll:i["a"]}},o=c,l=(r("26f9"),r("2877")),u=Object(l["a"])(o,n,s,!1,null,"ad2b3338",null);e["a"]=u.exports},"26f9":function(t,e,r){"use strict";r("3c7e")},"2db4":function(t,e,r){"use strict";r("caad"),r("a9e3");var n=r("ade3"),s=(r("ca71"),r("8dd9")),a=r("a9ad"),i=r("7560"),c=r("f2e7"),o=r("fe6c"),l=r("58df"),u=r("80d2"),h=r("d9bd");e["a"]=Object(l["a"])(s["a"],a["a"],c["a"],Object(o["b"])(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:function(t){return"string"===typeof t||!1===t}},vertical:Boolean},data:function(){return{activeTimeout:-1}},computed:{classes:function(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground:function(){return!this.text&&!this.outlined},isDark:function(){return this.hasBackground?!this.light:i["a"].options.computed.isDark.call(this)},styles:function(){if(this.absolute)return{};var t=this.$vuetify.application,e=t.bar,r=t.bottom,n=t.footer,s=t.insetFooter,a=t.left,i=t.right,c=t.top;return{paddingBottom:Object(u["f"])(r+n+s),paddingLeft:this.app?Object(u["f"])(a):void 0,paddingRight:this.app?Object(u["f"])(i):void 0,paddingTop:Object(u["f"])(e+c)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted:function(){this.isActive&&this.setTimeout()},created:function(){this.$attrs.hasOwnProperty("auto-height")&&Object(h["e"])("auto-height",this),0==this.timeout&&Object(h["d"])('timeout="0"',"-1",this)},methods:{genActions:function(){return this.$createElement("div",{staticClass:"v-snack__action "},[Object(u["n"])(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent:function(){return this.$createElement("div",{staticClass:"v-snack__content",class:Object(n["a"])({},this.contentClass,!0),attrs:{role:"status","aria-live":"polite"}},[Object(u["n"])(this)])},genWrapper:function(){var t=this.hasBackground?this.setBackgroundColor:this.setTextColor,e=t(this.color,{staticClass:"v-snack__wrapper",class:s["a"].options.computed.classes.call(this),directives:[{name:"show",value:this.isActive}]});return this.$createElement("div",e,[this.genContent(),this.genActions()])},genTransition:function(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout:function(){var t=this;window.clearTimeout(this.activeTimeout);var e=Number(this.timeout);this.isActive&&![0,-1].includes(e)&&(this.activeTimeout=window.setTimeout((function(){t.isActive=!1}),e))}},render:function(t){return t("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},"3c7e":function(t,e,r){},"652f":function(t,e,r){},"73bc":function(t,e,r){"use strict";r("652f")},a995:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"searcher d-flex align-center flex-column"},[r("div",{staticClass:"searchers d-flex"},[r("KeyboardIcon",{on:{click:t.activateKeyboard}}),r("v-text-field",{attrs:{autocomplete:"off",outlined:"",dense:"",clearable:"",label:"Search string",color:"primary",rules:t.rules},on:{blur:t.search,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)},"click:clear":t.onClickClear},model:{value:t.searcherInternal,callback:function(e){t.searcherInternal=e},expression:"searcherInternal"}}),r("v-btn",{ref:"search_btn",attrs:{disabled:!t.searcherInternal,depressed:"",outlined:""},on:{click:t.search}},[t._v("Search")])],1),r("v-dialog",{attrs:{"hide-overlay":"",fullscreen:""},model:{value:t.isKeyboardOpen,callback:function(e){t.isKeyboardOpen=e},expression:"isKeyboardOpen"}},[t.isKeyboardOpen?r("Keyboard",{attrs:{buttons:t.buttonsArray,value:t.searcherInternal,"input-name":"Search string"},on:{close:function(e){t.isKeyboardOpen=!1},submit:t.onKeyboardSubmit}}):t._e()],1)],1)},s=[],a=r("9885"),i=r("82a9"),c={name:"Searcher",props:["searcherString","corpusName"],components:{Keyboard:a["a"],KeyboardIcon:i["a"]},data(){return{inputElement:null,searcherInternal:"",rules:[t=>!!t||"Search string should not be empty"],isKeyboardOpen:!1}},computed:{buttonsArray(){return this.$store.getters.buttonsArrayByCorpus(this.corpusName)}},watch:{searcherString(t){this.searcherInternal=t}},methods:{search(){this.$emit("searcher-string",this.searcherInternal)},activateKeyboard(){this.isKeyboardOpen=!0},onKeyboardSubmit(t){this.searcherInternal=t},onClickClear(){this.searcherInternal="",this.search()}},async mounted(){await this.$nextTick(),this.inputElement=document.querySelector(".v-text-field input")}},o=c,l=(r("73bc"),r("2877")),u=r("6544"),h=r.n(u),d=r("8336"),p=r("169a"),b=r("8654"),f=Object(l["a"])(o,n,s,!1,null,"3b22eb42",null);e["a"]=f.exports;h()(f,{VBtn:d["a"],VDialog:p["a"],VTextField:b["a"]})},adaa:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("d3b7");function n(t){return new Promise((function(e){return setTimeout(e,t)}))}},bf0b:function(t,e,r){},ca71:function(t,e,r){},f767:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("CorpusSearch",{attrs:{"corpus-name":t.corpusName}})},s=[],a=r("01e9"),i=r("df61"),c={name:"TuroyoCorpusSearch",components:{CorpusSearch:a["a"]},mixins:[i["a"]],data:function(){return{appBarTitle:"Turoyo Corpus Search"}},computed:{corpusName:function(){return"turoyo"}}},o=c,l=r("2877"),u=Object(l["a"])(o,n,s,!1,null,null,null);e["default"]=u.exports},fab4:function(t,e,r){"use strict";r("d3b7"),r("4de4"),r("fb6a"),e["a"]={methods:{copyToClipboardMany:function(t){var e=0;return new Promise((function(r){var n=setInterval((function(){var s=t[e++];if(!s)return r(!0),void clearInterval(n);s.innerHTML}),0)}))}}}}}]);