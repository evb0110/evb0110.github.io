var W=Object.defineProperty;var G=(s,e,a)=>e in s?W(s,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[e]=a;var L=(s,e,a)=>G(s,typeof e!="symbol"?e+"":e,a);import{g as H,c as y,G as C,bt as M,p as j,v as A,_ as F,al as X,bu as I,o as f,b as g,F as z,n as P,ai as Y,t as S,d as p,f as U,l as T,w,h as k,V as E,e as _,x as J,r as $,i as Q,y as Z,z as ee,W as te,a7 as ne,aB as ae,P as K,u as se,as as oe,a2 as ie,a_ as re}from"./index-CuWP80Oz.js";import{s as le}from"./sleep-mAKpSMLY.js";import{V as ce}from"./VTextField-uDljaBaX.js";import{V as ue,m as de,b as R}from"./VTooltip-BKctwcRt.js";import{a as V,d as me,s as D,b as he,g as ve,n as fe,f as pe}from"./forwardRefs-DWGaNmQL.js";const ge=j({target:[Object,Array]},"v-dialog-transition"),ye=H()({name:"VDialogTransition",props:ge(),setup(s,e){let{slots:a}=e;const i={onBeforeEnter(n){n.style.pointerEvents="none",n.style.visibility="hidden"},async onEnter(n,o){var u;await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>requestAnimationFrame(c)),n.style.visibility="";const{x:t,y:r,sx:m,sy:v,speed:l}=q(s.target,n),d=V(n,[{transform:`translate(${t}px, ${r}px) scale(${m}, ${v})`,opacity:0},{}],{duration:225*l,easing:me});(u=O(n))==null||u.forEach(c=>{V(c,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*l,easing:D})}),d.finished.then(()=>o())},onAfterEnter(n){n.style.removeProperty("pointer-events")},onBeforeLeave(n){n.style.pointerEvents="none"},async onLeave(n,o){var u;await new Promise(c=>requestAnimationFrame(c));const{x:t,y:r,sx:m,sy:v,speed:l}=q(s.target,n);V(n,[{},{transform:`translate(${t}px, ${r}px) scale(${m}, ${v})`,opacity:0}],{duration:125*l,easing:he}).finished.then(()=>o()),(u=O(n))==null||u.forEach(c=>{V(c,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*l,easing:D})})},onAfterLeave(n){n.style.removeProperty("pointer-events")}};return()=>s.target?y(M,C({name:"dialog-transition"},i,{css:!1}),a):y(M,{name:"dialog-transition"},a)}});function O(s){var a;const e=(a=s.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:a.children;return e&&[...e]}function q(s,e){const a=ve(s),i=fe(e),[n,o]=getComputedStyle(e).transformOrigin.split(" ").map(B=>parseFloat(B)),[t,r]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let m=a.left+a.width/2;t==="left"||r==="left"?m-=a.width/2:(t==="right"||r==="right")&&(m+=a.width/2);let v=a.top+a.height/2;t==="top"||r==="top"?v-=a.height/2:(t==="bottom"||r==="bottom")&&(v+=a.height/2);const l=a.width/i.width,d=a.height/i.height,u=Math.max(1,l,d),c=l/u||0,b=d/u||0,h=i.width*i.height/(window.innerWidth*window.innerHeight),x=h>.12?Math.min(1.5,(h-.12)*10+1):1;return{x:m-(n+i.left),y:v-(o+i.top),sx:c,sy:b,speed:x}}const be="(?:a|e|i|iͧ|o|u|ä|å|ë|ö|ü|á|á̧|â|ä|å|é|ê|ë|í|î|ó|ô|ö|ú|û|ü|ā|ā́|ă|ą̂|ē|ĕ|ī|ı|ō|ŏ|ū|ŭ|ŭ́|ə|ə́|и|о|ю|ạ|ạ|ạ́|ậ|ắ|ẹ|ọ|ộ|ụ|ụ̂|а|о|у|э|ы|и|ь)",xe="(?:b|b́|c|c̄|d|f|f̣|g|h|j|k|k̇|l|m|n|n̄|p|p̄|p̣|q|q̣|r|r̄|r̄̄|s|s̄|t|t́|v|w|x|y|z|z̄|ç|ć|č|ğ|ġ|ģ|ķ|ń|ň|ŕ|ś|ŝ|ş|ş́|ş̇|š|ţ|ž|ǧ|ǧ̣|Ɂ|ɧ|ʔ|ʕ|ʕ́|ʕ̣|ʾ|ʿ|б|в|й|к|п|р|с|т|х|ҫ|ҫ́|ҫ̂|ҫ̄|ع|ḅ|ḇ|ḉ|ḍ|ḏ|ḏ̣|ḏ̣̣|ḥ|ḳ|ḳ̇|ḷ|ṃ|ṅ|ṇ|ṗ|ṛ|ṝ|ṡ|ṣ|ṫ|ṭ|ṯ|ẓ|ẖ|ﻉ)",we=new RegExp("[\\\\]v","gi"),ke=new RegExp("[\\\\]c","gi"),Ee=A.memoize(function(e){return e.replace(we,be).replace(ke,xe)});class N{constructor(e){this._value=e||""}get value(){return this._value}set value(e){this._value=e||""}get valueNormalized(){return Ee(this.value)}get isEmpty(){return!this.value}get regex(){return RegExp(this.valueNormalized,"iu")}static instantiate(e){return new N(e)}}class He{constructor(e){L(this,"data");this.data=A.mapValues(e,N.instantiate)}get searchersArr(){return A.values(this.data)}get areAllEmpty(){return this.searchersArr.every(e=>e.isEmpty)}get test(){return e=>A.keys(this.data).every(a=>this.data[a].regex.test(e[a]))}}const _e={name:"GrepLine",props:{str:{default:""},searcher:{default:""},lineName:{type:String}},computed:{stringArray(){return!this.searcher||this.searcher.isEmpty?[this.str]:X(this.str,this.searcher.regex)},isTitle(){return this.lineName===I.title},isTextus(){return this.lineName===I.textus},isVersio(){return this.lineName===I.versio},classObject(){return{"line-title":this.isTitle,textus:this.isTextus,versio:this.isVersio}}}};function Ve(s,e,a,i,n,o){return f(),g("div",null,[(f(!0),g(z,null,P(o.stringArray,(t,r)=>(f(),g("span",{class:Y({...o.classObject,highlight:r%2}),key:r},S(t),3))),128))])}const je=F(_e,[["render",Ve],["__scopeId","data-v-2d086f23"]]);function Ce({buttonValue:s,selectionStart:e,selectionEnd:a,existingValue:i}){let n,o=e,t=a;return s==="backspace"?(e>0&&e===a&&(o=e-1),n=""):s==="del"?(e<i.length&&e===a&&(t=a+1),n=""):s==="space"?n=" ":s==="⬅"?(e<a?t=e:(o=Math.max(0,e-1),t=o),n=""):s==="⮕"?(e<a?o=a:(o=Math.min(i.length,e+1),t=o),n=""):(n=s,o=e,t=a),{buttonValueMod:n,selectionStartMod:o,selectionEndMod:t}}const Ae={name:"Keyboard",props:{buttons:{},value:{default:""},inputName:{},visible:{}},data(){return{selectionStart:0,selectionEnd:0,inputElement:null,valueInternal:"",vAndC:Object.freeze([String.raw`\v`,String.raw`\c`]),commonButtons:Object.freeze(["⬅","space","del","backspace","⮕"])}},methods:{onInputValueInternal(s){this.valueInternal=s,this.getSelection()},close(){this.$emit("update:visible",!1)},onSubmit(){this.$emit("submit",this.valueInternal),this.close()},getSelection(){this.selectionStart=this.inputElement.selectionStart,this.selectionEnd=this.inputElement.selectionEnd},async onFocus(){await le(20),this.getSelection()},handleKeyboard(s){if(!this.inputElement)return;const e=this.inputElement;let{selectionStart:a,selectionEnd:i}=this;const n=this.valueInternal,{buttonValueMod:o,selectionStartMod:t,selectionEndMod:r}=Ce({buttonValue:s,selectionStart:a,selectionEnd:i,existingValue:n});e.value=n.slice(0,t)+o+n.slice(r,n.length),this.valueInternal=e.value,e.focus(),this.selectionStart=e.selectionStart=t+o.length,this.selectionEnd=e.selectionEnd=t+o.length}},created(){this.valueInternal=this.value},async mounted(){await this.$nextTick(),this.inputElement=document.querySelector(".keyboard-wrapper .v-text-field input"),this.selectionStart=this.selectionEnd=this.value.length}},ze={key:0,class:"keyboard-wrapper"},Pe={class:"close-button"},Se={class:"working-block"},Be={class:"keyboard specific-keys"},Ie={class:"keyboard common-keys"},Te={class:"submit-wrapper"};function Fe(s,e,a,i,n,o){return a.visible?(f(),g("div",ze,[p("div",Pe,[p("span",{class:"closer",onClick:e[0]||(e[0]=(...t)=>o.close&&o.close(...t))},"×")]),p("div",Se,[y(ce,{label:a.inputName,"model-value":n.valueInternal,class:"input",clearable:"",density:"compact",variant:"outlined",onChange:o.onInputValueInternal,onFocus:o.onFocus,onKeyup:U(o.onSubmit,["enter","native"])},null,8,["label","model-value","onChange","onFocus","onKeyup"]),p("div",Be,[n.vAndC?(f(!0),g(z,{key:0},P(n.vAndC,t=>(f(),T(E,{key:t,color:"warning",outlined:"",rounded:"",variant:"outlined",onClick:r=>o.handleKeyboard(t)},{default:w(()=>[k(S(t),1)]),_:2},1032,["onClick"]))),128)):_("",!0),a.buttons?(f(!0),g(z,{key:1},P(a.buttons,t=>(f(),T(E,{key:t,rounded:"",variant:"outlined",onClick:r=>o.handleKeyboard(t)},{default:w(()=>[k(S(t),1)]),_:2},1032,["onClick"]))),128)):_("",!0)]),p("div",Ie,[n.commonButtons?(f(!0),g(z,{key:0},P(n.commonButtons,t=>(f(),T(E,{key:t,color:"teal",dark:"",large:"",rounded:"",variant:"outlined",onClick:r=>o.handleKeyboard(t)},{default:w(()=>[k(S(t),1)]),_:2},1032,["onClick"]))),128)):_("",!0)]),p("div",Te,[y(E,{class:"mr-5",variant:"outlined",onClick:o.close},{default:w(()=>e[1]||(e[1]=[k(" Cancel ")])),_:1},8,["onClick"]),y(E,{color:"primary",variant:"outlined",onClick:o.onSubmit},{default:w(()=>e[2]||(e[2]=[k(" Search ")])),_:1},8,["onClick"])])])])):_("",!0)}const $e=F(Ae,[["render",Fe],["__scopeId","data-v-ba574c0c"]]),Ne=J({__name:"KeyboardIcon",props:{tooltip:{type:String,default:"Click to open a virtual keyboard"}},emits:["click"],setup(s,{emit:e}){const a=s,i=e,n=$(!0),o=Q(()=>!a.tooltip||!n.value),t=()=>{n.value=!1,i("click")};return(r,m)=>(f(),g("span",{onClick:t},[y(ue,{disabled:o.value,text:s.tooltip,location:"bottom","open-delay":"500"},{activator:w(({props:v})=>[p("label",Z(ee(v)),m[0]||(m[0]=[p("svg",{class:"keyboard-icon-svg",fill:"#AAAAAA",height:"50px",viewBox:"0 0 24 24",width:"50px",xmlns:"http://www.w3.org/2000/svg"},[p("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"})],-1)]),16)]),_:1},8,["disabled","text"])]))}}),We=F(Ne,[["__scopeId","data-v-d6c5715d"]]),Le=j({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...de({origin:"center center",scrollStrategy:"block",transition:{component:ye},zIndex:2400})},"VDialog"),Ge=H()({name:"VDialog",props:Le(),emits:{"update:modelValue":s=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(s,e){let{emit:a,slots:i}=e;const n=te(s,"modelValue"),{scopeId:o}=ne(),t=$();function r(l){var c,b;const d=l.relatedTarget,u=l.target;if(d!==u&&((c=t.value)!=null&&c.contentEl)&&((b=t.value)!=null&&b.globalTop)&&![document,t.value.contentEl].includes(u)&&!t.value.contentEl.contains(u)){const h=re(t.value.contentEl);if(!h.length)return;const x=h[0],B=h[h.length-1];d===x?B.focus():x.focus()}}ae&&K(()=>n.value&&s.retainFocus,l=>{l?document.addEventListener("focusin",r):document.removeEventListener("focusin",r)},{immediate:!0});function m(){var l;a("afterEnter"),(l=t.value)!=null&&l.contentEl&&!t.value.contentEl.contains(document.activeElement)&&t.value.contentEl.focus({preventScroll:!0})}function v(){a("afterLeave")}return K(n,async l=>{var d;l||(await ie(),(d=t.value.activatorEl)==null||d.focus({preventScroll:!0}))}),se(()=>{const l=R.filterProps(s),d=C({"aria-haspopup":"dialog"},s.activatorProps),u=C({tabindex:-1},s.contentProps);return y(R,C({ref:t,class:["v-dialog",{"v-dialog--fullscreen":s.fullscreen,"v-dialog--scrollable":s.scrollable},s.class],style:s.style},l,{modelValue:n.value,"onUpdate:modelValue":c=>n.value=c,"aria-modal":"true",activatorProps:d,contentProps:u,role:"dialog",onAfterEnter:m,onAfterLeave:v},o),{activator:i.activator,default:function(){for(var c=arguments.length,b=new Array(c),h=0;h<c;h++)b[h]=arguments[h];return y(oe,{root:"VDialog"},{default:()=>{var x;return[(x=i.default)==null?void 0:x.call(i,...b)]}})}})}),pe({},t)}});export{We as K,He as S,ye as V,je as _,$e as a,Ge as b,N as c};
