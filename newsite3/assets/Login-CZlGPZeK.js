import{m as C,R as y,p as P,a as F,g as L,r as H,u as I,c as a,_ as R,b as m,d as f,w as p,t as x,e as B,V,o as u,f as v,h as w}from"./index-CuWP80Oz.js";import{m as E,c as K}from"./VInput-Bn-9acvs.js";import{f as N}from"./forwardRefs-DWGaNmQL.js";import{V as _}from"./VTextField-uDljaBaX.js";const q={name:"Login",data(){return{form:{isValid:!1,login:"",password:""},rules:{login:[r=>!!r||"Login is required"],password:[r=>!!r||"Password is required"]},isHiddenPassword:!0,error:""}},computed:{...C(["isLoggedIn"]),appBarTitle(){return"Login Page"},eyeIconClass(){return"mdi mdi-eye"+(this.isHiddenPassword?"":"-off")}},methods:{onEyeClick(){this.isHiddenPassword=!this.isHiddenPassword},async login(){if(this.$refs.login_form.validate()){if(await this.$store.dispatch("validateCredentials",{login:this.form.login,password:this.form.password}),!this.isLoggedIn){this.error="The provided credentials are invalid";return}this.$router.replace({name:y.Hello})}},logout(){this.$store.commit("logOut"),this.$router.replace({name:y.Hello})}}},S=P({...F(),...E()},"VForm"),T=L()({name:"VForm",props:S(),emits:{"update:modelValue":r=>!0,submit:r=>!0},setup(r,e){let{slots:d,emit:c}=e;const o=K(r),s=H();function t(n){n.preventDefault(),o.reset()}function h(n){const l=n,i=o.validate();l.then=i.then.bind(i),l.catch=i.catch.bind(i),l.finally=i.finally.bind(i),c("submit",l),l.defaultPrevented||i.then(k=>{var g;let{valid:b}=k;b&&((g=s.value)==null||g.submit())}),l.preventDefault()}return I(()=>{var n;return a("form",{ref:s,class:["v-form",r.class],style:r.style,novalidate:!0,onReset:t,onSubmit:h},[(n=d.default)==null?void 0:n.call(d,o)])}),N(o,s)}}),D={class:"login-and-logout"},U={key:0,class:"login"},z={class:"login__form-wrapper"},M={key:0,class:"login__error"},G={key:1,class:"logout"};function O(r,e,d,c,o,s){return u(),m("div",D,[r.isLoggedIn?(u(),m("div",G,[e[5]||(e[5]=f("h1",null,"You are already logged in.",-1)),e[6]||(e[6]=f("h1",null,"If you'd like to, you can",-1)),a(V,{class:"logout__button",color:"primary",variant:"outlined",size:"large",onClick:s.logout},{default:p(()=>e[4]||(e[4]=[w(" Log out ")])),_:1},8,["onClick"])])):(u(),m("div",U,[f("div",z,[a(T,{modelValue:o.form.isValid,"onUpdate:modelValue":e[2]||(e[2]=t=>o.form.isValid=t),ref:"login_form",class:"login__login-form"},{default:p(()=>[a(_,{modelValue:o.form.login,"onUpdate:modelValue":e[0]||(e[0]=t=>o.form.login=t),rules:o.rules.login,autocomplete:Math.random(),variant:"outlined",label:"Login",required:"",onKeyup:v(s.login,["native","enter"])},null,8,["modelValue","rules","autocomplete","onKeyup"]),a(_,{modelValue:o.form.password,"onUpdate:modelValue":e[1]||(e[1]=t=>o.form.password=t),rules:o.rules.password,type:o.isHiddenPassword?"password":"text",autocomplete:Math.random(),"append-inner-icon":o.isHiddenPassword?"mdi-eye":"mdi-eye-off",variant:"outlined",label:"Password",required:"","onClick:appendInner":s.onEyeClick,onKeyup:v(s.login,["native","enter"])},null,8,["modelValue","rules","type","autocomplete","append-inner-icon","onClick:appendInner","onKeyup"]),a(V,{class:"login__submit-button",color:"primary",variant:"outlined",size:"large",onClick:s.login},{default:p(()=>e[3]||(e[3]=[w("Submit")])),_:1},8,["onClick"])]),_:1},8,["modelValue"]),o.error?(u(),m("div",M,x(o.error),1)):B("",!0)])]))])}const Q=R(q,[["render",O],["__scopeId","data-v-7447040c"]]);export{Q as default};
