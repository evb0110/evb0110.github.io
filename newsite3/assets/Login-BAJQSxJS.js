import{p as h,m as x,g as L,r as v,u as P,c as p,d as B,a as S,b as I,e as N,o as f,f as g,h as y,i as _,w,j as k,V as b,k as F,t as q,l as D,n as H,R as C,_ as K}from"./index-eAgdvAXd.js";import{V as R}from"./VTextField-Ctxt874-.js";import{m as T,c as U}from"./VInput-r8P_vTMa.js";import{f as z}from"./forwardRefs-DWGaNmQL.js";const E=h({...x(),...T()},"VForm"),M=L()({name:"VForm",props:E(),emits:{"update:modelValue":u=>!0,submit:u=>!0},setup(u,c){let{slots:s,emit:o}=c;const i=U(u),n=v();function m(t){t.preventDefault(),i.reset()}function V(t){const a=t,l=i.validate();a.then=l.then.bind(l),a.catch=l.catch.bind(l),a.finally=l.finally.bind(l),o("submit",a),a.defaultPrevented||l.then(d=>{var r;let{valid:e}=d;e&&((r=n.value)==null||r.submit())}),a.preventDefault()}return P(()=>{var t;return p("form",{ref:n,class:["v-form",u.class],style:u.style,novalidate:!0,onReset:m,onSubmit:V},[(t=s.default)==null?void 0:t.call(s,i)])}),z(i,n)}}),j={class:"login-and-logout"},A={key:0,class:"login"},O={class:"login__form-wrapper"},Y={key:0,class:"login__error"},G={key:1,class:"logout"},J=B({__name:"Login",setup(u){const c=H(),s=S(),o=I({isValid:!1,login:"",password:""}),i=N({login:[d=>!!d||"Login is required"],password:[d=>!!d||"Password is required"]}),n=v(!0),m=v(""),V=()=>{n.value=!n.value},t=v(null),a=async()=>{(await t.value.validate()).valid&&(await s.validateCredentials({login:o.login,password:o.password}),s.isLoggedIn?(m.value="",c.replace({name:C.Hello})):m.value="The provided credentials are invalid")},l=()=>{s.logOut(),c.replace({name:C.Hello})};return(d,e)=>(f(),g("div",j,[y(s).isLoggedIn?(f(),g("div",G,[e[5]||(e[5]=_("h1",null,"You are already logged in.",-1)),e[6]||(e[6]=_("h1",null,"If you'd like to, you can",-1)),p(b,{class:"logout__button",color:"primary",variant:"outlined",size:"large",onClick:l},{default:w(()=>e[4]||(e[4]=[F(" Log out ")])),_:1})])):(f(),g("div",A,[_("div",O,[p(M,{modelValue:o.isValid,"onUpdate:modelValue":e[2]||(e[2]=r=>o.isValid=r),ref_key:"loginForm",ref:t,class:"login__login-form"},{default:w(()=>[p(R,{modelValue:o.login,"onUpdate:modelValue":e[0]||(e[0]=r=>o.login=r),rules:y(i).login,autocomplete:Math.random(),variant:"outlined",label:"Login",required:"",onKeyup:k(a,["native","enter"])},null,8,["modelValue","rules","autocomplete"]),p(R,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=r=>o.password=r),rules:y(i).password,type:n.value?"password":"text",autocomplete:Math.random(),"append-inner-icon":n.value?"mdi-eye":"mdi-eye-off",variant:"outlined",label:"Password",required:"","onClick:appendInner":V,onKeyup:k(a,["native","enter"])},null,8,["modelValue","rules","type","autocomplete","append-inner-icon"]),p(b,{class:"login__submit-button",color:"primary",variant:"outlined",size:"large",onClick:a},{default:w(()=>e[3]||(e[3]=[F(" Submit ")])),_:1})]),_:1},8,["modelValue"]),m.value?(f(),g("div",Y,q(m.value),1)):D("",!0)])]))]))}}),$=K(J,[["__scopeId","data-v-e76863f3"]]);export{$ as default};
