var H=Object.defineProperty;var J=(t,e,a)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var $=(t,e,a)=>J(t,typeof e!="symbol"?e+"":e,a);import{x as L,y as Q,r as R,z as S,d as j,o as n,f as l,F as v,A as f,i as g,_ as z,B as W,b as X,C as Y,h as u,c as h,n as Z,w as p,V as T,l as A,D as ee,j as te,q as C,E as F,v as se}from"./index-CtFqdlZg.js";import{g as ae}from"./getRegexFilterFn-CU_0py8y.js";import{C as M}from"./Color-l8zxla4Y.js";import{a as O}from"./axios-CCb-kr4I.js";import{a as D}from"./assets-BULLTVMX.js";import{_ as re}from"./InfiniteScroll.vue_vue_type_script_setup_true_lang-OIjXsl2X.js";import{V as ne}from"./VTextField-COfvR23K.js";import{V as le,a as oe}from"./VTabs-DzwPzWPY.js";import"./VInput-exFDPJJg.js";import"./forwardRefs-DWGaNmQL.js";import"./lazy-Bzt73fOT.js";import"./VSlideGroup-XwcNrjWa.js";var B=(t=>(t.any="any",t.yes="yes",t.no="no",t))(B||{});const ie=["any","yes","no"],P={any:"",yes:M.green,no:M.tomato};class E{constructor(e){$(this,"number");$(this,"state","any");this.number=e}static instantiate(e){return new E(e)}get searcherString(){return`^${L.escapeRegExp(this.number)} `}get style(){return{backgroundColor:P[this.state],color:P[this.state]&&M.white}}getStyle(e){return this.state===e&&this.style}clearState(){this.state="any"}static get clearState(){return e=>e.clearState()}setOption(e){if(e===this.state){this.clearState();return}this.state=B[e]}}class w{constructor(e){this.stems=e}get positiveStemSearcherStrings(){return this.getStemSearcherStringsByState(B.yes)}get negativeStemSearcherStrings(){return this.getStemSearcherStringsByState(B.no)}clearAll(){this.stems.forEach(E.clearState)}setOption(e,a){var m;(m=this.stems[e])==null||m.setOption(a)}get positiveStemRegexes(){return this.positiveStemSearcherStrings.map(w.getRegex)}get negativeStemRegexes(){return this.negativeStemSearcherStrings.map(w.getRegex)}stemsByState(e){return L.filter(this.stems,{state:e})}getStemSearcherStringsByState(e){return this.stemsByState(e).map(a=>a.searcherString)}static get getRegex(){return e=>RegExp(e,"iums")}}const ce=Q("maalulaVerbalStore",()=>{const t=R([]),e=R([]),a=R(0),m=S(()=>[t.value,e.value][a.value]);y(),o();async function y(){const{data:i}=await O.get(D.maalulaVerbalRoots.link);t.value=i}async function o(){const{data:i}=await O.get(D.maalulaPerfects.link);e.value=i}return{maalulaVerbalRoots:t,maalulaPerfects:e,tab:a,tabData:m}}),ue={class:"grep-multiline"},me=j({__name:"GrepMultiline",props:{multiline:{type:String,default:""},colorSearcherString:{type:String,default:""}},setup(t){const e=S(()=>t.multiline.split(/\n+/)),a=S(()=>new RegExp(`(${t.colorSearcherString})`,"iu")),m=o=>t.colorSearcherString?o.split(a.value):[o],y=S(()=>e.value.map(m));return(o,i)=>(n(),l("div",ue,[(n(!0),l(v,null,f(y.value,(c,_)=>(n(),l("div",{key:_,class:"stem"},[(n(!0),l(v,null,f(c,(V,k)=>(n(),l("span",{key:k,class:"part"},g(V),1))),128))]))),128))]))}}),ge=z(me,[["__scopeId","data-v-ec7f7d79"]]),Se={class:"external-wrapper"},de={class:"searcher"},he={class:"searcher__internal"},pe={class:"external"},ve={class:"table"},fe=["onClick"],ye={class:"option-text"},_e={class:"results"},be={class:"results__internal"},xe={key:0,class:"stats"},Re=j({__name:"RootsAndStems",setup(t){const e=ce();W();const a=[{key:"roots",name:"Roots and Stems"},{key:"perfect",name:"Perfects"}],y=["I","II","III","IV","I(2)","II(2)","III(2)","IV(2)","I(7)","I(8)","I(10)"].map(E.instantiate),o=R(""),i=R(""),c=X(new w(y)),{tab:_,tabData:V}=Y(e),k=S(()=>c.positiveStemSearcherStrings.length||c.negativeStemSearcherStrings.length||i.value),N=S(()=>{if(!k.value)return[];const x=i.value?[RegExp(i.value,"iums")]:[],s=[...c.positiveStemRegexes,...x],r=c.negativeStemRegexes;return V.value.filter(ae(s,r))}),G=S(()=>[...c.positiveStemSearcherStrings,i.value].map(s=>`(?:${s})`).join("|"));function K(x,s){c.setOption(x,s),b()}function b(){i.value=o.value}function U(){o.value="",b()}function q(){i.value=o.value="",c.clearAll()}return(x,s)=>(n(),l("div",Se,[u("div",de,[u("div",he,[h(ne,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=r=>o.value=r),label:"Search string",variant:"outlined",density:"compact",class:"searcher__text-field",clearable:"","onClick:clear":U,onKeyup:Z(b,["native","enter"])},null,8,["modelValue"]),h(T,{variant:"outlined",class:"searcher__search-button top-button",onClick:b},{default:p(()=>s[2]||(s[2]=[C(" Search ")])),_:1}),h(T,{variant:"outlined",class:"top-button",onClick:q},{default:p(()=>s[3]||(s[3]=[C(" Clear all ")])),_:1})])]),u("div",pe,[u("table",ve,[(n(!0),l(v,null,f(c.stems,(r,I)=>(n(),l("tr",{key:r.number},[u("td",{style:F(r.style),class:"stem"},g(r.number),5),(n(!0),l(v,null,f(A(ie),d=>(n(),l("td",{key:d,style:F(r.getStyle(d)),class:"option",onClick:Ve=>K(I,d)},[u("div",ye,g(d),1)],12,fe))),128))]))),128))])]),h(le,{modelValue:A(_),"onUpdate:modelValue":s[1]||(s[1]=r=>ee(_)?_.value=r:null),"align-tabs":"center",class:"tabs",onChange:b},{default:p(()=>[(n(),l(v,null,f(a,r=>h(oe,{key:r.key,color:"blue"},{default:p(()=>[C(g(r.name),1)]),_:2},1024)),64))]),_:1},8,["modelValue"]),u("div",_e,[u("div",be,[k.value?(n(),l("div",xe,g(N.value.length)+" verbal roots of "+g(A(V).length)+". ",1)):te("",!0),h(re,{items:N.value},{default:p(({items:r})=>[(n(!0),l(v,null,f(r,(I,d)=>(n(),se(ge,{key:d,multiline:I,"color-searcher-string":G.value},{default:p(()=>[C(g(I)+" ",1),s[4]||(s[4]=u("hr",null,null,-1))]),_:2},1032,["multiline","color-searcher-string"]))),128))]),_:1},8,["items"])])])]))}}),De=z(Re,[["__scopeId","data-v-fa40f8c2"]]);export{De as default};
