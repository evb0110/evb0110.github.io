var J=Object.defineProperty;var P=(a,e,t)=>e in a?J(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var u=(a,e,t)=>P(a,typeof e!="symbol"?e+"":e,t);import{u as R,S as T,a as $}from"./SearchResults-CG4gkPis.js";import{d as V,b as N,W as z,o as r,f as g,F as v,A as j,v as m,w as f,q as _,i as E,V as x,j as D,_ as F,y as q,aG as G,r as I,br as Q,z as A,af as W,c as w,l as p,bs as L,h as X}from"./index-CcY6XDHE.js";import{a as H}from"./axios-CCb-kr4I.js";import{a as B}from"./assets-DC2lQO5e.js";import{L as K,u as M}from"./GrepLine.vue_vue_type_style_index_0_lang-zfOtP7XE.js";class k{constructor({key:e,title:t,isChosen:o}){u(this,"key");u(this,"title");u(this,"isChosen");this.key=e,this.title=t,this.isChosen=o}toggle(){this.isChosen=!this.isChosen}choose(){this.isChosen=!0}unchoose(){this.isChosen=!1}static instantiate(e){return new k(e)}}class U{constructor(e){u(this,"data");this.data=e.map(k.instantiate)}optionByKey(e){return this.data.find(t=>t.key===e)}toggle(e){var t;(t=this.optionByKey(e))==null||t.toggle()}chooseAll(){this.data.forEach(e=>e.choose())}unchooseAll(){this.data.forEach(e=>e.unchoose())}toggleAll(){this.areAllChosen?this.unchooseAll():this.chooseAll()}chooseKeys(e){this.unchooseAll(),this.data.forEach(t=>e!=null&&e.includes(t.key)?t.choose():t.unchoose())}get chosenKeys(){return this.data.filter(({isChosen:e})=>e).map(({key:e})=>e)}get areAllChosen(){return this.data.every(e=>e.isChosen)}}const Y={class:"container d-flex justify-center"},Z=V({__name:"OptionsChooser",props:{optionsProp:{},hasAll:{type:Boolean},chosenOptions:{}},emits:["chosen-options"],setup(a,{emit:e}){const t=e,o=N(new U(a.optionsProp));z(()=>a.chosenOptions,s=>o.chooseKeys(s),{immediate:!0});const c=s=>{s?o.toggle(s):o.toggleAll(),t("chosen-options",o.chosenKeys)};return(s,l)=>(r(),g("div",Y,[(r(!0),g(v,null,j(o.data,({title:i,key:d,isChosen:y})=>(r(),m(x,{key:d,variant:y?"outlined":"text",onClick:S=>c(d)},{default:f(()=>[_(E(i),1)]),_:2},1032,["variant","onClick"]))),128)),s.hasAll?(r(),m(x,{key:0,variant:o.areAllChosen?"outlined":"text"+s.foo,onClick:l[0]||(l[0]=i=>c())},{default:f(()=>l[1]||(l[1]=[_(" All ")])),_:1},8,["variant"])):D("",!0)]))}}),ee=F(Z,[["__scopeId","data-v-8d6ad8de"]]),O={[K.turoyo]:{link:B.turoyoDictsJson.link,dicts:[{key:"ritter",title:"Ritter",isChosen:!0},{key:"jastrow",title:"Jastrow",isChosen:!1},{key:"jan",title:"XÃ«zne",isChosen:!1}]},[K.maalula]:{link:B.maalulaDictsJson.link,dicts:[{key:"arnold",title:"Arnold",isChosen:!0}]}},te=q("simpleDictStore",()=>{const a=N({}),e=G("dict",[]),t=I(),{language:o}=M(),{searcher:c,searcherString:s}=R(),l=Q(),i=A(()=>{var n;return((n=O[o.value])==null?void 0:n.dicts)||[]});W(()=>{l.value.isDictionary?e.value=i.value.filter(({isChosen:n})=>n).map(({key:n})=>n):e.value=[]});const d=A(()=>s.value?i.value.map(({key:n,title:h})=>{const b=S(n).filter(C=>c.value.regex.test(C)).map(C=>({title:"",line:C}));return{key:n,title:h,lines:b}}):[]);async function y(){var h;const n=await H.get((h=O[o.value])==null?void 0:h.link);t.value=n.data}function S(n){var h;return((h=t.value)==null?void 0:h[n])||[]}return{corporaObj:a,searcher:c,dicts:i,dictData:t,searcherString:s,chosenDictionaries:e,matchingDictLinesArr:d,initDictData:y}}),le=V({__name:"DictsSearch",setup(a){const e=te();e.initDictData();const t=A(()=>e.matchingDictLinesArr.filter(({key:s})=>e.chosenDictionaries.includes(s)));function o(s){e.searcherString=s}function c(s){e.chosenDictionaries=s}return(s,l)=>(r(),g(v,null,[w(L,{class:"searcher-wrapper"},{default:f(()=>[w(T,{"searcher-string":p(e).searcherString,"corpus-name":s.corpusName,onSearcherString:o},null,8,["searcher-string","corpus-name"])]),_:1}),p(e).dicts.length>1?(r(),m(ee,{key:0,"options-prop":p(e).dicts,"chosen-options":p(e).chosenDictionaries,"has-all":"",onChosenOptions:c},null,8,["options-prop","chosen-options"])):D("",!0),(r(!0),g(v,null,j(t.value,i=>(r(),m(L,{key:i.key},{default:f(()=>[X("h1",null,E(i.title),1),i.lines.length?(r(),m($,{key:0,"lines-matching":i.lines,searcher:p(e).searcher},null,8,["lines-matching","searcher"])):D("",!0)]),_:2},1024))),128))],64))}});export{le as _};
